// This data was received from Telegram Desktop (Telegram/Resources/numbers.txt)
const DATA = `AFğŸ‡¦ğŸ‡«93Afghanistan333
AOğŸ‡¦ğŸ‡´244Angola333
ALğŸ‡¦ğŸ‡±355Albania234
ADğŸ‡¦ğŸ‡©376Andorra222
AEğŸ‡¦ğŸ‡ª971United Arab Emirates234
AIğŸ‡¦ğŸ‡®1264Anguilla34
ARğŸ‡¦ğŸ‡·54Argentina
AMğŸ‡¦ğŸ‡²374Armenia233
AGğŸ‡¦ğŸ‡¬1268Antigua and Barbuda34
AUğŸ‡¦ğŸ‡º61Australia333
ASğŸ‡¦ğŸ‡¸1684American Samoa34
ATğŸ‡¦ğŸ‡¹43Austria
AWğŸ‡¦ğŸ‡¼297Aruba34
AZğŸ‡¦ğŸ‡¿994Azerbaijan2322
BIğŸ‡§ğŸ‡®257Burundi224
BEğŸ‡§ğŸ‡ª32Belgium3222
BJğŸ‡§ğŸ‡¯229Benin233
BFğŸ‡§ğŸ‡«226Burkina Faso2222
BDğŸ‡§ğŸ‡©880Bangladesh
BGğŸ‡§ğŸ‡¬359Bulgaria
BHğŸ‡§ğŸ‡­973Bahrain44
BSğŸ‡§ğŸ‡¸1242Bahamas34
BAğŸ‡§ğŸ‡¦387Bosnia and Herzegovina
BYğŸ‡§ğŸ‡¾375Belarus2322
BZğŸ‡§ğŸ‡¿501Belize
BOğŸ‡§ğŸ‡´591Bolivia134
BRğŸ‡§ğŸ‡·55Brazil254
BBğŸ‡§ğŸ‡§1246Barbados34
BMğŸ‡§ğŸ‡²1441Bermuda34
BNğŸ‡§ğŸ‡³673Brunei34
BQğŸ‡§ğŸ‡¶599Bonaire, Sint Eustatius and Saba
BTğŸ‡§ğŸ‡¹975Bhutan
BWğŸ‡§ğŸ‡¼267Botswana233
CFğŸ‡¨ğŸ‡«236Central African Republic2222
CAğŸ‡¨ğŸ‡¦1Canada334
CHğŸ‡¨ğŸ‡­41Switzerland234
CKğŸ‡¨ğŸ‡°682Cook Islands
CLğŸ‡¨ğŸ‡±56Chile144
CNğŸ‡¨ğŸ‡³86China344
CIğŸ‡¨ğŸ‡®225CÃ´te d\`Ivoire233
CMğŸ‡¨ğŸ‡²237Cameroon44
CDğŸ‡¨ğŸ‡©243DR Congo234
CGğŸ‡¨ğŸ‡¬242Republic of the Congo234
COğŸ‡¨ğŸ‡´57Colombia334
KMğŸ‡°ğŸ‡²269Comoros34
CVğŸ‡¨ğŸ‡»238Cape Verde34
CRğŸ‡¨ğŸ‡·506Costa Rica
CUğŸ‡¨ğŸ‡º53Cuba44
CYğŸ‡¨ğŸ‡¾357Cyprus44
CWğŸ‡¨ğŸ‡¼599CuraÃ§ao
CZğŸ‡¨ğŸ‡¿420Czech Republic
DEğŸ‡©ğŸ‡ª49Germany38
DJğŸ‡©ğŸ‡¯253Djibouti2222
DMğŸ‡©ğŸ‡²1767Dominica34
DKğŸ‡©ğŸ‡°45Denmark44
DOğŸ‡©ğŸ‡´1Dominican Republic334
DZğŸ‡©ğŸ‡¿213Algeria3222
ECğŸ‡ªğŸ‡¨593Ecuador
EGğŸ‡ªğŸ‡¬20Egypt234
ERğŸ‡ªğŸ‡·291Eritrea133
ESğŸ‡ªğŸ‡¸34Spain333
EEğŸ‡ªğŸ‡ª372Estonia
ETğŸ‡ªğŸ‡¹251Ethiopia234
FIğŸ‡«ğŸ‡®358Finland
FJğŸ‡«ğŸ‡¯679Fiji
FKğŸ‡«ğŸ‡°500Falkland Islands
FMğŸ‡«ğŸ‡²691Micronesia
FOğŸ‡«ğŸ‡´298Faroe Islands33
FRğŸ‡«ğŸ‡·33France12222
GAğŸ‡¬ğŸ‡¦241Gabon1222
GBğŸ‡¬ğŸ‡§44United Kingdom46
GEğŸ‡¬ğŸ‡ª995Georgia
GFğŸ‡¬ğŸ‡«594French Guiana
GHğŸ‡¬ğŸ‡­233Ghana
GIğŸ‡¬ğŸ‡®350Gibraltar44
GLğŸ‡¬ğŸ‡±299Greenland33
GNğŸ‡¬ğŸ‡³224Guinea333
GMğŸ‡¬ğŸ‡²220Gambia34
GPğŸ‡¬ğŸ‡µ590Guadeloupe
GUğŸ‡¬ğŸ‡º1671Guam34
GWğŸ‡¬ğŸ‡¼245Guinea-Bissau34
GQğŸ‡¬ğŸ‡¶240Equatorial Guinea333
GRğŸ‡¬ğŸ‡·30Greece244
GDğŸ‡¬ğŸ‡©1473Grenada34
GTğŸ‡¬ğŸ‡¹502Guatemala134
GYğŸ‡¬ğŸ‡¾592Guyana
HKğŸ‡­ğŸ‡°852Hong Kong
HNğŸ‡­ğŸ‡³504Honduras44
HRğŸ‡­ğŸ‡·385Croatia
HTğŸ‡­ğŸ‡¹509Haiti
HUğŸ‡­ğŸ‡º36Hungary234
IDğŸ‡®ğŸ‡©62Indonesia
INğŸ‡®ğŸ‡³91India55
IOğŸ‡©ğŸ‡¬246Diego Garcia34
IEğŸ‡®ğŸ‡ª353Ireland234
IRğŸ‡®ğŸ‡·98Iran334
IQğŸ‡®ğŸ‡¶964Iraq334
ISğŸ‡®ğŸ‡¸354Iceland34
ILğŸ‡®ğŸ‡±972Israel234
ITğŸ‡®ğŸ‡¹39Italy334
JMğŸ‡¯ğŸ‡²1876Jamaica34
JOğŸ‡¯ğŸ‡´962Jordan144
JPğŸ‡¯ğŸ‡µ81Japan244
KZğŸ‡°ğŸ‡¿7Kazakhstan3322
KEğŸ‡°ğŸ‡ª254Kenya333
KGğŸ‡°ğŸ‡¬996Kyrgyzstan
KHğŸ‡°ğŸ‡­855Cambodia
KIğŸ‡°ğŸ‡®686Kiribati
KNğŸ‡°ğŸ‡³1869Saint Kitts and Nevis34
KRğŸ‡°ğŸ‡·82South Korea
KWğŸ‡°ğŸ‡¼965Kuwait44
KYğŸ‡°ğŸ‡¾1345Cayman Islands34
LAğŸ‡±ğŸ‡¦856Laos
LBğŸ‡±ğŸ‡§961Lebanon
LRğŸ‡±ğŸ‡·231Liberia
LYğŸ‡±ğŸ‡¾218Libya234
LCğŸ‡±ğŸ‡¨1758Saint Lucia34
LIğŸ‡±ğŸ‡®423Liechtenstein
LKğŸ‡±ğŸ‡°94Sri Lanka234
LSğŸ‡±ğŸ‡¸266Lesotho233
LTğŸ‡±ğŸ‡¹370Lithuania35
LUğŸ‡±ğŸ‡º352Luxembourg
LVğŸ‡±ğŸ‡»371Latvia35
MAğŸ‡²ğŸ‡¦212Morocco234
MCğŸ‡²ğŸ‡¨377Monaco44
MDğŸ‡²ğŸ‡©373Moldova233
MGğŸ‡²ğŸ‡¬261Madagascar2232
MPğŸ‡²ğŸ‡µ1670Northern Mariana Islands34
MOğŸ‡²ğŸ‡´853Macau
MSğŸ‡²ğŸ‡¸1664Montserrat34
MVğŸ‡²ğŸ‡»960Maldives
MXğŸ‡²ğŸ‡½52Mexico
MHğŸ‡²ğŸ‡­692Marshall Islands
MKğŸ‡²ğŸ‡°389Macedonia
MLğŸ‡²ğŸ‡±223Mali44
MTğŸ‡²ğŸ‡¹356Malta2222
MMğŸ‡²ğŸ‡²95Myanmar
MEğŸ‡²ğŸ‡ª382Montenegro
MNğŸ‡²ğŸ‡³976Mongolia
MZğŸ‡²ğŸ‡¿258Mozambique234
MQğŸ‡²ğŸ‡¶596Martinique
MRğŸ‡²ğŸ‡·222Mauritania44
MUğŸ‡²ğŸ‡º230Mauritius
MWğŸ‡²ğŸ‡¼265Malawi
MYğŸ‡²ğŸ‡¾60Malaysia
NAğŸ‡³ğŸ‡¦264Namibia234
NCğŸ‡³ğŸ‡¨687New Caledonia
NEğŸ‡³ğŸ‡ª227Niger2222
NFğŸ‡³ğŸ‡«672Norfolk Island
NGğŸ‡³ğŸ‡¬234Nigeria
NIğŸ‡³ğŸ‡®505Nicaragua44
NLğŸ‡³ğŸ‡±31Netherlands12222
NOğŸ‡³ğŸ‡´47Norway44
NPğŸ‡³ğŸ‡µ977Nepal
NUğŸ‡³ğŸ‡º683Niue
NRğŸ‡³ğŸ‡·674Nauru
NZğŸ‡³ğŸ‡¿64New Zealand
OMğŸ‡´ğŸ‡²968Oman44
PKğŸ‡µğŸ‡°92Pakistan334
PAğŸ‡µğŸ‡¦507Panama44
PEğŸ‡µğŸ‡ª51Peru333
PFğŸ‡µğŸ‡«689French Polynesia
PHğŸ‡µğŸ‡­63Philippines334
PMğŸ‡µğŸ‡²508Saint Pierre and Miquelon
PRğŸ‡µğŸ‡·1Puerto Rico334
PSğŸ‡µğŸ‡¸970Palestine324
PWğŸ‡µğŸ‡¼680Palau
PGğŸ‡µğŸ‡¬675Papua New Guinea
PLğŸ‡µğŸ‡±48Poland333
KPğŸ‡°ğŸ‡µ850North Korea
PTğŸ‡µğŸ‡¹351Portugal144
PYğŸ‡µğŸ‡¾595Paraguay333
QAğŸ‡¶ğŸ‡¦974Qatar
REğŸ‡·ğŸ‡ª262RÃ©union333
ROğŸ‡·ğŸ‡´40Romania333
RUğŸ‡·ğŸ‡º7Russia3322
RWğŸ‡·ğŸ‡¼250Rwanda333
SAğŸ‡¸ğŸ‡¦966Saudi Arabia
SDğŸ‡¸ğŸ‡©249Sudan234
SNğŸ‡¸ğŸ‡³221Senegal234
SGğŸ‡¸ğŸ‡¬65Singapore44
SHğŸ‡¸ğŸ‡­290Saint Helena23
SHğŸ‡¸ğŸ‡­247Saint Helena4
SBğŸ‡¸ğŸ‡§677Solomon Islands
SLğŸ‡¸ğŸ‡±232Sierra Leone233
SVğŸ‡¸ğŸ‡»503El Salvador44
SMğŸ‡¸ğŸ‡²378San Marino334
SOğŸ‡¸ğŸ‡´252Somalia233
RSğŸ‡·ğŸ‡¸381Serbia234
SSğŸ‡¸ğŸ‡¸211South Sudan234
STğŸ‡¸ğŸ‡¹239SÃ£o TomÃ© and PrÃ­ncipe25
SRğŸ‡¸ğŸ‡·597Suriname34
SKğŸ‡¸ğŸ‡°421Slovakia
SIğŸ‡¸ğŸ‡®386Slovenia
SEğŸ‡¸ğŸ‡ª46Sweden234
SZğŸ‡¸ğŸ‡¿268Swaziland44
SCğŸ‡¸ğŸ‡¨248Seychelles1222
SXğŸ‡¸ğŸ‡½1721Sint Maarten34
SYğŸ‡¸ğŸ‡¾963Syria
TCğŸ‡¹ğŸ‡¨1649Turks and Caicos Islands34
TDğŸ‡¹ğŸ‡©235Chad2222
TGğŸ‡¹ğŸ‡¬228Togo233
THğŸ‡¹ğŸ‡­66Thailand144
TJğŸ‡¹ğŸ‡¯992Tajikistan
TKğŸ‡¹ğŸ‡°690Tokelau
TMğŸ‡¹ğŸ‡²993Turkmenistan26
TLğŸ‡¹ğŸ‡±670Timor-Leste
TOğŸ‡¹ğŸ‡´676Tonga
TTğŸ‡¹ğŸ‡¹1868Trinidad and Tobago34
TNğŸ‡¹ğŸ‡³216Tunisia233
TRğŸ‡¹ğŸ‡·90Turkey334
TVğŸ‡¹ğŸ‡»688Tuvalu
TWğŸ‡¹ğŸ‡¼886Taiwan
TZğŸ‡¹ğŸ‡¿255Tanzania234
UGğŸ‡ºğŸ‡¬256Uganda234
UAğŸ‡ºğŸ‡¦380Ukraine2322
UYğŸ‡ºğŸ‡¾598Uruguay44
USğŸ‡ºğŸ‡¸1United States334
UZğŸ‡ºğŸ‡¿998Uzbekistan27
VAğŸ‡»ğŸ‡¦3Vatican City
VCğŸ‡»ğŸ‡¨1784Saint Vincent and the Grenadines34
VEğŸ‡»ğŸ‡ª58Venezuela334
VGğŸ‡»ğŸ‡¬1284British Virgin Islands34
VIğŸ‡»ğŸ‡®1340US Virgin Islands34
VNğŸ‡»ğŸ‡³84Vietnam
VUğŸ‡»ğŸ‡º678Vanuatu
WFğŸ‡¼ğŸ‡«681Wallis and Futuna
WSğŸ‡¼ğŸ‡¸685Samoa
XKğŸ‡½ğŸ‡°383Kosovo44
YEğŸ‡¾ğŸ‡ª967Yemen333
ZAğŸ‡¿ğŸ‡¦27South Africa234
ZMğŸ‡¿ğŸ‡²260Zambia234
ZWğŸ‡¿ğŸ‡¼263Zimbabwe234`;

const formatsCache: Record<string, RegExp> = {};
export const defaultPhoneNumberFormat = /(\d{1,3})(\d{1,3})?(\d{1,3})?(\d{1,3})?(\d{1,3})?/;

const parsed = DATA
  .split('\n')
  .map((str) => {
    const id = str.substr(0, 2);
    const flag = str.substr(2, 4);
    const code = `+${str.match(/\d+/)![0]}`;
    const name = str.split(/\d+/)[1];
    const format = str.match(/\d+$/);
    const phoneFormat = getPhoneNumberFormat(format);

    return {
      id, flag, code, name, phoneFormat,
    };
  });

function getPhoneNumberFormat(format: RegExpMatchArray | null) {
  if (!format) {
    return defaultPhoneNumberFormat;
  }

  const formatValue = format[0] as string;
  let phoneNumberFormat;

  if (!formatsCache[formatValue]) {
    const phoneNumberGroups = formatValue.split('').map(Number);
    phoneNumberFormat = phoneNumberGroups.reduce((result, count, i) => {
      return `${result}(\\d{1,${count}})${i > 0 ? '?' : ''}`;
    }, '');
    formatsCache[formatValue] = new RegExp(`${phoneNumberFormat}${'()?'.repeat(5 - phoneNumberGroups.length)}`);
  }

  return formatsCache[formatValue];
}

export default parsed;
