"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[1006],{4523:(e,t,i)=>{i.d(t,{A:()=>Ye});var n=i(84051),o=i(13439),r=i(23174),s=i(89925),a=i(31481),c=i(90709),l=i(26129),d=i(29807),u=i(96454),h=i(87357),m=i(60343),f=i(41512),g=i(54464),p=i(43874),A=i(10722),v=i(49746),I=i(37661),C=i(5912),b=i(17712),F=i(14622),y=i(21511),N=i(48196),Y=i(79519),k=i(96773),P=i(76023),S=i(21849),G=i(50805),T=i(20021);const x=15*P.$,w=(0,n.ph)((({action:e,onClick:t,observeIntersection:i})=>(0,T.Y)(S.A,{className:G.A.channelPhoto,photo:e.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:i,onClick:t,size:x})));var U=i(18501),B=i(39351),D=i(85118),M=i(82855);const R=(0,n.ph)((0,o.EK)(((e,{action:t})=>({sticker:"giftPremium"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e)})))((({action:e,sticker:t,canPlayAnimatedEmojis:i,onClick:o,observeIntersectionForLoading:r,observeIntersectionForPlaying:s})=>{const a=(0,n.li)(),c=(0,B.A)(),l="giftPremium"===e.type?e.message:void 0;return(0,T.FD)("div",{className:G.A.contentBox,tabIndex:0,role:"button",onClick:o,children:[(0,T.Y)("div",{ref:a,className:G.A.stickerWrapper,style:"width: 150px; height: 150px",children:t&&(0,T.Y)(M.A,{containerRef:a,sticker:t,size:150,observeIntersectionForLoading:r,observeIntersectionForPlaying:s,noLoad:!i})}),(0,T.FD)("div",{className:G.A.info,children:[(0,T.Y)("h3",{className:G.A.title,children:"giftPremium"===e.type?c("ActionGiftPremiumTitle",{months:e.months},{pluralValue:e.months}):c("ActionGiftStarsTitle",{amount:e.stars},{pluralValue:e.stars})}),(0,T.FD)("div",{children:[l&&(0,U.fd)(l),!l&&c("giftPremium"===e.type?"ActionGiftPremiumText":"ActionGiftStarsText")]})]}),(0,T.FD)("div",{className:G.A.actionButton,children:[(0,T.Y)(D.A,{preset:"button"}),c("ActionViewButton")]})]})})));var V=i(70636),L=i(4262);const E=(0,n.ph)((0,o.EK)(((e,{action:t})=>({currentUserId:e.currentUserId,sticker:"giftCode"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e),channel:t.boostPeerId?(0,d.hds)(e,t.boostPeerId):void 0})))((({currentUserId:e,action:t,sender:i,sticker:o,canPlayAnimatedEmojis:r,channel:s,onClick:a,observeIntersectionForLoading:c,observeIntersectionForPlaying:l})=>{const d=(0,n.li)(),u=(0,B.A)(),h=(0,n.Kr)((()=>{const e=s&&(0,V.F9)(u,s),t=u("ActionFallbackChannel");return(0,L.Nm)(s?.id,e||t)}),[s,u]),m=(0,n.Kr)((()=>{const e=s||i,t=e&&(0,V.F9)(u,e),n=u("ActionFallbackChat");return(0,L.Nm)(e?.id,t||n)}),[s,i,u]);return(0,T.FD)("div",{className:G.A.contentBox,tabIndex:0,role:"button",onClick:a,children:[(0,T.Y)("div",{ref:d,className:G.A.stickerWrapper,style:"width: 150px; height: 150px",children:o&&(0,T.Y)(M.A,{containerRef:d,sticker:o,size:150,observeIntersectionForLoading:c,observeIntersectionForPlaying:l,noLoad:!r})}),(0,T.FD)("div",{children:[(0,T.Y)("h3",{className:G.A.title,children:u("giftCode"!==t.type||t.isViaGiveaway?"ActionGiveawayResultTitle":"GiftInfoTitle")}),(0,T.FD)("div",{children:["giftCode"===t.type&&(t.isViaGiveaway?u("ActionGiveawayResultPremiumText",{channel:h,months:t.months},{withNodes:!0,withMarkdown:!0,pluralValue:t.months,renderTextFilters:["br"]}):(0,L.AD)(u,"ActionGiftCodeSubscriptionText",i?.id===e,{peer:m,months:t.months},{pluralValue:t.months,renderTextFilters:["br"]})),"prizeStars"===t.type&&u("ActionGiveawayResultStarsText",{amount:t.stars,channel:h},{withNodes:!0,withMarkdown:!0,pluralValue:t.stars,renderTextFilters:["br"]})]})]}),(0,T.FD)("div",{className:G.A.actionButton,children:[(0,T.Y)(D.A,{preset:"button"}),u("giftCode"===t.type?"ActionOpenGiftButton":"ActionViewButton")]})]})})));var K=i(48775),z=i(80140),J=i(14242),j=i(66833),O=i(87094),q=i(87049);const W=(0,n.ph)((0,o.EK)(((e,{message:t,action:i})=>{const n=(0,d.mBe)(e,e.currentUserId),o=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),s=i.fromId?(0,d.PVB)(e,i.fromId):void 0,a=t.isOutgoing?(0,d.PVB)(e,t.chatId):n;return{canPlayAnimatedEmojis:o,sender:s||r,recipient:(i.peerId?(0,d.PVB)(e,i.peerId):void 0)||a,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod}}))((({action:e,message:t,canPlayAnimatedEmojis:i,sender:o,recipient:r,starGiftMaxConvertPeriod:s,onClick:a,observeIntersectionForLoading:l,observeIntersectionForPlaying:d})=>{const u=(0,n.li)(),m=(0,n.li)(),f=(0,B.A)(),{isOutgoing:g}=t,p=(0,j.yQ)(e.gift),A=g?r:o,v=A&&(0,V.vj)(A)&&(0,c.WX)(A),I=(0,O.A)(u,"background-color",!e.gift.availabilityTotal),C=f("ActionFallbackSomeone"),b=A&&(0,V.F9)(f,A),F=o?.id===r?.id,y=(0,n.Kr)((()=>{const i=(0,L.Nm)(A?.id,b||C),n=void 0!==e.starsToConvert?(0,K.K)(f,e.starsToConvert):void 0;return e.isUpgraded?f("ActionStarGiftUpgraded"):e.alreadyPaidUpgradeStars?(0,L.AD)(f,"ActionStarGiftUpgradeText",!g||F,{peer:i}):e.isConverted?(0,L.AD)(f,"ActionStarGiftConvertedText",!g||F,{peer:i,amount:n}):s&&(0,z.Fm)()<t.date+s?(0,L.AD)(f,"ActionStarGiftConvertText",!g||F,{peer:i,amount:n}):v?f("ActionStarGiftChannelText",{amount:n},{withNodes:!0}):(0,L.AD)(f,"ActionStarGiftNoConvertText",!g||F,{peer:i})}),[e,C,v,g,f,t.date,A?.id,b,s,F]);return(0,T.FD)("div",{ref:u,className:(0,h.A)(G.A.contentBox,G.A.starGift),tabIndex:0,role:"button",onClick:a,children:[(0,T.Y)("div",{ref:m,className:G.A.stickerWrapper,style:"width: 120px; height: 120px",children:p&&(0,T.Y)(M.A,{containerRef:m,sticker:p,size:120,observeIntersectionForLoading:l,observeIntersectionForPlaying:d,noLoad:!i})}),Boolean(e.gift.availabilityTotal)&&(0,T.Y)(q.A,{color:I||"blue",text:f("ActionStarGiftLimitedRibbon",{total:(0,J.Vw)(f,e.gift.availabilityTotal)})}),(0,T.FD)("div",{className:G.A.info,children:[(0,T.Y)("h3",{className:G.A.title,children:F?f("ActionStarGiftSelf"):f(g?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,L.Nm)(A?.id,b||C)},{withNodes:!0})}),(0,T.FD)("div",{className:G.A.subtitle,children:[e.message&&(0,U.fd)(e.message),!e.message&&y]})]}),(0,T.FD)("div",{className:G.A.actionButton,children:[(0,T.Y)(D.A,{preset:"button"}),!e.alreadyPaidUpgradeStars||e.isUpgraded||g?f("ActionViewButton"):f("ActionStarGiftUnpack")]})]})})));var H=i(95807),$=i(92108),Q=i(40558);const X=(0,n.ph)((0,o.EK)(((e,{message:t,action:i})=>{const n=(0,d.mBe)(e,e.currentUserId),o=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),s=i.fromId?(0,d.PVB)(e,i.fromId):void 0,a=t.isOutgoing?(0,d.PVB)(e,t.chatId):n;return{canPlayAnimatedEmojis:o,sender:s||r,recipient:(i.peerId?(0,d.PVB)(e,i.peerId):void 0)||a}}))((({action:e,message:t,canPlayAnimatedEmojis:i,sender:o,recipient:r,onClick:s,observeIntersectionForLoading:a,observeIntersectionForPlaying:c})=>{const l=(0,n.li)(),d=(0,B.A)(),{isOutgoing:u}=t,m=(0,j.yQ)(e.gift),f=(0,j.uc)(e.gift),g=f.model,p=f.pattern,A=f.backdrop,v=[A.centerColor,A.edgeColor],I=`${A.patternColor.slice(0,7)}55`,C=(0,n.Kr)((()=>[[d("ActionStarGiftUniqueModel"),g.name],[d("ActionStarGiftUniqueBackdrop"),A.name],[d("ActionStarGiftUniqueSymbol"),p.name]]),[d,g,p,A]),b=!u||e.isUpgrade,F=b&&!e.isUpgrade?o:r,y=d("ActionFallbackSomeone"),N=F&&(0,V.F9)(d,F),Y=o?.id===r?.id;return(0,T.FD)("div",{className:(0,h.A)(G.A.contentBox,G.A.starGift,G.A.uniqueGift),tabIndex:0,role:"button",onClick:s,children:[(0,T.Y)("div",{className:G.A.uniqueBackgroundWrapper,children:(0,T.Y)(Q.A,{className:G.A.uniqueBackground,backgroundColors:v,patternColor:A.patternColor,patternIcon:p.sticker,clearBottomSector:!0})}),(0,T.Y)("div",{ref:l,className:G.A.stickerWrapper,style:"width: 120px; height: 120px",children:m&&(0,T.Y)(M.A,{containerRef:l,sticker:m,size:120,observeIntersectionForLoading:a,observeIntersectionForPlaying:c,noLoad:!i})}),(0,T.Y)(q.A,{color:I,text:d("ActionStarGiftUniqueRibbon")}),(0,T.FD)("div",{className:G.A.info,children:[(0,T.Y)("h3",{className:G.A.title,children:Y?d("ActionStarGiftSelf"):d(b?"ActionStarGiftFrom":"ActionStarGiftTo",{peer:(0,L.Nm)(F?.id,N||y)},{withNodes:!0})}),(0,T.Y)("div",{className:G.A.subtitle,style:`color: ${A.textColor}`,children:d("GiftUnique",{title:e.gift.title,number:e.gift.number})}),(0,T.Y)($.A,{data:C,style:`color: ${A.textColor}`,valueClassName:G.A.uniqueValue})]}),(0,T.FD)("div",{className:G.A.actionButton,style:(0,H.A)(I&&`background-color: ${I}`),children:[(0,T.Y)(D.A,{preset:"button"}),d("ActionViewButton")]})]})})));var Z=i(87679),_=i(62587),ee=i(94189),te=i(90751);const ie=(0,n.ph)((0,o.EK)(((e,{message:t})=>({peer:(0,d.PVB)(e,t.chatId)})))((({message:e,action:t,peer:i,observeIntersection:a})=>{const{openMediaViewer:l,uploadProfilePhoto:d,showNotification:u}=(0,o.ko)(),{isOutgoing:h}=e,m=t.photo,f=(0,B.A)(),[g,p]=(0,n.J0)(),[A,v,C]=(0,I.A)(!1),F=(0,_.A)((0,c.rI)(m,"full")),y=(0,_.A)((0,c.Pg)(m)),N=m.isVideo,Y=(0,n.Kr)((()=>{const e=i&&(0,V.F9)(f,i)||f("ActionFallbackUser"),t=(0,L.Nm)(i?.id,e);return f(h?"ActionSuggestedPhotoYou":"ActionSuggestedPhoto",{user:t},{withNodes:!0})}),[f,h,i]),k=(0,b.A)((()=>{u({title:f("ActionSuggestedPhotoUpdatedTitle"),message:f("ActionSuggestedPhotoUpdatedDescription"),action:{action:"openSettingsScreen",payload:{screen:s.VS.Main}},actionText:f("Open")})})),P=(0,b.A)((e=>{p(void 0),d({file:e}),k()})),x=(0,b.A)((()=>{p(void 0)})),w=(0,b.A)((async()=>{if(!y)return;C(),k();const e=await(0,Z.sZ)(y);d({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:m.videoSizes?.find((e=>void 0!==e.videoStartTs))?.videoStartTs})}));return(0,T.FD)("div",{className:G.A.contentBox,tabIndex:0,role:"button",onClick:async()=>{!h&&F?N?v():p(await(0,Z.sZ)(F)):l({chatId:e.chatId,messageId:e.id,threadId:r.l3,origin:s.TQ.SuggestedAvatar})},children:[(0,T.Y)(S.A,{className:G.A.suggestedAvatar,photo:t.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:a,size:"jumbo"}),(0,T.Y)("div",{className:G.A.suggestedText,children:Y}),(0,T.Y)("div",{className:G.A.actionButton,children:f("ActionSuggestedPhotoButton")}),(0,T.Y)(te.A,{file:g,onClose:x,onChange:P}),(0,T.Y)(ee.A,{isOpen:A,title:f("ActionSuggestedVideoTitle"),confirmHandler:w,onClose:C,text:f("ActionSuggestedVideoText")})]})})));var ne=i(99515),oe=i(43581),re=i(14737),se=i(48894);var ae=i(36838),ce=i(59030),le=i(18276),de=i(64493),ue=i(55158);const he="d8axZxyN",me="glDpC2av",fe="gqCs9fSo",ge="gnYhwnvf",pe="HWgwnKui",Ae="BTNQ4KBH",ve="Xl9MVMTn",Ie="Qizai7yv";function Ce({channel:e}){const{openChat:t}=(0,o.ko)(),i=function(e,t="#00000000"){const[i,o]=(0,n.J0)(t),s=(0,_.A)((0,c.cP)(e),!1,r.qZ.BlobUrl);return(0,n.vJ)((()=>{(async()=>{if(!s)return;const e=await(0,se.rX)(s);o(`#${(0,se.v2)(e)}`)})()}),[s]),i}(e,"#3C3C4399"),s=(0,B.A)();return(0,T.FD)("div",{className:me,onClick:()=>t({id:e.id}),children:[(0,T.Y)(S.A,{className:fe,size:"large",peer:e},e.id),(0,T.FD)("div",{style:`background: ${i}`,className:ge,children:[(0,T.Y)(le.A,{name:"user-filled",className:he}),(0,T.Y)("span",{className:pe,children:(0,J.Vw)(s,e?.membersCount||0)})]}),(0,T.Y)("span",{className:Ae,children:e.title})]})}function be({channel:e,chatId:t,channelsCount:i,isCurrentUserPremium:n}){const{openPremiumModal:r,openChatWithInfo:s}=(0,o.ko)(),a=(0,ce.A)();return(0,T.FD)("div",{className:(0,h.A)(me,"MBChXyXk"),onClick:()=>{n?s({id:t,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):r()},children:[(0,T.Y)(S.A,{className:fe,size:"large",peer:e},e.id),(0,T.Y)("div",{className:ve,children:(0,T.Y)("div",{className:Ie})}),(0,T.Y)("div",{className:(0,h.A)(ve,"JxSmtOFi"),children:(0,T.Y)("div",{className:Ie})}),(0,T.FD)("div",{className:ge,children:[(0,T.Y)("span",{className:pe,children:`+${i}`}),!n&&(0,T.Y)(le.A,{name:"lock-badge",className:he})]}),(0,T.Y)("span",{className:Ae,children:a("MoreSimilar")})]})}const Fe=(0,n.ph)((0,o.EK)(((e,{chatId:t})=>{const{similarChannelIds:i,isExpanded:n,count:o}=(0,d.dg4)(e,t)||{},r=(0,d.g29)(e),s=(0,d.AWZ)(e,t);return{similarChannelIds:i,isExpanded:n,count:o,isCurrentUserPremium:r,channelJoinInfo:s?.joinInfo}}))((({chatId:e,similarChannelIds:t,isExpanded:i,count:r,isCurrentUserPremium:s,channelJoinInfo:a})=>{const{toggleChannelRecommendations:c,loadChannelRecommendations:l}=(0,o.ko)(),u=(0,ce.A)(),[m,f,g]=(0,I.A)(!1),[p,A,v]=(0,I.A)(!1),C=(0,n.li)(),F=(0,n.li)(!1),y=(0,n.Kr)((()=>{if(!t)return;const e=(0,o.mS)();return t.map((t=>(0,d.hds)(e,t))).filter(Boolean)}),[t]),[N,Y]=(0,n.J0)(!1),k=(0,n.Kr)((()=>y?.slice(0,10)),[y]),P=Boolean(k?.length),S=Boolean(!N&&(i||p||m)&&P);(0,ae.A)(C,!S,!0),(0,n.vJ)((()=>{t||l({chatId:e})}),[e,t]),(0,re.A)((()=>Y(!1)),2e3),(0,n.vJ)((()=>{if(N&&y&&i){const e=setTimeout((()=>{Y(!1)}),300);return()=>clearTimeout(e)}}),[y,i,N]),(0,n.vJ)((()=>{i?(f(),v(),Y(!t),F.current||setTimeout((()=>{C.current?.scrollIntoView({behavior:"smooth"})}),150)):(g(),A())}),[i,t]);const G=(0,b.A)((()=>{c({chatId:e})}));if((0,n.vJ)((()=>{a?.joinedDate&&!i&&(0,z.Fm)()-a.joinedDate<=10&&(G(),F.current=!0)}),[a,i]),S||N)return(0,T.FD)("div",{className:(0,h.A)("V3RHiOJR"),children:[N&&(0,T.Y)(ue.A,{className:"xKVZv7KE"}),S&&(0,T.FD)("div",{className:(0,h.A)(m&&"eb8rX09E",p&&"XR6_qLCc"),children:[(0,T.Y)("div",{className:"tfG_BSDt",children:(0,T.Y)("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,T.Y)("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"})})}),(0,T.FD)("div",{className:"njAC8dR9",children:[(0,T.FD)("div",{className:"s7QOi22Q",children:[(0,T.Y)("span",{className:"JstcOhAN",children:u("SimilarChannels")}),(0,T.Y)(de.A,{className:"meewH7t_",color:"translucent",onClick:G,children:(0,T.Y)(le.A,{name:"close"})})]}),(0,T.Y)("div",{ref:C,className:(0,h.A)("h4gWlNen","no-scrollbar"),children:k?.map(((t,i)=>9===i?(0,T.Y)(be,{channel:t,chatId:e,channelsCount:r-10+1,isCurrentUserPremium:s}):(0,T.Y)(Ce,{channel:t})))})]})]})]})}))),ye=new Set(["pinMessage","chatEditPhoto","chatDeletePhoto","unsupported"]),Ne=new Set(["giftCode","prizeStars","suggestProfilePhoto"]),Ye=(0,n.ph)((0,o.EK)(((e,{message:t,threadId:i})=>{const n=(0,d.nTw)(e),{themes:o}=e.settings,s=(0,d.hds)(e,t.chatId),a=(0,d.Y7C)(e,t),c=s?.isForum&&i!==r.l3,{replyToMsgId:u,replyToPeerId:h}=(0,l.Q)(t)||{},m=u?(0,d.O5q)(e,h||t.chatId,u):void 0,f=!!i&&(0,d.nJv)(e,t,i),{direction:g,noHighlight:p,isResizingContainer:A,scrollTargetPosition:v}=f&&n.focusedMessage||{},I=(0,d.g29)(e),C=s?.unreadReactions?.includes(t.id),b=(0,d.trm)(e);return{sender:a,currentUserId:e.currentUserId,isCurrentUserPremium:I,isFocused:f,focusDirection:g,noFocusHighlight:p,isInsideTopic:c,replyMessage:m,isInSelectMode:(0,d.rTV)(e),patternColor:o[(0,d.SJA)(e)]?.patternColor,hasUnreadReaction:C,isResizingContainer:A,scrollTargetPosition:v,isAccountFrozen:b}}))((({message:e,threadId:t,sender:i,currentUserId:r,appearanceOrder:d,isJustAdded:P,isLastInList:S,memoFirstUnreadIdRef:x,getIsMessageListReady:U,isInsideTopic:B,isFocused:D,focusDirection:M,noFocusHighlight:V,replyMessage:L,patternColor:K,isCurrentUserPremium:z,isInSelectMode:J,hasUnreadReaction:j,isResizingContainer:O,scrollTargetPosition:q,onIntersectPinnedMessage:H,observeIntersectionForBottom:$,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,isAccountFrozen:_})=>{const{requestConfetti:ee,openMediaViewer:te,getReceipt:re,checkGiftCode:se,openPrizeStarsTransactionFromGiveaway:ae,openPremiumModal:ce,openStarsTransactionFromGift:le,openGiftInfoModalFromMessage:de,toggleChannelRecommendations:ue,animateUnreadReaction:he,markMentionsRead:me}=(0,o.ko)(),fe=(0,n.li)(),{id:ge,chatId:pe}=e,Ae=e.content.action,ve=(0,m.iL)(ge),Ie=Ne.has(Ae.type),Ce=ye.has(Ae.type),be=u.uH&&!Ce,Ye=(0,l.Q)(e),{replyToMsgId:ke,replyToPeerId:Pe}=Ye||{},Se=Boolean(e.areReactionsPossible&&e?.reactions?.results?.length),Ge=B&&"topicCreate"===Ae.type,{isTouchScreen:Te}=(0,p.Ay)();(0,C.mv)(fe,Ge?void 0:$),(0,F.A)(fe,!Ge&&S&&"channelJoined"!==Ae.type),(0,v.A)(Pe||pe,ke,L,ge),(0,Y.A)({elementRef:fe,chatId:pe,isFocused:D,focusDirection:M,noFocusHighlight:V,isResizingContainer:O,isJustAdded:P,scrollTargetPosition:q}),(0,n._W)((()=>{e.isPinned&&H?.({viewportPinnedIdsToRemove:[e.id]})}));const{isContextMenuOpen:xe,contextMenuAnchor:we,handleBeforeContextMenu:Ue,handleContextMenu:Be,handleContextMenuClose:De,handleContextMenuHide:Me}=(0,A.A)(fe,Te&&J||_,!u.cp,u.Ni,U),Re=void 0!==we,Ve=d<=0,[Le,Ee]=(0,I.A)(Ve);(0,n.vJ)((()=>{Ve||setTimeout(Ee,d*a.zq7)}),[d,Ee,Ve]);const{ref:Ke}=(0,y.A)({isOpen:Le,noOpenTransition:Ve,noCloseTransition:!0,className:!1,ref:fe});(0,n.vJ)((()=>{const t=fe.current;t&&(0,f.Y)(t)&&(j&&he({messageIds:[ge]}),e.hasUnreadMention&&me({chatId:pe,messageIds:[ge]}))}),[j,pe,ge,he,e.hasUnreadMention]),(0,n.vJ)((()=>{"giftPremium"===Ae.type&&(x?.current&&ge>=x.current||ve)&&ee({})}),[Ae.type,ge,ve,x]);const ze=(0,N.A)(be?K:void 0),Je=(0,b.A)((()=>{switch(Ae.type){case"paymentSent":case"paymentRefunded":re({chatId:e.chatId,messageId:e.id});break;case"chatEditPhoto":te({chatId:e.chatId,messageId:e.id,threadId:t,origin:s.TQ.ChannelAvatar});break;case"giftCode":se({slug:Ae.slug,message:{chatId:e.chatId,messageId:e.id}});break;case"prizeStars":ae({chatId:e.chatId,messageId:e.id});break;case"giftPremium":ce({isGift:!0,fromUserId:i?.id,toUserId:i&&i.id===r?pe:r,monthsAmount:Ae.months});break;case"giftStars":le({chatId:e.chatId,messageId:e.id});break;case"starGift":case"starGiftUnique":de({chatId:e.chatId,messageId:e.id});break;case"channelJoined":ue({chatId:pe})}})),je=(0,n.Kr)((()=>{switch(Ae.type){case"chatEditPhoto":if(!Ae.photo)return;return(0,T.Y)(w,{action:Ae,observeIntersection:Q,onClick:Je});case"suggestProfilePhoto":return(0,T.Y)(ie,{message:e,action:Ae,observeIntersection:Q});case"prizeStars":case"giftCode":return(0,T.Y)(E,{action:Ae,sender:i,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Je});case"giftPremium":case"giftStars":return(0,T.Y)(R,{action:Ae,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Je});case"starGift":return(0,T.Y)(W,{action:Ae,message:e,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Je});case"starGiftUnique":return(0,T.Y)(X,{action:Ae,message:e,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Je});case"channelJoined":return(0,T.Y)(Fe,{chatId:e.chatId});default:return}}),[Ae,e,Q,i,Z]);if(!(B&&"topicCreate"===Ae.type||"phoneCall"===Ae.type))return(0,T.FD)("div",{ref:Ke,id:(0,c.GZ)(ge),className:(0,h.A)("ActionMessage","message-list-item",G.A.root,Ce&&G.A.singleLine,be&&G.A.fluidMultiline,je&&G.A.hasFullContent,D&&!V&&"focused",Re&&"has-menu-open",S&&"last-in-list"),"data-message-id":e.id,"data-is-pinned":e.isPinned||void 0,"data-has-unread-mention":e.hasUnreadMention||void 0,"data-has-unread-reaction":j||void 0,onMouseDown:e=>{(0,g.l)(e),Ue(e)},onContextMenu:Be,children:[!Ie&&(0,T.FD)(T.FK,{children:[be&&(0,T.Y)("div",{className:G.A.inlineWrapper,children:(0,T.Y)("span",{className:G.A.fluidBackground,style:ze,children:(0,T.Y)(k.A,{message:e,isInsideTopic:B})})}),(0,T.Y)("div",{className:G.A.inlineWrapper,children:(0,T.Y)("span",{className:G.A.textContent,onClick:Je,children:(0,T.Y)(k.A,{message:e,isInsideTopic:B})})})]}),je,we&&(0,T.Y)(ne.A,{isOpen:xe,anchor:we,message:e,messageListType:"thread",className:G.A.contextContainer,onClose:De,onCloseAnimationEnd:Me}),Se&&(0,T.Y)(oe.A,{isOutside:!0,message:e,threadId:t,observeIntersection:Z,isCurrentUserPremium:z,isAccountFrozen:_})]})})))},25404:(e,t,i)=>{i.d(t,{A:()=>f});var n=i(84051),o=i(13439),r=i(31481),s=i(85982),a=i(17663),c=i(80140),l=i(39351),d=i(17712),u=i(59030),h=i(24433),m=i(20021);const f=(0,n.ph)((({peerId:e,canManage:t,gift:i,currentUserEmojiStatus:f,collectibleEmojiStatuses:g})=>{const{showNotification:p,openChatWithDraft:A,openGiftTransferModal:v,openGiftResalePriceComposerModal:I,openGiftStatusInfoModal:C,setEmojiStatus:b,toggleSavedGiftPinned:F,changeGiftVisibility:y,updateStarGiftPrice:N,closeGiftInfoModal:Y}=(0,o.ko)(),k=(0,l.A)(),P=(0,u.A)(),S=i&&"gift"in i,G=S?i:void 0,T=S?i.gift:i,x="starGiftUnique"===T?.type?T.slug:void 0,w=(0,n.Kr)((()=>{if(x)return`${r.jsp}nft/${x}`}),[x]),U=(0,n.Kr)((()=>{if(x)return g?.find((e=>"collectible"===e.type&&e.slug===x))}),[x,g]),B="collectible"===f?.type?f.slug:void 0,D=T&&"starGiftUnique"===T.type,M=D&&B===T.slug,R=U&&!M,V=D?T.resellPriceInStars:void 0,L=t&&G&&!G.isUnsaved&&D,E=(0,d.A)((()=>{const{inputGift:e,isUnsaved:t}=G;y({gift:e,shouldUnsave:!t})})),K=(0,d.A)((()=>{w&&((0,s.eM)(w),p({message:k("LinkCopied")}))})),z=(0,d.A)((()=>{w&&A({text:{text:w}})})),J=(0,d.A)((()=>{G&&"starGiftUnique"===G?.gift.type&&(G.canTransferAt&&G.canTransferAt>(0,c.Fm)()?p({message:{key:"NotificationGiftCanTransferAt",variables:{date:(0,a.U)(P,1e3*G.canTransferAt)}}}):v({gift:G}))})),j=(0,d.A)((()=>{G&&(G.canResellAt&&G.canResellAt>(0,c.Fm)()?p({message:{key:"NotificationGiftCanResellAt",variables:{date:(0,a.U)(P,1e3*G.canResellAt)}}}):I({peerId:e,gift:G}))})),O=(0,d.A)((()=>{G&&"starGiftUnique"===G.gift.type&&G.inputGift&&(Y(),N({gift:G.inputGift,price:0}),p({icon:"unlist-outline",message:{key:"NotificationGiftIsUnlist",variables:{gift:k("GiftUnique",{title:G.gift.title,number:G.gift.number})}}}))})),q=(0,d.A)((()=>{"starGiftUnique"===T?.type&&U&&C({emojiStatus:U})})),W=(0,d.A)((()=>{M&&b({emojiStatus:{type:"regular",documentId:r.zNY}})})),H=(0,d.A)((()=>{F({peerId:e,gift:G})}));return(0,m.FD)(m.FK,{children:[L&&(0,m.Y)(h.A,{icon:G.isPinned?"unpin":"pin",onClick:H,children:k(G.isPinned?"ChatListUnpinFromTop":"ChatListPinToTop")}),(0,m.Y)(h.A,{icon:"link-badge",onClick:K,children:k("CopyLink")}),(0,m.Y)(h.A,{icon:"forward",onClick:z,children:k("Share")}),t&&D&&(0,m.Y)(h.A,{icon:"diamond",onClick:J,children:k("GiftInfoTransfer")}),t&&D&&!V&&(0,m.Y)(h.A,{icon:"sell-outline",onClick:j,children:k("Sell")}),t&&D&&Boolean(V)&&(0,m.Y)(h.A,{icon:"unlist-outline",onClick:O,children:k("GiftInfoUnlist")}),t&&G&&(0,m.Y)(h.A,{icon:G.isUnsaved?"eye-outline":"eye-crossed-outline",onClick:E,children:k(G.isUnsaved?"GiftActionShow":"GiftActionHide")}),R&&(0,m.Y)(h.A,{icon:"crown-wear-outline",onClick:q,children:k("GiftInfoWear")}),M&&(0,m.Y)(h.A,{icon:"crown-take-off-outline",onClick:W,children:k("GiftInfoTakeOff")})]})}))},48196:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(84051),o=i(31481),r=i(28470),s=i(20021);const a=new Map;class c{referenceCount=0;constructor(e){this.color=e,this.filterId=`fluid-background-filter-${e.slice(1)}`,(0,r.z)((0,s.FD)("filter",{"color-interpolation-filters":"sRGB",xmlns:o.jNX,children:[(0,s.Y)("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),(0,s.Y)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15",result:"goo"}),(0,s.Y)("feComposite",{in:"SourceAlpha",in2:"goo",operator:"over",result:"outline"}),(0,s.Y)("feFlood",{"flood-color":e,result:"color"}),(0,s.Y)("feComposite",{in:"color",in2:"outline",operator:"in"})]}),this.filterId)}getFilterId(){return this.referenceCount+=1,this.filterId}removeReference(){this.referenceCount-=1,0===this.referenceCount&&(0,r.e)(this.filterId)}isUsed(){return this.referenceCount>0}}function l(e,t){if((0,n.vJ)((()=>{if(e)return()=>{const t=a.get(e);t&&(t.removeReference(),t.isUsed()||a.delete(t.color))}}),[e]),!e)return;if(a.has(e))return d(a.get(e).getFilterId(),t);const i=new c(e);return a.set(e,i),d(i.getFilterId(),t)}function d(e,t){return t?`url(#${e})`:`filter: url(#${e});`}},87049:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(84051),o=i(13439),r=i(29807),s=i(87357),a=i(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"};var l=i(20021);const d={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]],purple:[["#E367D7","#757BF6"],["#E367D7","#757BF6"]],green:[["#52D553","#4BB121"],["#52D553","#4BB121"]]},u=new Set(Object.keys(d)),h=(0,n.ph)((0,o.EK)((e=>({theme:(0,r.SJA)(e)})))((({text:e,color:t,className:i,theme:n})=>{const o=`svg-${(0,a.A)()}`,r=u.has(t)?t:void 0,h="dark"===n,m=Array.isArray(t)?t:r?d[r][h?1:0]:void 0,f=m?m[0]:t,g=m?m[1]:t;return(0,l.FD)("div",{className:(0,s.A)(c.root,i),children:[(0,l.FD)("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",children:[(0,l.Y)("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${o})`}),(0,l.Y)("defs",{children:(0,l.FD)("linearGradient",{id:o,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse",children:[(0,l.Y)("stop",{"stop-color":f}),(0,l.Y)("stop",{offset:"1","stop-color":g})]})})]}),(0,l.Y)("div",{className:c.text,children:e})]})})))},92108:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(84051),o=i(87357);var r=i(20021);const s=(0,n.ph)((({data:e,style:t,className:i,valueClassName:n,keyClassName:s})=>(0,r.Y)("div",{className:(0,o.A)("cKr8J5k_",i),style:t,children:e.map((([e,t])=>(0,r.FD)(r.FK,{children:[(0,r.Y)("div",{className:(0,o.A)("c9RLLvfs",s),children:e}),(0,r.Y)("div",{className:(0,o.A)("QEuGpzIc",n),children:t})]})))})))}}]);
//# sourceMappingURL=1006.b7e5db0ec8db87c04334.js.map