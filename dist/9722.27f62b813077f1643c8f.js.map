{"version":3,"file":"9722.27f62b813077f1643c8f.js","mappings":"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,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,EAAG,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAE5qCC,EAAY,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,G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","sources":["webpack://telegram-t/webpack/runtime/chunk loaded","webpack://telegram-t/webpack/runtime/startup chunk dependencies","webpack://telegram-t/./src/lib/rlottie/rlottie.worker.ts","webpack://telegram-t/./src/lib/video-preview/requestPart.ts","webpack://telegram-t/./src/lib/video-preview/MP4Demuxer.ts","webpack://telegram-t/./src/util/generateUniqueId.ts","webpack://telegram-t/./src/lib/video-preview/video-preview.worker.ts","webpack://telegram-t/./src/lib/fastBlur.js","webpack://telegram-t/./src/lib/offscreen-canvas/offscreen-canvas.worker.ts","webpack://telegram-t/./src/util/schedulers.ts","webpack://telegram-t/webpack/bootstrap","webpack://telegram-t/webpack/runtime/define property getters","webpack://telegram-t/webpack/runtime/ensure chunk","webpack://telegram-t/webpack/runtime/get javascript chunk filename","webpack://telegram-t/webpack/runtime/get mini-css chunk filename","webpack://telegram-t/webpack/runtime/global","webpack://telegram-t/webpack/runtime/hasOwnProperty shorthand","webpack://telegram-t/webpack/runtime/publicPath","webpack://telegram-t/webpack/runtime/importScripts chunk loading","webpack://telegram-t/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([7784,5905,9357].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","import { inflate } from 'pako/dist/pako_inflate';\n\nimport type { CancellableCallback } from '../../util/PostMessageConnector';\n\nimport { createWorkerInterface } from '../../util/createPostMessageInterface';\n\nimportScripts(new URL('./rlottie-wasm.js', import.meta.url));\n\ndeclare const Module: any;\n\ndeclare function allocate(...args: any[]): string;\n\ndeclare function intArrayFromString(str: String): string;\n\nlet rLottieApi: Record<string, Function>;\nconst rLottieApiPromise = new Promise<void>((resolve) => {\n  Module.onRuntimeInitialized = () => {\n    rLottieApi = {\n      init: Module.cwrap('lottie_init', '', []),\n      destroy: Module.cwrap('lottie_destroy', '', ['number']),\n      resize: Module.cwrap('lottie_resize', '', ['number', 'number', 'number']),\n      buffer: Module.cwrap('lottie_buffer', 'number', ['number']),\n      render: Module.cwrap('lottie_render', '', ['number', 'number']),\n      loadFromData: Module.cwrap('lottie_load_from_data', 'number', ['number', 'number']),\n    };\n\n    resolve();\n  };\n});\n\nconst HIGH_PRIORITY_MAX_FPS = 60;\nconst LOW_PRIORITY_MAX_FPS = 30;\nconst DESTROY_REPEAT_DELAY = 1000;\n\nconst renderers = new Map<string, {\n  imgSize: number;\n  reduceFactor: number;\n  handle: any;\n  imageData: ImageData;\n  customColor?: [number, number, number];\n}>();\n\nasync function init(\n  key: string,\n  tgsUrl: string,\n  imgSize: number,\n  isLowPriority: boolean,\n  customColor: [number, number, number] | undefined,\n  onInit: CancellableCallback,\n) {\n  if (!rLottieApi) {\n    await rLottieApiPromise;\n  }\n\n  const json = await extractJson(tgsUrl);\n  const stringOnWasmHeap = allocate(intArrayFromString(json), 'i8', 0);\n  const handle = rLottieApi.init();\n  const framesCount = rLottieApi.loadFromData(handle, stringOnWasmHeap);\n  rLottieApi.resize(handle, imgSize, imgSize);\n\n  const imageData = new ImageData(imgSize, imgSize);\n\n  const { reduceFactor, msPerFrame, reducedFramesCount } = calcParams(json, isLowPriority, framesCount);\n\n  renderers.set(key, {\n    imgSize, reduceFactor, handle, imageData, customColor,\n  });\n\n  onInit(reduceFactor, msPerFrame, reducedFramesCount);\n}\n\nasync function changeData(\n  key: string,\n  tgsUrl: string,\n  isLowPriority: boolean,\n  onInit: CancellableCallback,\n) {\n  if (!rLottieApi) {\n    await rLottieApiPromise;\n  }\n\n  const json = await extractJson(tgsUrl);\n  const stringOnWasmHeap = allocate(intArrayFromString(json), 'i8', 0);\n  const { handle } = renderers.get(key)!;\n  const framesCount = rLottieApi.loadFromData(handle, stringOnWasmHeap);\n\n  const { reduceFactor, msPerFrame, reducedFramesCount } = calcParams(json, isLowPriority, framesCount);\n\n  onInit(reduceFactor, msPerFrame, reducedFramesCount);\n}\n\nasync function extractJson(tgsUrl: string) {\n  const response = await fetch(tgsUrl);\n  const contentType = response.headers.get('Content-Type');\n\n  // Support deprecated JSON format cached locally\n  if (contentType?.startsWith('text/')) {\n    return response.text();\n  }\n\n  const arrayBuffer = await response.arrayBuffer();\n  return inflate(arrayBuffer, { to: 'string' });\n}\n\nfunction calcParams(json: string, isLowPriority: boolean, framesCount: number) {\n  const animationData = JSON.parse(json);\n  const maxFps = isLowPriority ? LOW_PRIORITY_MAX_FPS : HIGH_PRIORITY_MAX_FPS;\n  const sourceFps = animationData.fr || maxFps;\n  const reduceFactor = sourceFps % maxFps === 0 ? sourceFps / maxFps : 1;\n\n  return {\n    reduceFactor,\n    msPerFrame: 1000 / (sourceFps / reduceFactor),\n    reducedFramesCount: Math.ceil(framesCount / reduceFactor),\n  };\n}\n\nasync function renderFrames(\n  key: string, frameIndex: number, onProgress: CancellableCallback,\n) {\n  if (!rLottieApi) {\n    await rLottieApiPromise;\n  }\n\n  const {\n    imgSize, reduceFactor, handle, imageData, customColor,\n  } = renderers.get(key)!;\n\n  const realIndex = frameIndex * reduceFactor;\n\n  rLottieApi.render(handle, realIndex);\n  const bufferPointer = rLottieApi.buffer(handle);\n  const data = Module.HEAPU8.subarray(bufferPointer, bufferPointer + (imgSize * imgSize * 4));\n\n  if (customColor) {\n    const arr = new Uint8ClampedArray(data);\n    applyColor(arr, customColor);\n    imageData.data.set(arr);\n  } else {\n    imageData.data.set(data);\n  }\n\n  const imageBitmap = await createImageBitmap(imageData);\n\n  onProgress(frameIndex, imageBitmap);\n}\n\nfunction applyColor(arr: Uint8ClampedArray, color: [number, number, number]) {\n  for (let i = 0; i < arr.length; i += 4) {\n    arr[i] = color[0];\n    arr[i + 1] = color[1];\n    arr[i + 2] = color[2];\n  }\n}\n\nfunction destroy(key: string, isRepeated = false) {\n  try {\n    const renderer = renderers.get(key)!;\n    rLottieApi.destroy(renderer.handle);\n    renderers.delete(key);\n  } catch (err) {\n    // `destroy` sometimes can be called before the initialization is finished\n    if (!isRepeated) {\n      setTimeout(() => destroy(key, true), DESTROY_REPEAT_DELAY);\n    }\n  }\n}\n\nconst api = {\n  'rlottie:init': init,\n  'rlottie:changeData': changeData,\n  'rlottie:renderFrames': renderFrames,\n  'rlottie:destroy': destroy,\n};\n\ncreateWorkerInterface(api, 'media');\n\nexport type RLottieApi = typeof api;\n","import generateUniqueId from '../../util/generateUniqueId';\nimport { pause } from '../../util/schedulers';\n\ndeclare const self: WorkerGlobalScope;\n\ntype RequestStates = {\n  resolve: (response: ArrayBuffer) => void;\n  reject: () => void;\n};\n\ntype RequestPartParams = { url: string; start: number; end: number };\n\nconst PART_TIMEOUT = 30000;\n\nconst requestStates = new Map<string, RequestStates>();\n\nexport function requestPart(params: RequestPartParams): Promise<ArrayBuffer | undefined> {\n  const messageId = generateUniqueId();\n  const requestState = {} as RequestStates;\n\n  let isResolved = false;\n  const promise = Promise.race([\n    pause(PART_TIMEOUT).then(() => (isResolved ? undefined : Promise.reject(new Error('ERROR_PART_TIMEOUT')))),\n    new Promise<ArrayBuffer>((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    }),\n  ]);\n\n  requestStates.set(messageId, requestState);\n\n  promise\n    .catch(() => undefined)\n    .finally(() => {\n      requestStates.delete(messageId);\n      isResolved = true;\n    });\n\n  const message = {\n    type: 'requestPart',\n    messageId,\n    params,\n  };\n\n  postMessage(message);\n\n  return promise;\n}\n\nself.addEventListener('message', (e) => {\n  const { type, messageId, result } = (e as any).data as {\n    type: string;\n    messageId: string;\n    result: ArrayBuffer;\n  };\n\n  if (type === 'partResponse') {\n    const requestState = requestStates.get(messageId);\n    if (requestState) {\n      requestState.resolve(result);\n    }\n  }\n});\n","import type { MP4ArrayBuffer, MP4Info, MP4VideoTrack } from 'mp4box';\nimport MP4Box, { DataStream } from 'mp4box';\n\nimport { requestPart } from './requestPart';\n\nconst META_PART_SIZE = 128 * 1024;\nconst MIN_PART_SIZE = 1024;\nenum Status {\n  loading = 'loading',\n  ready = 'ready',\n  closed = 'closed',\n}\n\nexport type MP4DecoderConfig = {\n  codec: string;\n  codedHeight: number;\n  codedWidth: number;\n  description: Uint8Array;\n};\n\ntype MP4DemuxerConfig = {\n  stepOffset: number;\n  stepMultiplier: number;\n  isPolyfill: boolean;\n  maxFrames: number;\n  onConfig: (config: any) => void;\n  onChunk: (chunk: any) => void;\n};\n\nexport class MP4Demuxer {\n  private readonly url: string;\n\n  private file: MP4Box.MP4File;\n\n  private status = Status.loading;\n\n  private readonly stepOffset: number;\n\n  private readonly stepMultiplier: number;\n\n  private readonly maxFrames: number;\n\n  private readonly isPolyfill: boolean;\n\n  private decodedSamples = new Set<string>();\n\n  private lastSample = 0;\n\n  private readonly onConfig: (config: MP4DecoderConfig) => void;\n\n  private readonly onChunk: (chunk: any) => void;\n\n  constructor(url: string, {\n    onConfig,\n    onChunk,\n    stepOffset,\n    stepMultiplier,\n    isPolyfill,\n    maxFrames,\n  }: MP4DemuxerConfig) {\n    this.url = url;\n    this.stepOffset = stepOffset;\n    this.stepMultiplier = stepMultiplier;\n    this.maxFrames = maxFrames;\n    this.isPolyfill = isPolyfill;\n    this.onConfig = onConfig;\n    this.onChunk = onChunk;\n\n    this.file = MP4Box.createFile();\n    this.file.onError = (e) => {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    };\n    this.file.onReady = this.onReady.bind(this);\n    this.file.onSamples = this.onSamples.bind(this);\n\n    void this.loadMetadata();\n  }\n\n  private async loadMetadata() {\n    let offset: number | undefined = 0;\n    while (offset !== undefined) {\n      try {\n        offset = await this.requestPart(offset, META_PART_SIZE);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      }\n      if (this.status === Status.ready) break;\n    }\n  }\n\n  private async loadNextFrames(step: number, duration: number, partSize: number) {\n    let tick = step * this.stepOffset;\n    let lastSample = 0;\n    let rap = this.file.seek(tick, true);\n    while (this.status !== Status.closed) {\n      try {\n        await this.requestPart(rap.offset, partSize);\n        if (tick > duration) break;\n        if (this.lastSample > 1 && lastSample < this.lastSample) {\n          tick += step * this.stepMultiplier;\n          lastSample = this.lastSample;\n        }\n        rap = this.file.seek(tick, true);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      }\n    }\n    this.file.flush();\n  }\n\n  private async requestPart(offset: number, partSize: number, useRap = true) {\n    const reminder = (offset % MIN_PART_SIZE);\n    const start = offset - reminder;\n    const end = start + partSize - 1;\n    let arrayBuffer = await requestPart({ url: this.url, start, end }) as MP4ArrayBuffer;\n    if (!arrayBuffer) {\n      return undefined;\n    }\n    if (reminder) {\n      arrayBuffer = arrayBuffer.slice(reminder) as MP4ArrayBuffer;\n    }\n    arrayBuffer.fileStart = offset;\n    const nextOffset = this.file.appendBuffer(arrayBuffer);\n    if (!useRap) return offset + arrayBuffer.byteLength;\n    return nextOffset;\n  }\n\n  private description(track: MP4VideoTrack) {\n    const t = this.file.getTrackById(track.id);\n    for (const entry of t.mdia.minf.stbl.stsd.entries) {\n      if (entry.avcC || entry.hvcC || entry.av1C) {\n        const stream = new DataStream(undefined, 0, DataStream.BIG_ENDIAN);\n        if (entry.avcC) {\n          entry.avcC.write(stream);\n        } else if (entry.hvcC) {\n          entry.hvcC.write(stream);\n        } else if (entry.av1C) {\n          entry.av1C.write(stream);\n        }\n        return new Uint8Array(stream.buffer, 8); // Remove the box header.\n      }\n    }\n    throw new Error('avcC, hvcC ro av1C not found');\n  }\n\n  private onReady(info: MP4Info) {\n    const track = info.videoTracks[0];\n\n    let codec = track.codec;\n    if (codec.startsWith('avc1')) {\n      // Somehow this is the only avc1 codec that works.\n      codec = 'avc1.4d001f';\n    }\n\n    // Generate and emit an appropriate VideoDecoderConfig.\n    this.onConfig({\n      codec,\n      codedHeight: track.video.height,\n      codedWidth: track.video.width,\n      description: this.description(track),\n    });\n\n    const duration = info.duration / info.timescale;\n\n    // If we set a part size too small, the onSamples callback is not called.\n    // If we use polyfill, we need to set a smaller part size to avoid decoding multiple frames.\n    const partSizeDivider = this.isPolyfill ? 24 : 12;\n    const partSize = roundPartSize(track.bitrate / partSizeDivider);\n    const step = calculateStep(duration, this.maxFrames);\n\n    // Start demuxing.\n    this.file.setExtractionOptions(track.id, undefined, { nbSamples: 1 });\n    this.file.start();\n\n    this.status = Status.ready;\n\n    // // Load frames\n    void this.loadNextFrames(step, duration, partSize);\n  }\n\n  private onSamples(trackId: number, ref: any, samples: any) {\n    if (this.status !== Status.ready) return;\n    // Generate and emit an EncodedVideoChunk for each demuxed sample.\n    for (const sample of samples) {\n      const time = sample.cts / sample.timescale;\n      const type = sample.is_sync ? 'key' : 'delta';\n      const id = `${type}${sample.number}`;\n\n      // Skip already decoded samples.\n      if (this.decodedSamples.has(id)) continue;\n\n      // @ts-ignore\n      this.onChunk(new EncodedVideoChunk({\n        type,\n        timestamp: (1e6 * time),\n        duration: (1e6 * sample.duration) / sample.timescale,\n        data: sample.data,\n      }));\n\n      this.decodedSamples.add(id);\n      this.lastSample = parseInt(sample.number, 10);\n\n      if (sample.is_sync) {\n        this.file.releaseUsedSamples(trackId, sample.number);\n      }\n    }\n  }\n\n  close() {\n    this.file.flush();\n    this.file.stop();\n    this.status = Status.closed;\n  }\n}\n\nfunction roundPartSize(size: number) {\n  return size + MIN_PART_SIZE - (size % MIN_PART_SIZE);\n}\n\nfunction calculateStep(duration: number, max: number): number {\n  return Math.round((duration + max) / max);\n}\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","import type { CancellableCallback } from '../../util/PostMessageConnector';\n\nimport { createWorkerInterface } from '../../util/createPostMessageInterface';\n\nimport { MP4Demuxer } from './MP4Demuxer';\n\nlet decoder: any;\nlet demuxer: any;\nlet onDestroy: VoidFunction | undefined;\n\nfunction init(\n  url: string,\n  maxFrames: number,\n  workerIndex: number,\n  workersTotal: number,\n  onFrame: CancellableCallback,\n) {\n  const hasWebCodecs = 'VideoDecoder' in globalThis;\n  if (!hasWebCodecs) {\n    // eslint-disable-next-line no-console\n    console.log('[Video Preview] WebCodecs not supported');\n    return new Promise<void>((resolve) => {\n      onDestroy = resolve;\n    });\n  }\n\n  const decodedFrames = new Set<number>();\n\n  // @ts-ignore\n  decoder = new VideoDecoder({\n    async output(frame: any) {\n      const time = frame.timestamp / 1e6;\n      const seconds = Math.floor(time);\n      // Only render whole second frames\n      if (!decodedFrames.has(seconds)) {\n        const bitmap = await createImageBitmap(frame);\n        decodedFrames.add(seconds);\n        onFrame(seconds, bitmap);\n      }\n      frame.close();\n    },\n    error(e: any) {\n      // eslint-disable-next-line no-console\n      console.error('[Video Preview] error', e);\n    },\n  });\n\n  demuxer = new MP4Demuxer(url, {\n    stepOffset: workerIndex,\n    stepMultiplier: workersTotal,\n    isPolyfill: !hasWebCodecs,\n    maxFrames,\n    onConfig(config) {\n      decoder?.configure(config);\n    },\n    onChunk(chunk) {\n      if (decoder?.state !== 'configured') return;\n      decoder?.decode(chunk);\n    },\n  });\n\n  return new Promise<void>((resolve) => {\n    onDestroy = resolve;\n  });\n}\n\nfunction destroy() {\n  try {\n    decoder?.close();\n    demuxer?.close();\n  } catch {\n    // Ignore\n  }\n  decoder = undefined;\n  demuxer = undefined;\n  onDestroy?.();\n}\n\nconst api = {\n  'video-preview:init': init,\n  'video-preview:destroy': destroy,\n};\n\ncreateWorkerInterface(api, 'media');\n\nexport type VideoPreviewApi = typeof api;\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-param-reassign */\n/* eslint-disable prefer-const */\n/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\n\n/*\nSuperfast Blur - a fast Box Blur For Canvas\n\nVersion:     0.5\nAuthor:        Mario Klingemann\nContact:     mario@quasimondo.com\nWebsite:    http://www.quasimondo.com/BoxBlurForCanvas\nTwitter:    @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/140066/Superfast-Blur-a-pretty-fast-Box-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2011 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// eslint-disable-next-line max-len\nconst mul_table = [1, 57, 41, 21, 203, 34, 97, 73, 227, 91, 149, 62, 105, 45, 39, 137, 241, 107, 3, 173, 39, 71, 65, 238, 219, 101, 187, 87, 81, 151, 141, 133, 249, 117, 221, 209, 197, 187, 177, 169, 5, 153, 73, 139, 133, 127, 243, 233, 223, 107, 103, 99, 191, 23, 177, 171, 165, 159, 77, 149, 9, 139, 135, 131, 253, 245, 119, 231, 224, 109, 211, 103, 25, 195, 189, 23, 45, 175, 171, 83, 81, 79, 155, 151, 147, 9, 141, 137, 67, 131, 129, 251, 123, 30, 235, 115, 113, 221, 217, 53, 13, 51, 50, 49, 193, 189, 185, 91, 179, 175, 43, 169, 83, 163, 5, 79, 155, 19, 75, 147, 145, 143, 35, 69, 17, 67, 33, 65, 255, 251, 247, 243, 239, 59, 29, 229, 113, 111, 219, 27, 213, 105, 207, 51, 201, 199, 49, 193, 191, 47, 93, 183, 181, 179, 11, 87, 43, 85, 167, 165, 163, 161, 159, 157, 155, 77, 19, 75, 37, 73, 145, 143, 141, 35, 138, 137, 135, 67, 33, 131, 129, 255, 63, 250, 247, 61, 121, 239, 237, 117, 29, 229, 227, 225, 111, 55, 109, 216, 213, 211, 209, 207, 205, 203, 201, 199, 197, 195, 193, 48, 190, 47, 93, 185, 183, 181, 179, 178, 176, 175, 173, 171, 85, 21, 167, 165, 41, 163, 161, 5, 79, 157, 78, 154, 153, 19, 75, 149, 74, 147, 73, 144, 143, 71, 141, 140, 139, 137, 17, 135, 134, 133, 66, 131, 65, 129, 1];\n// eslint-disable-next-line max-len\nconst shg_table = [0, 9, 10, 10, 14, 12, 14, 14, 16, 15, 16, 15, 16, 15, 15, 17, 18, 17, 12, 18, 16, 17, 17, 19, 19, 18, 19, 18, 18, 19, 19, 19, 20, 19, 20, 20, 20, 20, 20, 20, 15, 20, 19, 20, 20, 20, 21, 21, 21, 20, 20, 20, 21, 18, 21, 21, 21, 21, 20, 21, 17, 21, 21, 21, 22, 22, 21, 22, 22, 21, 22, 21, 19, 22, 22, 19, 20, 22, 22, 21, 21, 21, 22, 22, 22, 18, 22, 22, 21, 22, 22, 23, 22, 20, 23, 22, 22, 23, 23, 21, 19, 21, 21, 21, 23, 23, 23, 22, 23, 23, 21, 23, 22, 23, 18, 22, 23, 20, 22, 23, 23, 23, 21, 22, 20, 22, 21, 22, 24, 24, 24, 24, 24, 22, 21, 24, 23, 23, 24, 21, 24, 23, 24, 22, 24, 24, 22, 24, 24, 22, 23, 24, 24, 24, 20, 23, 22, 23, 24, 24, 24, 24, 24, 24, 24, 23, 21, 23, 22, 23, 24, 24, 24, 22, 24, 24, 24, 23, 22, 24, 24, 25, 23, 25, 25, 23, 24, 25, 25, 24, 22, 25, 25, 25, 24, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23, 25, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 24, 22, 25, 25, 23, 25, 25, 20, 24, 25, 24, 25, 25, 22, 24, 25, 24, 25, 24, 25, 25, 24, 25, 25, 25, 25, 22, 25, 25, 25, 24, 25, 24, 25, 18];\n\nexport default function boxBlurCanvasRGB(context, top_x, top_y, width, height, radius, iterations) {\n  if (Number.isNaN(radius) || radius < 1) return;\n\n  radius |= 0;\n\n  if (Number.isNaN(iterations)) iterations = 1;\n  iterations |= 0;\n  if (iterations > 3) iterations = 3;\n  if (iterations < 1) iterations = 1;\n\n  const imageData = context.getImageData(top_x, top_y, width, height);\n\n  const pixels = imageData.data;\n\n  let rsum;\n  let gsum;\n  let bsum;\n  let x;\n  let y;\n  let i;\n  let p;\n  let p1;\n  let p2;\n  let yp;\n  let yi;\n  let yw;\n  let wm = width - 1;\n  let hm = height - 1;\n  let rad1 = radius + 1;\n\n  let r = [];\n  let g = [];\n  let b = [];\n\n  let mul_sum = mul_table[radius];\n  let shg_sum = shg_table[radius];\n\n  let vmin = [];\n  let vmax = [];\n\n  while (iterations-- > 0) {\n    yw = yi = 0;\n\n    for (y = 0; y < height; y++) {\n      rsum = pixels[yw] * rad1;\n      gsum = pixels[yw + 1] * rad1;\n      bsum = pixels[yw + 2] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        p = yw + (((i > wm ? wm : i)) << 2);\n        rsum += pixels[p++];\n        gsum += pixels[p++];\n        bsum += pixels[p++];\n      }\n\n      for (x = 0; x < width; x++) {\n        r[yi] = rsum;\n        g[yi] = gsum;\n        b[yi] = bsum;\n\n        if (y == 0) {\n          vmin[x] = ((p = x + rad1) < wm ? p : wm) << 2;\n          vmax[x] = ((p = x - radius) > 0 ? p << 2 : 0);\n        }\n\n        p1 = yw + vmin[x];\n        p2 = yw + vmax[x];\n\n        rsum += pixels[p1++] - pixels[p2++];\n        gsum += pixels[p1++] - pixels[p2++];\n        bsum += pixels[p1++] - pixels[p2++];\n\n        yi++;\n      }\n      yw += (width << 2);\n    }\n\n    for (x = 0; x < width; x++) {\n      yp = x;\n      rsum = r[yp] * rad1;\n      gsum = g[yp] * rad1;\n      bsum = b[yp] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        yp += (i > hm ? 0 : width);\n        rsum += r[yp];\n        gsum += g[yp];\n        bsum += b[yp];\n      }\n\n      yi = x << 2;\n      for (y = 0; y < height; y++) {\n        pixels[yi] = (rsum * mul_sum) >>> shg_sum;\n        pixels[yi + 1] = (gsum * mul_sum) >>> shg_sum;\n        pixels[yi + 2] = (bsum * mul_sum) >>> shg_sum;\n\n        if (x == 0) {\n          vmin[y] = ((p = y + rad1) < hm ? p : hm) * width;\n          vmax[y] = ((p = y - radius) > 0 ? p * width : 0);\n        }\n\n        p1 = x + vmin[y];\n        p2 = x + vmax[y];\n\n        rsum += r[p1] - r[p2];\n        gsum += g[p1] - g[p2];\n        bsum += b[p1] - b[p2];\n\n        yi += width << 2;\n      }\n    }\n  }\n\n  context.putImageData(imageData, top_x, top_y);\n}\n","import { createWorkerInterface } from '../../util/createPostMessageInterface';\nimport fastBlur from '../fastBlur';\n\nconst FAST_BLUR_ITERATIONS = 2;\n\nexport async function blurThumb(canvas: OffscreenCanvas, thumbData: string, radius: number) {\n  const imageBitmap = thumbData.startsWith('data:')\n    ? await dataUriToImageBitmap(thumbData)\n    : await blobUrlToImageBitmap(thumbData);\n  const { width, height } = canvas;\n  const ctx = canvas.getContext('2d')!;\n  const isFilterSupported = 'filter' in ctx;\n\n  if (isFilterSupported) {\n    ctx.filter = `blur(${radius}px)`;\n  }\n\n  ctx.drawImage(imageBitmap, -radius * 2, -radius * 2, width + radius * 4, height + radius * 4);\n\n  if (!isFilterSupported) {\n    fastBlur(ctx, 0, 0, width, height, radius, FAST_BLUR_ITERATIONS);\n  }\n}\n\nexport async function getAppendixColorFromImage(blobUrl: string, isOwn: boolean) {\n  const imageBitmap = await blobUrlToImageBitmap(blobUrl);\n  const { width, height } = imageBitmap;\n  const canvas = new OffscreenCanvas(width, height);\n  const ctx = canvas.getContext('2d')!;\n\n  ctx.drawImage(imageBitmap, 0, 0, width, height);\n\n  const x = isOwn ? width - 1 : 0;\n  const y = height - 1;\n\n  const pixel = Array.from(ctx.getImageData(x, y, 1, 1).data);\n  return `rgba(${pixel.join(',')})`;\n}\n\nfunction dataUriToImageBitmap(dataUri: string) {\n  const byteString = atob(dataUri.split(',')[1]);\n  const mimeString = dataUri.split(',')[0].split(':')[1].split(';')[0];\n  const buffer = new ArrayBuffer(byteString.length);\n  const dataArray = new Uint8Array(buffer);\n\n  for (let i = 0; i < byteString.length; i++) {\n    dataArray[i] = byteString.charCodeAt(i);\n  }\n\n  const blob = new Blob([buffer], { type: mimeString });\n\n  return createImageBitmap(blob);\n}\n\nasync function blobUrlToImageBitmap(blobUrl: string) {\n  const response = await fetch(blobUrl);\n  const blob = await response.blob();\n  return createImageBitmap(blob);\n}\n\nconst api = {\n  'offscreen-canvas:blurThumb': blurThumb,\n  'offscreen-canvas:getAppendixColorFromImage': getAppendixColorFromImage,\n};\n\ncreateWorkerInterface(api, 'media');\n\nexport type OffscreenCanvasApi = typeof api;\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  // eslint-disable-next-line no-restricted-globals\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [7784,5905,9357], () => (__webpack_require__(79722)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"5905\":\"efaeccc9ed0bc890f551\",\"7784\":\"4e167a928464165e6412\",\"9357\":\"8b1806b0de8d5074f976\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = self.location + \"\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t9722: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunktelegram_t\"] = self[\"webpackChunktelegram_t\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","rLottieApi","importScripts","URL","rLottieApiPromise","Promise","resolve","Module","onRuntimeInitialized","init","cwrap","destroy","resize","buffer","render","loadFromData","renderers","Map","async","extractJson","tgsUrl","response","fetch","contentType","headers","get","startsWith","text","arrayBuffer","inflate","to","calcParams","json","isLowPriority","framesCount","maxFps","sourceFps","JSON","parse","fr","reduceFactor","msPerFrame","reducedFramesCount","Math","ceil","api","key","imgSize","customColor","onInit","stringOnWasmHeap","allocate","intArrayFromString","handle","imageData","ImageData","set","frameIndex","onProgress","realIndex","bufferPointer","data","HEAPU8","subarray","arr","Uint8ClampedArray","color","i","length","applyColor","createImageBitmap","isRepeated","arguments","undefined","renderer","delete","err","setTimeout","createWorkerInterface","requestStates","self","addEventListener","e","type","messageId","result","requestState","MIN_PART_SIZE","Status","MP4Demuxer","constructor","url","_ref","onConfig","onChunk","stepOffset","stepMultiplier","isPolyfill","maxFrames","_defineProperty","loading","Set","this","file","MP4Box","onError","console","error","onReady","bind","onSamples","loadMetadata","offset","requestPart","status","ready","loadNextFrames","step","duration","partSize","tick","lastSample","rap","seek","closed","flush","useRap","reminder","start","end","params","Date","now","toString","random","slice","isResolved","promise","race","pause","then","reject","Error","Object","assign","catch","finally","postMessage","fileStart","nextOffset","appendBuffer","byteLength","description","track","t","getTrackById","id","entry","mdia","minf","stbl","stsd","entries","avcC","hvcC","av1C","stream","DataStream","BIG_ENDIAN","write","Uint8Array","info","videoTracks","codec","codedHeight","video","height","codedWidth","width","timescale","partSizeDivider","size","bitrate","max","round","calculateStep","setExtractionOptions","nbSamples","trackId","ref","samples","sample","time","cts","is_sync","number","decodedSamples","has","EncodedVideoChunk","timestamp","add","parseInt","releaseUsedSamples","close","stop","decoder","demuxer","onDestroy","workerIndex","workersTotal","onFrame","hasWebCodecs","globalThis","log","decodedFrames","VideoDecoder","output","frame","seconds","floor","bitmap","config","configure","chunk","state","decode","mul_table","shg_table","blobUrlToImageBitmap","blobUrl","blob","canvas","thumbData","radius","imageBitmap","dataUri","byteString","atob","split","mimeString","ArrayBuffer","dataArray","charCodeAt","Blob","dataUriToImageBitmap","ctx","getContext","isFilterSupported","filter","drawImage","context","top_x","top_y","iterations","Number","isNaN","getImageData","pixels","rsum","gsum","bsum","x","y","p","p1","p2","yp","yi","yw","wm","hm","rad1","r","g","b","mul_sum","shg_sum","vmin","vmax","putImageData","fastBlur","isOwn","OffscreenCanvas","Array","from","join","throttleWithTickEnd","fn","schedulerFn","args","waiting","_len3","_args","_key3","throttleWith","onTickEnd","ms","onTickEndCallbacks","callback","push","currentCallbacks","forEach","cb","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","__webpack_exports__","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","d","definition","o","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","Function","window","obj","prop","prototype","hasOwnProperty","scriptUrl","location","document","currentScript","src","scripts","getElementsByTagName","test","replace","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","pop","map"],"sourceRoot":""}