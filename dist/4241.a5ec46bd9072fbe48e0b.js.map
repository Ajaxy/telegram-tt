{"version":3,"file":"4241.a5ec46bd9072fbe48e0b.js","mappings":"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IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAE5qCC,EAAY,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GA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","sources":["webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/common/AvatarStoryCircle.tsx","webpack://telegram-t/./src/components/common/FakeIcon.tsx","webpack://telegram-t/./src/components/common/VerifiedIcon.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.module.scss?6448","webpack://telegram-t/./src/components/common/FullNameTitle.tsx","webpack://telegram-t/./src/components/common/Icon.tsx","webpack://telegram-t/./src/components/common/PremiumIcon.tsx","webpack://telegram-t/./src/components/common/helpers/peerColor.ts","webpack://telegram-t/./src/components/right/DeleteMemberModal.tsx","webpack://telegram-t/./src/global/selectors/calls.ts","webpack://telegram-t/./src/global/selectors/limits.ts","webpack://telegram-t/./src/hooks/schedulers/useInterval.ts","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/hooks/useMenuPosition.ts","webpack://telegram-t/./src/hooks/window/useFullscreen.ts","webpack://telegram-t/./src/lib/fastBlur.js","webpack://telegram-t/./src/types/electron.ts","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/util/stopEvent.ts","webpack://telegram-t/./src/util/trapFocus.ts"],"sourcesContent":["import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiChat, ApiPeer, ApiPhoto, ApiUser,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { StoryViewerOrigin } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getPeerStoryHtmlId,\n  getUserFullName,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isDeletedUser,\n  isUserId,\n} from '../../global/helpers';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport { getFirstLetters } from '../../util/textFormat';\nimport { getPeerColorClass } from './helpers/peerColor';\nimport renderText from './helpers/renderText';\n\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AvatarStoryCircle from './AvatarStoryCircle';\nimport Icon from './Icon';\n\nimport './Avatar.scss';\n\nconst LOOP_COUNT = 3;\n\nexport type AvatarSize = 'micro' | 'tiny' | 'mini' | 'small' | 'small-mobile' | 'medium' | 'large' | 'giant' | 'jumbo';\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  peer?: ApiPeer;\n  photo?: ApiPhoto;\n  text?: string;\n  isSavedMessages?: boolean;\n  isUnknownUser?: boolean;\n  isSavedDialog?: boolean;\n  withVideo?: boolean;\n  withStory?: boolean;\n  forPremiumPromo?: boolean;\n  withStoryGap?: boolean;\n  withStorySolid?: boolean;\n  forceFriendStorySolid?: boolean;\n  forceUnreadStorySolid?: boolean;\n  storyViewerOrigin?: StoryViewerOrigin;\n  storyViewerMode?: 'full' | 'single-peer' | 'disabled';\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  peer,\n  photo,\n  text,\n  isSavedMessages,\n  isSavedDialog,\n  isUnknownUser,\n  withVideo,\n  withStory,\n  forPremiumPromo,\n  withStoryGap,\n  withStorySolid,\n  forceFriendStorySolid,\n  forceUnreadStorySolid,\n  storyViewerOrigin,\n  storyViewerMode = 'single-peer',\n  loopIndefinitely,\n  noPersonalPhoto,\n  onClick,\n}) => {\n  const { openStoryViewer } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const videoLoopCountRef = useRef(0);\n  const isPeerChat = peer && 'title' in peer;\n  const user = peer && !isPeerChat ? peer as ApiUser : undefined;\n  const chat = peer && isPeerChat ? peer as ApiChat : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = peer && isChatWithRepliesBot(peer.id);\n  const isAnonymousForwards = peer && isAnonymousForwardsChat(peer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const shouldFetchBig = size === 'jumbo';\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer!, shouldFetchBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = `videoAvatar${photo.id}?size=u`;\n      }\n    }\n  }\n\n  const specialIcon = useMemo(() => {\n    if (isUnknownUser) {\n      return 'user';\n    }\n\n    if (isSavedMessages) {\n      return isSavedDialog ? 'my-notes' : 'avatar-saved-messages';\n    }\n\n    if (isDeleted) {\n      return 'avatar-deleted-account';\n    }\n\n    if (isReplies) {\n      return 'reply-filled';\n    }\n\n    if (isAnonymousForwards) {\n      return 'author-hidden';\n    }\n\n    return undefined;\n  }, [isUnknownUser, isSavedMessages, isDeleted, isReplies, isAnonymousForwards, isSavedDialog]);\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const hasBlobUrl = Boolean(imgBlobUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransition(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (specialIcon) {\n    content = (\n      <Icon\n        name={specialIcon}\n        className={cn.icon}\n        role=\"img\"\n        ariaLabel={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgBlobUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n          draggable={false}\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            draggable={false}\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isRoundedRect = isForum && !((withStory || withStorySolid) && peer?.hasStories);\n\n  const fullClassName = buildClassName(\n    `Avatar size-${size}`,\n    className,\n    getPeerColorClass(peer),\n    isUnknownUser && 'unknown-user',\n    !peer && text && 'hidden-user',\n    isSavedMessages && 'saved-messages',\n    isAnonymousForwards && 'anonymous-forwards',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isRoundedRect && 'forum',\n    ((withStory && peer?.hasStories) || forPremiumPromo) && 'with-story-circle',\n    withStorySolid && peer?.hasStories && 'with-story-solid',\n    withStorySolid && forceFriendStorySolid && 'close-friend',\n    withStorySolid && (peer?.hasUnreadStories || forceUnreadStorySolid) && 'has-unread-story',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgBlobUrl) && 'no-photo',\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgBlobUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (withStory && storyViewerMode !== 'disabled' && peer?.hasStories) {\n      e.stopPropagation();\n\n      openStoryViewer({\n        peerId: peer.id,\n        isSinglePeer: storyViewerMode === 'single-peer',\n        origin: storyViewerOrigin,\n      });\n      return;\n    }\n\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      id={peer?.id && withStory ? getPeerStoryHtmlId(peer.id) : undefined}\n      data-peer-id={peer?.id}\n      data-test-sender-id={IS_TEST ? peer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      onClick={handleClick}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"inner\">\n        {typeof content === 'string' ? renderText(content, [size === 'jumbo' ? 'hq_emoji' : 'emoji']) : content}\n      </div>\n      {withStory && peer?.hasStories && (\n        <AvatarStoryCircle peerId={peer.id} size={size} withExtraGap={withStoryGap} />\n      )}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { ThemeKey } from '../../types';\nimport type { AvatarSize } from './Avatar';\n\nimport { selectPeerStories, selectTheme } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  peerId: string;\n  className?: string;\n  size: AvatarSize;\n  withExtraGap?: boolean;\n}\n\ninterface StateProps {\n  peerStories?: Record<number, ApiTypeStory>;\n  storyIds?: number[];\n  lastReadId?: number;\n  appTheme: ThemeKey;\n}\n\nconst SIZES: Record<AvatarSize, number> = {\n  micro: 1.125 * REM,\n  tiny: 2.125 * REM,\n  mini: 1.625 * REM,\n  small: 2.25 * REM,\n  'small-mobile': 2.625 * REM,\n  medium: 2.875 * REM,\n  large: 3.5 * REM,\n  giant: 5.125 * REM,\n  jumbo: 7.625 * REM,\n};\n\nconst BLUE = ['#34C578', '#3CA3F3'];\nconst GREEN = ['#C9EB38', '#09C167'];\nconst PURPLE = ['#A667FF', '#55A5FF'];\nconst GRAY = '#C4C9CC';\nconst DARK_GRAY = '#737373';\nconst STROKE_WIDTH = 0.125 * REM;\nconst STROKE_WIDTH_READ = 0.0625 * REM;\nconst GAP_PERCENT = 2;\nconst SEGMENTS_MAX = 45; // More than this breaks rendering in Safari and Chrome\n\nconst GAP_PERCENT_EXTRA = 10;\nconst EXTRA_GAP_ANGLE = Math.PI / 4;\nconst EXTRA_GAP_SIZE = (GAP_PERCENT_EXTRA / 100) * (2 * Math.PI);\nconst EXTRA_GAP_START = EXTRA_GAP_ANGLE - EXTRA_GAP_SIZE / 2;\nconst EXTRA_GAP_END = EXTRA_GAP_ANGLE + EXTRA_GAP_SIZE / 2;\n\nfunction AvatarStoryCircle({\n  size = 'large',\n  className,\n  peerStories,\n  storyIds,\n  lastReadId,\n  withExtraGap,\n  appTheme,\n}: OwnProps & StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  const dpr = useDevicePixelRatio();\n\n  const values = useMemo(() => {\n    return (storyIds || []).reduce((acc, id) => {\n      acc.total += 1;\n      if (lastReadId && id <= lastReadId) {\n        acc.read += 1;\n      }\n\n      return acc;\n    }, { total: 0, read: 0 });\n  }, [lastReadId, storyIds]);\n\n  const isCloseFriend = useMemo(() => {\n    if (!peerStories || !storyIds?.length) {\n      return false;\n    }\n\n    return storyIds.some((id) => {\n      const story = peerStories[id];\n      if (!story || !('isForCloseFriends' in story)) {\n        return false;\n      }\n      const isRead = lastReadId && story.id <= lastReadId;\n      return story.isForCloseFriends && !isRead;\n    });\n  }, [lastReadId, peerStories, storyIds]);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: ref.current,\n      size: SIZES[size] * dpr,\n      segmentsCount: values.total,\n      color: isCloseFriend ? 'green' : 'blue',\n      readSegmentsCount: values.read,\n      withExtraGap,\n      readSegmentColor: appTheme === 'dark' ? DARK_GRAY : GRAY,\n      dpr,\n    });\n  }, [appTheme, isCloseFriend, size, values.read, values.total, withExtraGap, dpr]);\n\n  if (!values.total) {\n    return undefined;\n  }\n\n  const maxSize = SIZES[size];\n\n  return (\n    <canvas\n      ref={ref}\n      className={buildClassName('story-circle', size, className)}\n      style={`max-width: ${maxSize}px; max-height: ${maxSize}px;`}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peerId }): StateProps => {\n  const peerStories = selectPeerStories(global, peerId);\n  const appTheme = selectTheme(global);\n\n  return {\n    peerStories: peerStories?.byId,\n    storyIds: peerStories?.orderedIds,\n    lastReadId: peerStories?.lastReadId,\n    appTheme,\n  };\n})(AvatarStoryCircle));\n\nexport function drawGradientCircle({\n  canvas,\n  size,\n  color,\n  segmentsCount,\n  readSegmentsCount = 0,\n  withExtraGap = false,\n  readSegmentColor,\n  dpr,\n}: {\n  canvas: HTMLCanvasElement;\n  size: number;\n  color: string;\n  segmentsCount: number;\n  readSegmentsCount?: number;\n  withExtraGap?: boolean;\n  readSegmentColor: string;\n  dpr: number;\n}) {\n  if (segmentsCount > SEGMENTS_MAX) {\n    readSegmentsCount = Math.round(readSegmentsCount * (SEGMENTS_MAX / segmentsCount));\n\n    segmentsCount = SEGMENTS_MAX;\n  }\n\n  const strokeModifier = Math.max(Math.max(size - SIZES.large * dpr, 0) / dpr / REM / 1.5, 1) * dpr;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n\n  canvas.width = size;\n  canvas.height = size;\n  const centerCoordinate = size / 2;\n  const radius = (size - STROKE_WIDTH * strokeModifier) / 2;\n  const segmentAngle = (2 * Math.PI) / segmentsCount;\n  const gapSize = (GAP_PERCENT / 100) * (2 * Math.PI);\n  const gradient = ctx.createLinearGradient(\n    0,\n    0,\n    Math.ceil(size * Math.cos(Math.PI / 2)),\n    Math.ceil(size * Math.sin(Math.PI / 2)),\n  );\n\n  const colorStops = color === 'purple' ? PURPLE : color === 'green' ? GREEN : BLUE;\n  colorStops.forEach((colorStop, index) => {\n    gradient.addColorStop(index / (colorStops.length - 1), colorStop);\n  });\n\n  ctx.lineCap = 'round';\n  ctx.clearRect(0, 0, size, size);\n\n  Array.from({ length: segmentsCount }).forEach((_, i) => {\n    const isRead = i < readSegmentsCount;\n    let startAngle = i * segmentAngle - Math.PI / 2 + gapSize / 2;\n    let endAngle = startAngle + segmentAngle - (segmentsCount > 1 ? gapSize : 0);\n\n    ctx.strokeStyle = isRead ? readSegmentColor : gradient;\n    ctx.lineWidth = (isRead ? STROKE_WIDTH_READ : STROKE_WIDTH) * strokeModifier;\n\n    if (withExtraGap) {\n      if (startAngle >= EXTRA_GAP_START && endAngle <= EXTRA_GAP_END) { // Segment is inside extra gap\n        return;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_END) { // Extra gap is inside segment\n        ctx.beginPath();\n        ctx.arc(centerCoordinate, centerCoordinate, radius, EXTRA_GAP_END, endAngle);\n        ctx.stroke();\n\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_START) { // Segment ends in extra gap\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_END && endAngle > EXTRA_GAP_END) { // Segment starts in extra gap\n        startAngle = EXTRA_GAP_END;\n      }\n    }\n\n    ctx.beginPath();\n    ctx.arc(centerCoordinate, centerCoordinate, radius, startAngle, endAngle);\n    ctx.stroke();\n  });\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiFakeType } from '../../api/types';\n\nimport useLang from '../../hooks/useLang';\n\nimport './FakeIcon.scss';\n\ntype OwnProps = {\n  fakeType: ApiFakeType;\n};\n\nconst FakeIcon: FC<OwnProps> = ({\n  fakeType,\n}) => {\n  const lang = useLang();\n\n  return (\n    <span className=\"FakeIcon\">\n      {lang(fakeType === 'fake' ? 'FakeMessage' : 'ScamMessage')}\n    </span>\n  );\n};\n\nexport default memo(FakeIcon);\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport './VerifiedIcon.scss';\n\nconst VerifiedIcon: FC = () => {\n  return (\n    <svg className=\"VerifiedIcon\" viewBox=\"0 0 24 24\">\n      <path d=\"M12.3 2.9c.1.1.2.1.3.2.7.6 1.3 1.1 2 1.7.3.2.6.4.9.4.9.1 1.7.2 2.6.2.5 0 .6.1.7.7.1.9.1 1.8.2 2.6 0 .4.2.7.4 1 .6.7 1.1 1.3 1.7 2 .3.4.3.5 0 .8-.5.6-1.1 1.3-1.6 1.9-.3.3-.5.7-.5 1.2-.1.8-.2 1.7-.2 2.5 0 .4-.2.5-.6.6-.8 0-1.6.1-2.5.2-.5 0-1 .2-1.4.5-.6.5-1.3 1.1-1.9 1.6-.3.3-.5.3-.8 0-.7-.6-1.4-1.2-2-1.8-.3-.2-.6-.4-.9-.4-.9-.1-1.8-.2-2.7-.2-.4 0-.5-.2-.6-.5 0-.9-.1-1.7-.2-2.6 0-.4-.2-.8-.4-1.1-.6-.6-1.1-1.3-1.6-2-.4-.4-.3-.5 0-1 .6-.6 1.1-1.3 1.7-1.9.3-.3.4-.6.4-1 0-.8.1-1.6.2-2.5 0-.5.1-.6.6-.6.9-.1 1.7-.1 2.6-.2.4 0 .7-.2 1-.4.7-.6 1.4-1.2 2.1-1.7.1-.2.3-.3.5-.2z\" style=\"fill: var(--color-fill)\" />\n      <path d=\"M16.4 10.1l-.2.2-5.4 5.4c-.1.1-.2.2-.4 0l-2.6-2.6c-.2-.2-.1-.3 0-.4.2-.2.5-.6.7-.6.3 0 .5.4.7.6l1.1 1.1c.2.2.3.2.5 0l4.3-4.3c.2-.2.4-.3.6 0 .1.2.3.3.4.5.2 0 .3.1.3.1z\" style=\"fill: var(--color-checkmark)\" />\n    </svg>\n  );\n};\n\nexport default VerifiedIcon;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QljEeKI5\",\"fullName\":\"AS54Cntu\",\"canCopy\":\"vr53L_9p\"};","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChat, ApiPeer, ApiUser } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { EMOJI_STATUS_LOOP_LIMIT } from '../../config';\nimport {\n  getChatTitle, getUserFullName, isAnonymousForwardsChat, isChatWithRepliesBot, isUserId,\n} from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport stopEvent from '../../util/stopEvent';\nimport renderText from './helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport CustomEmoji from './CustomEmoji';\nimport FakeIcon from './FakeIcon';\nimport PremiumIcon from './PremiumIcon';\nimport VerifiedIcon from './VerifiedIcon';\n\nimport styles from './FullNameTitle.module.scss';\n\ntype OwnProps = {\n  peer?: ApiPeer;\n  className?: string;\n  noVerified?: boolean;\n  noFake?: boolean;\n  withEmojiStatus?: boolean;\n  emojiStatusSize?: number;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  noLoopLimit?: boolean;\n  isUnknownUser?: boolean;\n  canCopyTitle?: boolean;\n  onEmojiStatusClick?: NoneToVoidFunction;\n  observeIntersection?: ObserveFn;\n  iconElement?: React.ReactNode;\n};\n\nconst FullNameTitle: FC<OwnProps> = ({\n  className,\n  peer,\n  noVerified,\n  noFake,\n  withEmojiStatus,\n  emojiStatusSize,\n  isSavedMessages,\n  isSavedDialog,\n  noLoopLimit,\n  canCopyTitle,\n  onEmojiStatusClick,\n  observeIntersection,\n  iconElement,\n  isUnknownUser,\n}) => {\n  const lang = useLang();\n  const { showNotification } = getActions();\n  const isUser = peer && isUserId(peer.id);\n  const isPremium = isUser && (peer as ApiUser).isPremium;\n\n  const title = useMemo(() => {\n    if (isUnknownUser) {\n      return lang('BoostingToBeDistributed');\n    }\n\n    if (peer && isUserId(peer.id)) {\n      return getUserFullName(peer as ApiUser);\n    }\n\n    return peer && getChatTitle(lang, peer as ApiChat);\n  }, [isUnknownUser, lang, peer]);\n\n  const handleTitleClick = useLastCallback((e) => {\n    if (!title || !canCopyTitle) {\n      return;\n    }\n\n    stopEvent(e);\n    copyTextToClipboard(title);\n    showNotification({ message: `${isUser ? 'User' : 'Chat'} name was copied` });\n  });\n\n  const specialTitle = useMemo(() => {\n    if (isSavedMessages) {\n      return lang(isSavedDialog ? 'MyNotes' : 'SavedMessages');\n    }\n\n    if (peer && isAnonymousForwardsChat(peer.id)) {\n      return lang('AnonymousForward');\n    }\n\n    if (peer && isChatWithRepliesBot(peer.id)) {\n      return lang('RepliesTitle');\n    }\n\n    return undefined;\n  }, [isSavedDialog, isSavedMessages, lang, peer]);\n\n  if (specialTitle) {\n    return (\n      <div className={buildClassName('title', styles.root, className)}>\n        <h3>{specialTitle}</h3>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName('title', styles.root, className)}>\n      <h3\n        dir=\"auto\"\n        role=\"button\"\n        className={buildClassName('fullName', styles.fullName, canCopyTitle && styles.canCopy)}\n        onClick={handleTitleClick}\n      >\n        {renderText(title || '')}\n      </h3>\n      {!iconElement && peer && (\n        <>\n          {!noVerified && peer?.isVerified && <VerifiedIcon />}\n          {!noFake && peer?.fakeType && <FakeIcon fakeType={peer.fakeType} />}\n          {withEmojiStatus && peer.emojiStatus && (\n            <CustomEmoji\n              documentId={peer.emojiStatus.documentId}\n              size={emojiStatusSize}\n              loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n              observeIntersectionForLoading={observeIntersection}\n              onClick={onEmojiStatusClick}\n            />\n          )}\n          {withEmojiStatus && !peer.emojiStatus && isPremium && <PremiumIcon />}\n        </>\n      )}\n      {iconElement}\n    </div>\n  );\n};\n\nexport default memo(FullNameTitle);\n","import type { AriaRole } from 'react';\nimport React from '../../lib/teact/teact';\n\nimport type { IconName } from '../../types/icons';\n\nimport buildClassName from '../../util/buildClassName';\n\ntype OwnProps = {\n  name: IconName;\n  className?: string;\n  style?: string;\n  role?: AriaRole;\n  ariaLabel?: string;\n};\n\nconst Icon = ({\n  name,\n  className,\n  style,\n  role,\n  ariaLabel,\n}: OwnProps) => {\n  return (\n    <i\n      className={buildClassName(`icon icon-${name}`, className)}\n      style={style}\n      aria-hidden={!ariaLabel}\n      aria-label={ariaLabel}\n      role={role}\n    />\n  );\n};\n\nexport default Icon;\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport './PremiumIcon.scss';\n\ntype OwnProps = {\n  withGradient?: boolean;\n  big?: boolean;\n  className?: string;\n  onClick?: VoidFunction;\n};\n\n// eslint-disable-next-line max-len\nconst STAR_PATH = 'M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z';\n\nconst PremiumIcon: FC<OwnProps> = ({\n  withGradient,\n  big,\n  className,\n  onClick,\n}) => {\n  const randomId = useUniqueId();\n\n  return (\n    <i\n      onClick={onClick}\n      className={buildClassName(\n        'PremiumIcon', className, withGradient && 'gradient', onClick && 'clickable', big && 'big',\n      )}\n      title=\"Premium\"\n    >\n      {withGradient ? (\n        <svg width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\">\n          <defs>\n            <linearGradient id={randomId} x1=\"3\" y1=\"63.5001\" x2=\"84.1475\" y2=\"-1.32262\" gradientUnits=\"userSpaceOnUse\">\n              <stop stop-color=\"#6B93FF\" />\n              <stop offset=\"0.439058\" stop-color=\"#976FFF\" />\n              <stop offset=\"1\" stop-color=\"#E46ACE\" />\n            </linearGradient>\n          </defs>\n          <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d={STAR_PATH} fill={`url(#${randomId})`} />\n        </svg>\n      ) : (\n        <svg width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\">\n          <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d={STAR_PATH} fill=\"var(--color-fill)\" />\n        </svg>\n      )}\n    </i>\n  );\n};\n\nexport default memo(PremiumIcon);\n","import type { ApiPeer, ApiPeerColor } from '../../../api/types';\n\nimport { getPeerColorCount, getPeerColorKey } from '../../../global/helpers';\n\nexport function getPeerColorClass(peer?: ApiPeer, noUserColors?: boolean, shouldReset?: boolean) {\n  if (!peer) {\n    if (!shouldReset) return undefined;\n    return noUserColors ? 'peer-color-count-1' : 'peer-color-0';\n  }\n  return noUserColors ? `peer-color-count-${getPeerColorCount(peer)}` : `peer-color-${getPeerColorKey(peer)}`;\n}\n\nexport function getApiPeerColorClass(color: ApiPeerColor) {\n  return `peer-color-${color.color}`;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat } from '../../api/types';\n\nimport { getUserFirstOrLastName } from '../../global/helpers';\nimport { selectCurrentChat, selectUser } from '../../global/selectors';\nimport renderText from '../common/helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  userId?: string;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  contactName?: string;\n};\n\nconst DeleteMemberModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  chat,\n  userId,\n  contactName,\n  onClose,\n}) => {\n  const { deleteChatMember } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteChatMember = useCallback(() => {\n    deleteChatMember({ chatId: chat!.id, userId: userId! });\n    onClose();\n  }, [chat, deleteChatMember, onClose, userId]);\n\n  if (!chat || !userId) {\n    return undefined;\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={onClose}\n      title={lang('GroupRemoved.Remove')}\n      textParts={renderText(lang('PeerInfo.Confirm.RemovePeer', contactName))}\n      confirmLabel={lang('lng_box_remove')}\n      confirmHandler={handleDeleteChatMember}\n      confirmIsDestructive\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const chat = selectCurrentChat(global);\n    const user = userId && selectUser(global, userId);\n    const contactName = user ? getUserFirstOrLastName(user) : undefined;\n\n    return {\n      chat,\n      contactName,\n    };\n  },\n)(DeleteMemberModal));\n","import type { GlobalState } from '../types';\n\nimport { getMainUsername, isChatBasicGroup } from '../helpers';\nimport { selectChat, selectChatFullInfo } from './chats';\nimport { selectUser } from './users';\n\nexport function selectChatGroupCall<T extends GlobalState>(global: T, chatId: string) {\n  const fullInfo = selectChatFullInfo(global, chatId);\n  if (!fullInfo || !fullInfo.groupCallId) return undefined;\n\n  return selectGroupCall(global, fullInfo.groupCallId);\n}\n\nexport function selectGroupCall<T extends GlobalState>(global: T, groupCallId: string) {\n  return global.groupCalls.byId[groupCallId];\n}\n\nexport function selectGroupCallParticipant<T extends GlobalState>(\n  global: T, groupCallId: string, participantId: string,\n) {\n  return selectGroupCall(global, groupCallId)?.participants[participantId];\n}\n\nexport function selectIsAdminInActiveGroupCall<T extends GlobalState>(global: T): boolean {\n  const chatId = selectActiveGroupCall(global)?.chatId;\n\n  if (!chatId) return false;\n\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  return (isChatBasicGroup(chat) && chat.isCreator) || Boolean(chat.adminRights?.manageCall);\n}\n\nexport function selectActiveGroupCall<T extends GlobalState>(global: T) {\n  const { groupCalls: { activeGroupCallId } } = global;\n  if (!activeGroupCallId) {\n    return undefined;\n  }\n\n  return selectGroupCall(global, activeGroupCallId);\n}\n\nexport function selectPhoneCallUser<T extends GlobalState>(global: T) {\n  const { phoneCall, currentUserId } = global;\n  if (!phoneCall || !phoneCall.participantId || !phoneCall.adminId) {\n    return undefined;\n  }\n\n  const id = phoneCall.adminId === currentUserId ? phoneCall.participantId : phoneCall.adminId;\n  return selectUser(global, id);\n}\n\nexport function selectCanInviteToActiveGroupCall<T extends GlobalState>(global: T) {\n  const groupCall = selectActiveGroupCall(global);\n\n  if (!groupCall || !groupCall.chatId) {\n    return false;\n  }\n\n  const chat = selectChat(global, groupCall.chatId);\n  if (!chat) {\n    return false;\n  }\n\n  const hasPublicUsername = Boolean(getMainUsername(chat));\n  if (hasPublicUsername) {\n    return true;\n  }\n\n  const inviteLink = selectChatFullInfo(global, chat.id)?.inviteLink;\n  return Boolean(inviteLink);\n}\n","import type { ApiLimitType, GlobalState } from '../types';\n\nimport { DEFAULT_LIMITS } from '../../config';\nimport { selectIsCurrentUserPremium } from './users';\n\nexport function selectCurrentLimit<T extends GlobalState>(global: T, limit: ApiLimitType) {\n  const { appConfig } = global;\n  if (!appConfig) {\n    return DEFAULT_LIMITS[limit][0];\n  }\n\n  const isPremium = selectIsCurrentUserPremium(global);\n  const { limits } = appConfig;\n\n  // When there are new limits when updating a layer, until we get a new configuration, we must use the default values\n  const value = limits[limit]?.[isPremium ? 1 : 0] ?? DEFAULT_LIMITS[limit][isPremium ? 1 : 0];\n  if (limit === 'dialogFilters') return value + 1; // Server does not count \"All\" as folder, but we need to\n  return value;\n}\n\nexport function selectPremiumLimit<T extends GlobalState>(global: T, limit: ApiLimitType) {\n  const { appConfig } = global;\n  if (!appConfig) return DEFAULT_LIMITS[limit][1];\n\n  const { limits } = appConfig;\n\n  return limits[limit][1];\n}\n","import { useEffect } from '../../lib/teact/teact';\n\nimport useLastCallback from '../useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(() => savedCallback(), delay);\n    if (!noFirst) savedCallback();\n\n    return () => clearInterval(id);\n  }, [delay, noFirst]);\n}\n\nexport default useInterval;\n","import type { RefObject } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\nimport type { Signal } from '../util/signals';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport {\n  IS_IOS,\n  IS_PWA, IS_TOUCH_ENV,\n} from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: RefObject<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n  getIsReady?: Signal<boolean>,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuPosition, setContextMenuPosition] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (contextMenuPosition) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuPosition({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuPosition(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap || (getIsReady && !getIsReady())) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuPosition || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuPosition({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [\n    contextMenuPosition, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink, getIsReady,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuPosition,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      if (!noScroll) {\n        requestParamsRef.current = { ...requestParamsRef.current, direction, offsetId };\n      }\n\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nexport default useInfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../types';\n\ninterface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  deltaX?: number;\n  topShiftY?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  anchor: IAnchorPosition | undefined,\n  getTriggerElement: () => HTMLElement | null,\n  getRootElement: () => HTMLElement | null,\n  getMenuElement: () => HTMLElement | null,\n  getLayout?: () => Layout,\n) {\n  const [positionX, setPositionX] = useState<'right' | 'left'>('right');\n  const [positionY, setPositionY] = useState<'top' | 'bottom'>('bottom');\n  const [transformOriginX, setTransformOriginX] = useState<number>();\n  const [transformOriginY, setTransformOriginY] = useState<number>();\n  const [withScroll, setWithScroll] = useState(false);\n  const [style, setStyle] = useState('');\n  const [menuStyle, setMenuStyle] = useState('opacity: 0;');\n\n  useEffect(() => {\n    const triggerEl = getTriggerElement();\n    if (!anchor || !triggerEl) {\n      return;\n    }\n\n    let { x, y } = anchor;\n    const anchorX = x;\n    const anchorY = y;\n\n    const menuEl = getMenuElement();\n    const rootEl = getRootElement();\n\n    const {\n      extraPaddingX = 0,\n      extraTopPadding = 0,\n      extraMarginTop = 0,\n      topShiftY = 0,\n      menuElMinWidth = 0,\n      deltaX = 0,\n      shouldAvoidNegativePosition = false,\n      withPortal = false,\n      isDense = false,\n    } = getLayout?.() || {};\n\n    const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop : undefined;\n    const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n    const menuRect = menuEl ? {\n      width: Math.max(menuElWidth, menuElMinWidth),\n      height: menuElHeight + marginTop!,\n    } : EMPTY_RECT;\n\n    const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n    let horizontalPosition: 'left' | 'right';\n    let verticalPosition: 'top' | 'bottom';\n    if (isDense || (x + menuRect.width + extraPaddingX < rootRect.width + rootRect.left)) {\n      x += 3;\n      horizontalPosition = 'left';\n    } else if (x - menuRect.width - rootRect.left > 0) {\n      horizontalPosition = 'right';\n      x -= 3;\n    } else {\n      horizontalPosition = 'left';\n      x = 16;\n    }\n    setPositionX(horizontalPosition);\n\n    x += deltaX;\n\n    const yWithTopShift = y + topShiftY;\n\n    if (isDense || (yWithTopShift + menuRect.height < rootRect.height + rootRect.top)) {\n      verticalPosition = 'top';\n      y = yWithTopShift;\n    } else {\n      verticalPosition = 'bottom';\n\n      if (y - menuRect.height < rootRect.top + extraTopPadding) {\n        y = rootRect.top + rootRect.height;\n      }\n    }\n\n    setPositionY(verticalPosition);\n\n    const triggerRect = triggerEl.getBoundingClientRect();\n\n    const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n    const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n    );\n    let left = (horizontalPosition === 'left'\n      ? (withPortal || shouldAvoidNegativePosition\n        ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n        : leftWithPossibleNegative)\n      : (x - triggerRect.left)) + addedXForPortalPositioning;\n    let top = y - triggerRect.top + addedYForPortalPositioning;\n\n    if (isDense) {\n      left = Math.min(left, rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n      top = Math.min(top, rootRect.height - menuRect.height - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n    }\n\n    // Avoid hiding external parts of menus on mobile devices behind the edges of the screen (ReactionSelector for example)\n    const addedXForMenuPositioning = menuElMinWidth ? Math.max(0, (menuElMinWidth - menuElWidth) / 2) : 0;\n    if (left - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n      left = addedXForMenuPositioning + MENU_POSITION_VISUAL_COMFORT_SPACE_PX;\n    }\n\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n\n    setWithScroll(menuMaxHeight < menuRect.height);\n    setMenuStyle(`max-height: ${menuMaxHeight}px;`);\n    setStyle(`left: ${left}px; top: ${top}px`);\n    const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n    const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n    setTransformOriginX(horizontalPosition === 'left' ? offsetX : menuRect.width + offsetX);\n    setTransformOriginY(verticalPosition === 'bottom' ? menuRect.height + offsetY : offsetY);\n  }, [\n    anchor, getMenuElement, getRootElement, getTriggerElement, getLayout,\n  ]);\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    menuStyle,\n    withScroll,\n  };\n}\n","import { useEffect, useLayoutEffect, useState } from '../../lib/teact/teact';\n\nimport { ElectronEvent } from '../../types/electron';\n\nimport { IS_IOS } from '../../util/windowEnvironment';\n\ntype RefType = {\n  current: HTMLVideoElement | null;\n};\n\ntype ReturnType = [boolean, () => void, () => void] | [false];\ntype CallbackType = (isPlayed: boolean) => void;\n\nconst prop = getBrowserFullscreenElementProp();\n\nexport default function useFullscreen(elRef: RefType, setIsPlayed: CallbackType): ReturnType {\n  const [isFullscreen, setIsFullscreen] = useState(Boolean(prop && document[prop]));\n\n  const setFullscreen = () => {\n    if (!elRef.current || !(prop || IS_IOS)) {\n      return;\n    }\n    safeRequestFullscreen(elRef.current);\n    setIsFullscreen(true);\n  };\n\n  const exitFullscreen = () => {\n    if (!elRef.current) {\n      return;\n    }\n    safeExitFullscreen();\n    setIsFullscreen(false);\n  };\n\n  useLayoutEffect(() => {\n    const video = elRef.current;\n    const listener = () => {\n      const isEnabled = Boolean(prop && document[prop]);\n      setIsFullscreen(isEnabled);\n      // In Firefox fullscreen video controls are not visible by default, so we force them manually\n      video!.controls = isEnabled;\n    };\n    const listenerEnter = () => { setIsFullscreen(true); };\n    const listenerExit = () => {\n      setIsFullscreen(false);\n      setIsPlayed(false);\n    };\n\n    document.addEventListener('fullscreenchange', listener, false);\n    document.addEventListener('webkitfullscreenchange', listener, false);\n    document.addEventListener('mozfullscreenchange', listener, false);\n\n    if (video) {\n      video.addEventListener('webkitbeginfullscreen', listenerEnter, false);\n      video.addEventListener('webkitendfullscreen', listenerExit, false);\n    }\n\n    return () => {\n      document.removeEventListener('fullscreenchange', listener, false);\n      document.removeEventListener('webkitfullscreenchange', listener, false);\n      document.removeEventListener('mozfullscreenchange', listener, false);\n      if (video) {\n        video.removeEventListener('webkitbeginfullscreen', listenerEnter, false);\n        video.removeEventListener('webkitendfullscreen', listenerExit, false);\n      }\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  if (!prop && !IS_IOS) {\n    return [false];\n  }\n\n  return [isFullscreen, setFullscreen, exitFullscreen];\n}\n\nexport const useFullscreenStatus = () => {\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  useEffect(() => {\n    const listener = () => {\n      setIsFullscreen(checkIfFullscreen());\n    };\n\n    const removeElectronListener = window.electron?.on(ElectronEvent.FULLSCREEN_CHANGE, setIsFullscreen);\n    window.electron?.isFullscreen().then(setIsFullscreen);\n\n    document.addEventListener('fullscreenchange', listener, false);\n    document.addEventListener('webkitfullscreenchange', listener, false);\n    document.addEventListener('mozfullscreenchange', listener, false);\n\n    return () => {\n      removeElectronListener?.();\n\n      document.removeEventListener('fullscreenchange', listener, false);\n      document.removeEventListener('webkitfullscreenchange', listener, false);\n      document.removeEventListener('mozfullscreenchange', listener, false);\n    };\n  }, []);\n\n  return isFullscreen;\n};\n\nfunction getBrowserFullscreenElementProp() {\n  if (typeof document.fullscreenElement !== 'undefined') {\n    return 'fullscreenElement';\n  } else if (typeof document.mozFullScreenElement !== 'undefined') {\n    return 'mozFullScreenElement';\n  } else if (typeof document.webkitFullscreenElement !== 'undefined') {\n    return 'webkitFullscreenElement';\n  }\n  return '';\n}\n\nexport function checkIfFullscreen() {\n  const fullscreenProp = getBrowserFullscreenElementProp();\n  return Boolean(fullscreenProp && document[fullscreenProp]);\n}\n\nexport function safeRequestFullscreen(video: HTMLVideoElement) {\n  if (video.requestFullscreen) {\n    video.requestFullscreen();\n  } else if (video.webkitRequestFullscreen) {\n    video.webkitRequestFullscreen();\n  } else if (video.webkitEnterFullscreen) {\n    video.webkitEnterFullscreen();\n  } else if (video.mozRequestFullScreen) {\n    video.mozRequestFullScreen();\n  }\n}\n\nexport function safeExitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitCancelFullScreen) {\n    document.webkitCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-param-reassign */\n/* eslint-disable prefer-const */\n/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\n\n/*\nSuperfast Blur - a fast Box Blur For Canvas\n\nVersion:     0.5\nAuthor:        Mario Klingemann\nContact:     mario@quasimondo.com\nWebsite:    http://www.quasimondo.com/BoxBlurForCanvas\nTwitter:    @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/140066/Superfast-Blur-a-pretty-fast-Box-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2011 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// eslint-disable-next-line max-len\nconst mul_table = [1, 57, 41, 21, 203, 34, 97, 73, 227, 91, 149, 62, 105, 45, 39, 137, 241, 107, 3, 173, 39, 71, 65, 238, 219, 101, 187, 87, 81, 151, 141, 133, 249, 117, 221, 209, 197, 187, 177, 169, 5, 153, 73, 139, 133, 127, 243, 233, 223, 107, 103, 99, 191, 23, 177, 171, 165, 159, 77, 149, 9, 139, 135, 131, 253, 245, 119, 231, 224, 109, 211, 103, 25, 195, 189, 23, 45, 175, 171, 83, 81, 79, 155, 151, 147, 9, 141, 137, 67, 131, 129, 251, 123, 30, 235, 115, 113, 221, 217, 53, 13, 51, 50, 49, 193, 189, 185, 91, 179, 175, 43, 169, 83, 163, 5, 79, 155, 19, 75, 147, 145, 143, 35, 69, 17, 67, 33, 65, 255, 251, 247, 243, 239, 59, 29, 229, 113, 111, 219, 27, 213, 105, 207, 51, 201, 199, 49, 193, 191, 47, 93, 183, 181, 179, 11, 87, 43, 85, 167, 165, 163, 161, 159, 157, 155, 77, 19, 75, 37, 73, 145, 143, 141, 35, 138, 137, 135, 67, 33, 131, 129, 255, 63, 250, 247, 61, 121, 239, 237, 117, 29, 229, 227, 225, 111, 55, 109, 216, 213, 211, 209, 207, 205, 203, 201, 199, 197, 195, 193, 48, 190, 47, 93, 185, 183, 181, 179, 178, 176, 175, 173, 171, 85, 21, 167, 165, 41, 163, 161, 5, 79, 157, 78, 154, 153, 19, 75, 149, 74, 147, 73, 144, 143, 71, 141, 140, 139, 137, 17, 135, 134, 133, 66, 131, 65, 129, 1];\n// eslint-disable-next-line max-len\nconst shg_table = [0, 9, 10, 10, 14, 12, 14, 14, 16, 15, 16, 15, 16, 15, 15, 17, 18, 17, 12, 18, 16, 17, 17, 19, 19, 18, 19, 18, 18, 19, 19, 19, 20, 19, 20, 20, 20, 20, 20, 20, 15, 20, 19, 20, 20, 20, 21, 21, 21, 20, 20, 20, 21, 18, 21, 21, 21, 21, 20, 21, 17, 21, 21, 21, 22, 22, 21, 22, 22, 21, 22, 21, 19, 22, 22, 19, 20, 22, 22, 21, 21, 21, 22, 22, 22, 18, 22, 22, 21, 22, 22, 23, 22, 20, 23, 22, 22, 23, 23, 21, 19, 21, 21, 21, 23, 23, 23, 22, 23, 23, 21, 23, 22, 23, 18, 22, 23, 20, 22, 23, 23, 23, 21, 22, 20, 22, 21, 22, 24, 24, 24, 24, 24, 22, 21, 24, 23, 23, 24, 21, 24, 23, 24, 22, 24, 24, 22, 24, 24, 22, 23, 24, 24, 24, 20, 23, 22, 23, 24, 24, 24, 24, 24, 24, 24, 23, 21, 23, 22, 23, 24, 24, 24, 22, 24, 24, 24, 23, 22, 24, 24, 25, 23, 25, 25, 23, 24, 25, 25, 24, 22, 25, 25, 25, 24, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23, 25, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 24, 22, 25, 25, 23, 25, 25, 20, 24, 25, 24, 25, 25, 22, 24, 25, 24, 25, 24, 25, 25, 24, 25, 25, 25, 25, 22, 25, 25, 25, 24, 25, 24, 25, 18];\n\nexport default function boxBlurCanvasRGB(context, top_x, top_y, width, height, radius, iterations) {\n  if (Number.isNaN(radius) || radius < 1) return;\n\n  radius |= 0;\n\n  if (Number.isNaN(iterations)) iterations = 1;\n  iterations |= 0;\n  if (iterations > 3) iterations = 3;\n  if (iterations < 1) iterations = 1;\n\n  const imageData = context.getImageData(top_x, top_y, width, height);\n\n  const pixels = imageData.data;\n\n  let rsum;\n  let gsum;\n  let bsum;\n  let x;\n  let y;\n  let i;\n  let p;\n  let p1;\n  let p2;\n  let yp;\n  let yi;\n  let yw;\n  let wm = width - 1;\n  let hm = height - 1;\n  let rad1 = radius + 1;\n\n  let r = [];\n  let g = [];\n  let b = [];\n\n  let mul_sum = mul_table[radius];\n  let shg_sum = shg_table[radius];\n\n  let vmin = [];\n  let vmax = [];\n\n  while (iterations-- > 0) {\n    yw = yi = 0;\n\n    for (y = 0; y < height; y++) {\n      rsum = pixels[yw] * rad1;\n      gsum = pixels[yw + 1] * rad1;\n      bsum = pixels[yw + 2] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        p = yw + (((i > wm ? wm : i)) << 2);\n        rsum += pixels[p++];\n        gsum += pixels[p++];\n        bsum += pixels[p++];\n      }\n\n      for (x = 0; x < width; x++) {\n        r[yi] = rsum;\n        g[yi] = gsum;\n        b[yi] = bsum;\n\n        if (y == 0) {\n          vmin[x] = ((p = x + rad1) < wm ? p : wm) << 2;\n          vmax[x] = ((p = x - radius) > 0 ? p << 2 : 0);\n        }\n\n        p1 = yw + vmin[x];\n        p2 = yw + vmax[x];\n\n        rsum += pixels[p1++] - pixels[p2++];\n        gsum += pixels[p1++] - pixels[p2++];\n        bsum += pixels[p1++] - pixels[p2++];\n\n        yi++;\n      }\n      yw += (width << 2);\n    }\n\n    for (x = 0; x < width; x++) {\n      yp = x;\n      rsum = r[yp] * rad1;\n      gsum = g[yp] * rad1;\n      bsum = b[yp] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        yp += (i > hm ? 0 : width);\n        rsum += r[yp];\n        gsum += g[yp];\n        bsum += b[yp];\n      }\n\n      yi = x << 2;\n      for (y = 0; y < height; y++) {\n        pixels[yi] = (rsum * mul_sum) >>> shg_sum;\n        pixels[yi + 1] = (gsum * mul_sum) >>> shg_sum;\n        pixels[yi + 2] = (bsum * mul_sum) >>> shg_sum;\n\n        if (x == 0) {\n          vmin[y] = ((p = y + rad1) < hm ? p : hm) * width;\n          vmax[y] = ((p = y - radius) > 0 ? p * width : 0);\n        }\n\n        p1 = x + vmin[y];\n        p2 = x + vmax[y];\n\n        rsum += r[p1] - r[p2];\n        gsum += g[p1] - g[p2];\n        bsum += b[p1] - b[p2];\n\n        yi += width << 2;\n      }\n    }\n  }\n\n  context.putImageData(imageData, top_x, top_y);\n}\n","export enum ElectronEvent {\n  FULLSCREEN_CHANGE = 'fullscreen-change',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_AVAILABLE = 'update-available',\n  DEEPLINK = 'deeplink',\n}\n\nexport enum ElectronAction {\n  GET_IS_FULLSCREEN = 'get-is-fullscreen',\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n  OPEN_NEW_WINDOW = 'open-new-window',\n  SET_WINDOW_TITLE = 'set-window-title',\n  SET_TRAFFIC_LIGHT_POSITION = 'set-traffic-light-position',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  RESTORE_LOCAL_STORAGE = 'restore-local-storage',\n}\n\nexport type TrafficLightPosition = 'standard' | 'lowered';\n\nexport interface ElectronApi {\n  isFullscreen: () => Promise<boolean>;\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n  openNewWindow: (url: string, title?: string) => Promise<void>;\n  setWindowTitle: (title?: string) => Promise<void>;\n  setTrafficLightPosition: (position: TrafficLightPosition) => Promise<void>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  restoreLocalStorage: () => Promise<void>;\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import forceReflow from './forceReflow';\nimport { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport function stopScrollInertia(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","import type React from '../lib/teact/teact';\n\nconst stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport default stopEvent;\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n"],"names":["cn","createClassNameBuilder","media","icon","memo","Avatar","className","size","peer","photo","text","isSavedMessages","isSavedDialog","isUnknownUser","withVideo","withStory","forPremiumPromo","withStoryGap","withStorySolid","forceFriendStorySolid","forceUnreadStorySolid","storyViewerOrigin","storyViewerMode","loopIndefinitely","noPersonalPhoto","onClick","openStoryViewer","getActions","ref","useRef","videoLoopCountRef","isPeerChat","user","undefined","chat","isDeleted","isDeletedUser","isReplies","isChatWithRepliesBot","id","isAnonymousForwards","isAnonymousForwardsChat","isForum","imageHash","videoHash","shouldLoadVideo","isVideo","shouldFetchBig","getChatAvatarHash","specialIcon","useMemo","imgBlobUrl","useMedia","ApiMediaFormat","BlobUrl","videoBlobUrl","hasBlobUrl","Boolean","shouldPlayVideo","transitionClassNames","useMediaTransition","handleVideoEnded","useLastCallback","e","video","currentTarget","current","style","display","lang","useLang","content","author","getUserFullName","getChatTitle","React","createElement","Icon","name","role","ariaLabel","Fragment","src","buildClassName","alt","decoding","draggable","OptimizedVideo","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","onEnded","userFullName","getFirstLetters","title","isUserId","isRoundedRect","hasStories","fullClassName","getPeerColorClass","hasUnreadStories","hasMedia","handleClick","handleMouseDown","useFastClick","stopPropagation","peerId","isSinglePeer","origin","getPeerStoryHtmlId","IS_TEST","onMouseDown","renderText","AvatarStoryCircle","withExtraGap","SIZES","micro","REM","tiny","mini","small","medium","large","giant","jumbo","BLUE","GREEN","PURPLE","STROKE_WIDTH","STROKE_WIDTH_READ","GAP_PERCENT","SEGMENTS_MAX","EXTRA_GAP_ANGLE","Math","PI","EXTRA_GAP_SIZE","GAP_PERCENT_EXTRA","EXTRA_GAP_START","EXTRA_GAP_END","withGlobal","global","peerStories","selectPeerStories","appTheme","selectTheme","byId","storyIds","orderedIds","lastReadId","dpr","useDevicePixelRatio","values","reduce","acc","total","read","isCloseFriend","length","some","story","isRead","isForCloseFriends","useLayoutEffect","drawGradientCircle","canvas","segmentsCount","color","readSegmentsCount","readSegmentColor","maxSize","round","strokeModifier","max","ctx","getContext","width","height","centerCoordinate","radius","segmentAngle","gapSize","gradient","createLinearGradient","ceil","cos","sin","colorStops","forEach","colorStop","index","addColorStop","lineCap","clearRect","Array","from","_","i","startAngle","endAngle","strokeStyle","lineWidth","beginPath","arc","stroke","FakeIcon","fakeType","VerifiedIcon","viewBox","d","FullNameTitle","noVerified","noFake","withEmojiStatus","emojiStatusSize","noLoopLimit","canCopyTitle","onEmojiStatusClick","observeIntersection","iconElement","showNotification","isUser","isPremium","handleTitleClick","stopEvent","copyTextToClipboard","message","specialTitle","styles","dir","isVerified","emojiStatus","CustomEmoji","documentId","loopLimit","EMOJI_STATUS_LOOP_LIMIT","observeIntersectionForLoading","PremiumIcon","STAR_PATH","withGradient","big","randomId","useUniqueId","fill","x1","y1","x2","y2","gradientUnits","offset","noUserColors","shouldReset","getPeerColorCount","getPeerColorKey","getApiPeerColorClass","userId","selectCurrentChat","selectUser","contactName","getUserFirstOrLastName","DeleteMemberModal","isOpen","onClose","deleteChatMember","handleDeleteChatMember","useCallback","chatId","ConfirmDialog","textParts","confirmLabel","confirmHandler","confirmIsDestructive","selectChatGroupCall","fullInfo","selectChatFullInfo","groupCallId","selectGroupCall","groupCalls","selectGroupCallParticipant","participantId","participants","selectIsAdminInActiveGroupCall","selectActiveGroupCall","selectChat","isChatBasicGroup","isCreator","adminRights","manageCall","activeGroupCallId","selectPhoneCallUser","phoneCall","currentUserId","adminId","selectCanInviteToActiveGroupCall","groupCall","getMainUsername","inviteLink","selectCurrentLimit","limit","appConfig","DEFAULT_LIMITS","selectIsCurrentUserPremium","limits","value","selectPremiumLimit","callback","delay","noFirst","savedCallback","useEffect","setInterval","clearInterval","stopImmediatePropagation","preventDefault","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","getIsReady","isContextMenuOpen","setIsContextMenuOpen","useState","contextMenuPosition","setContextMenuPosition","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","button","requestMutation","addExtraClass","target","handleContextMenu","removeExtraClass","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","IS_TOUCH_ENV","element","timer","clearLongPressTimer","clearTimeout","startLongPressTimer","window","setTimeout","originalEvent","touches","document","addEventListener","IS_IOS","IS_PWA","removeEventListener","capture","once","emulateContextMenuEvent","passive","handler","type","MouseButton","Main","getViewportSlice","sourceIds","direction","listSlice","offsetId","indexOf","indexForDirection","LoadMoreDirection","Forwards","to","newViewportIds","slice","areSomeLocal","areAllLocal","Backwards","newIsOnTop","useInfiniteScroll","loadMoreBackwards","listIds","isDisabled","requestParamsRef","currentStateRef","viewportIds","isOnTop","forceUpdate","useForceUpdate","prevListIds","usePrevious","prevIsDisabled","currentMiddleId","defaultOffsetId","includes","areSortedArraysEqual","getMore","noScroll","useLayoutEffectWithPrevDeps","cb","dependencies","debugKey","prevDepsRef","prevDeps","MENU_POSITION_VISUAL_COMFORT_SPACE_PX","MENU_POSITION_BOTTOM_MARGIN","EMPTY_RECT","left","top","useMenuPosition","anchor","getTriggerElement","getRootElement","getMenuElement","getLayout","positionX","setPositionX","positionY","setPositionY","transformOriginX","setTransformOriginX","transformOriginY","setTransformOriginY","withScroll","setWithScroll","setStyle","menuStyle","setMenuStyle","triggerEl","anchorX","anchorY","menuEl","rootEl","extraPaddingX","extraTopPadding","extraMarginTop","topShiftY","menuElMinWidth","deltaX","shouldAvoidNegativePosition","withPortal","isDense","marginTop","parseInt","getComputedStyle","offsetWidth","menuElWidth","offsetHeight","menuElHeight","menuRect","rootRect","getBoundingClientRect","horizontalPosition","verticalPosition","yWithTopShift","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","min","addedXForMenuPositioning","menuMaxHeight","offsetX","offsetY","prop","getBrowserFullscreenElementProp","useFullscreen","elRef","setIsPlayed","isFullscreen","setIsFullscreen","listener","isEnabled","controls","listenerEnter","listenerExit","setFullscreen","requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","mozRequestFullScreen","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","webkitExitFullscreen","useFullscreenStatus","fullscreenProp","checkIfFullscreen","removeElectronListener","electron","on","ElectronEvent","FULLSCREEN_CHANGE","then","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","mul_table","shg_table","boxBlurCanvasRGB","context","top_x","top_y","iterations","Number","isNaN","imageData","getImageData","pixels","data","rsum","gsum","bsum","p","p1","p2","yp","yi","yw","wm","hm","rad1","r","g","b","mul_sum","shg_sum","vmin","vmax","putImageData","counter","disableDirectTextInput","enableDirectTextInput","getIsDirectTextInputDisabled","stopScrollInertia","forceReflow","resetScroll","container","scrollTop","overflow","trapFocus","handleKeyDown","key","focusableElements","querySelectorAll","currentFocusedIndex","findIndex","em","isSameNode","activeElement","newFocusedIndex","shiftKey","focus"],"sourceRoot":""}