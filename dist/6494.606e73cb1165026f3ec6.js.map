{"version":3,"file":"6494.606e73cb1165026f3ec6.js","mappings":"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,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAE5qCC,EAAY,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,G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","sources":["webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/common/AvatarStoryCircle.tsx","webpack://telegram-t/./src/components/common/FakeIcon.tsx","webpack://telegram-t/./src/components/common/VerifiedIcon.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.module.scss?6448","webpack://telegram-t/./src/global/helpers/payments.ts","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/lib/fastBlur.js","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/util/hoc/freezeWhenClosed.ts","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/util/trapFocus.ts"],"sourcesContent":["import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer, ApiPhoto, ApiWebDocument,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer, StoryViewerOrigin } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getPeerStoryHtmlId,\n  getUserFullName,\n  getVideoProfilePhotoMediaHash,\n  getWebDocumentHash,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isDeletedUser,\n  isUserId,\n} from '../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { getFirstLetters } from '../../util/textFormat';\nimport { REM } from './helpers/mediaDimensions';\nimport { getPeerColorClass } from './helpers/peerColor';\nimport renderText from './helpers/renderText';\n\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransitionDeprecated from '../../hooks/useMediaTransitionDeprecated';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AvatarStoryCircle from './AvatarStoryCircle';\nimport Icon from './icons/Icon';\n\nimport './Avatar.scss';\n\nconst LOOP_COUNT = 3;\n\nexport const AVATAR_SIZES = {\n  micro: REM,\n  mini: 1.5 * REM,\n  tiny: 2 * REM,\n  small: 2.125 * REM,\n  medium: 2.75 * REM,\n  large: 3.375 * REM,\n  giant: 5.625 * REM,\n  jumbo: 7.5 * REM,\n};\n\nexport type AvatarSize =\n  'micro' | 'mini' | 'tiny' | 'small' | 'medium' | 'large' | 'giant' | 'jumbo' | number;\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  peer?: ApiPeer | CustomPeer;\n  photo?: ApiPhoto;\n  webPhoto?: ApiWebDocument;\n  previewUrl?: string;\n  text?: string;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  withVideo?: boolean;\n  withStory?: boolean;\n  forPremiumPromo?: boolean;\n  withStoryGap?: boolean;\n  withStorySolid?: boolean;\n  forceFriendStorySolid?: boolean;\n  forceUnreadStorySolid?: boolean;\n  storyViewerOrigin?: StoryViewerOrigin;\n  storyViewerMode?: 'full' | 'single-peer' | 'disabled';\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  peer,\n  photo,\n  webPhoto,\n  previewUrl,\n  text,\n  isSavedMessages,\n  isSavedDialog,\n  withVideo,\n  withStory,\n  forPremiumPromo,\n  withStoryGap,\n  withStorySolid,\n  forceFriendStorySolid,\n  forceUnreadStorySolid,\n  storyViewerOrigin,\n  storyViewerMode = 'single-peer',\n  loopIndefinitely,\n  noPersonalPhoto,\n  onClick,\n  onContextMenu,\n}) => {\n  const { openStoryViewer } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const videoLoopCountRef = useRef(0);\n  const isCustomPeer = peer && 'isCustomPeer' in peer;\n  const realPeer = peer && !isCustomPeer ? peer : undefined;\n  const user = realPeer && isApiPeerUser(realPeer) ? realPeer : undefined;\n  const chat = realPeer && isApiPeerChat(realPeer) ? realPeer : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = realPeer && isChatWithRepliesBot(realPeer.id);\n  const isAnonymousForwards = realPeer && isAnonymousForwardsChat(realPeer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const pxSize = typeof size === 'number' ? size : AVATAR_SIZES[size];\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const isBig = pxSize >= AVATAR_SIZES.jumbo;\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer as ApiPeer, isBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = getVideoProfilePhotoMediaHash(photo);\n      }\n    } else if (webPhoto) {\n      imageHash = getWebDocumentHash(webPhoto);\n    }\n  }\n\n  const specialIcon = useMemo(() => {\n    if (isCustomPeer) {\n      return peer.avatarIcon;\n    }\n\n    if (isSavedMessages) {\n      return isSavedDialog ? 'my-notes' : 'avatar-saved-messages';\n    }\n\n    if (isDeleted) {\n      return 'avatar-deleted-account';\n    }\n\n    if (isReplies) {\n      return 'reply-filled';\n    }\n\n    if (isAnonymousForwards) {\n      return 'author-hidden';\n    }\n\n    return undefined;\n  }, [isCustomPeer, isSavedMessages, isDeleted, isReplies, isAnonymousForwards, peer, isSavedDialog]);\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const imgUrl = imgBlobUrl || previewUrl;\n  const hasBlobUrl = Boolean(imgUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransitionDeprecated(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useOldLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (specialIcon) {\n    content = (\n      <Icon\n        name={specialIcon}\n        className={cn.icon}\n        role=\"img\"\n        ariaLabel={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n          draggable={false}\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            draggable={false}\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (isCustomPeer) {\n    const title = peer.title || lang(peer.titleKey!);\n    content = title && getFirstLetters(title, 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isRoundedRect = (isCustomPeer && peer.isAvatarSquare)\n  || (isForum && !((withStory || withStorySolid) && realPeer?.hasStories));\n  const isPremiumGradient = isCustomPeer && peer.withPremiumGradient;\n  const customColor = isCustomPeer && peer.customPeerAvatarColor;\n\n  const fullClassName = buildClassName(\n    'Avatar',\n    className,\n    getPeerColorClass(peer),\n    !peer && text && 'hidden-user',\n    isSavedMessages && 'saved-messages',\n    isAnonymousForwards && 'anonymous-forwards',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isPremiumGradient && 'premium-gradient-bg',\n    isRoundedRect && 'forum',\n    (photo || webPhoto) && 'force-fit',\n    ((withStory && realPeer?.hasStories) || forPremiumPromo) && 'with-story-circle',\n    withStorySolid && realPeer?.hasStories && 'with-story-solid',\n    withStorySolid && forceFriendStorySolid && 'close-friend',\n    withStorySolid && (realPeer?.hasUnreadStories || forceUnreadStorySolid) && 'has-unread-story',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgUrl) && 'no-photo',\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (withStory && storyViewerMode !== 'disabled' && realPeer?.hasStories) {\n      e.stopPropagation();\n\n      openStoryViewer({\n        peerId: realPeer.id,\n        isSinglePeer: storyViewerMode === 'single-peer',\n        origin: storyViewerOrigin,\n      });\n      return;\n    }\n\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      id={realPeer?.id && withStory ? getPeerStoryHtmlId(realPeer.id) : undefined}\n      data-peer-id={realPeer?.id}\n      data-test-sender-id={IS_TEST ? realPeer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      style={buildStyle(`--_size: ${pxSize}px;`, customColor && `--color-user: ${customColor}`)}\n      onClick={handleClick}\n      onContextMenu={onContextMenu}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"inner\">\n        {typeof content === 'string' ? renderText(content, [isBig ? 'hq_emoji' : 'emoji']) : content}\n      </div>\n      {withStory && realPeer?.hasStories && (\n        <AvatarStoryCircle peerId={realPeer.id} size={pxSize} withExtraGap={withStoryGap} />\n      )}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { ThemeKey } from '../../types';\n\nimport { selectPeerStories, selectTheme } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  peerId: string;\n  className?: string;\n  size: number;\n  withExtraGap?: boolean;\n}\n\ninterface StateProps {\n  peerStories?: Record<number, ApiTypeStory>;\n  storyIds?: number[];\n  lastReadId?: number;\n  appTheme: ThemeKey;\n}\n\nconst BLUE = ['#34C578', '#3CA3F3'];\nconst GREEN = ['#C9EB38', '#09C167'];\nconst PURPLE = ['#A667FF', '#55A5FF'];\nconst GRAY = '#C4C9CC';\nconst DARK_GRAY = '#737373';\nconst STROKE_WIDTH = 0.125 * REM;\nconst STROKE_WIDTH_READ = 0.0625 * REM;\nconst GAP_PERCENT = 2;\nconst SEGMENTS_MAX = 45; // More than this breaks rendering in Safari and Chrome\nconst LARGE_AVATAR_SIZE = 3.5 * REM;\n\nconst GAP_PERCENT_EXTRA = 10;\nconst EXTRA_GAP_ANGLE = Math.PI / 4;\nconst EXTRA_GAP_SIZE = (GAP_PERCENT_EXTRA / 100) * (2 * Math.PI);\nconst EXTRA_GAP_START = EXTRA_GAP_ANGLE - EXTRA_GAP_SIZE / 2;\nconst EXTRA_GAP_END = EXTRA_GAP_ANGLE + EXTRA_GAP_SIZE / 2;\n\nfunction AvatarStoryCircle({\n  size,\n  className,\n  peerStories,\n  storyIds,\n  lastReadId,\n  withExtraGap,\n  appTheme,\n}: OwnProps & StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  const dpr = useDevicePixelRatio();\n\n  const adaptedSize = size + STROKE_WIDTH;\n\n  const values = useMemo(() => {\n    return (storyIds || []).reduce((acc, id) => {\n      acc.total += 1;\n      if (lastReadId && id <= lastReadId) {\n        acc.read += 1;\n      }\n\n      return acc;\n    }, { total: 0, read: 0 });\n  }, [lastReadId, storyIds]);\n\n  const isCloseFriend = useMemo(() => {\n    if (!peerStories || !storyIds?.length) {\n      return false;\n    }\n\n    return storyIds.some((id) => {\n      const story = peerStories[id];\n      if (!story || !('isForCloseFriends' in story)) {\n        return false;\n      }\n      const isRead = lastReadId && story.id <= lastReadId;\n      return story.isForCloseFriends && !isRead;\n    });\n  }, [lastReadId, peerStories, storyIds]);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: ref.current,\n      size: adaptedSize * dpr,\n      segmentsCount: values.total,\n      color: isCloseFriend ? 'green' : 'blue',\n      readSegmentsCount: values.read,\n      withExtraGap,\n      readSegmentColor: appTheme === 'dark' ? DARK_GRAY : GRAY,\n      dpr,\n    });\n  }, [appTheme, isCloseFriend, adaptedSize, values.read, values.total, withExtraGap, dpr]);\n\n  if (!values.total) {\n    return undefined;\n  }\n\n  return (\n    <canvas\n      ref={ref}\n      className={buildClassName('story-circle', className)}\n      style={`max-width: ${adaptedSize}px; max-height: ${adaptedSize}px;`}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peerId }): StateProps => {\n  const peerStories = selectPeerStories(global, peerId);\n  const appTheme = selectTheme(global);\n\n  return {\n    peerStories: peerStories?.byId,\n    storyIds: peerStories?.orderedIds,\n    lastReadId: peerStories?.lastReadId,\n    appTheme,\n  };\n})(AvatarStoryCircle));\n\nexport function drawGradientCircle({\n  canvas,\n  size,\n  color,\n  segmentsCount,\n  readSegmentsCount = 0,\n  withExtraGap = false,\n  readSegmentColor,\n  dpr,\n}: {\n  canvas: HTMLCanvasElement;\n  size: number;\n  color: string;\n  segmentsCount: number;\n  readSegmentsCount?: number;\n  withExtraGap?: boolean;\n  readSegmentColor: string;\n  dpr: number;\n}) {\n  if (segmentsCount > SEGMENTS_MAX) {\n    readSegmentsCount = Math.round(readSegmentsCount * (SEGMENTS_MAX / segmentsCount));\n\n    segmentsCount = SEGMENTS_MAX;\n  }\n\n  const strokeModifier = Math.max(Math.max(size - LARGE_AVATAR_SIZE * dpr, 0) / dpr / REM / 1.5, 1) * dpr;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n\n  canvas.width = size;\n  canvas.height = size;\n  const centerCoordinate = size / 2;\n  const radius = (size - STROKE_WIDTH * strokeModifier) / 2;\n  const segmentAngle = (2 * Math.PI) / segmentsCount;\n  const gapSize = (GAP_PERCENT / 100) * (2 * Math.PI);\n  const gradient = ctx.createLinearGradient(\n    0,\n    0,\n    Math.ceil(size * Math.cos(Math.PI / 2)),\n    Math.ceil(size * Math.sin(Math.PI / 2)),\n  );\n\n  const colorStops = color === 'purple' ? PURPLE : color === 'green' ? GREEN : BLUE;\n  colorStops.forEach((colorStop, index) => {\n    gradient.addColorStop(index / (colorStops.length - 1), colorStop);\n  });\n\n  ctx.lineCap = 'round';\n  ctx.clearRect(0, 0, size, size);\n\n  Array.from({ length: segmentsCount }).forEach((_, i) => {\n    const isRead = i < readSegmentsCount;\n    let startAngle = i * segmentAngle - Math.PI / 2 + gapSize / 2;\n    let endAngle = startAngle + segmentAngle - (segmentsCount > 1 ? gapSize : 0);\n\n    ctx.strokeStyle = isRead ? readSegmentColor : gradient;\n    ctx.lineWidth = (isRead ? STROKE_WIDTH_READ : STROKE_WIDTH) * strokeModifier;\n\n    if (withExtraGap) {\n      if (startAngle >= EXTRA_GAP_START && endAngle <= EXTRA_GAP_END) { // Segment is inside extra gap\n        return;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_END) { // Extra gap is inside segment\n        ctx.beginPath();\n        ctx.arc(centerCoordinate, centerCoordinate, radius, EXTRA_GAP_END, endAngle);\n        ctx.stroke();\n\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_START) { // Segment ends in extra gap\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_END && endAngle > EXTRA_GAP_END) { // Segment starts in extra gap\n        startAngle = EXTRA_GAP_END;\n      }\n    }\n\n    ctx.beginPath();\n    ctx.arc(centerCoordinate, centerCoordinate, radius, startAngle, endAngle);\n    ctx.stroke();\n  });\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiFakeType } from '../../api/types';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport './FakeIcon.scss';\n\ntype OwnProps = {\n  fakeType: ApiFakeType;\n};\n\nconst FakeIcon: FC<OwnProps> = ({\n  fakeType,\n}) => {\n  const lang = useOldLang();\n\n  return (\n    <span className=\"FakeIcon\">\n      {lang(fakeType === 'fake' ? 'FakeMessage' : 'ScamMessage')}\n    </span>\n  );\n};\n\nexport default memo(FakeIcon);\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport './VerifiedIcon.scss';\n\nconst VerifiedIcon: FC = () => {\n  return (\n    <svg className=\"VerifiedIcon\" viewBox=\"0 0 24 24\">\n      <path d=\"M12.3 2.9c.1.1.2.1.3.2.7.6 1.3 1.1 2 1.7.3.2.6.4.9.4.9.1 1.7.2 2.6.2.5 0 .6.1.7.7.1.9.1 1.8.2 2.6 0 .4.2.7.4 1 .6.7 1.1 1.3 1.7 2 .3.4.3.5 0 .8-.5.6-1.1 1.3-1.6 1.9-.3.3-.5.7-.5 1.2-.1.8-.2 1.7-.2 2.5 0 .4-.2.5-.6.6-.8 0-1.6.1-2.5.2-.5 0-1 .2-1.4.5-.6.5-1.3 1.1-1.9 1.6-.3.3-.5.3-.8 0-.7-.6-1.4-1.2-2-1.8-.3-.2-.6-.4-.9-.4-.9-.1-1.8-.2-2.7-.2-.4 0-.5-.2-.6-.5 0-.9-.1-1.7-.2-2.6 0-.4-.2-.8-.4-1.1-.6-.6-1.1-1.3-1.6-2-.4-.4-.3-.5 0-1 .6-.6 1.1-1.3 1.7-1.9.3-.3.4-.6.4-1 0-.8.1-1.6.2-2.5 0-.5.1-.6.6-.6.9-.1 1.7-.1 2.6-.2.4 0 .7-.2 1-.4.7-.6 1.4-1.2 2.1-1.7.1-.2.3-.3.5-.2z\" style=\"fill: var(--color-fill)\" />\n      <path d=\"M16.4 10.1l-.2.2-5.4 5.4c-.1.1-.2.2-.4 0l-2.6-2.6c-.2-.2-.1-.3 0-.4.2-.2.5-.6.7-.6.3 0 .5.4.7.6l1.1 1.1c.2.2.3.2.5 0l4.3-4.3c.2-.2.4-.3.6 0 .1.2.3.3.4.5.2 0 .3.1.3.1z\" style=\"fill: var(--color-checkmark)\" />\n    </svg>\n  );\n};\n\nexport default VerifiedIcon;\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer } from '../../types';\n\nimport { EMOJI_STATUS_LOOP_LIMIT } from '../../config';\nimport {\n  getChatTitle,\n  getUserFullName,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isChatWithVerificationCodesBot,\n} from '../../global/helpers';\nimport { isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport stopEvent from '../../util/stopEvent';\nimport renderText from './helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Transition from '../ui/Transition';\nimport CustomEmoji from './CustomEmoji';\nimport FakeIcon from './FakeIcon';\nimport StarIcon from './icons/StarIcon';\nimport VerifiedIcon from './VerifiedIcon';\n\nimport styles from './FullNameTitle.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer | CustomPeer;\n  className?: string;\n  noVerified?: boolean;\n  noFake?: boolean;\n  withEmojiStatus?: boolean;\n  emojiStatusSize?: number;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  noLoopLimit?: boolean;\n  canCopyTitle?: boolean;\n  iconElement?: React.ReactNode;\n  onEmojiStatusClick?: NoneToVoidFunction;\n  observeIntersection?: ObserveFn;\n  statusSparklesColor?: string;\n};\n\nconst FullNameTitle: FC<OwnProps> = ({\n  className,\n  peer,\n  noVerified,\n  noFake,\n  withEmojiStatus,\n  emojiStatusSize,\n  isSavedMessages,\n  isSavedDialog,\n  noLoopLimit,\n  canCopyTitle,\n  iconElement,\n  statusSparklesColor,\n  onEmojiStatusClick,\n  observeIntersection,\n}) => {\n  const lang = useOldLang();\n  const { showNotification } = getActions();\n  const realPeer = 'id' in peer ? peer : undefined;\n  const customPeer = 'isCustomPeer' in peer ? peer : undefined;\n  const isUser = realPeer && isApiPeerUser(realPeer);\n  const title = realPeer && (isUser ? getUserFullName(realPeer) : getChatTitle(lang, realPeer));\n  const isPremium = (isUser && realPeer.isPremium) || customPeer?.isPremium;\n  const canShowEmojiStatus = withEmojiStatus && !isSavedMessages;\n  const emojiStatus = realPeer?.emojiStatus\n    || (customPeer?.emojiStatusId ? { type: 'regular', documentId: customPeer.emojiStatusId } : undefined);\n\n  const handleTitleClick = useLastCallback((e) => {\n    if (!title || !canCopyTitle) {\n      return;\n    }\n\n    stopEvent(e);\n    copyTextToClipboard(title);\n    showNotification({ message: `${isUser ? 'User' : 'Chat'} name was copied` });\n  });\n\n  const specialTitle = useMemo(() => {\n    if (customPeer) {\n      return renderText(customPeer.title || lang(customPeer.titleKey!));\n    }\n\n    if (isSavedMessages) {\n      return lang(isSavedDialog ? 'MyNotes' : 'SavedMessages');\n    }\n\n    if (isAnonymousForwardsChat(realPeer!.id)) {\n      return lang('AnonymousForward');\n    }\n\n    if (isChatWithRepliesBot(realPeer!.id)) {\n      return lang('RepliesTitle');\n    }\n\n    if (isChatWithVerificationCodesBot(realPeer!.id)) {\n      return lang('VerifyCodesNotifications');\n    }\n\n    return undefined;\n  }, [customPeer, isSavedDialog, isSavedMessages, lang, realPeer]);\n  const botVerificationIconId = realPeer?.botVerificationIconId;\n\n  return (\n    <div className={buildClassName('title', styles.root, className)}>\n      {botVerificationIconId && (\n        <CustomEmoji\n          documentId={botVerificationIconId}\n          size={emojiStatusSize}\n          loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n          observeIntersectionForLoading={observeIntersection}\n        />\n      )}\n      <h3\n        dir=\"auto\"\n        role=\"button\"\n        className={buildClassName(\n          'fullName',\n          styles.fullName,\n          canCopyTitle && styles.canCopy,\n        )}\n        onClick={handleTitleClick}\n      >\n        {specialTitle || renderText(title || '')}\n      </h3>\n      {!iconElement && peer && (\n        <>\n          {!noVerified && peer?.isVerified && <VerifiedIcon />}\n          {!noFake && peer?.fakeType && <FakeIcon fakeType={peer.fakeType} />}\n          {canShowEmojiStatus && emojiStatus && (\n            <Transition\n              className={styles.statusTransition}\n              slideClassName={styles.statusTransitionSlide}\n              activeKey={Number(emojiStatus.documentId)}\n              name=\"slideFade\"\n              direction={-1}\n              shouldCleanup\n            >\n              <CustomEmoji\n                forceAlways\n                className=\"no-selection\"\n                withSparkles={emojiStatus.type === 'collectible'}\n                sparklesClassName=\"statusSparkles\"\n                sparklesStyle={buildStyle(statusSparklesColor && `color: ${statusSparklesColor}`)}\n                documentId={emojiStatus.documentId}\n                size={emojiStatusSize}\n                loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n                observeIntersectionForLoading={observeIntersection}\n                onClick={onEmojiStatusClick}\n              />\n            </Transition>\n          )}\n          {canShowEmojiStatus && !emojiStatus && isPremium && <StarIcon />}\n        </>\n      )}\n      {iconElement}\n    </div>\n  );\n};\n\nexport default memo(FullNameTitle);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QljEeKI5\",\"statusTransition\":\"KBZgFSv7\",\"fullName\":\"AS54Cntu\",\"canCopy\":\"vr53L_9p\",\"statusTransitionSlide\":\"xmVxyvNy\"};","import type {\n  ApiInputInvoice,\n  ApiInputSavedStarGift,\n  ApiMessage,\n  ApiRequestInputInvoice,\n  ApiRequestInputSavedStarGift,\n  ApiStarsAmount,\n  ApiStarsTransaction,\n  ApiStarsTransactionPeer,\n  ApiStarsTransactionPeerPeer,\n} from '../../api/types';\nimport type { CustomPeer } from '../../types';\nimport type { LangFn } from '../../util/localization';\nimport type { GlobalState } from '../types';\n\nimport arePropsShallowEqual from '../../util/arePropsShallowEqual';\nimport { selectChat, selectPeer, selectUser } from '../selectors';\n\nexport function getRequestInputInvoice<T extends GlobalState>(\n  global: T, inputInvoice: ApiInputInvoice,\n): ApiRequestInputInvoice | undefined {\n  if (inputInvoice.type === 'slug') return inputInvoice;\n\n  if (inputInvoice.type === 'stargiftResale') {\n    const {\n      slug,\n      peerId,\n    } = inputInvoice;\n    const peer = selectPeer(global, peerId);\n\n    if (!peer) return undefined;\n\n    return {\n      type: 'stargiftResale',\n      slug,\n      peer,\n    };\n  }\n\n  if (inputInvoice.type === 'stargift') {\n    const {\n      peerId, shouldHideName, giftId, message, shouldUpgrade,\n    } = inputInvoice;\n    const peer = selectPeer(global, peerId);\n\n    if (!peer) return undefined;\n\n    return {\n      type: 'stargift',\n      peer,\n      shouldHideName,\n      giftId,\n      message,\n      shouldUpgrade,\n    };\n  }\n\n  if (inputInvoice.type === 'starsgift') {\n    const {\n      userId, stars, amount, currency,\n    } = inputInvoice;\n    const user = selectUser(global, userId);\n\n    if (!user) return undefined;\n\n    return {\n      type: 'stars',\n      purpose: {\n        type: 'starsgift',\n        user,\n        stars,\n        amount,\n        currency,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'stars') {\n    const {\n      stars, amount, currency,\n    } = inputInvoice;\n\n    return {\n      type: 'stars',\n      purpose: {\n        type: 'stars',\n        stars,\n        amount,\n        currency,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'chatInviteSubscription') {\n    const { hash } = inputInvoice;\n\n    return {\n      type: 'chatInviteSubscription',\n      hash,\n    };\n  }\n\n  if (inputInvoice.type === 'message') {\n    const chat = selectChat(global, inputInvoice.chatId);\n    if (!chat) {\n      return undefined;\n    }\n    return {\n      type: 'message',\n      chat,\n      messageId: inputInvoice.messageId,\n    };\n  }\n\n  if (inputInvoice.type === 'premiumGiftStars') {\n    const {\n      months, userId, message,\n    } = inputInvoice;\n    const user = selectUser(global, userId);\n\n    if (!user) return undefined;\n\n    return {\n      type: 'premiumGiftStars',\n      months,\n      message,\n      user,\n    };\n  }\n\n  if (inputInvoice.type === 'giftcode') {\n    const {\n      userIds, boostChannelId, amount, currency, option, message,\n    } = inputInvoice;\n    const users = userIds.map((id) => selectUser(global, id)).filter(Boolean);\n    const boostChannel = boostChannelId ? selectChat(global, boostChannelId) : undefined;\n\n    return {\n      type: 'giveaway',\n      option,\n      purpose: {\n        type: 'giftcode',\n        amount,\n        currency,\n        users,\n        boostChannel,\n        message,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'starsgiveaway') {\n    const {\n      chatId, additionalChannelIds, amount, currency, untilDate, areWinnersVisible, countries,\n      isOnlyForNewSubscribers, prizeDescription, stars, users,\n    } = inputInvoice;\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return undefined;\n    }\n    const additionalChannels = additionalChannelIds?.map((id) => selectChat(global, id)).filter(Boolean);\n\n    return {\n      type: 'starsgiveaway',\n      purpose: {\n        type: 'starsgiveaway',\n        amount,\n        currency,\n        chat,\n        additionalChannels,\n        untilDate,\n        areWinnersVisible,\n        countries,\n        isOnlyForNewSubscribers,\n        prizeDescription,\n        stars,\n        users,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'giveaway') {\n    const {\n      chatId, additionalChannelIds, amount, currency, option, untilDate, areWinnersVisible, countries,\n      isOnlyForNewSubscribers, prizeDescription,\n    } = inputInvoice;\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return undefined;\n    }\n    const additionalChannels = additionalChannelIds?.map((id) => selectChat(global, id)).filter(Boolean);\n\n    return {\n      type: 'giveaway',\n      option,\n      purpose: {\n        type: 'giveaway',\n        amount,\n        currency,\n        chat,\n        additionalChannels,\n        untilDate,\n        areWinnersVisible,\n        countries,\n        isOnlyForNewSubscribers,\n        prizeDescription,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftUpgrade') {\n    const { inputSavedGift, shouldKeepOriginalDetails } = inputInvoice;\n    const savedGift = getRequestInputSavedStarGift(global, inputSavedGift);\n    if (!savedGift) return undefined;\n\n    return {\n      type: 'stargiftUpgrade',\n      inputSavedGift: savedGift,\n      shouldKeepOriginalDetails,\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftTransfer') {\n    const { inputSavedGift, recipientId } = inputInvoice;\n    const savedGift = getRequestInputSavedStarGift(global, inputSavedGift);\n    const peer = selectPeer(global, recipientId);\n    if (!savedGift || !peer) return undefined;\n\n    return {\n      type: 'stargiftTransfer',\n      inputSavedGift: savedGift,\n      recipient: peer,\n    };\n  }\n\n  return undefined;\n}\n\nexport function getRequestInputSavedStarGift<T extends GlobalState>(\n  global: T, inputGift: ApiInputSavedStarGift,\n): ApiRequestInputSavedStarGift | undefined {\n  if (inputGift.type === 'user') return inputGift;\n\n  if (inputGift.type === 'chat') {\n    const chat = selectChat(global, inputGift.chatId);\n    if (!chat) return undefined;\n\n    return {\n      type: 'chat',\n      chat,\n      savedId: inputGift.savedId,\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildStarsTransactionCustomPeer(\n  peer: Exclude<ApiStarsTransactionPeer, ApiStarsTransactionPeerPeer>,\n): CustomPeer {\n  if (peer.type === 'appStore') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.AppleTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.AppleTopUp.Subtitle',\n      peerColorId: 5,\n    };\n  }\n\n  if (peer.type === 'playMarket') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.GoogleTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.GoogleTopUp.Subtitle',\n      peerColorId: 3,\n    };\n  }\n\n  if (peer.type === 'fragment') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.FragmentTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.FragmentTopUp.Subtitle',\n      customPeerAvatarColor: '#000000',\n    };\n  }\n\n  if (peer.type === 'premiumBot') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.PremiumBotTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.PremiumBotTopUp.Subtitle',\n      peerColorId: 1,\n      withPremiumGradient: true,\n    };\n  }\n\n  if (peer.type === 'ads') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.TelegramAds.Title',\n      subtitleKey: 'Stars.Intro.Transaction.TelegramAds.Subtitle',\n      peerColorId: 2,\n    };\n  }\n\n  if (peer.type === 'api') {\n    return {\n      avatarIcon: 'bots',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.TelegramBotApi.Title',\n      subtitleKey: 'Stars.Intro.Transaction.TelegramBotApi.Subtitle',\n      peerColorId: 4,\n    };\n  }\n\n  return {\n    avatarIcon: 'star',\n    isCustomPeer: true,\n    titleKey: 'Stars.Intro.Transaction.Unsupported.Title',\n    subtitleKey: 'Stars.Intro.Transaction.Unsupported.Title',\n    peerColorId: 0,\n  };\n}\n\nexport function formatStarsTransactionAmount(lang: LangFn, starsAmount: ApiStarsAmount) {\n  const amount = starsAmount.amount + starsAmount.nanos / 1e9;\n  if (amount < 0) {\n    return `- ${lang.number(Math.abs(amount))}`;\n  }\n\n  return `+ ${lang.number(amount)}`;\n}\n\nexport function formatStarsAmount(lang: LangFn, starsAmount: ApiStarsAmount) {\n  return lang.number(starsAmount.amount + starsAmount.nanos / 1e9);\n}\n\nexport function getStarsTransactionFromGift(message: ApiMessage): ApiStarsTransaction | undefined {\n  const { action } = message.content;\n\n  if (action?.type !== 'giftStars') return undefined;\n\n  const { transactionId, stars } = action;\n\n  return {\n    id: transactionId,\n    stars: {\n      amount: stars,\n      nanos: 0,\n    },\n    peer: {\n      type: 'peer',\n      id: message.isOutgoing ? message.chatId : (message.senderId || message.chatId),\n    },\n    date: message.date,\n    isGift: true,\n    isMyGift: message.isOutgoing || undefined,\n  };\n}\n\nexport function getPrizeStarsTransactionFromGiveaway(message: ApiMessage): ApiStarsTransaction | undefined {\n  const { action } = message.content;\n\n  if (action?.type !== 'prizeStars') return undefined;\n\n  const { transactionId, stars, boostPeerId } = action;\n\n  return {\n    id: transactionId,\n    stars: {\n      amount: stars,\n      nanos: 0,\n    },\n    peer: {\n      type: 'peer',\n      id: boostPeerId,\n    },\n    date: message.date,\n    giveawayPostId: message.id,\n  };\n}\n\nexport function areInputSavedGiftsEqual(one: ApiInputSavedStarGift, two: ApiInputSavedStarGift) {\n  return arePropsShallowEqual(one, two);\n}\n","import type { RefObject } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\nimport type { Signal } from '../util/signals';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: RefObject<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n  getIsReady?: Signal<boolean>,\n  shouldDisablePropagation?: boolean,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap || (getIsReady && !getIsReady())) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink, getIsReady,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePreviousDeprecated from './usePreviousDeprecated';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?, number?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean; offset: number } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n      fromOffset,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevListIds = usePreviousDeprecated(listIds);\n  const prevIsDisabled = usePreviousDeprecated(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop, fromOffset } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop, fromOffset,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      if (!noScroll) {\n        requestParamsRef.current = { ...requestParamsRef.current, direction, offsetId };\n      }\n\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, currentStateRef.current?.offset];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n    fromOffset: from,\n  };\n}\n\nexport default useInfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-param-reassign */\n/* eslint-disable prefer-const */\n/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\n\n/*\nSuperfast Blur - a fast Box Blur For Canvas\n\nVersion:     0.5\nAuthor:        Mario Klingemann\nContact:     mario@quasimondo.com\nWebsite:    http://www.quasimondo.com/BoxBlurForCanvas\nTwitter:    @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/140066/Superfast-Blur-a-pretty-fast-Box-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2011 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// eslint-disable-next-line max-len\nconst mul_table = [1, 57, 41, 21, 203, 34, 97, 73, 227, 91, 149, 62, 105, 45, 39, 137, 241, 107, 3, 173, 39, 71, 65, 238, 219, 101, 187, 87, 81, 151, 141, 133, 249, 117, 221, 209, 197, 187, 177, 169, 5, 153, 73, 139, 133, 127, 243, 233, 223, 107, 103, 99, 191, 23, 177, 171, 165, 159, 77, 149, 9, 139, 135, 131, 253, 245, 119, 231, 224, 109, 211, 103, 25, 195, 189, 23, 45, 175, 171, 83, 81, 79, 155, 151, 147, 9, 141, 137, 67, 131, 129, 251, 123, 30, 235, 115, 113, 221, 217, 53, 13, 51, 50, 49, 193, 189, 185, 91, 179, 175, 43, 169, 83, 163, 5, 79, 155, 19, 75, 147, 145, 143, 35, 69, 17, 67, 33, 65, 255, 251, 247, 243, 239, 59, 29, 229, 113, 111, 219, 27, 213, 105, 207, 51, 201, 199, 49, 193, 191, 47, 93, 183, 181, 179, 11, 87, 43, 85, 167, 165, 163, 161, 159, 157, 155, 77, 19, 75, 37, 73, 145, 143, 141, 35, 138, 137, 135, 67, 33, 131, 129, 255, 63, 250, 247, 61, 121, 239, 237, 117, 29, 229, 227, 225, 111, 55, 109, 216, 213, 211, 209, 207, 205, 203, 201, 199, 197, 195, 193, 48, 190, 47, 93, 185, 183, 181, 179, 178, 176, 175, 173, 171, 85, 21, 167, 165, 41, 163, 161, 5, 79, 157, 78, 154, 153, 19, 75, 149, 74, 147, 73, 144, 143, 71, 141, 140, 139, 137, 17, 135, 134, 133, 66, 131, 65, 129, 1];\n// eslint-disable-next-line max-len\nconst shg_table = [0, 9, 10, 10, 14, 12, 14, 14, 16, 15, 16, 15, 16, 15, 15, 17, 18, 17, 12, 18, 16, 17, 17, 19, 19, 18, 19, 18, 18, 19, 19, 19, 20, 19, 20, 20, 20, 20, 20, 20, 15, 20, 19, 20, 20, 20, 21, 21, 21, 20, 20, 20, 21, 18, 21, 21, 21, 21, 20, 21, 17, 21, 21, 21, 22, 22, 21, 22, 22, 21, 22, 21, 19, 22, 22, 19, 20, 22, 22, 21, 21, 21, 22, 22, 22, 18, 22, 22, 21, 22, 22, 23, 22, 20, 23, 22, 22, 23, 23, 21, 19, 21, 21, 21, 23, 23, 23, 22, 23, 23, 21, 23, 22, 23, 18, 22, 23, 20, 22, 23, 23, 23, 21, 22, 20, 22, 21, 22, 24, 24, 24, 24, 24, 22, 21, 24, 23, 23, 24, 21, 24, 23, 24, 22, 24, 24, 22, 24, 24, 22, 23, 24, 24, 24, 20, 23, 22, 23, 24, 24, 24, 24, 24, 24, 24, 23, 21, 23, 22, 23, 24, 24, 24, 22, 24, 24, 24, 23, 22, 24, 24, 25, 23, 25, 25, 23, 24, 25, 25, 24, 22, 25, 25, 25, 24, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23, 25, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 24, 22, 25, 25, 23, 25, 25, 20, 24, 25, 24, 25, 25, 22, 24, 25, 24, 25, 24, 25, 25, 24, 25, 25, 25, 25, 22, 25, 25, 25, 24, 25, 24, 25, 18];\n\nexport default function boxBlurCanvasRGB(context, top_x, top_y, width, height, radius, iterations) {\n  if (Number.isNaN(radius) || radius < 1) return;\n\n  radius |= 0;\n\n  if (Number.isNaN(iterations)) iterations = 1;\n  iterations |= 0;\n  if (iterations > 3) iterations = 3;\n  if (iterations < 1) iterations = 1;\n\n  const imageData = context.getImageData(top_x, top_y, width, height);\n\n  const pixels = imageData.data;\n\n  let rsum;\n  let gsum;\n  let bsum;\n  let x;\n  let y;\n  let i;\n  let p;\n  let p1;\n  let p2;\n  let yp;\n  let yi;\n  let yw;\n  let wm = width - 1;\n  let hm = height - 1;\n  let rad1 = radius + 1;\n\n  let r = [];\n  let g = [];\n  let b = [];\n\n  let mul_sum = mul_table[radius];\n  let shg_sum = shg_table[radius];\n\n  let vmin = [];\n  let vmax = [];\n\n  while (iterations-- > 0) {\n    yw = yi = 0;\n\n    for (y = 0; y < height; y++) {\n      rsum = pixels[yw] * rad1;\n      gsum = pixels[yw + 1] * rad1;\n      bsum = pixels[yw + 2] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        p = yw + (((i > wm ? wm : i)) << 2);\n        rsum += pixels[p++];\n        gsum += pixels[p++];\n        bsum += pixels[p++];\n      }\n\n      for (x = 0; x < width; x++) {\n        r[yi] = rsum;\n        g[yi] = gsum;\n        b[yi] = bsum;\n\n        if (y == 0) {\n          vmin[x] = ((p = x + rad1) < wm ? p : wm) << 2;\n          vmax[x] = ((p = x - radius) > 0 ? p << 2 : 0);\n        }\n\n        p1 = yw + vmin[x];\n        p2 = yw + vmax[x];\n\n        rsum += pixels[p1++] - pixels[p2++];\n        gsum += pixels[p1++] - pixels[p2++];\n        bsum += pixels[p1++] - pixels[p2++];\n\n        yi++;\n      }\n      yw += (width << 2);\n    }\n\n    for (x = 0; x < width; x++) {\n      yp = x;\n      rsum = r[yp] * rad1;\n      gsum = g[yp] * rad1;\n      bsum = b[yp] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        yp += (i > hm ? 0 : width);\n        rsum += r[yp];\n        gsum += g[yp];\n        bsum += b[yp];\n      }\n\n      yi = x << 2;\n      for (y = 0; y < height; y++) {\n        pixels[yi] = (rsum * mul_sum) >>> shg_sum;\n        pixels[yi + 1] = (gsum * mul_sum) >>> shg_sum;\n        pixels[yi + 2] = (bsum * mul_sum) >>> shg_sum;\n\n        if (x == 0) {\n          vmin[y] = ((p = y + rad1) < hm ? p : hm) * width;\n          vmax[y] = ((p = y - radius) > 0 ? p * width : 0);\n        }\n\n        p1 = x + vmin[y];\n        p2 = x + vmax[y];\n\n        rsum += r[p1] - r[p2];\n        gsum += g[p1] - g[p2];\n        bsum += b[p1] - b[p2];\n\n        yi += width << 2;\n      }\n    }\n  }\n\n  context.putImageData(imageData, top_x, top_y);\n}\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import { type FC, type Props, useRef } from '../../lib/teact/teact';\n\ntype InjectProps<T extends FC, P extends Props> = FC<Parameters<T>[0] & P>;\n\ntype OwnProps = {\n  ignoreFreeze?: boolean;\n};\n\nexport default function freezeWhenClosed<T extends FC>(Component: T): InjectProps<T, OwnProps> {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.ignoreFreeze) return Component(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { IS_IOS } from './browser/windowEnvironment';\nimport forceReflow from './forceReflow';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport function stopScrollInertia(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n"],"names":["AVATAR_SIZES","micro","REM","mini","tiny","small","medium","large","giant","jumbo","cn","createClassNameBuilder","media","icon","memo","Avatar","className","size","peer","photo","webPhoto","previewUrl","text","isSavedMessages","isSavedDialog","withVideo","withStory","forPremiumPromo","withStoryGap","withStorySolid","forceFriendStorySolid","forceUnreadStorySolid","storyViewerOrigin","storyViewerMode","loopIndefinitely","noPersonalPhoto","onClick","onContextMenu","openStoryViewer","getActions","ref","useRef","videoLoopCountRef","isCustomPeer","realPeer","undefined","user","isApiPeerUser","chat","isApiPeerChat","isDeleted","isDeletedUser","isReplies","isChatWithRepliesBot","id","isAnonymousForwards","isAnonymousForwardsChat","isForum","imageHash","videoHash","pxSize","shouldLoadVideo","isVideo","isBig","getChatAvatarHash","getVideoProfilePhotoMediaHash","getWebDocumentHash","specialIcon","useMemo","avatarIcon","imgBlobUrl","useMedia","ApiMediaFormat","BlobUrl","videoBlobUrl","imgUrl","hasBlobUrl","Boolean","shouldPlayVideo","transitionClassNames","useMediaTransitionDeprecated","handleVideoEnded","useLastCallback","e","video","currentTarget","current","style","display","lang","useOldLang","content","author","getUserFullName","getChatTitle","React","createElement","Icon","name","role","ariaLabel","Fragment","src","buildClassName","alt","decoding","draggable","OptimizedVideo","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","onEnded","userFullName","getFirstLetters","title","isUserId","titleKey","isRoundedRect","isAvatarSquare","hasStories","isPremiumGradient","withPremiumGradient","customColor","customPeerAvatarColor","fullClassName","getPeerColorClass","hasUnreadStories","hasMedia","handleClick","handleMouseDown","useFastClick","stopPropagation","peerId","isSinglePeer","origin","getPeerStoryHtmlId","IS_TEST","buildStyle","onMouseDown","renderText","AvatarStoryCircle","withExtraGap","BLUE","GREEN","PURPLE","STROKE_WIDTH","STROKE_WIDTH_READ","GAP_PERCENT","SEGMENTS_MAX","LARGE_AVATAR_SIZE","EXTRA_GAP_ANGLE","Math","PI","EXTRA_GAP_SIZE","GAP_PERCENT_EXTRA","EXTRA_GAP_START","EXTRA_GAP_END","withGlobal","global","peerStories","selectPeerStories","appTheme","selectTheme","byId","storyIds","orderedIds","lastReadId","dpr","useDevicePixelRatio","adaptedSize","values","reduce","acc","total","read","isCloseFriend","length","some","story","isRead","isForCloseFriends","useLayoutEffect","drawGradientCircle","canvas","segmentsCount","color","readSegmentsCount","readSegmentColor","round","strokeModifier","max","ctx","getContext","width","height","centerCoordinate","radius","segmentAngle","gapSize","gradient","createLinearGradient","ceil","cos","sin","colorStops","forEach","colorStop","index","addColorStop","lineCap","clearRect","Array","from","_","i","startAngle","endAngle","strokeStyle","lineWidth","beginPath","arc","stroke","FakeIcon","fakeType","VerifiedIcon","viewBox","d","FullNameTitle","noVerified","noFake","withEmojiStatus","emojiStatusSize","noLoopLimit","canCopyTitle","iconElement","statusSparklesColor","onEmojiStatusClick","observeIntersection","showNotification","customPeer","isUser","isPremium","canShowEmojiStatus","emojiStatus","emojiStatusId","type","documentId","handleTitleClick","stopEvent","copyTextToClipboard","message","specialTitle","isChatWithVerificationCodesBot","botVerificationIconId","CustomEmoji","loopLimit","EMOJI_STATUS_LOOP_LIMIT","observeIntersectionForLoading","dir","isVerified","Transition","slideClassName","activeKey","Number","direction","shouldCleanup","forceAlways","withSparkles","sparklesClassName","sparklesStyle","StarIcon","getRequestInputInvoice","inputInvoice","slug","selectPeer","shouldHideName","giftId","shouldUpgrade","userId","stars","amount","currency","selectUser","purpose","hash","selectChat","chatId","messageId","months","userIds","boostChannelId","option","users","map","filter","boostChannel","additionalChannelIds","untilDate","areWinnersVisible","countries","isOnlyForNewSubscribers","prizeDescription","additionalChannels","inputSavedGift","shouldKeepOriginalDetails","savedGift","getRequestInputSavedStarGift","recipientId","recipient","inputGift","savedId","buildStarsTransactionCustomPeer","subtitleKey","peerColorId","formatStarsTransactionAmount","starsAmount","nanos","number","abs","formatStarsAmount","getStarsTransactionFromGift","action","transactionId","isOutgoing","senderId","date","isGift","isMyGift","getPrizeStarsTransactionFromGiveaway","boostPeerId","giveawayPostId","areInputSavedGiftsEqual","one","two","arePropsShallowEqual","stopImmediatePropagation","preventDefault","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","getIsReady","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","useState","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","button","requestMutation","addExtraClass","target","handleContextMenu","removeExtraClass","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","useEffect","IS_TOUCH_ENV","element","timer","clearLongPressTimer","clearTimeout","startLongPressTimer","window","setTimeout","originalEvent","touches","document","addEventListener","IS_IOS","IS_PWA","removeEventListener","capture","once","emulateContextMenuEvent","passive","callback","handler","MouseButton","Main","getViewportSlice","sourceIds","listSlice","offsetId","indexOf","indexForDirection","LoadMoreDirection","Forwards","to","newViewportIds","slice","areSomeLocal","areAllLocal","Backwards","newIsOnTop","fromOffset","useInfiniteScroll","loadMoreBackwards","listIds","isDisabled","requestParamsRef","currentStateRef","viewportIds","isOnTop","offset","forceUpdate","useForceUpdate","prevListIds","usePreviousDeprecated","prevIsDisabled","currentMiddleId","defaultOffsetId","includes","areSortedArraysEqual","getMore","noScroll","useLayoutEffectWithPrevDeps","cb","dependencies","debugKey","prevDepsRef","prevDeps","mul_table","shg_table","boxBlurCanvasRGB","context","top_x","top_y","iterations","isNaN","imageData","getImageData","pixels","data","rsum","gsum","bsum","p","p1","p2","yp","yi","yw","wm","hm","rad1","r","g","b","mul_sum","shg_sum","vmin","vmax","putImageData","counter","disableDirectTextInput","enableDirectTextInput","getIsDirectTextInputDisabled","freezeWhenClosed","Component","props","newProps","ignoreFreeze","isOpen","stopScrollInertia","forceReflow","resetScroll","container","scrollTop","overflow","trapFocus","handleKeyDown","key","focusableElements","querySelectorAll","currentFocusedIndex","findIndex","em","isSameNode","activeElement","newFocusedIndex","shiftKey","focus"],"sourceRoot":""}