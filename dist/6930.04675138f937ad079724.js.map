{"version":3,"file":"6930.04675138f937ad079724.js","mappings":"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","sources":["webpack://telegram-t/./src/components/common/gift/GiftMenuItems.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.module.scss?f41d","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/common/helpers/giftOriginalInfo.tsx","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.module.scss?3884","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.module.scss?1055","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.module.scss?eeff","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.module.scss?4508","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.module.scss?8779","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.module.scss?de69","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.module.scss?43f4","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.module.scss?c67d","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.module.scss?fd32","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferConfirmModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.module.scss?7493","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.module.scss?5c52","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/priceConfirm/PriceConfirmModal.tsx"],"sourcesContent":["import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible, ApiEmojiStatusType, ApiSavedStarGift, ApiStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID, TME_LINK_PREFIX } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport MenuItem from '../../ui/MenuItem';\n\ntype OwnProps = {\n  peerId: string;\n  canManage?: boolean;\n  gift: ApiSavedStarGift | ApiStarGift;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst GiftMenuItems = ({\n  peerId,\n  canManage,\n  gift: typeGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps) => {\n  const {\n    showNotification,\n    openChatWithDraft,\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    toggleSavedGiftPinned,\n    changeGiftVisibility,\n    updateStarGiftPrice,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const starGiftUniqueLink = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${starGiftUniqueSlug}`;\n  }, [starGiftUniqueSlug]);\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((\n      status,\n    ) => status.type === 'collectible' && status.slug === starGiftUniqueSlug) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currenUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const canTakeOff = isGiftUnique && currenUniqueEmojiStatusSlug === gift.slug;\n  const canWear = userCollectibleStatus && !canTakeOff;\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const hasPinOptions = canManage && savedGift && !savedGift.isUnsaved && isGiftUnique;\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n  });\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnsell = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !userCollectibleStatus) return;\n    openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n  });\n\n  const handleTakeOff = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    }\n  });\n\n  const handleTogglePin = useLastCallback(() => {\n    toggleSavedGiftPinned({ peerId, gift: savedGift! });\n  });\n\n  return (\n    <>\n      {hasPinOptions && (\n        <MenuItem icon={savedGift.isPinned ? 'unpin' : 'pin'} onClick={handleTogglePin}>\n          {lang(savedGift.isPinned ? 'ChatListUnpinFromTop' : 'ChatListPinToTop')}\n        </MenuItem>\n      )}\n      <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n        {lang('CopyLink')}\n      </MenuItem>\n      <MenuItem icon=\"forward\" onClick={handleLinkShare}>\n        {lang('Share')}\n      </MenuItem>\n      {canManage && isGiftUnique && (\n        <MenuItem icon=\"diamond\" onClick={handleTransfer}>\n          {lang('GiftInfoTransfer')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && !giftResalePrice && (\n        <MenuItem icon=\"sell-outline\" onClick={handleSell}>\n          {lang('Sell')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && Boolean(giftResalePrice) && (\n        <MenuItem icon=\"unlist-outline\" onClick={handleUnsell}>\n          {lang('GiftInfoUnlist')}\n        </MenuItem>\n      )}\n      {canManage && savedGift && (\n        <MenuItem icon={savedGift.isUnsaved ? 'eye-outline' : 'eye-crossed-outline'} onClick={handleTriggerVisibility}>\n          {lang(savedGift.isUnsaved ? 'GiftActionShow' : 'GiftActionHide')}\n        </MenuItem>\n      )}\n      {canWear && (\n        <MenuItem icon=\"crown-wear-outline\" onClick={handleWear}>\n          {lang('GiftInfoWear')}\n        </MenuItem>\n      )}\n      {canTakeOff && (\n        <MenuItem icon=\"crown-take-off-outline\" onClick={handleTakeOff}>\n          {lang('GiftInfoTakeOff')}\n        </MenuItem>\n      )}\n    </>\n  );\n};\n\nexport default memo(GiftMenuItems);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"MFXAwnxJ\",\"content\":\"Sl6xVf1R\",\"main\":\"bTN9Jeph\",\"headerInfo\":\"c6MiyJgW\",\"logo\":\"StGLWvzb\",\"logoBackground\":\"SyTXSfml\",\"description\":\"kFe3mIZo\",\"section\":\"BgfHkWd2\",\"header\":\"zMtAGfXs\",\"starHeaderText\":\"q3v8orGj\",\"hiddenHeader\":\"bq3FnXT0\",\"closeButton\":\"bDsDTkbe\",\"avatar\":\"jK36xUj4\",\"center\":\"v1PckUQn\",\"secondaryInfo\":\"TDWSRfP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport type React from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport SafeLink from '../../../common/SafeLink';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/GoldStar.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"s3k01dTm\",\"transition\":\"BNA0_b5j\",\"main\":\"Oadi16vt\",\"filter\":\"z84KbvhX\",\"title\":\"Jnsrau29\",\"buttons\":\"NnVyYB32\",\"picker\":\"cuI2eDIY\",\"avatars\":\"ILtw_aNL\",\"center\":\"eIfMzHv5\",\"description\":\"FlNJWZ5P\",\"premiumFeatures\":\"xIv0Yaur\",\"options\":\"eNJRXn6P\",\"button\":\"KDNKXBp5\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"minimal\":\"nkV4JXHc\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"container\":\"mnhBs1uK\",\"section\":\"lYkNd_gb\",\"lastSection\":\"f749AI4g\",\"sectionTitle\":\"FF8gm7MP\",\"tos\":\"Vu6blJk9\",\"hint\":\"Rs8WXoOz\",\"topUpButton\":\"dc_DZoVF\",\"tonBalanceContainer\":\"lorbW9II\",\"tonBalance\":\"h2Fs3tOv\",\"tonIconBalance\":\"Ut6GidJP\",\"tonInUsd\":\"FdcdsB4l\",\"tonIconLogo\":\"_hCjjyEv\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"botItem\":\"AhxcrKWn\",\"hiddenHeader\":\"DZk6d6hF\",\"noSeparator\":\"UwUaTrab\",\"closeButton\":\"piD1PXHW\",\"addStarsButton\":\"dqnGL2uh\",\"addStarsIcon\":\"w9Db2eiK\",\"balanceBlock\":\"Yk0OQBKC\",\"balanceInfo\":\"p2dW9NOV\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"starButton\":\"oOt4VBD2\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"avatarStar\":\"Wu10dXoa\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\",\"subscriptions\":\"IX5BhCUF\",\"tabs\":\"KZVEyKOX\",\"disclaimer\":\"bpVifdwH\",\"amountBadge\":\"BPM7LKwo\",\"loadMore\":\"TKmZjMyd\",\"loadMoreIcon\":\"buepwtN1\"};","import { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiTypeCurrencyAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  const renderStarsAmount = () => {\n    return (\n      <>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined && balance.currency === STARS_CURRENCY_CODE\n          ? formatStarsAmount(lang, balance) : ''}\n        {withAddButton && (\n          <BadgeButton\n            className={styles.addStarsButton}\n            onClick={() => openStarsBalanceModal({})}\n          >\n            <Icon\n              className={styles.addStarsIcon}\n              name=\"add\"\n            />\n          </BadgeButton>\n        )}\n      </>\n    );\n  };\n\n  const renderTonAmount = () => {\n    return (\n      <>\n        <Icon name=\"toncoin\" />\n        {balance !== undefined ? convertCurrencyFromBaseUnit(balance.amount, balance.currency) : ''}\n      </>\n    );\n  };\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          {balance?.currency === TON_CURRENCY_CODE ? renderTonAmount() : renderStarsAmount()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXnbeQxP\",\"info\":\"zLaaDX3c\",\"status\":\"HbF2qTB2\",\"statusPricing\":\"AveGvpdV\",\"amount\":\"_CBiOQcv\",\"title\":\"k9ZIv5Pd\",\"description\":\"FlRlxMx2\",\"subtitle\":\"YN2J8dw6\",\"statusPeriod\":\"MRrP7Oew\",\"statusEnded\":\"pRHwfr8m\",\"preview\":\"t6Syyhzd\",\"subscriptionStar\":\"ftlbevPm\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { ApiStarsTransaction, ApiTypeCurrencyAmount } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer, shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n  if (transaction.isPostsSearch) {\n    return lang('PostsSearchTransaction');\n  }\n\n  if (transaction.isDropOriginalDetails) {\n    return lang('DropOriginalDetailsTransaction');\n  }\n\n  if (transaction.isPrepaidUpgrade) {\n    return lang('GiftPrepaidUpgradeTransactionTitle');\n  }\n\n  if (transaction.isStarGiftAuctionBid) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftAuctionBidTransaction')\n      : lang('StarGiftAuctionBidRefundedTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) {\n    if (transaction.amount.currency === TON_CURRENCY_CODE) {\n      return lang('TonGiftReceived');\n    }\n    return oldLang('StarsGiftReceived');\n  }\n  if (transaction.starGift) {\n    return isNegativeAmount(transaction.amount) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n    && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeAmount(currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    if (currencyAmount.amount) return currencyAmount.amount < 0;\n    return currencyAmount.nanos < 0;\n  }\n  return currencyAmount.amount < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jQkp75Gb\",\"preview\":\"OYGSN3PF\",\"count\":\"KX1yz2Jy\",\"thumb\":\"EvinKr5k\",\"noOutline\":\"KSAAsUDv\",\"itemCount1\":\"GxDajfX_\",\"itemCount2\":\"jXuZoxq8\",\"itemCount3\":\"TPn3XGHJ\",\"blurry\":\"hWZuxLS8\",\"full\":\"w56QPFhl\",\"fadeIn\":\"ds43W8Wq\"};","import { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aHAxv_Jg\",\"info\":\"oyYrn3II\",\"stars\":\"K5lc75ku\",\"amount\":\"QLQPuLAr\",\"title\":\"e0pK8CJ_\",\"description\":\"xbERdDMQ\",\"date\":\"l6CwQ0Ev\",\"positive\":\"P_42_ZWR\",\"negative\":\"TGjnLJfH\",\"preview\":\"cnjGihOT\",\"subscriptionStar\":\"z43YvnDX\",\"uniqueGiftBackground\":\"eNvzMw2p\",\"giftSticker\":\"U3dqmnM4\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    amount,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (!shouldUseCustomPeer(transaction)) {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if ((transaction.isGiftUpgrade || transaction.isDropOriginalDetails)\n      && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isPostsSearch) {\n      title = getTransactionTitle(oldLang, lang, transaction);\n      description = undefined;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, amountColorClass)}\n        >\n          {formatStarsTransactionAmount(lang, amount)}\n        </span>\n        {amount.currency === STARS_CURRENCY_CODE && <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />}\n        {amount.currency === TON_CURRENCY_CODE && <Icon name=\"toncoin\" className={amountColorClass} />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import { memo, useEffect, useMemo, useRef, useState } from '@teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { AnimationLevel } from '../../../types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport {\n  PAID_MESSAGES_PURPOSE,\n  STARS_CURRENCY_CODE,\n  TON_CURRENCY_CODE,\n} from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport { selectSharedSettings } from '../../../global/selectors/sharedState.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit, convertTonToUsd, formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { resolveTransitionName } from '../../../util/resolveTransitionName.ts';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport ParticlesHeader from '../common/ParticlesHeader.tsx';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nconst HEADER_HEIGHT = 3.5 * REM;\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  tonBalanceState?: GlobalState['ton'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n  tonUsdRate?: number;\n  tonTopupUrl: string;\n  animationLevel: AnimationLevel;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, tonBalanceState, canBuyPremium, shouldForceHeight, tonUsdRate, tonTopupUrl, animationLevel,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n    openUrl,\n  } = getActions();\n\n  const currency = modal?.currency || STARS_CURRENCY_CODE;\n  const currentState = currency === TON_CURRENCY_CODE ? tonBalanceState : starsBalanceState;\n  const { balance, history } = currentState || {};\n  const { subscriptions } = (currency === STARS_CURRENCY_CODE && starsBalanceState) || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [areTabsPinned, pinTabs, unpinTabs] = useFlag(false);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const tabsRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal && (starsBalanceState || tonBalanceState));\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const modalHeight = useMemo(() => {\n    const transactionCount = history?.all?.transactions.length || 0;\n    if (transactionCount === 1) {\n      return '35.5rem';\n    }\n    if (transactionCount === 2) {\n      return '39.25rem';\n    }\n    if (transactionCount === 3) {\n      return '43rem';\n    }\n    return '45rem';\n  }, [history?.all?.transactions.length]);\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n      unpinTabs();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  const renderStarsHeaderSection = () => {\n    return (\n      <>\n        <ParticlesHeader\n          model=\"swaying-star\"\n          color=\"gold\"\n          title={starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          description={renderText(\n            starsNeededText || oldLang('TelegramStarsInfo'),\n            ['simple_markdown', 'emoji'],\n          )}\n          isDisabled={!isOpen}\n        />\n        {canBuyPremium && !areBuyOptionsShown && (\n          <Button\n            className={styles.starButton}\n            onClick={showBuyOptions}\n            fluid\n          >\n            {oldLang('Star.List.BuyMoreStars')}\n          </Button>\n        )}\n        {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n          <Button\n            isText\n            noForcedUpperCase\n            className={styles.starButton}\n            fluid\n            onClick={openStarsGiftingPickerModalHandler}\n          >\n            {oldLang('TelegramStarsGift')}\n          </Button>\n        )}\n        {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n          <StarTopupOptionList\n            starsNeeded={starsNeeded}\n            options={starsBalanceState.topupOptions}\n            onClick={handleBuyStars}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTonHeaderSection = () => {\n    const tonAmount = convertCurrencyFromBaseUnit(balance?.amount || 0, TON_CURRENCY_CODE);\n    return (\n      <>\n        <ParticlesHeader\n          model=\"speeding-diamond\"\n          color=\"blue\"\n          title={lang('CurrencyTon')}\n          description={lang('DescriptionAboutTon')}\n          isDisabled={!isOpen}\n        />\n        <div className={styles.tonBalanceContainer}>\n          <div className={styles.tonBalance}>\n            <Icon name=\"toncoin\" className={styles.tonIconBalance} />\n            {tonAmount}\n          </div>\n          {Boolean(tonUsdRate) && (\n            <span className={styles.tonInUsd}>\n              {` ${formatCurrencyAsString(\n                convertTonToUsd(balance?.amount || 0, tonUsdRate, true),\n                'USD',\n                lang.code,\n              )}`}\n            </span>\n          )}\n        </div>\n        <Button\n          className={styles.topUpButton}\n          onClick={handleTonTopUp}\n          fluid\n        >\n          {lang('ButtonTopUpViaFragment')}\n        </Button>\n\n        {currency === TON_CURRENCY_CODE && (\n          <div className={styles.hint}>\n            {lang('TonModalHint')}\n          </div>\n        )}\n      </>\n    );\n  };\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n\n    if (tabsRef.current) {\n      const { top: tabsTop } = tabsRef.current.getBoundingClientRect();\n      const { top: scrollerTop } = e.currentTarget.getBoundingClientRect();\n      const isPinned = tabsTop - scrollerTop <= HEADER_HEIGHT;\n      if (isPinned) {\n        pinTabs();\n      } else {\n        unpinTabs();\n      }\n    }\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n      isTon: currency === TON_CURRENCY_CODE,\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    const originPaymentInputInvoice = originStarsPayment?.inputInvoice;\n\n    let spendPurposePeerId: string | undefined;\n\n    switch (originPaymentInputInvoice?.type) {\n      case 'message': {\n        spendPurposePeerId = originPaymentInputInvoice.chatId;\n        break;\n      }\n\n      case 'slug': {\n        const form = originStarsPayment?.form;\n        spendPurposePeerId = form?.botId;\n        break;\n      }\n    }\n\n    if (originReaction) {\n      spendPurposePeerId = originReaction.chatId;\n    }\n\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n      spendPurposePeerId,\n    });\n  });\n\n  const handleTonTopUp = useLastCallback(() => {\n    openUrl({ url: tonTopupUrl });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n      dialogStyle={`--modal-height: ${modalHeight}`}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        {currency !== TON_CURRENCY_CODE && <BalanceBlock balance={balance} className={styles.modalBalance} />}\n        <div\n          className={buildClassName(\n            styles.header, isHeaderHidden && styles.hiddenHeader, areTabsPinned && styles.noSeparator,\n          )}\n        >\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          {currency === TON_CURRENCY_CODE ? renderTonHeaderSection() : renderStarsHeaderSection()}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.lastSection}>\n              <Transition\n                name={resolveTransitionName('slideOptimized', animationLevel, undefined, lang.isRtl)}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              ref={tabsRef}\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const shouldForceHeight = modal?.currency === TON_CURRENCY_CODE\n      ? Boolean(global.ton?.history?.all?.transactions.length)\n      : Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      tonBalanceState: global.ton,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      tonUsdRate: global.appConfig.tonUsdRate,\n      tonTopupUrl: global.appConfig.tonTopupUrl,\n      animationLevel: selectSharedSettings(global).animationLevel,\n    };\n  },\n)(StarsBalanceModal));\n","import { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"manageButtons\":\"feHNN0j8\",\"manageButton\":\"biAUzmLA\",\"text\":\"hsDNs5hG\",\"icon\":\"APNjRx1K\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible,\n  ApiEmojiStatusType,\n  ApiSavedStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { selectTabState, selectUser } from '../../../global/selectors';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\n\nimport styles from './UniqueGiftManageButtons.module.scss';\n\ntype OwnProps = {\n  savedGift?: ApiSavedStarGift;\n};\n\ntype StateProps = {\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst UniqueGiftManageButtons = ({\n  savedGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps & StateProps) => {\n  const {\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    updateStarGiftPrice,\n    showNotification,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const gift = savedGift?.gift;\n  const isGiftUnique = gift?.type === 'starGiftUnique';\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const global = getGlobal();\n  const modal = selectTabState(global).giftInfoModal;\n  const peerId = modal?.peerId;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug,\n    ) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currentUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n  const canTakeOff = starGiftUniqueSlug !== undefined && currentUniqueEmojiStatusSlug === starGiftUniqueSlug;\n  const canWear = Boolean(userCollectibleStatus) && !canTakeOff;\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    } else if (userCollectibleStatus) {\n      openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n    }\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift || !peerId) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnlist = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  return (\n    <div className={styles.manageButtons}>\n      <Button\n        color=\"transparentBlured\"\n        iconName=\"gift-transfer-inline\"\n        iconAlignment=\"top\"\n        iconClassName={styles.icon}\n        onClick={handleTransfer}\n        ariaLabel={lang('GiftInfoTransfer')}\n        noForcedUpperCase\n        fluid\n        className={styles.manageButton}\n      >\n        <span className={styles.text}>\n          {lang('GiftInfoTransfer')}\n        </span>\n      </Button>\n      {(canWear || !canTakeOff) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName={canTakeOff ? 'crown-take-off' : 'crown-wear'}\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={canWear || canTakeOff ? handleWear : undefined}\n          disabled={!canWear && !canTakeOff}\n          ariaLabel={lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          </span>\n        </Button>\n      )}\n      {!giftResalePrice && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"sell\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleSell}\n          ariaLabel={lang('Sell')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('Sell')}\n          </span>\n        </Button>\n      )}\n      {Boolean(giftResalePrice) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"unlist\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleUnlist}\n          ariaLabel={lang('GiftInfoUnlist')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('GiftInfoUnlist')}\n          </span>\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { currentUserId } = global;\n    const currentUser = currentUserId ? selectUser(global, currentUserId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n    };\n  },\n)(UniqueGiftManageButtons));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"irv1C8bo\",\"withManageButtons\":\"QcTw5OSp\",\"sticker\":\"a1ASgPwu\",\"withBadge\":\"OFWOLtAH\",\"subtitleBadge\":\"V7kDVPLm\",\"badge\":\"PAmbIL6y\",\"radialPattern\":\"UvhsGZLf\",\"amount\":\"zTVWZg63\",\"transition\":\"Tu6_OHoq\",\"transitionSlide\":\"iUTKLzTN\",\"title\":\"ECTvfOda\",\"subtitle\":\"S6JwvHWD\"};","import type { TeactNode } from '@teact';\nimport { memo, useMemo } from '@teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiSavedStarGift,\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions.ts';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\nimport UniqueGiftManageButtons from './UniqueGiftManageButtons';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  badge?: TeactNode;\n  subtitle?: TeactNode;\n  subtitlePeer?: ApiPeer;\n  className?: string;\n  resellPrice?: ApiTypeCurrencyAmount;\n  showManageButtons?: boolean;\n  savedGift?: ApiSavedStarGift;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  badge,\n  subtitle,\n  subtitlePeer,\n  className,\n  resellPrice,\n  showManageButtons,\n  savedGift,\n}: OwnProps) => {\n  const {\n    openChat,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const lang = useLang();\n  const [isGiftHover, markGiftHover, unmarkGiftHover] = useFlag(false);\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        canvasClassName={styles.radialPatternCanvas}\n        backgroundColors={backdropColors}\n        patternIcon={patternAttribute.sticker}\n        yPosition={7.5 * REM}\n        maxRadius={0.26}\n        patternSize={isMobile ? 14 : 16}\n        ovalFactor={1.2}\n      />\n    );\n  }, [backdropAttribute, patternAttribute, isMobile]);\n\n  return (\n    <div className={buildClassName(styles.root,\n      'interactive-gift',\n      showManageButtons && styles.withManageButtons,\n      badge && styles.withBadge,\n      className)}\n    >\n      <Transition\n        className={styles.transition}\n        slideClassName={buildClassName(styles.transitionSlide)}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n          noLoop={!isGiftHover}\n          onMouseEnter={!IS_TOUCH_ENV ? markGiftHover : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? unmarkGiftHover : undefined}\n        />\n      </Transition>\n      {Boolean(badge) && (\n        <div className={styles.badge}>{badge}</div>\n      )}\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {Boolean(subtitle) && (\n        <div\n          className={buildClassName(styles.subtitle, subtitlePeer && styles.subtitleBadge)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n          onClick={() => {\n            if (subtitlePeer) {\n              openChat({ id: subtitlePeer.id });\n            }\n          }}\n        >\n          {subtitle}\n        </div>\n      )}\n      {savedGift && showManageButtons && (\n        <UniqueGiftManageButtons\n          savedGift={savedGift}\n        />\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          {resellPrice.currency === 'XTR' && <StarIcon type=\"gold\" size=\"middle\" />}\n          {resellPrice.currency === 'TON' && <Icon name=\"toncoin\" />}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"IzhfRIWu\",\"positive\":\"jvBZSrpd\",\"negative\":\"xDyq9cc0\",\"header\":\"qBOIq6Jn\",\"uniqueGift\":\"ApoQz22o\",\"amount\":\"sso9uZM6\",\"title\":\"ZZAj3hj7\",\"description\":\"NuWOY7ED\",\"tid\":\"tMF8VIOM\",\"refunded\":\"sxWAwxTd\",\"totalStars\":\"Z2YALGgl\",\"starIcon\":\"cU5QlvwL\",\"footer\":\"KgzPpgS6\",\"starsBackground\":\"nML8IQqX\",\"copyIcon\":\"voCttFzS\",\"mediaPreview\":\"C5r59yiV\",\"subtitle\":\"mFYcIYMJ\",\"starGiftSticker\":\"j3akHdtm\",\"avatar\":\"hcrszlpT\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../../config';\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectGiftStickerForTon,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, amount, isGiftUpgrade, isDropOriginalDetails, starGift, isGiftResale,\n      starRefCommision,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n      && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade && !isDropOriginalDetails\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || ((isGiftUpgrade || isDropOriginalDetails) && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker && !transaction.isPostsSearch;\n    const avatarPeer = !photo ? ((!shouldUseCustomPeer(transaction) && peer) || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.amount}\n        />\n      </div>\n    );\n\n    const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar\n            className={styles.avatar}\n            peer={avatarPeer}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n        )}\n        {!sticker && !transaction.isPostsSearch && (\n          <InteractiveSparkles\n            className={buildClassName(styles.starsBackground)}\n            color=\"gold\"\n            onRequestAnimation={handleRequestAnimation}\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, amountColorClass)}\n          >\n            {formatStarsTransactionAmount(lang, amount)}\n          </span>\n          {amount.currency === STARS_CURRENCY_CODE && <StarIcon type=\"gold\" size=\"middle\" />}\n          {amount.currency === 'TON' && <Icon name=\"toncoin\" className={amountColorClass} />}\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isDropOriginalDetails) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        lang('StarGiftReasonDropOriginalDetails'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeAmount(transaction.amount)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeAmount(amount) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    if (!transaction.isPostsSearch && !isDropOriginalDetails && !transaction.isStarGiftAuctionBid) {\n      tableData.push([\n        peerLabel,\n        peerId ? { chatId: peerId } : toName || '',\n      ]);\n    }\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.amount.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink && transaction.amount.currency === STARS_CURRENCY_CODE) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.amount, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    if (transaction.isStarGiftAuctionBid && gift?.type === 'starGift' && gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: gift.availabilityTotal,\n        }, {\n          pluralValue: gift.availabilityRemains || 0,\n        }),\n      ]);\n    }\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker,\n    paidMessageCommission, handleRequestAnimation]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig.starsPaidMessageCommissionPermille;\n\n    const currencyAmount = modal?.transaction.amount;\n    const starsGiftSticker = modal?.transaction.isGift\n      ? (currencyAmount?.currency === STARS_CURRENCY_CODE ? selectGiftStickerForStars(global, currencyAmount?.amount)\n        : selectGiftStickerForTon(global, currencyAmount?.amount)) : undefined;\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"eR_RZfGB\",\"header\":\"E3R22yAI\",\"title\":\"qdydQHgc\",\"amount\":\"FI6rEJlK\",\"footer\":\"GMWMuWCr\",\"starsBackground\":\"zGCayu45\",\"subscriptionStar\":\"enRetSny\",\"amountStar\":\"J8HIcN6k\",\"secondary\":\"oBLHWBtJ\",\"danger\":\"nkwiG25Q\",\"avatarWrapper\":\"wuTMXDP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar\n            peer={!photo ? peer : undefined}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <InteractiveSparkles\n          className={buildClassName(styles.starsBackground)}\n          color=\"gold\"\n          onRequestAnimation={handleRequestAnimation}\n          centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CuBAw2yg\",\"dragging\":\"LbDNXOOQ\",\"progress\":\"kwK0cNPX\",\"floatingBadgeWrapper\":\"uvlMoXj0\",\"floatingBadgeText\":\"qqQan8uF\",\"floatingBadgeTriangle\":\"mIdJOmsB\",\"slider\":\"euOOAbZi\",\"sparkles\":\"_L1YQTIP\",\"dynamicColor\":\"uIYIwZpx\",\"floatingBadge\":\"BGSDWAYc\",\"clickable\":\"JwkM7nwU\",\"noTransition\":\"cG6CiHRL\",\"floatingBadgeSparkles\":\"JCciTRtu\",\"floatingBadgeContent\":\"f1UPSN27\",\"withDescription\":\"WsptdVHe\",\"floatingBadgeTitle\":\"HkY6dR8D\",\"floatingBadgeDescription\":\"mR3ddE5s\",\"floatingBadgeTrianglePath\":\"IW9YhMAx\",\"customValueIcon\":\"Td8Tc1MH\"};","import type { TeactNode } from '../../../lib/teact/teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  minValue?: number;\n  minAllowedValue?: number;\n  minAllowedProgress?: number;\n  className?: string;\n  floatingBadgeDescription?: TeactNode;\n  shouldUseDynamicColor?: boolean;\n  shouldAllowCustomValue?: boolean;\n  onChange: (value: number) => void;\n  onBadgeClick?: NoneToVoidFunction;\n  onCustomValueClick?: NoneToVoidFunction;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\nconst LARGE_STEP = 10000;\nconst THUMB_SIZE = 1.875 * REM;\nconst CORNER_BEAK_WIDTH = 44;\nconst DEFAULT_BEAK_WIDTH = 52;\nconst BEAK_HEIGHT = 32;\n\nconst BEAK_OFFSET_END = 10;\nconst TIP_OFFSET_END = 0;\nconst BEAK_TIP_PADDING = 1;\n\nconst BADGE_HORIZONTAL_PADDING = 2 * REM;\nconst BADGE_ICON_SIZE = 1.5 * REM;\nconst BADGE_TITLE_GAP = 0.125 * REM;\nconst DRAG_DISTANCE_THRESHOLD = 5;\nconst BADGE_WIDTH_DELTA = 6;\n\nlet textMeasureCanvas: HTMLCanvasElement | undefined;\n\nfunction getTextWidth(text: string, font: string): number {\n  if (!textMeasureCanvas) {\n    textMeasureCanvas = document.createElement('canvas');\n  }\n  const ctx = textMeasureCanvas.getContext('2d')!;\n  ctx.font = font;\n  return ctx.measureText(text).width;\n}\n\nconst SLIDER_COLORS = [\n  '#955CDB', // Purple\n  '#955CDB', // Purple\n  '#46A3EB', // Blue\n  '#40A920', // Green\n  '#E29A09', // Yellow\n  '#ED771E', // Orange\n  '#E14741', // Red\n  '#5B6676', // Silver\n];\n\nfunction getColorForProgress(progress: number): string {\n  const index = Math.floor(progress * SLIDER_COLORS.length);\n  return SLIDER_COLORS[Math.min(index, SLIDER_COLORS.length - 1)];\n}\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  minValue: minValueProp,\n  minAllowedValue,\n  minAllowedProgress,\n  className,\n  floatingBadgeDescription,\n  shouldUseDynamicColor,\n  shouldAllowCustomValue,\n  onChange,\n  onBadgeClick,\n  onCustomValueClick,\n}: OwnProps) => {\n  const containerRef = useRef<HTMLDivElement>();\n  const floatingBadgeContentRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const baseMinValue = minValueProp ?? 1;\n\n  // Uses binary search - O(log n)\n  const actualMinValue = useMemo(() => {\n    if (!minAllowedProgress || !minAllowedValue || minAllowedValue <= baseMinValue) {\n      return baseMinValue;\n    }\n\n    let low = baseMinValue;\n    let high = minAllowedValue;\n\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      const testPoints = buildPoints(mid, maxValue);\n      const testProgress = getProgress(testPoints, minAllowedValue, mid);\n      const normalizedProgress = testProgress / testPoints.length;\n\n      if (normalizedProgress < minAllowedProgress) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n\n    return Math.max(baseMinValue, low);\n  }, [baseMinValue, minAllowedValue, minAllowedProgress, maxValue]);\n\n  const points = useMemo(() => {\n    return buildPoints(actualMinValue, maxValue);\n  }, [maxValue, actualMinValue]);\n\n  const [value, setValue] = useState(0);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [badgeWidth, setBadgeWidth] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const startXRef = useRef<number | undefined>();\n  const prevBadgeWidth = usePrevious(badgeWidth);\n\n  const badgeText = lang.number(getValue(points, value, actualMinValue));\n\n  const minSliderProgress = minAllowedValue !== undefined\n    ? getProgress(points, minAllowedValue, actualMinValue) : 0;\n\n  useEffect(() => {\n    setValue(getProgress(points, defaultValue, actualMinValue));\n  }, [defaultValue, points, actualMinValue]);\n\n  useEffect(() => {\n    if (!floatingBadgeContentRef.current) return;\n\n    const titleEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeTitle}`);\n    if (!titleEl) return;\n\n    const computedStyle = getComputedStyle(titleEl);\n    const font = `${computedStyle.fontWeight} ${computedStyle.fontSize} ${computedStyle.fontFamily}`;\n\n    const textWidth = getTextWidth(badgeText, font);\n    const titleWidth = BADGE_ICON_SIZE + BADGE_TITLE_GAP + textWidth;\n\n    const descriptionEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeDescription}`);\n    const descriptionWidth = descriptionEl?.scrollWidth || 0;\n\n    const contentWidth = Math.max(titleWidth, descriptionWidth);\n    const newBadgeWidth = contentWidth + BADGE_HORIZONTAL_PADDING;\n\n    setBadgeWidth((currentWidth) => {\n      if (Math.abs(newBadgeWidth - currentWidth) < BADGE_WIDTH_DELTA) {\n        return currentWidth;\n      }\n      return newBadgeWidth;\n    });\n  }, [badgeText, floatingBadgeDescription]);\n\n  const handleContainerResize = useLastCallback((entry: ResizeObserverEntry) => {\n    setContainerWidth(entry.contentRect.width);\n  });\n\n  useResizeObserver(containerRef, handleContainerResize);\n\n  const progress = value / points.length;\n  const {\n    minBadgeX, maxBadgeX, beakOffset, beakTipOffset, beakWidth: currentBeakWidth,\n  } = useMemo(() => {\n    return calcBadgePosition(containerWidth, badgeWidth, progress);\n  }, [containerWidth, badgeWidth, progress]);\n\n  const beakPath = useMemo(() => {\n    return generateBeakPath(currentBeakWidth, beakTipOffset);\n  }, [currentBeakWidth, beakTipOffset]);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = Number(event.currentTarget.value);\n    const clampedValue = Math.max(rawValue, minSliderProgress);\n    setValue(clampedValue);\n\n    const resultValue = getValue(points, clampedValue, actualMinValue);\n    onChange(resultValue);\n  });\n\n  const handlePointerDown = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = e.clientX;\n    setIsDragging(false);\n  });\n\n  const handlePointerMove = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    if (startXRef.current === undefined) return;\n    const distance = Math.abs(e.clientX - startXRef.current);\n    if (distance >= DRAG_DISTANCE_THRESHOLD) {\n      setIsDragging(true);\n    }\n  });\n\n  const handlePointerUp = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = undefined;\n\n    if (!isDragging && onCustomValueClick && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickZoneWidth = 1.875 * REM;\n\n      const isInIconArea = e.clientX >= rect.right - clickZoneWidth && e.clientX <= rect.right;\n\n      if (isInIconArea) {\n        onCustomValueClick();\n      }\n    }\n\n    setIsDragging(false);\n  });\n\n  const dynamicColor = shouldUseDynamicColor ? getColorForProgress(progress) : undefined;\n\n  const badgeStyle = buildStyle(\n    Boolean(badgeWidth) && `width: ${badgeWidth}px`,\n  );\n\n  const rootStyle = buildStyle(\n    `--progress: ${progress}`,\n    `--min-badge-x: ${minBadgeX}px`,\n    `--max-badge-x: ${maxBadgeX}px`,\n    dynamicColor && `--dynamic-color: ${dynamicColor}`,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(styles.root, isDragging && styles.dragging, className)}\n      style={rootStyle}\n    >\n      <div className={styles.floatingBadgeWrapper}>\n        <div\n          className={buildClassName(styles.floatingBadge, onBadgeClick && styles.clickable)}\n          onClick={onBadgeClick}\n        >\n          <div\n            className={buildClassName(\n              styles.floatingBadgeText,\n              shouldUseDynamicColor && styles.dynamicColor,\n              (!prevBadgeWidth || prevBadgeWidth === 0) && styles.noTransition,\n            )}\n            style={badgeStyle}\n          >\n            <Sparkles preset=\"button\" className={styles.floatingBadgeSparkles} />\n            <div\n              ref={floatingBadgeContentRef}\n              className={buildClassName(\n                styles.floatingBadgeContent,\n                floatingBadgeDescription && styles.withDescription,\n              )}\n            >\n              <div className={styles.floatingBadgeTitle}>\n                <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n                <AnimatedCounter text={badgeText} />\n              </div>\n              <div className={styles.floatingBadgeDescription}>\n                {floatingBadgeDescription}\n              </div>\n            </div>\n          </div>\n          <svg\n            className={styles.floatingBadgeTriangle}\n            width={currentBeakWidth}\n            height={BEAK_HEIGHT}\n            viewBox={`0 0 ${currentBeakWidth} ${BEAK_HEIGHT}`}\n            fill=\"none\"\n            aria-hidden=\"true\"\n            role=\"presentation\"\n            style={`transform: translate(calc(-50% + ${beakOffset}px), 33%)`}\n          >\n            {!shouldUseDynamicColor && (\n              <defs>\n                <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                  <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                  <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n                </linearGradient>\n              </defs>\n            )}\n            <path\n              className={styles.floatingBadgeTrianglePath}\n              d={beakPath}\n              fill={dynamicColor || 'url(#StarBadgeTriangle)'}\n            />\n          </svg>\n        </div>\n      </div>\n      <div className={buildClassName(styles.progress, shouldUseDynamicColor && styles.dynamicColor)}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue, actualMinValue)}\n        step=\"any\"\n        onChange={handleChange}\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n      />\n      {shouldAllowCustomValue && (\n        <Icon name=\"add\" className={styles.customValueIcon} />\n      )}\n    </div>\n  );\n};\n\nfunction buildPoints(minValue: number, maxValue: number): number[] {\n  const result = [];\n\n  for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n    if (DEFAULT_POINTS[i] <= minValue) continue;\n\n    if (DEFAULT_POINTS[i] < maxValue) {\n      result.push(DEFAULT_POINTS[i]);\n    }\n\n    if (DEFAULT_POINTS[i] >= maxValue) {\n      result.push(maxValue);\n      return result;\n    }\n  }\n\n  const lastPoint = DEFAULT_POINTS[DEFAULT_POINTS.length - 1];\n  const stepsNeeded = Math.ceil((minValue - lastPoint) / LARGE_STEP);\n  let nextPoint = lastPoint + Math.max(1, stepsNeeded) * LARGE_STEP;\n\n  while (nextPoint < maxValue) {\n    result.push(nextPoint);\n    nextPoint += LARGE_STEP;\n  }\n  result.push(maxValue);\n\n  return result;\n}\n\nfunction getProgress(points: number[], value: number, minValue: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  if (nextPoint === prevPoint) return pointIndex;\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number, minValue: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nfunction calcBadgePosition(\n  containerWidth: number,\n  badgeWidth: number,\n  progress: number,\n) {\n  const halfBadgeWidth = badgeWidth / 2;\n  const cornerBeakHalfWidth = CORNER_BEAK_WIDTH / 2;\n  const maxBeakOffset = halfBadgeWidth - cornerBeakHalfWidth;\n\n  const minBadgeX = halfBadgeWidth;\n  const maxBadgeX = containerWidth - halfBadgeWidth;\n\n  const thumbHalf = THUMB_SIZE / 2;\n  const trackLength = containerWidth - THUMB_SIZE;\n  const distanceFromLeft = progress * trackLength;\n  const distanceFromRight = trackLength - distanceFromLeft;\n\n  const isLeftSide = distanceFromLeft < distanceFromRight;\n  const distanceToEdge = isLeftSide ? distanceFromLeft : distanceFromRight;\n  const direction = isLeftSide ? -1 : 1;\n\n  let beakOffset = 0;\n  let beakTipOffset = 0;\n  let beakWidth = DEFAULT_BEAK_WIDTH;\n\n  const beakOffsetStart = halfBadgeWidth - thumbHalf;\n\n  if (distanceToEdge < beakOffsetStart) {\n    if (distanceToEdge > BEAK_OFFSET_END) {\n      const t = (beakOffsetStart - distanceToEdge) / (beakOffsetStart - BEAK_OFFSET_END);\n      beakOffset = direction * t * maxBeakOffset;\n    } else if (distanceToEdge > TIP_OFFSET_END) {\n      beakOffset = direction * maxBeakOffset;\n      const t = (BEAK_OFFSET_END - distanceToEdge) / (BEAK_OFFSET_END - TIP_OFFSET_END);\n      const tExp = 1 - (1 - t) * (1 - t) * (1 - t);\n      beakWidth = DEFAULT_BEAK_WIDTH - tExp * (DEFAULT_BEAK_WIDTH - CORNER_BEAK_WIDTH);\n      beakTipOffset = direction * t * (beakWidth / 2);\n    } else {\n      beakOffset = direction * maxBeakOffset;\n      beakWidth = CORNER_BEAK_WIDTH;\n      beakTipOffset = direction * (beakWidth / 2);\n    }\n  }\n\n  const maxTipOffset = beakWidth / 2 - TIP_RADIUS - BEAK_TIP_PADDING;\n  const clampedTipOffset = Math.max(-maxTipOffset, Math.min(maxTipOffset, beakTipOffset));\n\n  return {\n    minBadgeX,\n    maxBadgeX,\n    beakOffset,\n    beakTipOffset: clampedTipOffset,\n    beakWidth,\n  };\n}\n\nconst TIP_RADIUS = 2;\n\nfunction generateBeakPath(beakWidth: number, tipOffset: number): string {\n  const tipX = beakWidth / 2 + tipOffset;\n  const r = TIP_RADIUS;\n  const y = BEAK_HEIGHT - r;\n\n  return `M 0 0 L ${beakWidth} 0 L ${tipX + r} ${y} Q ${tipX} ${BEAK_HEIGHT} ${tipX - r} ${y} Z`;\n}\n\nexport default memo(StarSlider);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RdhRpsCn\",\"title\":\"yzbjj73U\",\"slider\":\"xePPMXOI\",\"description\":\"BlpfdOtK\",\"itemInfo\":\"nS9V516D\",\"itemTitle\":\"sH5Nukjy\",\"itemSubtitle\":\"dHlNODTI\",\"itemIcon\":\"H_iHihXU\",\"sendAsPeerButtonAvatar\":\"_mjvLELm\",\"sendAsPeerMenuButton\":\"zxsRaWYV\",\"buttonDownIcon\":\"zrwUUELS\",\"sendAsPeerMenuBubble\":\"X1PB6mhQ\",\"sendAsPeerMenu\":\"Px1MDij9\",\"sendAsPeersMenuContainer\":\"Al1nfhHJ\",\"headerControlPanel\":\"vu90kSL_\",\"separator\":\"uhQLUjmo\",\"checkBox\":\"Mc3bVeF0\",\"topLabel\":\"bnou4CpV\",\"top\":\"QludQDKR\",\"topBadge\":\"JBF9pTUK\",\"buttonStar\":\"NJJFuym9\",\"topPeer\":\"Ty4Ud_Rd\",\"disclaimer\":\"KRvkHeo1\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaLabelOpenMenu')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jKOG0It6\",\"header\":\"A_fX4EXY\",\"spacer\":\"ATowWJ60\",\"title\":\"gDNtv9oz\",\"balance-container\":\"eAKZVhOT\",\"balanceContainer\":\"eAKZVhOT\",\"balance-caption\":\"vbwprYel\",\"balanceCaption\":\"vbwprYel\",\"star-balance\":\"lXuIlbVK\",\"starBalance\":\"lXuIlbVK\",\"balance\":\"dIEx_Iqi\",\"optionsSection\":\"Y68CEIKn\",\"checkboxTitle\":\"H4taXei_\",\"actionMessageView\":\"CB1mxsgp\",\"messageInput\":\"o5r2IPoA\",\"limited\":\"mWzLu0c0\",\"footer\":\"jxWZSvet\",\"switcher\":\"zZUpGRSI\",\"switcherStarIcon\":\"zAee80Dv\",\"bottomDescription\":\"j4s8T1dQ\",\"description\":\"nTPAv1ci\",\"main-button\":\"IDuhjrne\",\"mainButton\":\"IDuhjrne\",\"buttonSubtitle\":\"pB6hqcvA\",\"star\":\"Q4NlMT0o\",\"background\":\"ZORVRSG3\",\"customBgImage\":\"Eny_G3JI\",\"customBgColor\":\"TkJZPU2u\",\"withTransition\":\"soDpW2YR\",\"blurred\":\"M6k91TdM\",\"withRightColumn\":\"FBcNO8hj\"};","import type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarGiftAuctionState, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCountdown } from '../../../util/dates/dateFormat';\nimport { HOUR } from '../../../util/dates/units';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\nimport TextTimer from '../../ui/TextTimer';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n  giftAuction,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n    openGiftAuctionBidModal, openGiftAuctionInfoModal, openGiftAuctionChangeRecipientModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            days: gift.months * 30,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!giftAuction) return;\n    openGiftAuctionInfoModal({ auctionGiftId: giftAuction.gift.id });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (giftAuction) {\n      const existingBidPeerId = giftAuction.userState.bidPeerId;\n      if (existingBidPeerId && existingBidPeerId !== peerId) {\n        openGiftAuctionChangeRecipientModal({\n          auctionGiftId: giftAuction.gift.id,\n          oldPeerId: existingBidPeerId,\n          newPeerId: peerId,\n          message: giftMessage || undefined,\n          shouldHideName: shouldHideName || undefined,\n        });\n        return;\n      }\n\n      openGiftAuctionBidModal({\n        auctionGiftId: giftAuction.gift.id,\n        peerId,\n        message: giftMessage || undefined,\n        shouldHideName: shouldHideName || undefined,\n      });\n      return;\n    }\n\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    const giftsPerRound = giftAuction?.gift.giftsPerRound;\n    const auctionEndDate = giftAuction?.state.endDate;\n    const auctionTimeLeft = auctionEndDate ? auctionEndDate - getServerTime() : undefined;\n    const shouldUseTextTimer = auctionTimeLeft !== undefined && auctionTimeLeft > 0\n      && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        {giftAuction && Boolean(giftsPerRound) && (\n          <div className={styles.bottomDescription}>\n            {lang('GiftAuctionDescription', {\n              count: giftsPerRound,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true })}\n          </div>\n        )}\n        <Button\n          className={styles.mainButton}\n          size={auctionTimeLeft ? undefined : 'smaller'}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n          noForcedUpperCase\n        >\n          {giftAuction ? (\n            <div>\n              <div>\n                {lang('GiftAuctionPlaceBid')}\n              </div>\n              {auctionTimeLeft !== undefined && auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={auctionEndDate!} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          ) : lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId, gift }): Complete<StateProps> => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n    const auctionGiftId = 'id' in gift && gift.type === 'starGift' && gift.isAuction ? gift.id : undefined;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n      giftAuction,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"G1mBmzxs\",\"noClickable\":\"pcLi3lcD\",\"starGift\":\"f5ArEO1S\",\"monthsDescription\":\"rn9aWFNA\",\"description\":\"q4_ydkAx\",\"buy\":\"a8no5WH0\",\"transferBadge\":\"nqN62arv\",\"star\":\"DvJLTVFU\",\"auction\":\"WqBCC4Ce\",\"premiumRequired\":\"NBYIITte\",\"amount\":\"sbo2dMcH\",\"starsPriceBlock\":\"QB5SI7ta\",\"starsPriceIcon\":\"jgnEfoeM\",\"radialPattern\":\"Nkotr8Q4\",\"stickerWrapper\":\"rUSoeQXb\",\"lockIcon\":\"kwuipwV7\"};","import { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} color=\"adaptive\" nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): Complete<StateProps> => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import { memo, useMemo, useRef, useState } from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarGift, ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon, formatTonAsIcon } from '../../../util/localization/format';\n\nimport Icon from '../../common/icons/Icon'; ;\nimport { getGiftAttributes, getStickerFromGift } from '../../common/helpers/gifts';\n\nimport useFlag from '../../../hooks/useFlag.ts';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  isResale?: boolean;\n  withTransferBadge?: boolean;\n  hideBadge?: boolean;\n  noClickable?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, isResale, isCurrentUserPremium, withTransferBadge, hideBadge, noClickable, observeIntersection, onClick,\n}: OwnProps & StateProps) {\n  const {\n    openGiftInfoModal, openPremiumModal, showNotification, checkCanSendGift, openGiftAuctionModal,\n  } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  function getPriceAmount(amounts?: ApiTypeCurrencyAmount[]) {\n    if (!amounts) return { amount: 0, currency: STARS_CURRENCY_CODE };\n\n    if (gift.type === 'starGiftUnique' && gift.resaleTonOnly) {\n      const tonAmount = amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n      if (tonAmount) return tonAmount;\n    }\n\n    const starsAmount = amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n    return starsAmount;\n  }\n\n  const lang = useLang();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const priceInfo = !isGiftUnique\n    ? { amount: regularGift?.stars || 0, currency: STARS_CURRENCY_CODE }\n    : getPriceAmount(uniqueGift?.resellPrice);\n  const priceCurrency = priceInfo?.currency || STARS_CURRENCY_CODE;\n  const resellMinStars = regularGift?.resellMinStars;\n  const formattedPrice = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : priceInfo?.amount || 0;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n  const isAuction = !isGiftUnique && !isResale && Boolean(regularGift?.isAuction);\n  const isPremiumRequired = Boolean(gift?.requirePremium);\n  const isUserLimitReached = Boolean(regularGift?.limitedPerUser && !regularGift?.perUserRemains);\n  const perUserTotal = regularGift?.perUserTotal;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isAuction) {\n      openGiftAuctionModal({ gift });\n      return;\n    }\n\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    if (isUserLimitReached) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftsLimit2',\n          variables: {\n            count: perUserTotal,\n          },\n          options: {\n            pluralValue: perUserTotal!,\n            withMarkdown: true,\n            withNodes: true,\n          },\n        },\n      });\n      return;\n    }\n\n    if (isPremiumRequired && !isCurrentUserPremium) {\n      openPremiumModal({\n        gift,\n      });\n      return;\n    }\n\n    if (isLocked) {\n      checkCanSendGift({\n        gift,\n        onSuccess: () => onClick?.(gift, isResale ? 'resell' : 'original'),\n      });\n      return;\n    }\n\n    onClick?.(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={pattern.sticker}\n        ringsCount={1}\n        ovalFactor={1}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n  const isLocked = Boolean(gift.type === 'starGift' && gift.lockedUntilDate);\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isAuction) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonAuction')} />;\n    }\n    if (isPremiumRequired) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonPremium')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut,\n    isLimited, lang, giftNumber, isPremiumRequired, isAuction]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  const badgeContent = useMemo(() => {\n    if (withTransferBadge) {\n      return lang('GiftTransferTitle');\n    }\n\n    if (isAuction) {\n      return lang('GiftAuctionJoin');\n    }\n\n    if (priceCurrency === TON_CURRENCY_CODE) {\n      return formatTonAsIcon(lang, formattedPrice || 0, {\n        shouldConvertFromNanos: true,\n        className: styles.star,\n      });\n    }\n\n    return formatStarsAsIcon(lang, formattedPrice || 0, {\n      asFont: true,\n      className: styles.star,\n    });\n  }, [withTransferBadge, priceCurrency, formattedPrice, isAuction, lang]);\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'interactive-gift',\n        styles.container,\n        styles.starGift,\n        'starGiftItem',\n        isPremiumRequired && styles.premiumRequired,\n        isAuction && styles.auction,\n        noClickable && styles.noClickable,\n      )}\n      tabIndex={noClickable ? undefined : 0}\n      role={noClickable ? undefined : 'button'}\n      onClick={noClickable ? undefined : handleGiftClick}\n      onMouseEnter={!IS_TOUCH_ENV && !noClickable ? markHover : undefined}\n      onMouseLeave={!IS_TOUCH_ENV && !noClickable ? unmarkHover : undefined}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldLoop={isHover}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      {!hideBadge && (\n        <Button\n          className={buildClassName(\n            styles.buy,\n            withTransferBadge && styles.transferBadge,\n          )}\n          nonInteractive\n          size=\"tiny\"\n          color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n          withSparkleEffect={isVisible && !withTransferBadge}\n          pill\n          fluid\n        >\n          {badgeContent}\n        </Button>\n      )}\n      {giftRibbon}\n      {isLocked && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): Complete<StateProps> => {\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n    };\n  })(GiftItemStar),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tJK1W0pJ\",\"transition\":\"pP8TxefR\",\"content\":\"o3V1HqbL\",\"resaleScreenRoot\":\"Vce_TsJO\",\"main\":\"cVXqeu9P\",\"giftSection\":\"v4eKefwN\",\"section\":\"EqfarEYb\",\"resaleStarGiftsContainer\":\"RSFcSNGL\",\"starGiftsContainer\":\"OQX3GZl5\",\"premiumGiftsGallery\":\"n40m3BK2\",\"header\":\"iqqoyRgW\",\"noBorder\":\"cuvdjW2y\",\"resaleHeader\":\"cJRBgg9B\",\"resaleHeaderContentContainer\":\"OXYQmfGK\",\"headerSlide\":\"BTWhJUQB\",\"headerText\":\"lLRmbpIu\",\"hiddenHeader\":\"XgGzn1cQ\",\"resaleHeaderText\":\"bp_KPx8I\",\"commonHeaderText\":\"ybZo03if\",\"resaleHeaderDescription\":\"XefHUFm1\",\"closeButton\":\"r_Y5uG1T\",\"balance\":\"soqAknia\",\"avatars\":\"N_7tYJKr\",\"avatar\":\"_3hY4vIep\",\"logoBackground\":\"ieK4TzSb\",\"center\":\"Ey5gX40t\",\"description\":\"ZioU5h_k\",\"starGiftsDescription\":\"gFgzS8pV\",\"boostIcon\":\"Qi2YR6Dz\",\"optionBottom\":\"RTbClMKE\",\"secondaryInfo\":\"g0R9GSNq\",\"footer\":\"J3Gju3bv\",\"starGiftsTransition\":\"kB6IyXqS\",\"notFoundGiftsRoot\":\"UqnRlJ1n\",\"notFoundGiftsDescription\":\"g0VbwIG_\",\"notFoundGiftsLink\":\"j2zPEQr8\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { RESALE_GIFTS_LIMIT } from '../../../limits';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      const giftId = 'regularGiftId' in gift\n        ? gift.regularGiftId\n        : gift.id;\n      loadResaleGifts({ giftId });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((g) => (\n            <GiftItemStar\n              key={g.id}\n              gift={g}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"KLFLR9ji\",\"thumb\":\"fCL5rY2D\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_VgmQnUg\",\"buttonsContainer\":\"IDlp6U6g\",\"itemIcon\":\"yuctLnuR\",\"sticker\":\"VT562JS0\",\"backdropAttributeMenuItemText\":\"D50wFfRL\",\"menuItemStickerText\":\"THcGWXSA\",\"menuItemText\":\"L6EVE2Ux\",\"backdrop\":\"A29QNxKb\",\"menuItemIcon\":\"GL4rVsev\",\"item\":\"qiYcBOYc\",\"menuContentContainer\":\"EDsBn29z\",\"menu\":\"ISaNdBwd\",\"left\":\"e4Kkh_MR\",\"right\":\"Kz_nCGC3\"};","import { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const sortType = filter.sortType;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n          {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n          {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.modelAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeModel')}\n          {attributesCount > 0\n            && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.backdropAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n          {attributesCount > 0\n            && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.patternAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeSymbol')}\n          {attributesCount > 0\n            && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const modelAttributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = modelAttributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? modelAttributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...modelAttributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const patternAttributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = patternAttributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? patternAttributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...patternAttributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const backdropAttributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = backdropAttributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? backdropAttributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...backdropAttributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): Complete<StateProps> => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"cUjwvN00\",\"pinned\":\"NhJABU3M\",\"item-selected\":\"medfcJpd\",\"itemSelected\":\"medfcJpd\",\"item\":\"dO7FKYY4\",\"selected-item\":\"B2lEJk1v\",\"selectedItem\":\"B2lEJk1v\",\"star\":\"Pb7AU805\"};","import type { ElementRef } from '../../../lib/teact/teact';\nimport {\n  memo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  areUniqueStarGiftsDisallowed?: boolean;\n  areLimitedStarGiftsDisallowed?: boolean;\n  isSelf?: boolean;\n  hasMyUnique?: boolean;\n  isPinned?: boolean;\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  ref: externalRef,\n  idsByCategory,\n  onCategoryChanged,\n  areUniqueStarGiftsDisallowed,\n  areLimitedStarGiftsDisallowed,\n  isSelf,\n  hasMyUnique,\n  isPinned,\n}: StateProps & OwnProps) => {\n  let ref = useRef<HTMLDivElement>();\n  if (externalRef) {\n    ref = externalRef;\n  }\n\n  const lang = useLang();\n\n  const hasCollectible = Boolean(idsByCategory?.collectible?.length);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(category);\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'myUnique') return lang('GiftCategoryMyGifts');\n    if (category === 'collectible') return lang('GiftCategoryCollectibles');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, isPinned && styles.pinned, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areUniqueStarGiftsDisallowed && !isSelf && hasMyUnique && renderCategoryItem('myUnique')}\n      {(!areUniqueStarGiftsDisallowed || !areLimitedStarGiftsDisallowed)\n        && hasCollectible && renderCategoryItem('collectible')}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","import type { FC } from '@teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '@teact';\nimport type React from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiSavedStarGift,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../hooks/useFlag';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport InteractiveSparkles from '../../common/InteractiveSparkles';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftComposer from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  myUniqueGiftsById?: Record<string, ApiSavedStarGift>;\n  myUniqueGiftIds?: string[];\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n  selectedResaleGift?: ApiStarGift;\n  tabId: number;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\nconst CATEGORY_LIST_STICKY_TOP = 3.5 * REM;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  myUniqueGiftsById,\n  myUniqueGiftIds,\n  starBalance,\n  peer,\n  currentUserId,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n  selectedResaleGift,\n  tabId,\n}) => {\n  const {\n    closeGiftModal,\n    openGiftInfoModal,\n    resetResaleGifts,\n    loadResaleGifts,\n    openGiftInMarket,\n    closeResaleGiftsMarket,\n    loadMyUniqueGifts,\n    openGiftTransferConfirmModal,\n    setGiftModalSelectedGift,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n  const categoryListRef = useRef<HTMLDivElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingPeer = useCurrentOrPrev(peer);\n\n  const user = renderingPeer && isApiPeerUser(renderingPeer) ? renderingPeer : undefined;\n  const chat = renderingPeer && isApiPeerChat(renderingPeer) ? renderingPeer : undefined;\n  const isSelf = Boolean(currentUserId && renderingModal?.forPeerId === currentUserId);\n\n  const selectedGift = renderingModal?.selectedGift;\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n  const [isCategoryListPinned, pinCategoryList, unpinCategoryList] = useFlag(false);\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n  const areUniqueStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUniqueStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== STARS_CURRENCY_CODE);\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResaleGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResaleGift) {\n      const giftId = 'regularGiftId' in selectedResaleGift\n        ? selectedResaleGift.regularGiftId\n        : selectedResaleGift.id;\n      loadResaleGifts({ giftId });\n    }\n  }, [selectedResaleGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setGiftModalSelectedGift({ gift: undefined });\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    setIsGiftScreenHeaderForStarGifts(Boolean(selectedGift && 'id' in selectedGift));\n  }, [selectedGift]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n\n      if (categoryListRef.current && scrollerRef.current) {\n        const { top: listTop } = categoryListRef.current.getBoundingClientRect();\n        const { top: scrollerTop } = scrollerRef.current.getBoundingClientRect();\n        const isPinned = listTop - scrollerTop <= CATEGORY_LIST_STICKY_TOP;\n        if (isPinned) {\n          pinCategoryList();\n        } else {\n          unpinCategoryList();\n        }\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = useMemo(() => {\n    if (chat) {\n      return lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (isSelf) {\n      return lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      });\n    }\n\n    if (selectedCategory === 'collectible') {\n      return lang('StarGiftDescriptionCollectibles');\n    }\n\n    return lang('StarGiftDescription', {\n      user: getUserFullName(user)!,\n    }, { withNodes: true, withMarkdown: true });\n  }, [chat, isSelf, selectedCategory, user, lang]);\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      openGiftInMarket({ gift, tabId });\n      return;\n    }\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const handleMyGiftClick = useLastCallback((gift: ApiStarGift) => {\n    if (gift.type === 'starGift' || !myUniqueGiftsById || !peer?.id) return;\n    const savedGift = myUniqueGiftsById[gift.id];\n\n    openGiftTransferConfirmModal({\n      gift: savedGift,\n      recipientId: peer.id,\n    });\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    if (selectedCategory === 'myUnique') {\n      loadMyUniqueGifts();\n    }\n  });\n\n  function renderStarGifts() {\n    if (selectedCategory === 'myUnique') {\n      return (\n        <InfiniteScroll\n          className={styles.starGiftsContainer}\n          items={myUniqueGiftIds}\n          onLoadMore={handleLoadMore}\n          scrollContainerClosest={`.${styles.main}`}\n          itemSelector=\".starGiftItem\"\n        >\n          {myUniqueGiftsById && myUniqueGiftIds?.map((giftId) => {\n            const savedGift = myUniqueGiftsById[giftId];\n            if (!savedGift) return undefined;\n\n            return (\n              <GiftItemStar\n                key={giftId}\n                gift={savedGift.gift}\n                observeIntersection={observeIntersection}\n                onClick={handleMyGiftClick}\n                withTransferBadge\n              />\n            );\n          })}\n        </InfiniteScroll>\n      );\n    }\n\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, availabilityResale } = gift;\n\n      if (areLimitedStarGiftsDisallowed && isLimited) {\n        return !areUniqueStarGiftsDisallowed ? availabilityResale : false;\n      }\n\n      if (areUnlimitedStarGiftsDisallowed && !isLimited) return false;\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = Boolean(gift.availabilityResale) && !areUniqueStarGiftsDisallowed;\n          const shouldDuplicateAsResale = shouldShowResale && !gift.isSoldOut && !areLimitedStarGiftsDisallowed;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setGiftModalSelectedGift({ gift: undefined });\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      closeResaleGiftsMarket({ tabId });\n      return;\n    }\n    if (isGiftScreen) {\n      setGiftModalSelectedGift({ gift: undefined });\n      return;\n    }\n    handleCloseModal();\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            className={styles.avatar}\n            size={AVATAR_SIZE}\n            peer={renderingPeer}\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <InteractiveSparkles\n            className={styles.logoBackground}\n            color=\"gold\"\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n            onRequestAnimation={handleRequestAnimation}\n          />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              ref={categoryListRef}\n              areUniqueStarGiftsDisallowed={areUniqueStarGiftsDisallowed}\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              isSelf={isSelf}\n              hasMyUnique={Boolean(myUniqueGiftIds?.length)}\n              isPinned={isCategoryListPinned}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <h2 className={styles.resaleHeaderText}>\n            {selectedResaleGift.title}\n          </h2>\n          {isFirstLoading\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('Loading')}\n              </div>\n            )}\n          {!isFirstLoading && resaleGiftsCount !== undefined\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('HeaderDescriptionResaleGifts', {\n                  count: resaleGiftsCount,\n                }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n              </div>\n            )}\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"tiny\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader,\n        isCategoryListPinned && styles.noBorder)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResaleGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftComposer\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n  const selectedResaleGift = modal?.selectedResaleGift;\n\n  return {\n    boostPerSentGift: global.appConfig.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    myUniqueGiftsById: global.myUniqueGifts?.byId,\n    myUniqueGiftIds: global.myUniqueGifts?.ids,\n    starBalance: stars?.balance,\n    peer,\n    currentUserId,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n    selectedResaleGift,\n    tabId: selectTabState(global).id,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'myUnique') return 1;\n  return 2;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W3JMs1YE\",\"picker\":\"wOipz1Y_\"};","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","import type { TeactNode } from '../../../lib/teact/teact';\n\nimport type { ApiPeer, ApiStarGiftAttributeOriginalDetails } from '../../../api/types';\n\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { type LangFn } from '../../../util/localization';\nimport { renderTextWithEntities } from './renderTextWithEntities';\n\nimport Link from '../../ui/Link';\n\ntype GiftOriginalInfoOptions = {\n  originalDetails: ApiStarGiftAttributeOriginalDetails;\n  recipient: ApiPeer;\n  sender?: ApiPeer;\n  onOpenChat: (peerId: string) => void;\n  lang: LangFn;\n};\n\nexport function renderGiftOriginalInfo({\n  originalDetails,\n  recipient,\n  sender,\n  onOpenChat,\n  lang,\n}: GiftOriginalInfoOptions): TeactNode | undefined {\n  const { recipientId, senderId, date, message } = originalDetails;\n\n  const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n  const recipientLink = (\n    <Link onClick={() => onOpenChat(recipientId)} isPrimary>\n      {getPeerTitle(lang, recipient)}\n    </Link>\n  );\n\n  if (!sender || senderId === recipientId) {\n    return message\n      ? lang('GiftInfoPeerOriginalInfoText', {\n        peer: recipientLink,\n        text: renderTextWithEntities(message),\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      })\n      : lang('GiftInfoPeerOriginalInfo', {\n        peer: recipientLink,\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      });\n  }\n\n  const senderLink = (\n    <Link onClick={() => onOpenChat(sender.id)} isPrimary>\n      {getPeerTitle(lang, sender)}\n    </Link>\n  );\n\n  return message\n    ? lang('GiftInfoPeerOriginalInfoTextSender', {\n      peer: recipientLink,\n      sender: senderLink,\n      text: renderTextWithEntities(message),\n      date: formattedDate,\n    }, {\n      withNodes: true,\n    })\n    : lang('GiftInfoPeerOriginalInfoSender', {\n      peer: recipientLink,\n      date: formattedDate,\n      sender: senderLink,\n    }, {\n      withNodes: true,\n    });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ef0cKSqQ\",\"giftPreview\":\"IvuNzslN\",\"backdrop\":\"dNukis4X\",\"arrow\":\"oufsMLLF\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternIcon={giftAttributes.pattern?.sticker}\n          ringsCount={1}\n          ovalFactor={1}\n          patternSize={12}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"nnublcCk\",\"checkBox\":\"fjE0wGvw\",\"checkBoxDescription\":\"tepUTe4z\",\"upgradeIcon\":\"lgyInH5K\",\"descriptionConfirm\":\"BJh2Tufh\",\"titleConfirm\":\"gA102W1G\",\"header\":\"p7FTs7_p\",\"title\":\"pIbzzTir\",\"description\":\"CCPfr26t\",\"warningDescription\":\"eEsRJVa1\",\"modalContent\":\"o9rFZ6By\",\"moreMenuButton\":\"EMwExRMy\",\"closeButton\":\"jQv0ZSEW\",\"giftResalePriceContainer\":\"BN8gf5y6\",\"starAmountIcon\":\"_5guecUe\",\"giftResalePriceStar\":\"H_q8o2vY\",\"headerButton\":\"WA0INleU\",\"left\":\"aOhTHZlf\",\"right\":\"rJOB1u5Q\",\"footer\":\"bho0GTYt\",\"footerDescription\":\"VUylTszM\",\"footerHint\":\"mxS8kDnA\",\"buyButton\":\"i1MmnrPG\",\"unknown\":\"zDauXmpS\",\"giftValue\":\"w_E4LkUj\",\"uniqueValue\":\"uAjIRJva\",\"uniqueAttribute\":\"OJQnkf17\",\"attributeName\":\"dq7wCHJb\",\"uniqueGift\":\"I6o_pGAm\",\"modalHeader\":\"ie9tImaj\",\"modalCloseButton\":\"p38RBGdC\",\"ownerAddress\":\"DavMRg4Q\",\"copyIcon\":\"SLX5tX8C\",\"messageContainer\":\"oW5T3mkV\",\"removeMessageButton\":\"TrW2LVm5\"};","import { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../../global/helpers/peers';\nimport { getMainUsername } from '../../../../global/helpers/users';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  releasedByPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  releasedByPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n    openGiftInfoValueModal,\n    updateResaleGiftsFilter,\n    openGiftInMarket,\n    openGiftDescriptionRemoveModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n  const [shouldPayInTon, setShouldPayInTon] = useState<boolean>(false);\n\n  const uniqueGiftHeaderRef = useRef<HTMLDivElement>();\n\n  const handleSymbolClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.pattern) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [],\n        patternAttributes: [{\n          type: 'pattern',\n          documentId: giftAttributes.pattern.sticker.id,\n        }],\n      },\n    });\n  });\n\n  const handleBackdropClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.backdrop) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [{\n          type: 'backdrop',\n          backdropId: giftAttributes.backdrop.backdropId,\n        }],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const handleModelClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.model) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [{\n          type: 'model',\n          documentId: giftAttributes.model.sticker.id,\n        }],\n        backdropAttributes: [],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const giftSubtitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return undefined;\n\n    if (releasedByPeer) {\n      const releasedByUsername = `@${getMainUsername(releasedByPeer)}`;\n      const ownerTitle = releasedByUsername || getPeerTitle(lang, releasedByPeer);\n      const fallbackText = isApiPeerUser(releasedByPeer)\n        ? lang('ActionFallbackUser')\n        : lang('ActionFallbackChannel');\n\n      return lang('GiftInfoCollectibleBy', {\n        number: gift.number, owner: ownerTitle || fallbackText }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    return lang('GiftInfoCollectible', { number: gift.number });\n  }, [gift, releasedByPeer, lang]);\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n\n  const selfCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug);\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const isSelfUnique = Boolean(selfCollectibleStatus);\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights\n      : gift?.type === 'starGift'\n        ? renderingTargetPeer?.id === currentUserId\n        : gift?.ownerId === currentUserId || isSelfUnique\n  );\n\n  function getResalePrice(isInTon?: boolean) {\n    if (!isGiftUnique) return undefined;\n    const amounts = gift.resellPrice;\n    if (!amounts) return undefined;\n\n    if (gift?.resaleTonOnly || isInTon) {\n      return amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n    }\n\n    return amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n  }\n\n  const resellPrice = getResalePrice();\n  const confirmPrice = getResalePrice(shouldPayInTon);\n  const resellPriceInStars = resellPrice?.currency === TON_CURRENCY_CODE && isGiftUnique\n    ? gift.resellPrice?.find((amount) => amount.currency === STARS_CURRENCY_CODE)\n    : undefined;\n  const canBuyGift = !isSelfUnique && gift?.type === 'starGiftUnique'\n    && gift.ownerId !== currentUserId && Boolean(resellPrice);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleRemoveMessage = useLastCallback(() => {\n    if (!savedGift?.inputGift || !savedGift.dropOriginalDetailsStars || !gift || !giftAttributes) return;\n\n    const { originalDetails } = giftAttributes;\n    if (!originalDetails) return;\n\n    openGiftDescriptionRemoveModal({\n      gift: savedGift,\n      price: savedGift.dropOriginalDetailsStars,\n      details: originalDetails,\n    });\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    const giftOwnerId = renderingTargetPeer?.id;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift, peerId: giftOwnerId });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !getResalePrice()) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    const price = getResalePrice(shouldPayInTon);\n    if (!peer || !price || gift?.type !== 'starGiftUnique') return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, price });\n  });\n\n  const handleOpenValueModal = useLastCallback(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return;\n\n    openGiftInfoValueModal({\n      gift,\n    });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button className={styles.buyButton} onClick={handleBuyGift}>\n          <div>\n            {lang('ButtonBuyGift', {\n              stars: resellPrice?.currency === TON_CURRENCY_CODE\n                ? formatTonAsIcon(lang, resellPrice.amount, { shouldConvertFromNanos: true })\n                : formatStarsAsIcon(lang, resellPrice?.amount, { asFont: true }),\n            }, { withNodes: true })}\n          </div>\n          {resellPrice?.currency === TON_CURRENCY_CODE && Boolean(resellPriceInStars) && (\n            <div className={styles.footerHint}>\n              {lang('GiftBuyEqualsTo', {\n                stars: formatStarsAsIcon(lang, resellPriceInStars.amount, { asFont: true }),\n              }, { withNodes: true })}\n            </div>\n          )}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.canUpgrade && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgrade')}\n        </Button>\n      );\n    }\n\n    if (savedGift?.prepaidUpgradeHash) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftAnUpgradeButton')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const isWarningDescription = savedGift?.isRefunded || (!savedGift && gift?.type === 'starGift');\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n      if (savedGift.isRefunded) return lang('GiftInfoDescriptionRefunded');\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (canManage && savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n        return lang('GiftInfoDescriptionUpgrade2');\n      }\n      if (savedGift.canUpgrade && canManage) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n\n        <Button\n          className={styles.closeButton}\n          round\n          color=\"translucent-white\"\n          size=\"tiny\"\n          iconName=\"close\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        />\n\n        {Boolean(resellPrice?.amount) && (\n          <div className={styles.giftResalePriceContainer}>\n            {resellPrice.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, {\n                className: styles.giftResalePriceStar,\n                shouldConvertFromNanos: true,\n              })\n              : formatStarsAsIcon(lang, resellPrice.amount, {\n                asFont: true,\n                className: styles.giftResalePriceStar,\n              })}\n          </div>\n        )}\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div ref={uniqueGiftHeaderRef} className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={giftSubtitle}\n          subtitlePeer={releasedByPeer}\n          showManageButtons={canManage}\n          savedGift={savedGift}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, isWarningDescription && styles.warningDescription)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const ownerPeer = ownerId ? selectPeer(getGlobal(), ownerId) : undefined;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else if (ownerPeer || ownerName) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleModelClick}\n            >\n              {model.name}\n            </span>\n            <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleBackdropClick}\n            >\n              {backdrop.name}\n            </span>\n            <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleSymbolClick}\n            >\n              {pattern.name}\n            </span>\n            <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (gift.valueAmount && gift.valueCurrency) {\n        const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n        tableData.push([\n          lang('GiftInfoValue'),\n          <span className={styles.uniqueValue}>\n            {lang('GiftInfoValueAmount', { amount: formattedValue })}\n            <BadgeButton onClick={handleOpenValueModal}>\n              {lang('GiftInfoValueLinkMore')}\n            </BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (originalDetails) {\n        const { recipientId, senderId } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const text = renderGiftOriginalInfo({\n          originalDetails, recipient, sender, onOpenChat: openChat, lang,\n        });\n\n        tableData.push([\n          undefined,\n          <div className={styles.messageContainer}>\n            <div>\n              {text}\n            </div>\n            {Boolean(savedGift?.dropOriginalDetailsStars) && (\n              <Button\n                round\n                className={styles.removeMessageButton}\n                size=\"smaller\"\n                color=\"translucent\"\n                ariaLabel=\"Delete original details\"\n                onClick={handleRemoveMessage}\n                iconName=\"delete\"\n              />\n            )}\n          </div>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    isGiftUnique, saleDateInfo,\n    canBuyGift, giftOwnerTitle, resellPrice, giftSubtitle,\n    releasedByPeer, handleSymbolClick, handleBackdropClick, handleModelClick,\n  ]);\n\n  const moreMenuItems = typeGift && (\n    <GiftMenuItems\n      peerId={renderingModal!.peerId!}\n      gift={typeGift}\n      canManage={canManage}\n      collectibleEmojiStatuses={collectibleEmojiStatuses}\n      currentUserEmojiStatus={currentUserEmojiStatus}\n    />\n  );\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        contentClassName={styles.modalContent}\n        closeButtonColor={isGiftUnique ? 'translucent-white' : undefined}\n        moreMenuItems={moreMenuItems}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        currencyInBalanceBar={confirmPrice?.currency}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(confirmPrice) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: confirmPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, confirmPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, confirmPrice.amount, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          {uniqueGift.resaleTonOnly\n            && (\n              <div className={styles.descriptionConfirm}>\n                {lang('ConfirmBuyGiftForTonDescription')}\n              </div>\n            )}\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          <div className={styles.titleConfirm}>\n            {lang('TitleConfirmPayment')}\n          </div>\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {!uniqueGift.resaleTonOnly && (\n            <>\n              <Checkbox\n                className={styles.checkBox}\n                label={lang('LabelPayInTON')}\n                checked={shouldPayInTon}\n                onCheck={setShouldPayInTon}\n              />\n\n              <div className={styles.checkBoxDescription}>\n                {lang('DescriptionPayInTON')}\n              </div>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    const gift = isSavedGift ? typeGift.gift : typeGift;\n    const releasedByPeerId = gift?.type === 'starGiftUnique' && gift.releasedByPeerId;\n    const releasedByPeer = releasedByPeerId ? selectPeer(global, releasedByPeerId) : undefined;\n\n    return {\n      fromPeer,\n      targetPeer,\n      releasedByPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"v4GJBsdC\",\"sticker\":\"lJodRD0R\",\"description\":\"VjWaO8un\",\"initialPrice\":\"K7zsAhVt\",\"starIcon\":\"Xw91xwpe\",\"footer\":\"OJDo2xUd\",\"footerSticker\":\"hspYTy7V\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './GiftInfoValueModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoValueModal'];\n};\n\nconst HEADER_STICKER_SIZE = 120;\nconst FOOTER_STICKER_SIZE = 24;\n\nconst GiftInfoValueModal: FC<OwnProps> = ({\n  modal,\n}) => {\n  const { closeGiftInfoValueModal, openUrl, openGiftInMarket } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (modal?.valueInfo.fragmentListedUrl) {\n      openUrl({ url: modal.valueInfo.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (modal?.gift) {\n      openGiftInMarket({ gift: modal.gift });\n    }\n  });\n\n  const modalData = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift, valueInfo } = renderingModal;\n    const giftAttributes = getGiftAttributes(gift);\n\n    if (!giftAttributes) return undefined;\n\n    const header = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={giftAttributes.model!.sticker}\n          size={HEADER_STICKER_SIZE}\n        />\n        <Button\n          pill\n          size=\"tiny\"\n          fluid\n          nonInteractive\n        >\n          {formatCurrencyAsString(valueInfo.value, valueInfo.currency, lang.code)}\n        </Button>\n        <div className={styles.description}>\n          {lang('GiftValueDescription', { giftName: gift.title }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n        </div>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftValueTitleInitialSale'),\n      formatDateToString(valueInfo.initialSaleDate * 1000, lang.code),\n    ]);\n\n    tableData.push([\n      lang('GiftValueTitleInitialPrice'),\n      <span className={styles.initialPrice}>\n        {formatStarsAsIcon(lang, valueInfo.initialSaleStars, { className: styles.starIcon })}\n        {' (~ '}\n        {formatCurrencyAsString(valueInfo.initialSalePrice, valueInfo.currency, lang.code)}\n        )\n      </span>,\n    ]);\n\n    if (valueInfo.lastSaleDate) {\n      tableData.push([\n        lang('GiftValueTitleLastSale'),\n        formatDateToString(valueInfo.lastSaleDate * 1000, lang.code),\n      ]);\n    }\n\n    if (valueInfo.lastSalePrice) {\n      tableData.push([\n        lang('GiftValueTitleLastPrice'),\n        formatCurrencyAsString(valueInfo.lastSalePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.floorPrice) {\n      tableData.push([\n        lang('GiftValueTitleMinimumPrice'),\n        formatCurrencyAsString(valueInfo.floorPrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.averagePrice) {\n      tableData.push([\n        lang('GiftValueTitleAveragePrice'),\n        formatCurrencyAsString(valueInfo.averagePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    const canBuyOnFragment = Boolean(valueInfo.fragmentListedUrl && valueInfo.fragmentListedCount);\n    const canBuyOnTelegram = Boolean(valueInfo.listedCount && valueInfo.listedCount);\n    const hasFooter = canBuyOnFragment || canBuyOnTelegram;\n\n    const footer = hasFooter && (\n      <div className={styles.footer}>\n        {canBuyOnFragment && (\n          <Button\n            isText\n            onClick={handleOpenFragment}\n            noForcedUpperCase\n            size=\"tiny\"\n          >\n            {lang.number(valueInfo.fragmentListedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnFragment')}\n          </Button>\n        )}\n\n        {canBuyOnTelegram && (\n          <Button\n            isText\n            noForcedUpperCase\n            size=\"tiny\"\n            onClick={handleOpenTelegramMarket}\n          >\n            {lang.number(valueInfo.listedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnTelegram')}\n          </Button>\n        )}\n      </div>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [lang, renderingModal, handleOpenFragment, handleOpenTelegramMarket]);\n\n  if (!modalData) return undefined;\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={closeGiftInfoValueModal}\n      header={modalData.header}\n      tableData={modalData.tableData}\n      footer={modalData.footer}\n    />\n  );\n};\n\nexport default memo(GiftInfoValueModal);\n","import { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatShortDuration } from '../../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftLockedModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['lockedGiftModal'];\n};\n\nconst GiftLockedModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeLockedGiftModal } = getActions();\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => {\n    closeLockedGiftModal();\n  });\n\n  const getMessageText = useCallback(() => {\n    if (!modal) return '';\n\n    if (modal.untilDate) {\n      const timeRemaining = modal.untilDate ? modal.untilDate - getServerTime() : 0;\n      return lang('GiftLockedMessage', {\n        relativeDate: formatShortDuration(lang, timeRemaining),\n      },\n      {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (modal.reason) {\n      return renderTextWithEntities(modal.reason);\n    }\n\n    return lang('TitleGiftLocked');\n  }, [modal, lang]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      className=\"narrow\"\n      onClose={handleClose}\n      title={lang('TitleGiftLocked')}\n      headerClassName={styles.header}\n    >\n      <p className={styles.message}>\n        {getMessageText()}\n      </p>\n      <Button\n        onClick={handleClose}\n      >\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(GiftLockedModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"AqB1qB8W\",\"message\":\"pA8Bz4TW\"};","// extracted by mini-css-extract-plugin\nexport default {\"checkBoxDescription\":\"pWjQiY4m\",\"inputPriceDescription\":\"SGFmA4kL\",\"checkBox\":\"yt_nODdj\",\"descriptionPrice\":\"r9R0VR_w\",\"inputPrice\":\"ElDo1Bru\"};","import {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport {\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonFromNanos, convertTonToNanos } from '../../../../util/formatCurrency';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText, formatTonAsIcon,\n  formatTonAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsCommission?: number;\n  starsResaleAmountMin: number;\n  starsResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n  tonCommission?: number;\n  tonResaleAmountMin: number;\n  tonResaleAmountMax?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsCommission,\n  starsResaleAmountMin, starsResaleAmountMax, starsUsdWithdrawRate,\n  tonCommission, tonResaleAmountMin, tonResaleAmountMax, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n  const [isPriceInTon, setIsPriceInTon] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const maxAmount = isPriceInTon ? tonResaleAmountMax : starsResaleAmountMax;\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : maxAmount ? Math.min(number, maxAmount) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice(\n      {\n        gift: savedGift.inputGift,\n        price: {\n          currency: isPriceInTon ? 'TON' : 'XTR',\n          amount: isPriceInTon ? convertTonToNanos(price) : price,\n          nanos: 0,\n        },\n      });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const minAmount = isPriceInTon ? tonResaleAmountMin : starsResaleAmountMin;\n  const isPriceCorrect = hasPrice && price >= minAmount;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={isPriceInTon ? lang('PriceInTON') : lang('PriceInStars')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={isPriceInTon ? lang('EnterPriceInTon') : lang('EnterPriceInStars')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled={!isPriceInTon}\n        />\n      </div>\n\n      <div className={styles.inputPriceDescription}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: isPriceInTon ? formatTonAsText(lang, minAmount) : formatStarsAsText(lang, minAmount),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && (() => {\n            const priceWithCommission = commission ? Number((price * commission).toFixed()) : price;\n            return lang('DescriptionComposerGiftResalePrice',\n              {\n                stars: isPriceInTon\n                  ? formatTonAsText(lang, priceWithCommission)\n                  : formatStarsAsText(lang, priceWithCommission),\n              },\n              {\n                withMarkdown: true,\n                withNodes: true,\n              });\n          })()}\n        </span>\n\n        {isPriceCorrect && Boolean(isPriceInTon ? tonUsdRate : starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              isPriceInTon ? convertTonToUsd(price, tonUsdRate!) : price * starsUsdWithdrawRate!,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Checkbox\n        className={styles.checkBox}\n        label={lang('OnlyAcceptTON')}\n        checked={isPriceInTon}\n        onCheck={setIsPriceInTon}\n      />\n\n      <div className={styles.checkBoxDescription}>\n        {lang('OnlyAcceptTONDescription')}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: isPriceInTon ? formatTonAsIcon(lang, price)\n            : formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const starsResaleAmountMin = global.appConfig.starsStargiftResaleAmountMin || 0;\n    const starsResaleAmountMax = global.appConfig.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    const tonCommission = selectTonGiftResaleCommission(global);\n    const tonResaleAmountMin = convertTonFromNanos(global.appConfig.tonStargiftResaleAmountMin || 0);\n    const maxTonFromConfig = global.appConfig.tonStargiftResaleAmountMax;\n    const tonResaleAmountMax = maxTonFromConfig ? convertTonFromNanos(maxTonFromConfig) : undefined;\n\n    const tonUsdRate = global.appConfig.tonUsdRate;\n\n    return {\n      starsCommission,\n      starsResaleAmountMin,\n      starsResaleAmountMax,\n      starsUsdWithdrawRate,\n      tonCommission,\n      tonResaleAmountMin,\n      tonResaleAmountMax,\n      tonUsdRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"EWaVCxY4\",\"footerButton\":\"_Dt6RSQV\",\"link\":\"Xu0TqkRj\",\"priceDecreaseTimer\":\"ryB8xKvy\"};","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport {\n  getRandomGiftPreviewAttributes, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport Link from '../../../ui/Link';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const {\n    closeGiftUpgradeModal,\n    closeGiftInfoModal,\n    upgradeGift,\n    upgradePrepaidGift,\n    openStarGiftPriceDecreaseInfoModal,\n    shiftGiftUpgradeNextPrice,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const isPrepaid = Boolean(renderingModal?.gift?.prepaidUpgradeHash);\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleTimerEnd = useLastCallback(() => {\n    shiftGiftUpgradeNextPrice();\n  });\n\n  const nextPrice = renderingModal?.nextPrices?.[0];\n  const nextPriceDate = nextPrice?.date;\n  const upgradeStars = renderingModal?.currentUpgradeStars;\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n\n    if (!gift) return;\n\n    if (isPrepaid && gift.prepaidUpgradeHash && renderingRecipient) {\n      if (!upgradeStars) return;\n\n      upgradePrepaidGift({\n        peerId: renderingRecipient.id,\n        hash: gift.prepaidUpgradeHash,\n        stars: upgradeStars,\n      });\n      handleClose();\n      closeGiftInfoModal();\n      return;\n    }\n\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  const handleOpenPriceInfo = useLastCallback(() => {\n    if (!renderingModal?.prices) return;\n\n    openStarGiftPriceDecreaseInfoModal({\n      prices: renderingModal.prices,\n      currentPrice: upgradeStars || 0,\n      minPrice: renderingModal.minPrice || 0,\n      maxPrice: renderingModal.maxPrice || 0,\n    });\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const formattedPriceElement = useMemo(() => (upgradeStars ? (\n    <span>\n      <Icon name=\"star\" className=\"star-amount-icon\" />\n      <AnimatedCounter text={lang.number(upgradeStars)} />\n    </span>\n  ) : undefined), [lang, upgradeStars]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const userName = renderingRecipient ? getPeerTitle(lang, renderingRecipient) : lang('ActionFallbackUser');\n\n    const listItemData = (renderingRecipient ? [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftPeerUpgradeUniqueDescription', { user: userName })],\n      ['trade', lang('GiftUpgradeTransferableTitle'),\n        lang('GiftPeerUpgradeTransferableDescription', { user: userName })],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftPeerUpgradeTradeableDescription', { user: userName })],\n    ] : [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ]) satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const hasPriceDecreaseInfo = Boolean(nextPriceDate)\n      && Boolean(renderingModal?.prices?.length)\n      && !gift?.alreadyPaidUpgradeStars;\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            {!isPrepaid && (\n              <Checkbox\n                label={lang('GiftUpgradeKeepDetails')}\n                onCheck={setShouldKeepOriginalDetails}\n                checked={shouldKeepOriginalDetails}\n              />\n            )}\n            <Button className={styles.footerButton} isShiny onClick={handleUpgrade}>\n              <div className={styles.buttonContent}>\n                <div>\n                  {gift.alreadyPaidUpgradeStars\n                    ? lang('GeneralConfirm')\n                    : isPrepaid\n                      ? lang('GiftPayForUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })\n                      : lang('GiftUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })}\n                </div>\n                {hasPriceDecreaseInfo && (\n                  <div className={styles.priceDecreaseTimer}>\n                    {lang('StarGiftPriceDecreaseTimer', {\n                      timer: <TextTimer endsAt={nextPriceDate} onEnd={handleTimerEnd} />,\n                    }, { withNodes: true })}\n                  </div>\n                )}\n              </div>\n            </Button>\n            {hasPriceDecreaseInfo && (\n              <Link\n                className={styles.link}\n                isPrimary\n                onClick={handleOpenPriceInfo}\n              >\n                {lang('StarGiftPriceDecreaseInfoLink')}\n              </Link>\n            )}\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang,\n    renderingRecipient, renderingModal?.gift,\n    shouldKeepOriginalDetails, isPrepaid,\n    renderingModal?.prices?.length,\n    nextPriceDate, formattedPriceElement]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"rCVinZx6\",\"modalContent\":\"MAEILhFp\",\"header\":\"lTDjKYuV\",\"title\":\"_tvAimMQ\",\"description\":\"X88e7g62\",\"finishedBadge\":\"pC_V4Juh\",\"giftName\":\"AwBqE6Vc\",\"footer\":\"kVyu9ZRp\",\"itemsBoughtLink\":\"GwhTY_Uw\",\"itemsBoughtSticker\":\"H4JSQGvw\",\"footerButton\":\"QgTA5Tm_\",\"buttonSubtitle\":\"XV66UlTa\",\"starIcon\":\"Ui25Ac3P\",\"learnMoreLink\":\"xv_0WTej\"};","import {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../../config';\nimport { selectTabState } from '../../../../global/selectors';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatCountdown, formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { HOUR } from '../../../../util/dates/units';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getServerTime } from '../../../../util/serverTime';\nimport {\n  getRandomGiftPreviewAttributes, getStickerFromGift, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport GiftItemStar from '../GiftItemStar';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftAuctionModal.module.scss';\n\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionModal = ({ modal, auctionState }: OwnProps & StateProps) => {\n  const {\n    closeGiftAuctionModal,\n    setGiftModalSelectedGift,\n    openGiftAuctionInfoModal,\n    openGiftAuctionAcquiredModal,\n    openAboutStarGiftModal,\n    showNotification,\n    openChatWithDraft,\n    openUrl,\n    openGiftInMarket,\n  } = getActions();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n\n  const gift = renderingAuctionState?.gift;\n  const state = renderingAuctionState?.state;\n  const userState = renderingAuctionState?.userState;\n  const isFinished = state?.type === 'finished';\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n  const shouldUseUniqueHeader = Boolean(gift && state && previewAttributes);\n\n  const uniqueHeaderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (renderingModal?.sampleAttributes) {\n        updatePreviewAttributes();\n      } else {\n        setPreviewAttributes(undefined);\n      }\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const handleClose = useLastCallback(() => closeGiftAuctionModal());\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!gift) return;\n    openGiftAuctionInfoModal({ auctionGiftId: gift.id });\n  });\n\n  const handleLearnMoreAboutGiftsClick = useLastCallback(() => {\n    openAboutStarGiftModal({});\n  });\n\n  const handleItemsBoughtClick = useLastCallback(() => {\n    if (!gift) return;\n    const giftSticker = getStickerFromGift(gift);\n    openGiftAuctionAcquiredModal({ giftId: gift.id, giftTitle: gift.title, giftSticker });\n  });\n\n  const handleJoinClick = useLastCallback(() => {\n    if (!gift) return;\n    closeGiftAuctionModal({ shouldKeepAuction: true });\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const auctionLink = useMemo(() => {\n    if (!gift?.auctionSlug) return undefined;\n    return `${TME_LINK_PREFIX}auction/${gift.auctionSlug}`;\n  }, [gift]);\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    copyTextToClipboard(auctionLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleShareLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    openChatWithDraft({ text: { text: auctionLink } });\n  });\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (state?.type === 'finished' && state.fragmentListedUrl) {\n      openUrl({ url: state.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (!gift) return;\n    handleClose();\n    openGiftInMarket({ gift });\n  });\n\n  const uniqueHeader = useMemo(() => {\n    if (!shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift!.title || lang('StarGift');\n    const badge = isFinished ? lang('GiftAuctionEnded') : lang('GiftAuctionInfoTitle');\n    const subtitle = (\n      <Link className={styles.learnMoreLink} isPrimary onClick={handleLearnMoreAboutGiftsClick}>\n        {lang('GiftAuctionLearnMoreAboutGifts')}\n      </Link>\n    );\n\n    return (\n      <div ref={uniqueHeaderRef}>\n        <UniqueGiftHeader\n          modelAttribute={previewAttributes!.model}\n          backdropAttribute={previewAttributes!.backdrop}\n          patternAttribute={previewAttributes!.pattern}\n          title={giftTitle}\n          badge={badge}\n          subtitle={subtitle}\n        />\n      </div>\n    );\n  }, [shouldUseUniqueHeader, gift, isFinished, lang, previewAttributes, handleLearnMoreAboutGiftsClick]);\n\n  const regularHeader = useMemo(() => {\n    if (!gift || !state || shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift.title || lang('StarGift');\n    const giftsPerRound = gift.giftsPerRound || 0;\n\n    return (\n      <div className={styles.header}>\n        <GiftItemStar gift={gift} hideBadge noClickable />\n        <h1 className={styles.title}>\n          {giftTitle}\n        </h1>\n        {isFinished ? (\n          <span className={styles.finishedBadge}>{lang('GiftAuctionEnded')}</span>\n        ) : (\n          <p className={styles.description}>\n            {lang('GiftAuctionTopBidders', {\n              count: giftsPerRound,\n              gift: <span className={styles.giftName}>{giftTitle}</span>,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true, withMarkdown: true })}\n          </p>\n        )}\n      </div>\n    );\n  }, [gift, state, shouldUseUniqueHeader, isFinished, lang, handleLearnMoreClick]);\n\n  const header = uniqueHeader || regularHeader;\n\n  const modalData = useMemo(() => {\n    if (!gift || !state || !userState) {\n      return undefined;\n    }\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftAuctionStarted'),\n      formatDateTimeToString(state.startDate * 1000, lang.code, true),\n    ]);\n\n    tableData.push([\n      lang('GiftAuctionEnds'),\n      formatDateTimeToString(state.endDate * 1000, lang.code, true),\n    ]);\n\n    if (gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: lang.number(gift.availabilityTotal),\n        }, { pluralValue: gift.availabilityRemains || 0 }),\n      ]);\n    }\n\n    if (state.type === 'active') {\n      tableData.push([\n        lang('GiftAuctionCurrentRound'),\n        lang('GiftAuctionRoundValue', {\n          current: lang.number(state.currentRound),\n          total: lang.number(state.totalRounds),\n        }),\n      ]);\n    }\n\n    if (isFinished) {\n      tableData.push([\n        lang('GiftAuctionAveragePrice'),\n        formatStarsAsIcon(lang, state.averagePrice, { className: styles.starIcon }),\n      ]);\n    }\n\n    const acquiredCount = userState.acquiredCount;\n    const giftSticker = getStickerFromGift(gift);\n    const auctionTimeLeft = state.endDate - getServerTime();\n    const shouldUseTextTimer = auctionTimeLeft > 0 && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    const canBuyOnFragment = state.type === 'finished'\n      && Boolean(state.fragmentListedUrl && state.fragmentListedCount);\n    const canBuyOnTelegram = state.type === 'finished' && Boolean(state.listedCount);\n\n    const footer = (\n      <div className={styles.footer}>\n        {acquiredCount > 0 && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleItemsBoughtClick}>\n            {lang('GiftAuctionItemsBought', {\n              count: acquiredCount,\n              gift: giftSticker && (\n                <AnimatedIconFromSticker\n                  className={styles.itemsBoughtSticker}\n                  sticker={giftSticker}\n                  size={20}\n                  play={false}\n                />\n              ),\n            }, { pluralValue: acquiredCount, withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnFragment && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenFragment}>\n            {lang('GiftAuctionForSaleOnFragment', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.fragmentListedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.fragmentListedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnTelegram && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenTelegramMarket}>\n            {lang('GiftAuctionForSaleOnTelegram', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.listedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.listedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        <Button\n          noForcedUpperCase\n          className={styles.footerButton}\n          onClick={isFinished ? handleClose : handleJoinClick}\n        >\n          {isFinished ? lang('OK') : (\n            <div>\n              <div>\n                {lang('GiftAuctionJoin')}\n              </div>\n              {auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={state.endDate} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          )}\n        </Button>\n      </div>\n    );\n\n    return {\n      tableData,\n      footer,\n    };\n  }, [gift, state, userState, isFinished, lang, handleJoinClick, handleItemsBoughtClick, handleClose,\n    handleOpenFragment, handleOpenTelegramMarket]);\n\n  const moreMenuItems = useMemo(() => {\n    if (!shouldUseUniqueHeader) return undefined;\n\n    return (\n      <>\n        <MenuItem icon=\"info\" onClick={handleLearnMoreClick}>\n          {lang('GiftAuctionLearnMoreMenuItem')}\n        </MenuItem>\n        <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem icon=\"forward\" onClick={handleShareLink}>\n          {lang('Share')}\n        </MenuItem>\n      </>\n    );\n  }, [shouldUseUniqueHeader, lang, handleLearnMoreClick, handleCopyLink, handleShareLink]);\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      header={header}\n      footer={modalData?.footer}\n      tableData={modalData?.tableData}\n      className={styles.modal}\n      contentClassName={styles.modalContent}\n      closeButtonColor={shouldUseUniqueHeader ? 'translucent-white' : undefined}\n      moreMenuItems={moreMenuItems}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionModal?.auctionGiftId;\n    return {\n      auctionState: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"FbamIaWM\",\"headerControlPanel\":\"oKcR_Gxv\",\"slider\":\"lpcp8Oip\",\"title\":\"jNHNh7KT\",\"subtitle\":\"HlVun4XF\",\"infoCards\":\"K9fWcZP0\",\"infoCard\":\"QBcr61z8\",\"infoCardValue\":\"S9vK5Tny\",\"infoCardLabel\":\"UzCztm_V\",\"separator\":\"eCFcDThE\",\"winningStatus\":\"IENM5upL\",\"bidderInfoSlide\":\"VvFvniw8\",\"winningText\":\"mHlgX1Lm\",\"winningBadge\":\"yWQ_64QE\",\"section\":\"VfdOWkWu\",\"sectionTitle\":\"aJxJv1Tj\",\"sectionTitleTransition\":\"I344VxP8\",\"bidderRow\":\"_6493YZ5\",\"bidderPosition\":\"bjYqFB3Y\",\"bidderInfo\":\"MSwHwQYX\",\"bidderName\":\"StE9kpcQ\",\"topBidderRow\":\"Q0o2Mlnj\",\"topBidderPosition\":\"mQa4yF_w\",\"bidderAmount\":\"jTHhbapk\",\"buttonStar\":\"eY_4yHis\",\"giftSticker\":\"ETmmzDXX\",\"customBidInput\":\"KRqfUs0J\",\"customBidInputIcon\":\"m1O8A6wT\"};","import { memo, useEffect, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAuctionState,\n  ApiStarsAmount,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer, selectTabState } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport renderText from '../../../common/helpers/renderText';\n\nimport { useTransitionActiveKey } from '../../../../hooks/animations/useTransitionActiveKey';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\nimport TextTimer from '../../../ui/TextTimer';\nimport Transition from '../../../ui/Transition';\nimport StarSlider from '../../paidReaction/StarSlider';\nimport BalanceBlock from '../../stars/BalanceBlock';\n\nimport styles from './GiftAuctionBidModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionBidModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n  starBalance?: ApiStarsAmount;\n  currentUserPeer?: ApiPeer;\n  topBidderIds?: string[];\n};\n\nconst DEFAULT_BID_AMOUNT = 50;\nconst MAX_BID_AMOUNT_STEP = 50000;\nconst MAX_CUSTOM_BID_AMOUNT = 1000000000;\nconst BID_ROUNDING_STEP = 10000;\nconst MIN_SLIDER_PROGRESS = 0.25;\nconst GIFT_STICKER_SIZE = 24;\nconst DEFAULT_TOP_BIDDERS_COUNT = 3;\n\nconst GiftAuctionBidModal = ({\n  modal,\n  auctionState,\n  starBalance,\n  currentUserPeer,\n  topBidderIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionBidModal, sendStarGiftAuctionBid, loadGiftAuction } = getActions();\n\n  const isOpen = Boolean(modal);\n\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n  const renderingTopBidderIds = useCurrentOrPrev(topBidderIds);\n\n  const renderingTopBidderPeers = useMemo(() => {\n    if (!renderingTopBidderIds) return undefined;\n    const global = getGlobal();\n    return renderingTopBidderIds\n      .map((id) => selectPeer(global, id))\n      .filter(Boolean);\n  }, [renderingTopBidderIds]);\n\n  const [topBidder1, topBidder2, topBidder3] = renderingTopBidderPeers || [];\n\n  const topBidder1Key = useTransitionActiveKey([topBidder1?.id || '0']);\n  const topBidder2Key = useTransitionActiveKey([topBidder2?.id || '0']);\n  const topBidder3Key = useTransitionActiveKey([topBidder3?.id || '0']);\n\n  const giftsPerRound = renderingAuctionState?.gift.giftsPerRound || 0;\n\n  const lang = useLang();\n\n  const activeState = renderingAuctionState?.state.type === 'active'\n    ? renderingAuctionState.state\n    : undefined;\n  const userState = renderingAuctionState?.userState;\n\n  const [selectedBidAmount, setSelectedBidAmount] = useState(DEFAULT_BID_AMOUNT);\n  const [isCustomBidModalOpen, openCustomBidModal, closeCustomBidModal] = useFlag();\n  const [customBidValue, setCustomBidValue] = useState('');\n\n  const baseMinBid = activeState?.minBidAmount || DEFAULT_BID_AMOUNT;\n\n  const currentMinBid = userState?.minBidAmount || baseMinBid;\n\n  const sliderMaxValue = Math.ceil(currentMinBid / BID_ROUNDING_STEP) * BID_ROUNDING_STEP + MAX_BID_AMOUNT_STEP;\n\n  useEffect(() => {\n    setSelectedBidAmount(currentMinBid);\n  }, [currentMinBid]);\n\n  const nextRoundAt = activeState?.nextRoundAt;\n\n  const bidDifference = userState?.bidAmount ? selectedBidAmount - userState.bidAmount : 0;\n  const isAtMaxValue = selectedBidAmount >= sliderMaxValue;\n\n  const sliderSecondaryText = useMemo(() => {\n    if (isAtMaxValue) return lang('GiftAuctionTapToBidMore');\n    if (bidDifference <= 0) return undefined;\n    return (\n      <>\n        +\n        <AnimatedCounter text={lang.number(bidDifference)} />\n      </>\n    );\n  }, [bidDifference, isAtMaxValue, lang]);\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setSelectedBidAmount(value);\n  });\n\n  const handleTimerEnd = useLastCallback(() => {\n    if (!modal?.auctionGiftId || !isOpen) return;\n    loadGiftAuction({ giftId: modal.auctionGiftId });\n  });\n\n  const handleRequestCustomValue = useLastCallback(() => {\n    openCustomBidModal();\n  });\n\n  const handleBadgeClick = useLastCallback(() => {\n    if (isAtMaxValue) {\n      handleRequestCustomValue();\n    }\n  });\n\n  const handleCustomBidChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    const numValue = Number(value);\n    if (numValue > MAX_CUSTOM_BID_AMOUNT) return;\n    setCustomBidValue(value);\n  });\n\n  const handleCustomBidSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n\n    const resultValue = Number(customBidValue);\n    if (resultValue < currentMinBid) return;\n\n    setSelectedBidAmount(resultValue);\n    closeCustomBidModal();\n\n    setCustomBidValue('');\n\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: resultValue,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: selectedBidAmount,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const userPosition = useMemo(() => {\n    if (!selectedBidAmount || !activeState?.bidLevels?.length) return undefined;\n\n    const { bidLevels } = activeState;\n    const userBidDate = userState?.bidDate || Number.MAX_SAFE_INTEGER;\n\n    for (const level of bidLevels) {\n      if (level.amount < selectedBidAmount\n        || (level.amount === selectedBidAmount && level.date >= userBidDate)) {\n        return level.pos;\n      }\n    }\n\n    return bidLevels[bidLevels.length - 1].pos + 1;\n  }, [selectedBidAmount, activeState, userState?.bidDate]);\n\n  function renderInfoCards() {\n    return (\n      <div className={styles.infoCards}>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(currentMinBid)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionMinimumBid')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <TextTimer endsAt={nextRoundAt || 0} shouldShowZeroOnEnd onEnd={handleTimerEnd} />\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionUntilNextRound')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <AnimatedIconFromSticker\n              noLoop={false}\n              className={styles.giftSticker}\n              sticker={renderingAuctionState?.gift.sticker}\n              size={GIFT_STICKER_SIZE}\n            />\n            {lang.number(activeState?.giftsLeft || 0)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionLeft')}</div>\n        </div>\n      </div>\n    );\n  }\n\n  const isWinning = Boolean(userState?.bidAmount && userPosition && userPosition <= giftsPerRound);\n\n  function renderCurrentBidSectionTitle() {\n    const giftTitle = renderingAuctionState?.gift.title || lang('StarGift');\n    const nextGiftNum = userPosition && userPosition <= 100\n      ? (activeState?.lastGiftNum || 0) + userPosition\n      : undefined;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={isWinning ? 0 : 1}\n        className={styles.sectionTitleTransition}\n        slideClassName={styles.bidderInfoSlide}\n      >\n        {isWinning ? (\n          <div className={styles.winningStatus}>\n            <span className={styles.winningText}>{lang('GiftAuctionYoureWinning')}</span>\n            <span className={styles.winningBadge}>\n              {lang('GiftUnique', { title: giftTitle, number: nextGiftNum ? lang.number(nextGiftNum) : undefined })}\n            </span>\n          </div>\n        ) : (\n          <div className={styles.sectionTitle}>{lang('GiftAuctionYourBidWillBe')}</div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderUserBid() {\n    return (\n      <div className={styles.section}>\n        {renderCurrentBidSectionTitle()}\n        <div className={styles.bidderRow}>\n          <div className={styles.bidderPosition}>\n            {userPosition && userPosition > 100 ? `${userPosition}+` : (userPosition || 1)}\n          </div>\n          <div className={styles.bidderInfo}>\n            {currentUserPeer && <Avatar peer={currentUserPeer} size=\"small\" />}\n            {currentUserPeer && <FullNameTitle peer={currentUserPeer} className={styles.bidderName} />}\n          </div>\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(selectedBidAmount)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTopBidderRow(\n    index: number,\n    emoji: string,\n    peer: ApiPeer | undefined,\n    amount: number | undefined,\n    activeKey: number,\n  ) {\n    return (\n      <div className={styles.topBidderRow} key={index}>\n        <div className={styles.topBidderPosition}>\n          {renderText(emoji, ['emoji'])}\n        </div>\n        <Transition\n          name=\"fade\"\n          activeKey={activeKey}\n          className={styles.bidderInfo}\n          slideClassName={styles.bidderInfoSlide}\n        >\n          {peer && (\n            <>\n              <Avatar peer={peer} size=\"small\" />\n              <FullNameTitle peer={peer} className={styles.bidderName} />\n            </>\n          )}\n        </Transition>\n        {amount !== undefined && (\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(amount)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderTopWinners() {\n    const topCount = DEFAULT_TOP_BIDDERS_COUNT;\n    const bidLevels = activeState?.bidLevels;\n\n    return (\n      <div className={styles.section}>\n        <div className={styles.sectionTitle}>\n          {lang('GiftAuctionTopWinners', { count: topCount }, { pluralValue: topCount })}\n        </div>\n        {renderTopBidderRow(0, '', topBidder1, bidLevels?.[0]?.amount, topBidder1Key)}\n        {renderTopBidderRow(1, '', topBidder2, bidLevels?.[1]?.amount, topBidder2Key)}\n        {renderTopBidderRow(2, '', topBidder3, bidLevels?.[2]?.amount, topBidder3Key)}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      contentClassName={styles.content}\n      onClose={closeGiftAuctionBidModal}\n      isLowStackPriority\n    >\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={currentMinBid}\n        minValue={baseMinBid}\n        minAllowedValue={currentMinBid}\n        minAllowedProgress={MIN_SLIDER_PROGRESS}\n        maxValue={sliderMaxValue}\n        floatingBadgeDescription={sliderSecondaryText}\n        onChange={handleAmountChange}\n        onBadgeClick={handleBadgeClick}\n        onCustomValueClick={handleRequestCustomValue}\n        shouldUseDynamicColor\n        shouldAllowCustomValue\n      />\n\n      <h3 className={styles.title}>{lang('GiftAuctionPlaceBid')}</h3>\n      {renderInfoCards()}\n\n      {renderUserBid()}\n      {renderTopWinners()}\n\n      <Button noForcedUpperCase onClick={handleSubmit}>\n        {lang(userState?.bidAmount ? 'GiftAuctionAddToBid' : 'GiftAuctionPlaceBidButton', {\n          amount: formatStarsAsIcon(lang,\n            userState?.bidAmount ? selectedBidAmount - userState.bidAmount : selectedBidAmount,\n            { asFont: true, className: styles.buttonStar }),\n        }, { withNodes: true })}\n      </Button>\n      <ConfirmDialog\n        isOpen={isCustomBidModalOpen}\n        title={lang('GiftAuctionCustomBidTitle')}\n        confirmLabel={lang('GiftAuctionCustomBidButton')}\n        isConfirmDisabled={!customBidValue || Number(customBidValue) < currentMinBid}\n        confirmHandler={handleCustomBidSubmit}\n        onClose={closeCustomBidModal}\n      >\n        <p>{lang('GiftAuctionCustomBidDescription', { count: renderingAuctionState?.gift.giftsPerRound })}</p>\n        <div className={styles.customBidInput}>\n          <StarIcon type=\"gold\" size=\"adaptive\" className={styles.customBidInputIcon} />\n          <InputText\n            value={customBidValue}\n            onChange={handleCustomBidChange}\n            placeholder={lang('GiftAuctionCustomBidPlaceholder')}\n            inputMode=\"numeric\"\n            teactExperimentControlled\n          />\n        </div>\n      </ConfirmDialog>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { stars, currentUserId } = global;\n    const { giftAuctionBidModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionBidModal?.auctionGiftId;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    const currentUserPeer = currentUserId ? selectPeer(global, currentUserId) : undefined;\n\n    const topBidderIds = giftAuction?.state.type === 'active'\n      ? giftAuction.state.topBidders\n      : undefined;\n\n    return {\n      auctionState: giftAuction,\n      starBalance: stars?.balance,\n      currentUserPeer,\n      topBidderIds,\n    };\n  },\n)(GiftAuctionBidModal));\n","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftAuctionInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionInfoModal'];\n};\n\ntype StateProps = {\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionInfoModal = ({\n  modal,\n  giftAuction,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionInfoModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal && giftAuction);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionInfoModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.iconWrapper}>\n          <Icon name=\"auction-filled\" className={styles.icon} />\n        </div>\n        <div className={styles.title}>\n          {lang('GiftAuctionInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('GiftAuctionInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    const count = giftAuction?.gift.giftsPerRound || 0;\n    return [\n      ['auction-drop', lang('GiftAuctionInfoTopBiddersTitle', { count }, { pluralValue: count }),\n        lang('GiftAuctionInfoTopBiddersSubtitle', { count }, { pluralValue: count })],\n      ['auction-next-round', lang('GiftAuctionInfoBidCarryoverTitle'),\n        lang('GiftAuctionInfoBidCarryoverSubtitle', { count })],\n      ['stars-refund', lang('GiftAuctionInfoMissedBiddersTitle'),\n        lang('GiftAuctionInfoMissedBiddersSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang, giftAuction]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionInfoModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionInfoModal?.auctionGiftId;\n    return {\n      giftAuction: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"BYvGxmfu\",\"iconWrapper\":\"X5HEn2ho\",\"icon\":\"aiSlk9Zw\",\"title\":\"obG607lY\",\"subtitle\":\"wKo4cuID\",\"footer\":\"M_SnCV2j\",\"understoodIcon\":\"OQCwJP3j\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"Pz3wJVwI\",\"content\":\"vBYqMeRD\",\"giftsListContainer\":\"Ly9mKtg2\",\"giftsList\":\"lla9jO09\",\"giftHeader\":\"TuVkgxwZ\",\"bidValue\":\"zdUvUfOO\",\"badge\":\"btuWuz25\",\"starIcon\":\"GRggVFef\",\"okButton\":\"kIsP2W0m\"};","import { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionAcquiredGift, ApiSticker } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrollNotch from '../../../../hooks/useScrollNotch';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftAuctionAcquiredModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionAcquiredModal'];\n};\n\ntype StateProps = {\n  acquiredGifts?: ApiStarGiftAuctionAcquiredGift[];\n  giftTitle?: string;\n  giftSticker?: ApiSticker;\n};\n\nconst GiftAuctionAcquiredModal = ({ modal, acquiredGifts, giftTitle, giftSticker }: OwnProps & StateProps) => {\n  const { closeGiftAuctionAcquiredModal } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal?.giftId);\n  const renderingGifts = useCurrentOrPrev(acquiredGifts);\n  const renderingGiftTitle = useCurrentOrPrev(giftTitle);\n  const renderingGiftSticker = useCurrentOrPrev(giftSticker);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionAcquiredModal();\n  });\n\n  const giftItems = useMemo(() => {\n    if (!renderingGifts?.length) return undefined;\n\n    return renderingGifts.map((gift) => {\n      const header = lang('GiftAuctionBoughtGiftHeader', {\n        gift: renderingGiftTitle || lang('StarGift'),\n        giftNumber: gift.giftNumber ? lang.number(gift.giftNumber) : '',\n        round: lang.number(gift.round),\n      });\n\n      const tableData: TableData = [\n        [undefined, (\n          <span className={styles.giftHeader}>\n            {renderingGiftSticker && (\n              <AnimatedIconFromSticker\n                className={styles.giftSticker}\n                sticker={renderingGiftSticker}\n                size={20}\n                play={false}\n              />\n            )}\n            <span>{header}</span>\n          </span>\n        )],\n        [lang('GiftAuctionRecipient'), { chatId: gift.peerId }],\n        [lang('GiftAuctionDate'), formatDateTimeToString(gift.date * 1000, lang.code, true)],\n        [lang('GiftAuctionAcceptedBid'), (\n          <span className={styles.bidValue}>\n            {formatStarsAsIcon(lang, gift.bidAmount, { className: styles.starIcon })}\n            <BadgeButton className={styles.badge}>\n              {lang('GiftAuctionTopPosition', { position: gift.position })}\n            </BadgeButton>\n          </span>\n        )],\n      ];\n\n      return { tableData, key: `${gift.round}-${gift.giftNumber}` };\n    });\n  }, [renderingGifts, renderingGiftTitle, renderingGiftSticker, lang]);\n\n  const giftsCount = renderingGifts?.length || 0;\n\n  useScrollNotch({\n    containerRef,\n    selector: `.${styles.giftsList}`,\n    isBottomNotch: true,\n  }, [giftItems]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('GiftAuctionBoughtGiftsTitle', { count: giftsCount }, { pluralValue: giftsCount })}\n      className={styles.modal}\n      contentClassName={styles.content}\n      onClose={handleClose}\n      isCondensedHeader\n      isSlim\n    >\n      <div className={styles.giftsListContainer} ref={containerRef}>\n        <div className={styles.giftsList}>\n          {giftItems?.map((item) => (\n            <TableInfo key={item.key} tableData={item.tableData} />\n          ))}\n        </div>\n      </div>\n      <Button className={styles.okButton} onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionAcquiredModal } = selectTabState(global);\n\n    return {\n      acquiredGifts: giftAuctionAcquiredModal?.acquiredGifts,\n      giftTitle: giftAuctionAcquiredModal?.giftTitle,\n      giftSticker: giftAuctionAcquiredModal?.giftSticker,\n    };\n  },\n)(GiftAuctionAcquiredModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftAuctionChangeRecipientModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionChangeRecipientModal'];\n};\n\ntype StateProps = {\n  oldPeer?: ApiPeer;\n  newPeer?: ApiPeer;\n};\n\nconst AVATAR_SIZE = 4 * REM;\n\nconst GiftAuctionChangeRecipientModal = ({ modal, oldPeer, newPeer }: OwnProps & StateProps) => {\n  const { closeGiftAuctionChangeRecipientModal, openGiftAuctionBidModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingOldPeer = useCurrentOrPrev(oldPeer);\n  const renderingNewPeer = useCurrentOrPrev(newPeer);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.auctionGiftId) return;\n\n    closeGiftAuctionChangeRecipientModal();\n    openGiftAuctionBidModal({\n      auctionGiftId: renderingModal.auctionGiftId,\n      peerId: renderingModal.newPeerId,\n      message: renderingModal.message,\n      shouldHideName: renderingModal.shouldHideName,\n    });\n  });\n\n  if (!renderingOldPeer || !renderingNewPeer) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftAuctionChangeRecipientTitle')}\n      onClose={closeGiftAuctionChangeRecipientModal}\n      confirmLabel={lang('Continue')}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.preview}>\n        <Avatar peer={renderingOldPeer} size={AVATAR_SIZE} />\n        <Icon name=\"next\" className={styles.arrow} />\n        <Avatar peer={renderingNewPeer} size={AVATAR_SIZE} />\n      </div>\n      <p>\n        {lang('GiftAuctionChangeRecipientDescription', {\n          oldPeer: getPeerTitle(lang, renderingOldPeer),\n          newPeer: getPeerTitle(lang, renderingNewPeer),\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const oldPeer = modal?.oldPeerId ? selectPeer(global, modal.oldPeerId) : undefined;\n    const newPeer = modal?.newPeerId ? selectPeer(global, modal.newPeerId) : undefined;\n\n    return {\n      oldPeer,\n      newPeer,\n    };\n  })(GiftAuctionChangeRecipientModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"preview\":\"GiX7PhEa\",\"arrow\":\"rkG87LNM\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport Button from '../../ui/Button';\nimport TableInfoModal, { type TableData } from '../common/TableInfoModal';\n\nimport styles from './StarGiftPriceDecreaseInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starGiftPriceDecreaseInfoModal'];\n};\n\nconst StarGiftPriceDecreaseInfoModal = ({ modal }: OwnProps) => {\n  const { closeStarGiftPriceDecreaseInfoModal } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeStarGiftPriceDecreaseInfoModal();\n  });\n\n  const tableData = useMemo(() => {\n    if (!renderingModal) return undefined;\n    const { prices } = renderingModal;\n    return prices.map((price): TableData[number] => [\n      formatDateTimeToString(price.date * 1000, lang.code, true, undefined, true),\n      formatStarsAsIcon(lang, price.upgradeStars, { containerClassName: styles.starIconContainer }),\n    ]);\n  }, [lang, renderingModal]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <p className={styles.footerText}>{lang('UpgradeCostDrops')}</p>\n        <Button\n          onClick={handleClose}\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  if (!tableData || !renderingModal) return undefined;\n\n  const { currentPrice, minPrice, maxPrice } = renderingModal;\n  const progress = maxPrice !== minPrice ? (currentPrice - minPrice) / (maxPrice - minPrice) : 0;\n\n  const header = (\n    <div className={styles.header}>\n      <PremiumProgress\n        leftText={formatStarsAsText(lang, maxPrice)}\n        rightText={formatStarsAsText(lang, minPrice)}\n        floatingBadgeText={formatStarsAsText(lang, currentPrice)}\n        floatingBadgeIcon=\"star\"\n        progress={progress}\n        isInverted\n        shouldSkipGradient\n        className={styles.progress}\n      />\n      <p className={styles.headerTitle}>{lang('StarGiftUpgradeCostModalTitle')}</p>\n      <p className={styles.headerHint}>{lang('StarGiftUpgradeCostHint')}</p>\n    </div>\n  );\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={handleClose}\n      header={header}\n      tableData={tableData}\n      tableClassName={buildClassName(styles.table, 'custom-scroll')}\n      footer={footer}\n    />\n  );\n};\n\nexport default memo(StarGiftPriceDecreaseInfoModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"ETFjTQkC\",\"headerTitle\":\"JKYZ8cFl\",\"headerHint\":\"wHxufgix\",\"starIconContainer\":\"NEElQBO6\",\"progress\":\"DJPf4ekd\",\"table\":\"WuL_UIYd\",\"footerText\":\"TWuxZcHO\",\"footer\":\"OXLUuiYb\",\"understoodIcon\":\"QJryEH9W\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"kSwGxZvD\",\"content\":\"rGPBNoZR\",\"videoPreviewWrapper\":\"e4SGnYtk\",\"sparkles\":\"wYp9XwdI\",\"title\":\"CMt0et4C\",\"subtitle\":\"exd4nt_X\",\"footer\":\"hx2wl4Ar\",\"understoodIcon\":\"qegJKhEH\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Sparkles from '../../common/Sparkles';\nimport PremiumFeaturePreviewVideo from '../../main/premium/previews/PremiumFeaturePreviewVideo';\nimport Button from '../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../common/TableAboutModal';\n\nimport styles from './AboutStarGiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['aboutStarGiftModal'];\n};\n\nconst AboutStarGiftModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeAboutStarGiftModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeAboutStarGiftModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.videoPreviewWrapper}>\n          <Sparkles preset=\"progress\" className={styles.sparkles} />\n          <PremiumFeaturePreviewVideo\n            videoId={renderingModal?.videoId}\n            videoThumbnail={renderingModal?.videoThumbnail}\n            isActive={isOpen}\n            isDown\n          />\n        </div>\n        <div className={styles.title}>\n          {lang('StarGiftInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('StarGiftInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang, renderingModal, isOpen]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    return [\n      ['diamond', lang('StarGiftInfoUniqueTitle'), lang('StarGiftInfoUniqueSubtitle')],\n      ['auction', lang('StarGiftInfoTradableTitle'), lang('StarGiftInfoTradableSubtitle')],\n      ['crown-wear-outline', lang('StarGiftInfoWearableTitle'), lang('StarGiftInfoWearableSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      contentClassName={styles.content}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop={Boolean(renderingModal?.videoId)}\n      absoluteCloseButtonColor=\"translucent-white\"\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(AboutStarGiftModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"qL0cHbwS\",\"profileBlock\":\"t18QCmAb\",\"radialPattern\":\"_1RfhkfB\",\"lockIcon\":\"jiPObOWv\",\"avatar\":\"JK2zOWA7\",\"userTitle\":\"lxxbgNCl\",\"status\":\"MLMdxkUg\",\"giftTitle\":\"wxg_5ou_\",\"infoDescription\":\"KSCLIMZm\",\"footer\":\"VDrvalBo\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst AVATAR_SIZE = 7 * REM;\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const { isMobile } = useAppLayout();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={patternIcon.customEmoji}\n        yPosition={6.875 * REM}\n        maxRadius={0.31}\n        patternSize={isMobile ? 13 : 15}\n        ovalFactor={1}\n      />\n    );\n  }, [emojiStatus, isOpen, isMobile, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size={AVATAR_SIZE} className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.giftTitle}>\n          {lang('UniqueStatusWearTitle', {\n            gift: mockPeerWithStatus?.emojiStatus?.title,\n          })}\n        </div>\n        <div className={styles.infoDescription}>\n          {lang('UniqueStatusBenefitsDescription')}\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"LQgz8Nlx\",\"giftPreview\":\"hgs0ts_O\",\"backdrop\":\"OnBhMaBw\",\"description\":\"HBxB4QPY\",\"arrow\":\"kXTOUpfb\",\"noPassword\":\"BnqLhoKr\"};","import {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      isCondensedHeader\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternIcon={giftAttributes.pattern?.sticker}\n                ringsCount={1}\n                ovalFactor={1}\n                patternSize={12}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          onClearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferModal,\n    openGiftWithdrawModal,\n    openGiftTransferConfirmModal,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const handlePeerSelect = useLastCallback((peerId: string) => {\n    if (!renderingModal?.gift) return;\n\n    openGiftTransferConfirmModal({\n      gift: renderingModal.gift,\n      recipientId: peerId,\n    });\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={handlePeerSelect}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferConfirmModal'];\n};\n\ntype StateProps = {\n  selectedPeer?: ApiPeer;\n};\n\nconst GiftTransferConfirmModal = ({ modal, selectedPeer }: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferConfirmModal, transferGift, openChat, closeGiftModal, closeGiftTransferModal,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSelectedPeer = useCurrentOrPrev(selectedPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.recipientId) return;\n\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingModal.recipientId,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeGiftTransferConfirmModal();\n    openChat({ id: renderingModal.recipientId });\n\n    closeGiftModal();\n    closeGiftTransferModal();\n  });\n\n  if (!renderingModal) return undefined;\n\n  const { gift } = renderingModal;\n  const uniqueGift = gift.gift.type === 'starGiftUnique' ? gift.gift : undefined;\n\n  if (!uniqueGift) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      noDefaultTitle\n      onClose={closeGiftTransferConfirmModal}\n      confirmLabel={gift.transferStars\n        ? lang(\n          'GiftTransferConfirmButton',\n          { amount: formatStarsAsIcon(lang, gift.transferStars, { asFont: true }) },\n          { withNodes: true },\n        ) : lang('GiftTransferConfirmButtonFree')}\n      confirmHandler={handleConfirm}\n    >\n      {renderingSelectedPeer && (\n        <GiftTransferPreview\n          peer={renderingSelectedPeer}\n          gift={uniqueGift}\n        />\n      )}\n      <p>\n        {gift.transferStars\n          ? lang('GiftTransferConfirmDescription', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            amount: formatStarsAsText(lang, gift.transferStars),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftTransferConfirmDescriptionFree', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const selectedPeer = modal?.recipientId ? selectPeer(global, modal.recipientId) : undefined;\n\n    return {\n      selectedPeer,\n    };\n  })(GiftTransferConfirmModal),\n);\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftDescriptionRemoveModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftDescriptionRemoveModal'];\n};\n\ntype StateProps = {\n  senderPeer?: ApiPeer;\n  recipientPeer?: ApiPeer;\n};\n\nconst GiftDescriptionRemoveModal = ({\n  modal, senderPeer, recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftDescriptionRemoveModal, removeGiftDescription, openChat,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSenderPeer = useCurrentOrPrev(senderPeer);\n  const renderingRecipientPeer = useCurrentOrPrev(recipientPeer);\n\n  const openChatHandler = useLastCallback((id: string) => {\n    closeGiftDescriptionRemoveModal();\n    openChat({ id });\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.price) return;\n\n    removeGiftDescription({\n      gift: renderingModal.gift.inputGift,\n      price: renderingModal.price,\n    });\n  });\n\n  if (!renderingModal || !renderingRecipientPeer) return undefined;\n\n  const { price, details } = renderingModal;\n\n  const description = renderGiftOriginalInfo({\n    originalDetails: details, recipient: renderingRecipientPeer,\n    sender: renderingSenderPeer, onOpenChat: openChatHandler, lang,\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('RemoveGiftDescriptionTitle')}\n      onClose={closeGiftDescriptionRemoveModal}\n      confirmLabel={lang('RemoveGiftDescriptionButton', {\n        amount: formatStarsAsIcon(lang, price, { asFont: true }),\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.confirmText}>{lang('RemoveGiftDescriptionConfirmText')}</div>\n      {Boolean(description) && (\n        <div className={styles.giftDescription}>\n          {description}\n        </div>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const senderPeer = modal?.details.senderId ? selectPeer(global, modal.details.senderId) : undefined;\n    const recipientPeer = modal?.details.recipientId ? selectPeer(global, modal.details.recipientId) : undefined;\n\n    return {\n      senderPeer,\n      recipientPeer,\n    };\n  })(GiftDescriptionRemoveModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"confirmText\":\"LVOpBXUW\",\"giftDescription\":\"FA1_yVBY\"};","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"IHwFZk68\",\"receiveText\":\"lh9lMCxr\",\"table\":\"wGrc4H5s\",\"attributeValue\":\"fqgphS0b\",\"warning\":\"YnTd0N6i\",\"hint\":\"IluvaDj9\",\"success\":\"UitlqwUx\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TON_CURRENCY_CODE } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatCurrencyAmountAsText, formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { round } from '../../../../util/math';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftOfferAcceptModal.module.scss';\n\nconst PRICE_WARNING_THRESHOLD_PERCENT = 10;\n\nexport type OwnProps = {\n  modal: TabState['giftOfferAcceptModal'];\n};\n\ntype StateProps = {\n  recipientPeer?: ApiPeer;\n  starsCommission?: number;\n  tonCommission?: number;\n  starsUsdRate?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftOfferAcceptModal = ({\n  modal, recipientPeer, starsCommission, tonCommission, starsUsdRate, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftOfferAcceptModal, acceptStarGiftOffer,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingBuyerPeer = useCurrentOrPrev(recipientPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal) return;\n\n    acceptStarGiftOffer({ messageId: renderingModal.messageId });\n    closeGiftOfferAcceptModal();\n  });\n\n  const giftAttributes = useMemo(() => {\n    return renderingModal?.gift && getGiftAttributes(renderingModal.gift);\n  }, [renderingModal?.gift]);\n\n  const isPriceInTon = renderingModal?.price.currency === TON_CURRENCY_CODE;\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const priceAmount = renderingModal?.price.amount || 0;\n  const receiveAmount = commission\n    ? (round(priceAmount * commission, isPriceInTon ? 2 : 0))\n    : priceAmount;\n\n  const tableData: TableData = useMemo(() => {\n    if (!giftAttributes) return [];\n\n    const { model, backdrop, pattern } = giftAttributes;\n    const data: TableData = [];\n\n    if (model) {\n      data.push([\n        lang('GiftAttributeModel'),\n        <span className={styles.attributeValue}>\n          <span>{model.name}</span>\n          <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (backdrop) {\n      data.push([\n        lang('GiftAttributeBackdrop'),\n        <span className={styles.attributeValue}>\n          <span>{backdrop.name}</span>\n          <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (pattern) {\n      data.push([\n        lang('GiftAttributeSymbol'),\n        <span className={styles.attributeValue}>\n          <span>{pattern.name}</span>\n          <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    const gift = renderingModal?.gift;\n    if (gift?.valueAmount && gift.valueCurrency) {\n      const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n      data.push([\n        lang('GiftInfoValue'),\n        lang('GiftInfoValueAmount', { amount: formattedValue }),\n      ]);\n    }\n\n    return data;\n  }, [giftAttributes, lang, renderingModal?.gift]);\n\n  const priceWarning = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift } = renderingModal;\n    const { valueUsdAmount } = gift;\n    if (!valueUsdAmount || valueUsdAmount <= 0 || receiveAmount <= 0) return undefined;\n\n    const avgValueUsd = valueUsdAmount / 100;\n\n    let receiveValueUsd: number;\n    if (isPriceInTon) {\n      if (!tonUsdRate) return undefined;\n      receiveValueUsd = convertTonToUsd(receiveAmount, tonUsdRate, true) / 100;\n    } else {\n      if (!starsUsdRate) return undefined;\n      receiveValueUsd = receiveAmount * starsUsdRate / 100;\n    }\n\n    const isLower = avgValueUsd >= receiveValueUsd;\n    const percent = isLower\n      ? (1 - receiveValueUsd / avgValueUsd) * 100\n      : (receiveValueUsd / avgValueUsd - 1) * 100;\n\n    if (percent <= PRICE_WARNING_THRESHOLD_PERCENT) return undefined;\n\n    return { percent, isLow: isLower };\n  }, [renderingModal, receiveAmount, isPriceInTon, tonUsdRate, starsUsdRate]);\n\n  if (!renderingModal || !renderingBuyerPeer) return undefined;\n\n  const { gift, price } = renderingModal;\n  const giftName = lang('GiftUnique', { title: gift.title, number: gift.number });\n  const buyerName = getPeerTitle(lang, renderingBuyerPeer);\n\n  const formattedPrice = formatCurrencyAmountAsText(lang, price);\n  const formattedReceiveAmountAsText = isPriceInTon\n    ? formatTonAsText(lang, receiveAmount, true)\n    : formatStarsAsText(lang, receiveAmount);\n  const formattedReceiveAmountAsIcon = isPriceInTon\n    ? formatTonAsIcon(lang, receiveAmount, { shouldConvertFromNanos: true })\n    : formatStarsAsIcon(lang, receiveAmount, { asFont: true });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftOfferAcceptTitle')}\n      onClose={closeGiftOfferAcceptModal}\n      confirmLabel={lang('GiftOfferAcceptButton', {\n        amount: formattedReceiveAmountAsIcon,\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <GiftTransferPreview\n        peer={renderingBuyerPeer}\n        gift={gift}\n      />\n      <p className={styles.description}>\n        {lang('GiftOfferAcceptText', {\n          gift: giftName,\n          user: buyerName,\n          price: formattedPrice,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      <p className={styles.receiveText}>\n        {lang('GiftOfferAcceptReceive', {\n          amount: formattedReceiveAmountAsText,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      {Boolean(tableData.length) && (\n        <TableInfo tableData={tableData} className={styles.table} />\n      )}\n      {priceWarning && (\n        <p className={priceWarning.isLow ? styles.warning : styles.success}>\n          {lang(priceWarning.isLow ? 'GiftOfferPriceLow' : 'GiftOfferPriceHigh', {\n            percent: formatPercent(priceWarning.percent, 0),\n            gift: gift.title,\n          }, { withNodes: true, withMarkdown: true })}\n        </p>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const recipientPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const tonCommission = selectTonGiftResaleCommission(global);\n\n    const starsUsdSellRateX1000 = global.appConfig?.starsUsdSellRateX1000;\n    const starsUsdRate = starsUsdSellRateX1000 ? starsUsdSellRateX1000 / 1000 : undefined;\n    const tonUsdRate = global.appConfig?.tonUsdRate;\n\n    return {\n      recipientPeer,\n      starsCommission,\n      tonCommission,\n      starsUsdRate,\n      tonUsdRate,\n    };\n  })(GiftOfferAcceptModal),\n);\n","import { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, toggleNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n\n    toggleNoPaidMessagesException ({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['priceConfirmModal'];\n};\n\ntype StateProps = {\n  starBalance?: ApiStarsAmount;\n  tonBalance?: number;\n};\n\nconst PriceConfirmModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starBalance,\n  tonBalance,\n}) => {\n  const actions = getActions();\n\n  const lang = useLang();\n\n  const handleConfirm = useCallback(() => {\n    if (!modal?.directInfo) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    const { currency, newAmount } = modal;\n    const isTon = currency === 'TON';\n    const currentBalance = isTon ? tonBalance : starBalance?.amount;\n\n    if (currentBalance === undefined) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    if (currentBalance < newAmount!) {\n      actions.openStarsBalanceModal({\n        currency: isTon ? 'TON' : 'XTR',\n        tabId: getCurrentTabId(),\n      });\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    actions.sendStarPaymentForm({\n      directInfo: modal.directInfo,\n      tabId: getCurrentTabId(),\n    });\n    actions.closePriceConfirmModal();\n  }, [modal, starBalance, tonBalance, actions]);\n\n  const handleClose = useCallback(() => {\n    actions.closePriceConfirmModal();\n  }, [actions]);\n\n  if (!modal) {\n    return undefined;\n  }\n\n  const {\n    originalAmount,\n    newAmount,\n    currency,\n  } = modal;\n\n  const isTon = currency === 'TON';\n\n  let originalAmountText: string;\n  let newAmountText: string;\n\n  if (isTon) {\n    originalAmountText = formatTonAsText(lang, convertTonFromNanos(originalAmount!));\n    newAmountText = formatTonAsText(lang, convertTonFromNanos(newAmount!));\n  } else {\n    originalAmountText = formatStarsAsText(lang, originalAmount!);\n    newAmountText = formatStarsAsText(lang, newAmount!);\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal)}\n      onClose={handleClose}\n      title={lang('PriceChanged')}\n      confirmHandler={handleConfirm}\n      confirmLabel={lang('PayNewPrice')}\n    >\n      <p>\n        {lang('PriceChangedText', {\n          originalAmount: originalAmountText,\n          newAmount: newAmountText,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const starBalance = global.stars?.balance;\n  const tonBalance = global.ton?.balance?.amount;\n\n  return {\n    starBalance,\n    tonBalance,\n  };\n},\n)(PriceConfirmModal));\n"],"names":["memo","GiftMenuItems","peerId","canManage","gift","typeGift","currentUserEmojiStatus","collectibleEmojiStatuses","showNotification","openChatWithDraft","openGiftTransferModal","openGiftResalePriceComposerModal","openGiftStatusInfoModal","setEmojiStatus","toggleSavedGiftPinned","changeGiftVisibility","updateStarGiftPrice","closeGiftInfoModal","getActions","lang","useLang","oldLang","useOldLang","isSavedGift","savedGift","undefined","starGiftUniqueSlug","type","slug","starGiftUniqueLink","useMemo","TME_LINK_PREFIX","userCollectibleStatus","find","status","currenUniqueEmojiStatusSlug","isGiftUnique","canTakeOff","canWear","giftResalePrice","resellPrice","hasPinOptions","isUnsaved","handleTriggerVisibility","useLastCallback","inputGift","shouldUnsave","handleCopyLink","copyTextToClipboard","message","handleLinkShare","text","handleTransfer","canTransferAt","getServerTime","key","variables","date","formatDateAtTime","handleSell","canResellAt","handleUnsell","price","currency","STARS_CURRENCY_CODE","amount","nanos","icon","title","number","handleWear","emojiStatus","handleTakeOff","documentId","DEFAULT_STATUS_ICON_ID","handleTogglePin","_jsxs","_Fragment","children","_jsx","MenuItem","isPinned","onClick","Boolean","withGlobal","global","modal","user","forUserId","selectUser","StarsGiftModal","closeStarsGiftModal","openInvoice","requestConfetti","dialogRef","useRef","isOpen","renderingModal","useCurrentOrPrev","selectedOption","setSelectedOption","useState","isHeaderHidden","setHeaderHidden","useEffect","showConfetti","dialog","current","top","left","width","height","querySelector","getBoundingClientRect","withStars","isCompleted","handleClick","option","userId","id","stars","handleClose","bottomText","parts","split","SafeLink","url","Modal","className","buildClassName","styles","modalDialog","contentClassName","content","isSlim","onClose","hasAbsoluteCloseButton","main","onScroll","e","scrollTop","currentTarget","header","hiddenHeader","starHeaderText","headerInfo","Avatar","size","peer","avatar","logoBackground","src","StarsBackground","alt","draggable","logo","StarLogo","headerText","center","renderText","formatCurrencyAsString","code","description","getPeerTitle","section","StarTopupOptionList","options","starsGiftOptions","secondaryInfo","chats","listIds","currentUserId","userIds","contactList","activeListIds","active","archivedListIds","archived","StarsGiftingPickerModal","closeStarsGiftingPickerModal","openStarsGiftModal","searchQuery","setSearchQuery","displayedUserIds","usersById","getGlobal","users","byId","combinedIds","unique","filteredUserIds","filterPeersByQuery","ids","query","sortChatIds","filter","isSupport","isUserBot","isDeletedUser","SERVICE_NOTIFICATIONS_USER_ID","handleSelectedUserIdsChange","newSelectedId","length","PickerModal","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","PeerPicker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","BalanceBlock","balance","withAddButton","openStarsBalanceModal","balanceBlock","balanceInfo","smallerText","balanceBottom","TON_CURRENCY_CODE","Icon","name","convertCurrencyFromBaseUnit","StarIcon","formatStarsAmount","BadgeButton","addStarsButton","addStarsIcon","StarsSubscriptionItem","subscription","openStarsSubscriptionModal","pricing","until","isCancelled","photo","useSelector","selectPeer","selectProvidedPeer","hasExpired","Date","now","formattedDate","formatDateToString","root","preview","subscriptionStar","info","subtitle","webPhoto","statusEnded","statusPricing","star","formatInteger","statusPeriod","getTransactionTitle","transaction","paidMessages","count","withNodes","pluralValue","isGiftResale","isNegativeAmount","isPostsSearch","isDropOriginalDetails","isPrepaidUpgrade","isStarGiftAuctionBid","starRefCommision","formatPercent","isGiftUpgrade","extendedMedia","subscriptionPeriod","isReaction","giveawayPostId","isMyGift","isGift","starGift","customPeer","shouldUseCustomPeer","buildStarsTransactionCustomPeer","titleKey","currencyAmount","SingleMediaThumb","boughtMedia","index","media","video","mediaHash","getMediaHash","thumb","getMediaThumbUri","mediaBlob","useMedia","blurry","full","PaidMediaThumb","isTransactionPreview","Math","min","isLocked","dir","slice","reverse","map","item","i","arr","realIndex","MediaSpoiler","isVisible","thumbDataUri","thumbnail","dataUri","noOutline","StarsTransactionItem","openStarsTransactionModal","transactionPeer","selectOptionalPeer","isUniqueGift","giftSticker","getStickerFromGift","data","avatarPeer","subtitleKey","CUSTOM_PEER_PREMIUM","isRefund","hasFailed","isPending","previewContent","backdrop","getGiftAttributes","backgroundColors","centerColor","edgeColor","RadialPatternBackground","uniqueGiftBackground","AnimatedIconFromSticker","sticker","play","amountColorClass","negative","positive","formatDateTimeToString","formatStarsTransactionAmount","HEADER_HEIGHT","REM","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","shouldForceHeight","ton","history","all","transactions","starsBalanceState","tonBalanceState","canBuyPremium","selectIsPremiumPurchaseBlocked","tonUsdRate","appConfig","tonTopupUrl","animationLevel","selectSharedSettings","StarsBalanceModal","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","openUrl","currentState","subscriptions","areTabsPinned","pinTabs","unpinTabs","useFlag","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","tabsRef","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","selectChat","chatId","getChatTitle","bot","botId","getUserFullName","purpose","PAID_MESSAGES_PURPOSE","withMarkdown","shouldShowItems","shouldSuggestGifting","modalHeight","transactionCount","transactionTabs","tosText","handleLoadMoreTransactions","isTon","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","originPaymentInputInvoice","inputInvoice","spendPurposePeerId","handleTonTopUp","minimal","dialogStyle","tabsTop","scrollerTop","modalBalance","noSeparator","renderTonHeaderSection","tonAmount","ParticlesHeader","model","color","isDisabled","tonBalanceContainer","tonBalance","tonIconBalance","tonInUsd","convertTonToUsd","Button","topUpButton","fluid","hint","starButton","isText","noForcedUpperCase","topupOptions","tos","list","sectionTitle","nextOffset","disabled","isLoading","loadMore","loadMoreIcon","container","lastSection","Transition","resolveTransitionName","isRtl","activeKey","renderCount","shouldRestoreHeight","transition","InfiniteScroll","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","noScrollRestoreOnTop","TabList","ref","tabs","tabClassName","tab","activeTab","onSwitchTab","messageInputInvoice","selectChatMessage","messageId","chat","isPaidMedia","paidMedia","paidMediaMessage","paidMediaChat","StarPaymentModal","closeStarsPaymentModal","sendStarPaymentForm","markLoading","unmarkLoading","prevModal","usePrevious","isBotSubscription","canShowPeerItem","descriptionText","botName","starsText","areAllPhotos","every","duration","areAllVideos","mediaText","channelTitle","disclaimerText","link","inviteCustomPeer","getCustomPeerFromInvite","handlePayment","paymentContent","paymentImages","paymentPhoto","avatarStar","PeerBadge","avatarWebPhoto","avatarSize","badgeIcon","badgeText","badgeClassName","amountBadge","paymentImageBackground","PeerChip","botItem","paymentButton","formatStarsAsIcon","asFont","disclaimer","currentUser","statuses","UniqueGiftManageButtons","selectTabState","giftInfoModal","currentUniqueEmojiStatusSlug","handleUnlist","iconName","iconAlignment","iconClassName","ariaLabel","UniqueGiftHeader","modelAttribute","backdropAttribute","patternAttribute","badge","subtitlePeer","showManageButtons","openChat","isMobile","useAppLayout","isGiftHover","markGiftHover","unmarkGiftHover","useTransitionActiveKey","subtitleColor","textColor","radialPatternBackdrop","backdropColors","radialPattern","canvasClassName","radialPatternCanvas","patternIcon","yPosition","maxRadius","patternSize","ovalFactor","withManageButtons","withBadge","slideClassName","transitionSlide","direction","noLoop","onMouseEnter","IS_TOUCH_ENV","onMouseLeave","subtitleBadge","style","buildStyle","AVATAR_SPARKLES_CENTER_SHIFT","paidMessageCommission","starsPaidMessageCommissionPermille","starsGiftSticker","selectGiftStickerForStars","selectGiftStickerForTon","canPlayAnimatedEmojis","selectCanPlayAnimatedEmojis","topSticker","StarsTransactionModal","openMediaViewer","closeStarsTransactionModal","triggerSparklesRef","handleOpenMedia","origin","MediaViewerOrigin","StarsTransaction","standaloneMedia","flatMap","Object","values","handleAvatarMouseMove","handleRequestAnimation","animate","starModalData","giftAttributes","toName","getStarsPeerTitleKey","messageLink","getMessageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","uniqueGiftHeader","pattern","regularHeader","onMouseMove","InteractiveSparkles","onRequestAnimation","centerShift","percent","tableData","peerLabel","push","containerClassName","availabilityTotal","availabilityRemains","total","footerTextParts","footer","renderingModalData","TableInfoModal","hasBackdrop","buttonText","StarsSubscriptionModal","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","hash","hasBotCancelled","isApiPeerUser","specialReplacement","STARS_ICON_PLACEHOLDER","footerTos","DEFAULT_POINTS","LARGE_STEP","THUMB_SIZE","BADGE_HORIZONTAL_PADDING","BADGE_ICON_SIZE","BADGE_TITLE_GAP","textMeasureCanvas","SLIDER_COLORS","buildPoints","minValue","maxValue","result","lastPoint","stepsNeeded","ceil","nextPoint","max","getProgress","points","value","pointIndex","findIndex","point","prevPoint","getValue","progress","floor","round","StarSlider","defaultValue","minValueProp","minAllowedValue","minAllowedProgress","floatingBadgeDescription","shouldUseDynamicColor","shouldAllowCustomValue","onChange","onBadgeClick","onCustomValueClick","containerRef","floatingBadgeContentRef","baseMinValue","actualMinValue","low","high","mid","testPoints","setValue","containerWidth","setContainerWidth","badgeWidth","setBadgeWidth","isDragging","setIsDragging","startXRef","prevBadgeWidth","minSliderProgress","titleEl","floatingBadgeTitle","computedStyle","getComputedStyle","font","fontWeight","fontSize","fontFamily","textWidth","document","createElement","ctx","getContext","measureText","getTextWidth","titleWidth","descriptionEl","descriptionWidth","scrollWidth","newBadgeWidth","currentWidth","abs","handleContainerResize","entry","contentRect","useResizeObserver","minBadgeX","maxBadgeX","beakOffset","beakTipOffset","beakWidth","currentBeakWidth","halfBadgeWidth","maxBeakOffset","CORNER_BEAK_WIDTH","trackLength","distanceFromLeft","distanceFromRight","isLeftSide","distanceToEdge","beakOffsetStart","t","maxTipOffset","calcBadgePosition","beakPath","tipOffset","tipX","generateBeakPath","handleChange","event","rawValue","Number","clampedValue","resultValue","handlePointerDown","clientX","handlePointerMove","handlePointerUp","rect","clickZoneWidth","right","dynamicColor","getColorForProgress","badgeStyle","rootStyle","dragging","floatingBadgeWrapper","floatingBadge","clickable","floatingBadgeText","noTransition","Sparkles","preset","floatingBadgeSparkles","floatingBadgeContent","withDescription","floatingBadgeIcon","AnimatedCounter","floatingBadgeTriangle","viewBox","fill","role","x1","x2","y1","y2","offset","floatingBadgeTrianglePath","d","sparkles","slider","step","onPointerDown","onPointerMove","onPointerUp","customValueIcon","ANONYMOUS_PEER","avatarIcon","customPeerAvatarColor","isCustomPeer","starBalance","maxAmount","paidReactionMaxAmount","defaultPrivacy","settings","paidReactionPrivacy","sendPaidReactionsAsPeerIds","PaidReactionModal","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","senderPeer","handleShowInTopSendersChange","target","checked","handleAmountChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","includes","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","isSelected","itemInfo","FullNameTitle","itemTitle","noFake","noVerified","itemSubtitle","itemIcon","SendAsPeerMenuButton","onTrigger","ripple","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","DropdownMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","trigger","positionX","autoClose","hasCurrentSender","myReactorAmount","forEach","isCurrentReactor","localAmount","sender","sort","a","b","chatTitle","isLowStackPriority","sendAsPeersMenuContainer","headerControlPanel","Separator","topLabel","countText","topPeer","topBadge","separator","Checkbox","checkBox","label","buttonStar","TEXT_TIMER_THRESHOLD","HOUR","theme","selectTheme","isBlurred","isBackgroundBlurred","patternColor","background","customBackground","backgroundColor","selectThemeValues","paidMessagesStars","selectPeerPaidMessagesStars","userFullInfo","selectUserFullInfo","isGiftForSelf","areUniqueStarGiftsDisallowed","disallowedGifts","shouldDisallowUniqueStarGifts","shouldDisallowLimitedStarGifts","tabState","auctionGiftId","isAuction","giftAuction","giftAuctionByGiftId","captionLimit","starGiftMaxMessageLength","isPaymentFormLoading","giftByStars","sendStarGift","sendPremiumGiftByStars","openGiftUpgradeModal","openGiftAuctionBidModal","openGiftAuctionInfoModal","openGiftAuctionChangeRecipientModal","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","useCustomBackground","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","isOutgoing","senderId","action","mediaType","days","months","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleLearnMoreClick","handleMainButtonClick","existingBidPeerId","userState","bidPeerId","oldPeerId","newPeerId","shouldUpgrade","canUseStarsPayment","bgClassName","inert","ActionMessage","threadId","MAIN_THREAD_ID","appearanceOrder","symbolsLeft","TextArea","maxLength","maxLengthIndicator","toString","ListItem","narrow","Switcher","Link","isPrimary","receiver","renderOptionsSection","formatCurrency","giftsPerRound","auctionEndDate","state","endDate","auctionTimeLeft","shouldUseTextTimer","PremiumProgress","rightText","leftText","time","TextTimer","endsAt","formatCountdown","renderFooter","selectGiftStickerForDuration","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","tabIndex","nonInteractive","caption","renderMonths","pill","GiftRibbon","isCurrentUserPremium","selectIsCurrentUserPremium","isResale","withTransferBadge","hideBadge","noClickable","observeIntersection","openGiftInfoModal","openPremiumModal","checkCanSendGift","openGiftAuctionModal","stickerRef","setIsVisible","isHover","markHover","unmarkHover","uniqueGift","regularGift","priceInfo","amounts","resaleTonOnly","getPriceAmount","priceCurrency","resellMinStars","formattedPrice","isLimited","isSoldOut","isPremiumRequired","requirePremium","isUserLimitReached","limitedPerUser","perUserRemains","perUserTotal","onSuccess","ringsCount","giftNumber","lockedUntilDate","giftRibbon","useOnIntersect","visible","isIntersecting","badgeContent","formatTonAsIcon","shouldConvertFromNanos","StickerView","observeIntersectionForPlaying","observeIntersectionForLoading","shouldLoop","shouldPreloadPreview","withSparkleEffect","starGifts","resaleGifts","areGiftsAllLoaded","isAllLoaded","areGiftsLoading","updateIteration","resellGifts","gifts","GiftModalResaleScreen","onGiftClick","loadResaleGifts","updateResaleGiftsFilter","scrollerRef","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","regularGiftId","isGiftsEmpty","viewportIds","useInfiniteScroll","RESALE_GIFTS_LIMIT","observe","useIntersectionObserver","rootRef","throttleMs","handleResetGiftsFilter","resaleScreenRoot","notFoundGiftsRoot","AnimatedIconWithPreview","tgsUrl","LOCAL_TGS_URLS","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleStarGiftsContainer","preloadBackwards","GiftItemStar","ATTRIBUTE_STICKER_SIZE","ResaleGiftMenuAttributeSticker","customColor","useDynamicColorListener","thumbClassName","attributes","counters","GiftResaleFilters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","filteredAndSearchedAttributes","filterBySearch","trim","toLowerCase","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","useContextMenuHandlers","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","isMenuOpen","ModelMenuButton","attributesCount","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","updatedAttributes","some","handlePatternMenuItemClick","handleBackdropMenuItemClick","handleSearchModelInputReset","useCallback","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","Menu","anchor","menu","getMenuElement","onCloseAnimationEnd","menuItemText","menuItemIcon","models","selectedAttributes","isSelectedAll","menuContentContainer","SearchInput","search","onReset","placeholder","menuItemStickerText","renderModelMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenuItems","patterns","renderPatternMenuItems","buttonsContainer","idsByCategory","StarGiftCategoryList","externalRef","onCategoryChanged","areLimitedStarGiftsDisallowed","hasMyUnique","hasCollectible","collectible","selectedCategory","setSelectedCategory","renderCategoryName","category","renderCategoryItem","handleItemClick","useHorizontalScroll","CATEGORY_LIST_STICKY_TOP","runThrottledForScroll","throttle","cb","forPeerId","resaleGiftsCount","areResaleGiftsLoading","selectedResaleGift","boostPerSentGift","boostsPerSentGift","starGiftsById","starGiftIdsByCategory","myUniqueGiftsById","myUniqueGifts","myUniqueGiftIds","tabId","GiftModal","closeGiftModal","resetResaleGifts","openGiftInMarket","closeResaleGiftsMarket","loadMyUniqueGifts","openGiftTransferConfirmModal","setGiftModalSelectedGift","transitionRef","giftHeaderRef","categoryListRef","renderingPeer","isApiPeerChat","selectedGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","isCategoryListPinned","pinCategoryList","unpinCategoryList","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","allGifts","filteredGifts","prevGift","giftsByStars","mapGifts","Map","starsGift","set","baseGift","reduce","prev","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","handleScroll","headerTop","transitionTop","listTop","giftPremiumDescription","starGiftDescription","renderTextFilters","recipientId","handleMyGiftClick","handleLoadMore","handleCloseModal","handleCloseButtonClick","isBackButton","buttonClassName","closeButton","resaleHeader","noBorder","headerSlide","isFirstLoading","resaleHeaderContentContainer","resaleHeaderText","resaleHeaderDescription","commonHeaderText","renderHeader","avatars","premiumGiftsGallery","GiftItemPremium","get","starGiftsDescription","starGiftsTransition","starGiftsContainer","filteredGiftIds","availabilityResale","shouldShowResale","shouldDuplicateAsResale","elements","renderStarGifts","GiftComposer","GiftRecipientPicker","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectCanGift","selectedId","forceShowSelf","renderGiftOriginalInfo","originalDetails","recipient","onOpenChat","recipientLink","renderTextWithEntities","senderLink","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","giftPreview","arrow","fromPeer","targetPeer","hasAdminRights","getHasAdminRight","recipientPeer","releasedByPeerId","releasedByPeer","starGiftMaxConvertPeriod","tonExplorerUrl","GiftInfoModal","convertGiftToStars","openChatWithInfo","focusMessage","buyStarGift","openGiftInfoValueModal","openGiftDescriptionRemoveModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","shouldPayInTon","setShouldPayInTon","uniqueGiftHeaderRef","handleSymbolClick","handleBackdropClick","handleModelClick","renderingFromPeer","renderingTargetPeer","isTargetChat","isSender","canConvertDifference","conversionLeft","hasConvertOption","giftSubtitle","ownerTitle","getMainUsername","fallbackText","owner","selfCollectibleStatus","isSelfUnique","canFocusUpgrade","upgradeMsgId","ownerId","getResalePrice","isInTon","confirmPrice","resellPriceInStars","canBuyGift","giftOwnerTitle","ownerName","handleFocusUpgraded","giftChat","handleConvertToStars","handleRemoveMessage","dropOriginalDetailsStars","details","handleOpenUpgradeModal","giftOwnerId","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","handleOpenValueModal","renderFooterButton","buyButton","footerHint","isShiny","upgradeIcon","prepaidUpgradeHash","saleDateInfo","firstSaleDate","lastSaleDate","modalData","isConverted","canConvert","isVisibleForMe","isWarningDescription","isRefunded","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","warningDescription","CUSTOM_PEER_HIDDEN","unknown","starsValue","giftValue","starAmountIcon","ownerAddress","ownerPeer","copyIcon","withEmojiStatus","uniqueAttribute","attributeName","rarityPercent","issued","issuedCount","totalCount","valueAmount","valueCurrency","formattedValue","uniqueValue","messageContainer","removeMessageButton","tonLink","giftAddress","footerDescription","shouldSkipModal","moreMenuItems","modalContent","closeButtonColor","withBalanceBar","currencyInBalanceBar","ConfirmDialog","noDefaultTitle","confirmLabel","confirmHandler","descriptionConfirm","titleConfirm","formatTonAsText","formatStarsAsText","onCheck","checkBoxDescription","GiftInfoValueModal","closeGiftInfoValueModal","handleOpenFragment","valueInfo","fragmentListedUrl","handleOpenTelegramMarket","giftName","initialSaleDate","initialSaleStars","initialSalePrice","lastSalePrice","floorPrice","averagePrice","canBuyOnFragment","fragmentListedCount","canBuyOnTelegram","listedCount","GiftLockedModal","closeLockedGiftModal","getMessageText","untilDate","timeRemaining","relativeDate","formatShortDuration","reason","headerClassName","starsCommission","selectStarsGiftResaleCommission","starsResaleAmountMin","starsStargiftResaleAmountMin","starsResaleAmountMax","starsStargiftResaleAmountMax","starsUsdWithdrawRateX1000","starsUsdWithdrawRate","tonCommission","selectTonGiftResaleCommission","tonResaleAmountMin","convertTonFromNanos","tonStargiftResaleAmountMin","maxTonFromConfig","tonStargiftResaleAmountMax","tonResaleAmountMax","GiftResalePriceComposerModal","closeGiftResalePriceComposerModal","setPrice","isPriceInTon","setIsPriceInTon","hasPrice","handleChangePrice","parseFloat","isNaN","handleSellGift","convertTonToNanos","commission","minAmount","isPriceCorrect","InputText","inputMode","teactExperimentControlled","priceWithCommission","toFixed","GiftUpgradeModal","closeGiftUpgradeModal","upgradeGift","upgradePrepaidGift","openStarGiftPriceDecreaseInfoModal","shiftGiftUpgradeNextPrice","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","isPrepaid","previewAttributes","setPreviewAttributes","handleTimerEnd","nextPrice","nextPrices","nextPriceDate","currentUpgradeStars","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomGiftPreviewAttributes","handleOpenPriceInfo","prices","currentPrice","minPrice","maxPrice","useInterval","preloadGiftAttributeStickers","formattedPriceElement","userName","listItemData","hasPriceDecreaseInfo","footerButton","buttonContent","priceDecreaseTimer","timer","onEnd","TableAboutModal","giftAuctionModal","auctionState","GiftAuctionModal","closeGiftAuctionModal","openGiftAuctionAcquiredModal","openAboutStarGiftModal","renderingAuctionState","isFinished","shouldUseUniqueHeader","uniqueHeaderRef","handleLearnMoreAboutGiftsClick","handleItemsBoughtClick","giftTitle","handleJoinClick","shouldKeepAuction","auctionLink","auctionSlug","handleShareLink","uniqueHeader","startDate","currentRound","totalRounds","acquiredCount","giftAuctionBidModal","currentUserPeer","topBidderIds","topBidders","GiftAuctionBidModal","closeGiftAuctionBidModal","sendStarGiftAuctionBid","loadGiftAuction","renderingTopBidderIds","renderingTopBidderPeers","topBidder1","topBidder2","topBidder3","topBidder1Key","topBidder2Key","topBidder3Key","activeState","selectedBidAmount","setSelectedBidAmount","isCustomBidModalOpen","openCustomBidModal","closeCustomBidModal","customBidValue","setCustomBidValue","baseMinBid","minBidAmount","currentMinBid","sliderMaxValue","nextRoundAt","bidDifference","bidAmount","isAtMaxValue","sliderSecondaryText","handleRequestCustomValue","handleBadgeClick","handleCustomBidChange","replace","handleCustomBidSubmit","isUpdateBid","handleSubmit","userPosition","bidLevels","userBidDate","bidDate","MAX_SAFE_INTEGER","level","pos","isWinning","renderTopBidderRow","emoji","topBidderRow","topBidderPosition","bidderInfo","bidderInfoSlide","bidderName","bidderAmount","infoCards","infoCard","infoCardValue","infoCardLabel","shouldShowZeroOnEnd","giftsLeft","nextGiftNum","lastGiftNum","sectionTitleTransition","winningStatus","winningText","winningBadge","renderCurrentBidSectionTitle","bidderRow","bidderPosition","renderTopWinners","isConfirmDisabled","customBidInput","customBidInputIcon","giftAuctionInfoModal","GiftAuctionInfoModal","closeGiftAuctionInfoModal","giftAuctionAcquiredModal","acquiredGifts","GiftAuctionAcquiredModal","closeGiftAuctionAcquiredModal","renderingGifts","renderingGiftTitle","renderingGiftSticker","giftItems","giftHeader","bidValue","starIcon","position","giftsCount","useScrollNotch","selector","giftsList","isBottomNotch","isCondensedHeader","giftsListContainer","TableInfo","okButton","oldPeer","newPeer","GiftAuctionChangeRecipientModal","closeGiftAuctionChangeRecipientModal","renderingOldPeer","renderingNewPeer","handleConfirm","StarGiftPriceDecreaseInfoModal","closeStarGiftPriceDecreaseInfoModal","isInverted","shouldSkipGradient","tableClassName","AboutStarGiftModal","closeAboutStarGiftModal","PremiumFeaturePreviewVideo","videoId","videoThumbnail","isDown","absoluteCloseButtonColor","GiftStatusInfoModal","closeGiftStatusInfoModal","useCustomEmoji","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","FRAGMENT_PEER","byKey","hasPassword","twoFaSettings","passwordHint","GiftWithdrawModal","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","password","handleSetUpPassword","screen","SettingsScreens","TwoFaDisabled","exportHint","getDays","noPassword","PasswordForm","shouldShowSubmit","error","errorKey","withRegular","onClearError","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","contactIds","GiftTransferModal","closeGiftTransferModal","openGiftWithdrawModal","orderedChatIds","useFolderManagerForOrderedIds","ALL_FOLDER_ID","sortedLocalIds","foundIds","currentResultsQuery","usePeerSearch","categories","MEMO_EMPTY_ARRAY","peerColorId","handleCategoryChange","displayIds","handlePeerSelect","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","selectedPeer","GiftTransferConfirmModal","closeGiftTransferConfirmModal","transferGift","renderingSelectedPeer","transferStars","GiftDescriptionRemoveModal","closeGiftDescriptionRemoveModal","removeGiftDescription","renderingSenderPeer","renderingRecipientPeer","openChatHandler","starsUsdSellRateX1000","starsUsdRate","GiftOfferAcceptModal","closeGiftOfferAcceptModal","acceptStarGiftOffer","renderingBuyerPeer","priceAmount","receiveAmount","priceWarning","valueUsdAmount","avgValueUsd","receiveValueUsd","isLower","isLow","buyerName","formatCurrencyAmountAsText","formattedReceiveAmountAsText","formattedReceiveAmountAsIcon","ChatRefundModal","closeChatRefundModal","toggleNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","PriceConfirmModal","actions","directInfo","closePriceConfirmModal","newAmount","currentBalance","getCurrentTabId","originalAmount","originalAmountText","newAmountText"],"sourceRoot":""}