{"version":3,"file":"7405.4ced78b0a9b523a5f8fc.js","mappings":"6JASe,SAASA,EAAeC,GACrC,MAAMC,GAASC,EAAAA,EAAAA,OAEPC,OAAQC,IAAUC,EAAAA,EAAAA,GAAS,KACjC,IAAKL,EACH,OAAOM,QAAQC,aAAQC,GAGrBP,EAAOQ,SACTC,IAAIC,gBAAgBV,EAAOQ,SAG7B,MAAMG,EAAMF,IAAIG,gBAAgBb,GAGhC,OAFAC,EAAOQ,QAAUG,GAEVE,EAAAA,EAAAA,IAAaF,IACnB,CAACZ,IAWJ,OATAe,EAAAA,EAAAA,IAAU,IACD,KACDd,EAAOQ,UACTC,IAAIC,gBAAgBV,EAAOQ,SAC3BR,EAAOQ,aAAUD,IAGpB,IAEI,CAAEJ,QACX,C,8HClBA,MACMY,EAAuC,CAAC,EAAG,IAC3CC,EAAwC,CAAC,EAAG,IAC5CC,EAAsC,CAAC,GAAI,GAoCjD,GAAeC,EAAAA,EAAAA,IAlCsBC,EAAGC,oBAAmBC,YACzD,MAAOC,EAAqBC,IAAyBC,EAAAA,EAAAA,IAAQ,IACtDC,EAAaC,IAAiBF,EAAAA,EAAAA,IAAQ,IACvC,SAAEG,IAAaC,EAAAA,EAAAA,MAEfC,EAAaF,EAAWG,EAAAA,IAA2BC,EAAAA,KAEzDC,EAAAA,EAAAA,GAAWN,EAZkB,KAa7B,MAAMO,GAAwBC,EAAAA,EAAAA,IAAYX,EAAuB,CAACA,IAElE,OACEY,EAAAA,EAAAA,IAAA,OAAKC,GAAG,SAASC,UAAWhB,EAAQ,MAAQ,GAAGiB,SAAA,EAC3ChB,IACAiB,EAAAA,EAAAA,GAAA,OAAKF,UAAU,oBAEjBE,EAAAA,EAAAA,GAACC,EAAAA,EAAe,CACdC,KAAMpB,EAAQqB,EAAAA,IAAsBb,EACpCQ,UAAWZ,EAAc,SAAW,QACpCkB,OAAQC,EAAAA,EAAeC,YACvBC,YAAa/B,EACbgC,QAAM,EACNC,OAAQf,KAEVM,EAAAA,EAAAA,GAACC,EAAAA,EAAe,CACdC,KAAMpB,EAAQqB,EAAAA,IAAsBb,EACpCQ,UAAWZ,EAAc,QAAU,SACnCkB,OAAQC,EAAAA,EAAeK,WACvBH,YAAa1B,EAAoBJ,EAAsBC,EACvD8B,QAAM,Q,8FCtCd,SAASG,EAAUC,GACjBA,EAAEC,2BACFD,EAAEE,iBACFF,EAAEG,iBACJ,CAEA,MAuJA,EAvJ+BC,CAC7BC,EACAC,EACAC,EACAC,EACAC,EACAC,KAEA,MAAOC,EAAmBC,IAAwBC,EAAAA,EAAAA,KAAS,IACpDC,EAAmBC,IAAwBF,EAAAA,EAAAA,SAAsCzD,IACjF4D,EAAmBC,IAAwBJ,EAAAA,EAAAA,SAAkCzD,GAE9E8D,GAA0BC,EAAAA,EAAAA,GAAiBnB,IAC1CM,GAA+B,IAAbN,EAAEoB,SACvBC,EAAAA,EAAAA,IAAgB,MACdC,EAAAA,EAAAA,IAActB,EAAEuB,OAAuB,oBAKvCC,GAAoBL,EAAAA,EAAAA,GAAiBnB,KACzCqB,EAAAA,EAAAA,IAAgB,MACdI,EAAAA,EAAAA,IAAiBzB,EAAEuB,OAAuB,kBAGxCjB,GAAmBC,GAAwBP,EAAEuB,OAAuBG,QAAQ,aAGhF1B,EAAEE,iBACFF,EAAEG,kBAEEW,IAIJF,GAAqB,GACrBG,EAAqB,CAAEY,EAAG3B,EAAE4B,QAASC,EAAG7B,EAAE8B,UAC1Cb,EAAqBjB,EAAEuB,YAGnBQ,GAAyBZ,EAAAA,EAAAA,GAAgB,KAC7CP,GAAqB,KAGjBoB,GAAwBb,EAAAA,EAAAA,GAAgB,KAC5CJ,OAAqB3D,KA+FvB,OA3FAO,EAAAA,EAAAA,IAAU,KACR,GAAI2C,IAAmB2B,EAAAA,IAAgBzB,GAA2BC,IAAeA,IAC/E,OAGF,MAAMyB,EAAU7B,EAAWhD,QAC3B,IAAK6E,EACH,OAGF,IAAIC,EAEJ,MAAMC,EAAsBA,KACtBD,IACFE,aAAaF,GACbA,OAAQ/E,IAgDNkF,EAAuBtC,IACvBM,IAGAI,GAA0BV,EAAEG,kBAChCiC,IAEAD,EAAQI,OAAOC,WAAW,IAnDKC,KAC/BL,IAEA,MAAM,QAAER,EAAO,QAAEE,EAAO,OAAEP,GAAWkB,EAAcC,QAAQ,GAEvD5B,GAAsBP,GAAwBgB,EAAuBG,QAAQ,aAKjFiB,SAASC,iBAAiB,WAAa5C,IAEjC6C,EAAAA,IAAUC,EAAAA,IACZN,WAAW,KACTG,SAASI,oBAAoB,YAAahD,EAAW,CACnDiD,SAAS,IAEXL,SAASI,oBAAoB,QAAShD,EAAW,CAC/CiD,SAAS,KA9Fe,KAkG9BjD,EAAUC,IACT,CACDiD,MAAM,EACND,SAAS,IAIPF,EAAAA,IAAUD,EAAAA,KACZF,SAASC,iBAAiB,YAAa7C,EAAW,CAChDkD,MAAM,EACND,SAAS,IAEXL,SAASC,iBAAiB,QAAS7C,EAAW,CAC5CkD,MAAM,EACND,SAAS,KAIbpC,GAAqB,GACrBG,EAAqB,CAAEY,EAAGC,EAASC,EAAGC,MAUNoB,CAAwBlD,GAhIjC,OAyIzB,OALAkC,EAAQU,iBAAiB,aAAcN,EAAqB,CAAEa,SAAS,IACvEjB,EAAQU,iBAAiB,cAAeR,GAAqB,GAC7DF,EAAQU,iBAAiB,WAAYR,GAAqB,GAC1DF,EAAQU,iBAAiB,YAAaR,EAAqB,CAAEe,SAAS,IAE/D,KACLf,IACAF,EAAQa,oBAAoB,aAAcT,GAC1CJ,EAAQa,oBAAoB,cAAeX,GAAqB,GAChEF,EAAQa,oBAAoB,WAAYX,GAAqB,GAC7DF,EAAQa,oBAAoB,YAAaX,KAE1C,CACDtB,EAAmBR,EAAgBE,EAAwBH,EAAYE,EAAqBE,EAC5FC,IAGK,CACLC,oBACAG,oBACAE,oBACAE,0BACAM,oBACAO,yBACAC,yB,sDCvKJ,IAAIoB,EAAU,EAEP,SAASC,IACdD,GAAW,CACb,CAEO,SAASE,IACdF,GAAW,CACb,CAEO,SAASG,IACd,OAAOH,EAAU,CACnB,C,6DCKA,QAbA,SAAoBI,EAA8BC,GAChD,MAAMC,GAAgBvC,EAAAA,EAAAA,GAAgBqC,IAEtC7F,EAAAA,EAAAA,IAAU,KACR,GAAqB,iBAAV8F,EACT,OAGF,MAAMxE,EAAKuD,WAAW,IAAMkB,IAAiBD,GAC7C,MAAO,IAAMpB,aAAapD,IACzB,CAACwE,GACN,C,sLCwBA,MAiIA,GAAe1F,EAAAA,EAAAA,IAjIoB4F,EACjCC,aAAY,EACZ3F,oBACA4F,QACAC,OACAC,cACAC,cACAC,cACAC,mBACAC,mBACAC,gCAA+B,EAC/BC,YAAW,EACXC,eACAC,6BACAC,gBACAC,eAEA,MAAMC,GAAW5H,EAAAA,EAAAA,MAEX6H,GAAOC,EAAAA,EAAAA,MAEP,SAAEpG,IAAaC,EAAAA,EAAAA,OACdoG,EAAUC,IAAejE,EAAAA,EAAAA,IAAS,KAClCkE,EAAWC,IAAgBnE,EAAAA,EAAAA,KAAS,GACrCoE,EAAsBzG,EAAW,IAAM,IAgE7C,OA9DAb,EAAAA,EAAAA,IAAU,KACJwG,GACFW,EAAY,KAEb,CAACX,KAEJtF,EAAAA,EAAAA,GAAW,KACJoD,EAAAA,IACHyC,EAASrH,QAAS6H,SAEnBD,IAEHtH,EAAAA,EAAAA,IAAU,KACJkG,IACFxC,EAAAA,EAAAA,IAAgB,KACdqD,EAASrH,QAAS6H,QAClBR,EAASrH,QAAS8H,YAGrB,CAACtB,KA4CF7E,EAAAA,EAAAA,IAAA,QAAMoG,OAAO,GAAGX,SAAUA,EAzB5B,SAAsBY,GACpBA,EAAMnF,iBAEF0D,GAIAmB,GACFN,EAAUI,EAEd,EAesD9E,EAAAA,EAAWuF,aAAa,MAAKnG,SAAA,EAC/EH,EAAAA,EAAAA,IAAA,OACEE,WAAWqG,EAAAA,EAAAA,GAAe,6BAA8BV,GAAY,UAAWhB,GAAS,SACxF2B,IAAKb,EAAKc,MAAQ,WAAQrI,EAAU+B,SAAA,CAEnCiF,IAhBHhF,EAAAA,EAAAA,GAAA,SACEsG,KAAK,WACLzG,GAAG,mBACHqG,aAAa,MACbpG,UAAU,kBACVyG,UAAW,KAYXvG,EAAAA,EAAAA,GAAA,SACEwG,IAAKlB,EACLxF,UAAU,eACVwG,KAAMzH,EAAoB,OAAS,WACnCgB,GAAG,mBACH4G,MAAOhB,GAAY,GACnBS,aAAclB,EAA+B,gBAAkB,mBAC/D0B,YAAYC,EAAAA,SAAmB3I,EAC/B4I,SAxDR,SAA0BhG,GACpB6D,GACFS,IAGF,MAAM,OAAE/C,GAAWvB,EACnB8E,EAAYvD,EAAOsE,OACnBb,EAAazD,EAAOsE,MAAMI,QAAUC,EAAAA,KAChC1B,GACFA,EAAcjD,EAAOsE,MAEzB,EA8CQM,UAAW,IACXX,IAAI,UAENpG,EAAAA,EAAAA,GAAA,SAAAD,SAAQ0E,GAASC,GAAQC,GAAeY,EAAK,8BAC7CvF,EAAAA,EAAAA,GAAA,OACEF,UAAU,6BACVkH,QAlDR,WACE7B,GAA4BtG,EAC9B,EAiDQoI,KAAK,SACLV,SAAU,EACVW,MAAO3B,EAAK,sBACZ,aAAYA,EAAK,sBAAsBxF,UAEvCC,EAAAA,EAAAA,GAACmH,EAAAA,EAAI,CAACC,KAAMvI,EAAoB,MAAQ,qBAG3CgG,IAAe7E,EAAAA,EAAAA,GAAA,KAAGF,UAAU,cAAaC,SAAE8E,IAC3CQ,IAAaM,GAAab,KACzB9E,EAAAA,EAAAA,GAACqH,EAAAA,EAAM,CAACf,KAAK,SAASgB,QAASrC,EAAUT,UAAWA,EAAW+C,UAAW5B,EAAU5F,SACjF6E,GAAeW,EAAK,4B,kBCjKhB,SAASiC,EAAmB5G,GACzC,MAAI,YAAaA,EACR,CACL2B,EAAG3B,EAAE0C,QAAQ,GAAGd,QAChBC,EAAG7B,EAAE0C,QAAQ,GAAGZ,SAIb,CACLH,EAAG3B,EAAE4B,QACLC,EAAG7B,EAAE8B,QAET,C,kCCZe,SAAS+E,EAAU3E,GAChC,SAAS4E,EAAc9G,GACrB,GAAc,QAAVA,EAAE+G,IACJ,OAGF/G,EAAEE,iBACFF,EAAEG,kBAEF,MAAM6G,EAAoBC,MAAMC,KAC9BhF,EAAQiF,iBAA8B,6EAExC,IAAKH,EAAkBf,OACrB,OAGF,MAAMmB,EAAsBJ,EAAkBK,UAAWC,GAAOA,EAAGC,WAAW5E,SAAS6E,gBACvF,IAAIC,EAAkB,EAClBL,GAAuB,IAEvBK,EADEzH,EAAE0H,SACcN,EAAsB,EACpCA,EAAsB,EACtBJ,EAAkBf,OAAS,EAEbmB,EAAsBJ,EAAkBf,OAAS,EAC/DmB,EAAsB,EACtB,GAIRJ,EAAkBS,GAAiBvC,OACrC,CAIA,OAFAvC,SAASC,iBAAiB,UAAWkE,GAAe,GAE7C,KACLnE,SAASI,oBAAoB,UAAW+D,GAAe,GAE3D,C,+OClBA,MA8DA,GAAe/I,EAAAA,EAAAA,IA3DsB4J,EACnCC,OACAC,aACAC,oBACAC,aACA7J,YAEA,MAAOC,EAAqB6J,IAA0BnH,EAAAA,EAAAA,KAAS,IACzD,SAAErC,IAAaC,EAAAA,EAAAA,MACfwJ,EAA2B,IAA8CJ,EACzEK,EAAc1J,EAAWG,EAAAA,IAA2BC,EAAAA,IAEpDE,GAAwBC,EAAAA,EAAAA,IAAY,IAAMiJ,GAAuB,GAAO,IAuB9E,OACEhJ,EAAAA,EAAAA,IAAA,OAAKC,GAAG,SAASC,UAAWhB,EAAQ,MAAQ,GAAGiB,SAAA,EAC3ChB,IACAiB,EAAAA,EAAAA,GAAA,OAAKF,UAAU,oBAEjBE,EAAAA,EAAAA,GAACC,EAAAA,EAAe,CACdC,KAAMpB,EAAQqB,EAAAA,IAAsB2I,EACpChJ,UAAW6I,EAAa,cAAW3K,EACnCoC,OAAQC,EAAAA,EAAe0I,WACvBC,MAAOL,EACPlI,OAAQf,KAEVM,EAAAA,EAAAA,GAACC,EAAAA,EAAe,CACdC,KAAMpB,EAAQqB,EAAAA,IAAsB2I,EACpChJ,UAAY6I,EAAwB,QAAX,SACzBvI,OAAQC,EAAAA,EAAe4I,eACvB1I,YAAaoI,EArCnB,WACE,MAAMO,EAAcV,GAAQA,EAAK3B,OAAS,GAAM6B,EAAoB,EAlB3C,GAmBEG,GAA4BL,EAAK3B,OAAS,GACjE,EACEsC,EAAWX,EAAK3B,SAAW4B,EApBV,IADE,GAuBEI,EAA2BL,EAAK3B,OAE3D,OAAI6B,EAAoB,EACf,CACLS,EACAD,GAIG,CACLA,EACAC,EAEJ,CAkBgCC,QAAsBpL,EAChDqL,MAAO,EACP7I,QAAM,S,0BCtDd,MA8GA,GAAe7B,EAAAA,EAAAA,KAAK2K,EAAAA,EAAAA,IACjBC,IACCC,EAAAA,EAAAA,IAAKD,EAAQ,CAAC,SAFED,CA5GHG,EACfC,WAEA,MAAM,YACJC,EAAW,wBACXC,EAAuB,kBACvBC,IACEC,EAAAA,EAAAA,OAEE,YAAEC,EAAW,aAAEC,EAAY,UAAExF,EAAS,SAAEyF,GAAaP,EAErDnE,GAAOC,EAAAA,EAAAA,KACPF,GAAW5H,EAAAA,EAAAA,OAEV8K,EAAM0B,IAAWzI,EAAAA,EAAAA,IAAiB,KAClCkH,EAAYwB,IAAiB1I,EAAAA,EAAAA,KAAS,IACtCiH,EAAmB0B,IAAwB3I,EAAAA,EAAAA,IAAS,IAE3DlD,EAAAA,EAAAA,IAAU,KACHsE,EAAAA,IACHyC,EAASrH,QAAS6H,SAEnB,KAEHuE,EAAAA,EAAAA,GAAe,CACbC,UAAU,EACVC,OAAQX,IAGV,MAAMY,GAAe7K,EAAAA,EAAAA,IAAaiB,IAC5BqJ,GACFJ,IAGF,MAAQY,cAAetI,GAAWvB,EAClCuB,EAAOsE,MAAQtE,EAAOsE,MAAMiE,QAAQ,SAAU,IAAIC,OAAO,EArCzC,GAuCZxI,EAAOsE,QAAU+B,IAIrB0B,EAAQ/H,EAAOsE,OAEVkC,EAEOxG,EAAOsE,MAAMI,QACvBsD,GAAc,GAFdA,GAAc,GAKZ3B,GAAQA,EAAK3B,OAAS1E,EAAOsE,MAAMI,OACrCuD,GAAsB,GAEtBA,EAAqB,GAtDP,IAyDZjI,EAAOsE,MAAMI,QACf8C,EAAY,CAAEnB,KAAMrG,EAAOsE,UAE5B,CAACwD,EAAUzB,EAAMG,IAMpB,OACE3I,EAAAA,EAAAA,GAAA,OAAKH,GAAG,iBAAiBC,UAAU,gBAAeC,UAChDH,EAAAA,EAAAA,IAAA,OAAKE,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,GAACuI,EAAc,CACbC,KAAMA,EACNC,WAvEU,EAwEVE,WAAYA,EACZD,kBAAmBA,KAErB9I,EAAAA,EAAAA,IAAA,MAAAG,SAAA,CACGgK,GACD/J,EAAAA,EAAAA,GAAA,OACEF,UAAU,8BACVkH,QAjBV,WACE4C,GACF,EAgBU3C,KAAK,SACLV,SAAU,EACVW,MAAO3B,EAAK,eACZ,aAAYA,EAAK,eAAexF,UAEhCC,EAAAA,EAAAA,GAACmH,EAAAA,EAAI,CAACC,KAAK,eAGfpH,EAAAA,EAAAA,GAAA,KAAGF,UAAU,OAAMC,SAChBwF,EAAKyE,EAAe,cAAgB,wBAAoBhM,EAAW,CAClE4M,WAAW,EACXC,cAAc,OAGlB7K,EAAAA,EAAAA,GAAC8K,EAAAA,EAAS,CACRtE,IAAKlB,EACLzF,GAAG,eACHkL,MAAOxF,EAAK,QACZyF,QAASR,EACT/D,MAAO+B,EACP/D,MAAOwF,GAAY1E,EAAK0F,YAAYhB,GACpC/D,aAAa,MACbgF,UAAU,YAEX1G,IAAaxE,EAAAA,EAAAA,GAACmL,EAAAA,EAAO,Y,yBC9G9B,MAqCA,GAAexM,EAAAA,EAAAA,KAAK2K,EAAAA,EAAAA,IACjBC,IACCC,EAAAA,EAAAA,IAAKD,EAAQ,CAAC,SAFED,CArCC8B,EACnB1B,WAEA,MAAM,gBAAE2B,EAAe,kBAAExB,IAAsBC,EAAAA,EAAAA,OACzC,UAAEtF,EAAS,SAAEyF,EAAQ,KAAEvF,GAASgF,EAEhCnE,GAAOC,EAAAA,EAAAA,MACN8F,EAAcC,IAAmB9J,EAAAA,EAAAA,KAAS,GAE3C+J,GAAiC7L,EAAAA,EAAAA,IAAa8L,IAClDF,EAAgBE,IACf,IAEGC,GAAe/L,EAAAA,EAAAA,IAAa8F,IAChC4F,EAAgB,CAAE5F,cACjB,CAAC4F,IAEJ,OACErL,EAAAA,EAAAA,GAAA,OAAKH,GAAG,qBAAqBC,UAAU,gBAAeC,UACpDH,EAAAA,EAAAA,IAAA,OAAKE,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,GAAC2L,EAAAA,EAAc,CAAC9M,kBAAmByM,KACnCtL,EAAAA,EAAAA,GAAA,MAAAD,SAAKwF,EAAK,0BACVvF,EAAAA,EAAAA,GAAA,KAAGF,UAAU,OAAMC,SAAEwF,EAAK,oCAC1BvF,EAAAA,EAAAA,GAACuE,EAAAA,EAAY,CACXW,aAAc2E,EACdpF,MAAOwF,GAAY1E,EAAK0F,YAAYhB,GACpCvF,KAAMA,EACNF,UAAWA,EACX3F,kBAAmByM,EACnBnG,2BAA4BqG,EAC5BnG,SAAUqG,Y,0BC7BpB,MAsEA,GAAe/M,EAAAA,EAAAA,KAAK2K,EAAAA,EAAAA,IACjBC,IACCC,EAAAA,EAAAA,IAAKD,EAAQ,CAAC,SAFED,CAtECsC,EACnBlC,WAEA,MAAM,OAAEmC,EAAM,kBAAEhC,EAAiB,mBAAEiC,IAAuBhC,EAAAA,EAAAA,OACpD,UAAEtF,EAAS,SAAEyF,GAAaP,EAE1BnE,GAAOC,EAAAA,EAAAA,MACNuG,EAAeC,IAAoBvK,EAAAA,EAAAA,KAAS,IAC5CwK,EAAaC,IAAkBzK,EAAAA,EAAAA,OAC/B0K,EAAWC,IAAgB3K,EAAAA,EAAAA,IAAS,KACpC4K,EAAUC,IAAe7K,EAAAA,EAAAA,IAAS,IAEnC8K,GAAwB5M,EAAAA,EAAAA,IAAasG,IACrCgE,GACFJ,IAGF,MAAM,OAAE1H,GAAW8D,EAEnBmG,EAAajK,EAAOsE,OACpBuF,EAAiB7J,EAAOsE,MAAMI,OAAS,IACtC,CAACoD,IAEEuC,GAAuB7M,EAAAA,EAAAA,IAAasG,IACxC,MAAM,OAAE9D,GAAW8D,EAEnBqG,EAAYnK,EAAOsE,QAClB,IAYH,OACEzG,EAAAA,EAAAA,GAAA,OAAKH,GAAG,yBAAyBC,UAAU,gBAAeC,UACxDC,EAAAA,EAAAA,GAAA,OAAKF,UAAU,YAAWC,UACxBH,EAAAA,EAAAA,IAAA,QAAMoG,OAAO,GAAGyG,OAAO,OAAOpH,SAbpC,SAAsBY,GACpBA,EAAMnF,iBAEN+K,EAAO,CAAEM,YAAWE,aAEhBJ,GACFH,EAAmB,CAAEtO,KAAMyO,GAE/B,EAK2DlM,SAAA,EACnDC,EAAAA,EAAAA,GAAC0M,EAAAA,EAAc,CAAC9F,SAAUsF,KAC1BlM,EAAAA,EAAAA,GAAA,MAAAD,SAAKwF,EAAK,eACVvF,EAAAA,EAAAA,GAAA,KAAGF,UAAU,OAAMC,SAAEwF,EAAK,wBAC1BvF,EAAAA,EAAAA,GAAC8K,EAAAA,EAAS,CACRjL,GAAG,0BACHkL,MAAOxF,EAAK,qCACZqB,SAAU2F,EACV9F,MAAO0F,EACP1H,MAAOwF,GAAY1E,EAAK0F,YAAYhB,GACpC/D,aAAa,gBAEflG,EAAAA,EAAAA,GAAC8K,EAAAA,EAAS,CACRjL,GAAG,yBACHkL,MAAOxF,EAAK,oCACZqB,SAAU4F,EACV/F,MAAO4F,EACPnG,aAAa,gBAEd6F,IACC/L,EAAAA,EAAAA,GAACqH,EAAAA,EAAM,CAACf,KAAK,SAASgB,QAAM,EAAC9C,UAAWA,EAAUzE,SAAEwF,EAAK,mB,kDC7ErE,MAcA,EAdoCoH,CAClCC,EAAqCC,EAAiBC,KAEtD,MAAMC,GAAcrP,EAAAA,EAAAA,MAEpB,OAAOsP,EAAAA,EAAAA,IAAgB,KACrB,MAAMC,EAAWF,EAAY9O,QAG7B,OAFA8O,EAAY9O,QAAU4O,EAEfD,EAAGK,GAAY,KAErBJ,EAAcC,G,2JCMZ,SAASI,EACd3D,EAAW4D,GAEX,GAA0B,SAAtBA,EAAa7G,KAAiB,OAAO6G,EAEzC,GAA0B,mBAAtBA,EAAa7G,KAA2B,CAC1C,MAAM,KACJ8G,EAAI,OACJC,GACEF,EACEG,GAAOC,EAAAA,EAAAA,KAAWhE,EAAQ8D,GAEhC,IAAKC,EAAM,OAEX,MAAO,CACLhH,KAAM,iBACN8G,OACAE,OACAE,SAAUL,EAAaK,SAE3B,CAEA,GAA0B,aAAtBL,EAAa7G,KAAqB,CACpC,MAAM,OACJ+G,EAAM,eAAEI,EAAc,OAAEC,EAAM,QAAEC,EAAO,cAAEC,GACvCT,EACEG,GAAOC,EAAAA,EAAAA,KAAWhE,EAAQ8D,GAEhC,IAAKC,EAAM,OAEX,MAAO,CACLhH,KAAM,WACNgH,OACAG,iBACAC,SACAC,UACAC,gBAEJ,CAEA,GAA0B,cAAtBT,EAAa7G,KAAsB,CACrC,MAAM,OACJuH,EAAM,MAAEC,EAAK,OAAEC,EAAM,SAAEP,GACrBL,EACEa,GAAOC,EAAAA,EAAAA,KAAW1E,EAAQsE,GAEhC,IAAKG,EAAM,OAEX,MAAO,CACL1H,KAAM,QACN4H,QAAS,CACP5H,KAAM,YACN0H,OACAF,QACAC,SACAP,YAGN,CAEA,GAA0B,UAAtBL,EAAa7G,KAAkB,CACjC,MAAM,MACJwH,EAAK,OAAEC,EAAM,SAAEP,EAAQ,mBAAEW,GACvBhB,EAIJ,MAAO,CACL7G,KAAM,QACN4H,QAAS,CACP5H,KAAM,QACNwH,QACAC,SACAP,WACAY,iBATqBD,GAAqBZ,EAAAA,EAAAA,KAAWhE,EAAQ4E,QAAsBnQ,GAYzF,CAEA,GAA0B,2BAAtBmP,EAAa7G,KAAmC,CAClD,MAAM,KAAE+H,GAASlB,EAEjB,MAAO,CACL7G,KAAM,yBACN+H,OAEJ,CAEA,GAA0B,YAAtBlB,EAAa7G,KAAoB,CACnC,MAAMgI,GAAOC,EAAAA,EAAAA,KAAWhF,EAAQ4D,EAAaqB,QAC7C,IAAKF,EACH,OAEF,MAAO,CACLhI,KAAM,UACNgI,OACAG,UAAWtB,EAAasB,UAE5B,CAEA,GAA0B,qBAAtBtB,EAAa7G,KAA6B,CAC5C,MAAM,OACJoI,EAAM,OAAEb,EAAM,QAAEF,GACdR,EACEa,GAAOC,EAAAA,EAAAA,KAAW1E,EAAQsE,GAEhC,IAAKG,EAAM,OAEX,MAAO,CACL1H,KAAM,mBACNoI,SACAf,UACAK,OAEJ,CAEA,GAA0B,aAAtBb,EAAa7G,KAAqB,CACpC,MAAM,QACJqI,EAAO,eAAEC,EAAc,OAAEb,EAAM,SAAEP,EAAQ,OAAEqB,EAAM,QAAElB,GACjDR,EAIJ,MAAO,CACL7G,KAAM,WACNuI,SACAX,QAAS,CACP5H,KAAM,WACNyH,SACAP,WACAsB,MAVUH,EAAQI,IAAKlP,IAAOoO,EAAAA,EAAAA,KAAW1E,EAAQ1J,IAAKmP,OAAOC,SAW7DC,aAViBN,GAAiBL,EAAAA,EAAAA,KAAWhF,EAAQqF,QAAkB5Q,EAWvE2P,WAGN,CAEA,GAA0B,kBAAtBR,EAAa7G,KAA0B,CACzC,MAAM,OACJkI,EAAM,qBAAEW,EAAoB,OAAEpB,EAAM,SAAEP,EAAQ,UAAE4B,EAAS,kBAAEC,EAAiB,UAAEC,EAAS,wBACvFC,EAAuB,iBAAEC,EAAgB,MAAE1B,EAAK,MAAEgB,GAChD3B,EACEmB,GAAOC,EAAAA,EAAAA,KAAWhF,EAAQiF,GAChC,IAAKF,EACH,OAEF,MAAMmB,EAAqBN,GAAsBJ,IAAKlP,IAAO0O,EAAAA,EAAAA,KAAWhF,EAAQ1J,IAAKmP,OAAOC,SAE5F,MAAO,CACL3I,KAAM,gBACN4H,QAAS,CACP5H,KAAM,gBACNyH,SACAP,WACAc,OACAmB,qBACAL,YACAC,oBACAC,YACAC,0BACAC,mBACA1B,QACAgB,SAGN,CAEA,GAA0B,aAAtB3B,EAAa7G,KAAqB,CACpC,MAAM,OACJkI,EAAM,qBAAEW,EAAoB,OAAEpB,EAAM,SAAEP,EAAQ,OAAEqB,EAAM,UAAEO,EAAS,kBAAEC,EAAiB,UAAEC,EAAS,wBAC/FC,EAAuB,iBAAEC,GACvBrC,EACEmB,GAAOC,EAAAA,EAAAA,KAAWhF,EAAQiF,GAChC,IAAKF,EACH,OAEF,MAAMmB,EAAqBN,GAAsBJ,IAAKlP,IAAO0O,EAAAA,EAAAA,KAAWhF,EAAQ1J,IAAKmP,OAAOC,SAE5F,MAAO,CACL3I,KAAM,WACNuI,SACAX,QAAS,CACP5H,KAAM,WACNyH,SACAP,WACAc,OACAmB,qBACAL,YACAC,oBACAC,YACAC,0BACAC,oBAGN,CAEA,GAA0B,oBAAtBrC,EAAa7G,KAA4B,CAC3C,MAAM,eAAEoJ,EAAc,0BAAEC,GAA8BxC,EAChDyC,EAAYC,EAA6BtG,EAAQmG,GACvD,IAAKE,EAAW,OAEhB,MAAO,CACLtJ,KAAM,kBACNoJ,eAAgBE,EAChBD,4BAEJ,CAEA,GAA0B,qBAAtBxC,EAAa7G,KAA6B,CAC5C,MAAM,eAAEoJ,EAAc,YAAEI,GAAgB3C,EAClCyC,EAAYC,EAA6BtG,EAAQmG,GACjDpC,GAAOC,EAAAA,EAAAA,KAAWhE,EAAQuG,GAChC,IAAKF,IAActC,EAAM,OAEzB,MAAO,CACLhH,KAAM,mBACNoJ,eAAgBE,EAChBG,UAAWzC,EAEf,CAEA,GAA0B,gCAAtBH,EAAa7G,KAAwC,CACvD,MAAM,eAAEoJ,GAAmBvC,EACrByC,EAAYC,EAA6BtG,EAAQmG,GACvD,IAAKE,EAAW,OAEhB,MAAO,CACLtJ,KAAM,8BACNoJ,eAAgBE,EAEpB,CAEA,GAA0B,2BAAtBzC,EAAa7G,KAAmC,CAClD,MAAM,OAAE+G,EAAM,KAAEgB,GAASlB,EACnBG,GAAOC,EAAAA,EAAAA,KAAWhE,EAAQ8D,GAChC,IAAKC,EAAM,OAEX,MAAO,CACLhH,KAAM,yBACNgH,OACAe,OAEJ,CAEA,GAA0B,uBAAtBlB,EAAa7G,KAA+B,CAC9C,MAAM,OACJoH,EAAM,UAAEsC,EAAS,OAAE3C,EAAM,QAAEM,EAAO,eAAEF,EAAc,YAAEwC,GAClD9C,EAGJ,MAAO,CACL7G,KAAM,qBACNoH,SACAsC,YACA1C,KANWD,GAASE,EAAAA,EAAAA,KAAWhE,EAAQ8D,QAAUrP,EAOjD2P,UACAF,iBACAwC,cAEJ,CAGF,CAEO,SAASJ,EACdtG,EAAW2G,GAEX,GAAuB,SAAnBA,EAAU5J,KAAiB,OAAO4J,EAEtC,GAAuB,SAAnBA,EAAU5J,KAAiB,CAC7B,MAAMgI,GAAOC,EAAAA,EAAAA,KAAWhF,EAAQ2G,EAAU1B,QAC1C,IAAKF,EAAM,OAEX,MAAO,CACLhI,KAAM,OACNgI,OACA6B,QAASD,EAAUC,QAEvB,CAGF,CAEO,SAASC,EAAoBC,GAClC,MAAiC,SAA1BA,EAAY/C,KAAKhH,MAAmB2I,QAAQoB,EAAYC,cACjE,CAEO,SAASC,EACdF,GAEA,MAAM,KAAE/C,GAAS+C,EACXG,EAAWH,EAAYtC,OAAOP,WAAaiD,EAAAA,IAEjD,OAAIJ,EAAYC,cACP,CACLI,WAAY,SACZC,cAAc,EACdzJ,MAAO,GACP0J,YAAa,GAIC,aAAdtD,EAAKhH,KACA,CACLoK,WAAY,OACZC,cAAc,EACdE,SAAU,2CACVC,YAAa,8CACbF,YAAa,GAIC,eAAdtD,EAAKhH,KACA,CACLoK,WAAY,OACZC,cAAc,EACdE,SAAU,4CACVC,YAAa,+CACbF,YAAa,GAIC,aAAdtD,EAAKhH,KACHkK,EACK,CACLE,WAAY,WACZC,cAAc,EACdE,SAAU,4BACVC,YAAa,2CACbC,sBAAuB,WAGpB,CACLL,WAAY,WACZC,cAAc,EACdE,SAAU,8CACVC,YAAa,iDACbC,sBAAuB,WAIT,eAAdzD,EAAKhH,KACA,CACLoK,WAAY,OACZC,cAAc,EACdE,SAAU,gDACVC,YAAa,mDACbF,YAAa,EACbI,qBAAqB,GAIP,QAAd1D,EAAKhH,KACA,CACLoK,WAAY,OACZC,cAAc,EACdE,SAAU,4CACVC,YAAa,+CACbF,YAAa,GAIC,QAAdtD,EAAKhH,KACA,CACLoK,WAAY,OACZC,cAAc,EACdE,SAAU,+CACVC,YAAa,kDACbF,YAAa,GAIV,CACLF,WAAY,OACZC,cAAc,EACdE,SAAU,4CACVC,YAAa,4CACbF,YAAa,EAEjB,CAEO,SAASK,EAA6B1L,EAAc2L,GACzD,GAAIA,EAAe1D,WAAa2D,EAAAA,IAAqB,CACnD,MAAMpD,EAASmD,EAAenD,OAASmD,EAAeE,MAAQ,IAC9D,OAAIrD,EAAS,EACJ,KAAKxI,EAAK8L,OAAOC,KAAKC,IAAIxD,MAG5B,KAAKxI,EAAK8L,OAAOtD,IAC1B,CAEA,GAAImD,EAAe1D,WAAaiD,EAAAA,IAAmB,CACjD,MAAM1C,GAASyD,EAAAA,EAAAA,IAAoBN,EAAenD,QAC5C0D,EAAYH,KAAKC,IAAIxD,GAE3B,OAAIA,EAAS,EACJ,KAAKxI,EAAKmM,cAAcD,KAG1B,KAAKlM,EAAKmM,cAAcD,IACjC,CAGF,CAEO,SAASE,EAAkBpM,EAAcqM,GAC9C,OAAOrM,EAAK8L,OAAOO,EAAY7D,OAAS6D,EAAYR,MAAQ,IAC9D,CAEO,SAASS,EAA4BlE,GAC1C,MAAM,OAAE3H,GAAW2H,EAAQmE,QAE3B,GAAqB,cAAjB9L,GAAQM,KAAsB,CAChC,MAAM,cAAEyL,EAAa,MAAEjE,GAAU9H,EAEjC,MAAO,CACLnG,GAAIkS,EACJhE,OAAQ,CACNP,SAAU2D,EAAAA,IACVpD,OAAQD,EACRsD,MAAO,GAET9D,KAAM,CACJhH,KAAM,OACNzG,GAAI8N,EAAQqE,WAAarE,EAAQa,OAAUb,EAAQsE,UAAYtE,EAAQa,QAEzE0D,KAAMvE,EAAQuE,KACdC,QAAQ,EACRC,SAAUzE,EAAQqE,iBAAchU,EAEpC,CAEA,GAAqB,YAAjBgI,GAAQM,KAAoB,CAC9B,MAAM,cAAEyL,EAAa,aAAEM,GAAiBrM,EAExC,MAAO,CACLnG,GAAIkS,EACJhE,OAAQ,CACNP,SAAUiD,EAAAA,IACV1C,OAAQsE,GAEV/E,KAAM,CACJhH,KAAM,YAER4L,KAAMvE,EAAQuE,KACdC,QAAQ,EACRC,SAAUzE,EAAQqE,iBAAchU,EAEpC,CAGF,CAEO,SAASsU,EAAqC3E,GACnD,MAAM,OAAE3H,GAAW2H,EAAQmE,QAE3B,GAAqB,eAAjB9L,GAAQM,KAAuB,OAEnC,MAAM,cAAEyL,EAAa,MAAEjE,EAAK,YAAEyE,GAAgBvM,EAE9C,MAAO,CACLnG,GAAIkS,EACJhE,OAAQ,CACNP,SAAU2D,EAAAA,IACVpD,OAAQD,EACRsD,MAAO,GAET9D,KAAM,CACJhH,KAAM,OACNzG,GAAI0S,GAENL,KAAMvE,EAAQuE,KACdM,eAAgB7E,EAAQ9N,GAE5B,CAEO,SAAS4S,EAAwBC,EAA4BC,GAClE,OAAOC,EAAAA,EAAAA,GAAqBF,EAAKC,EACnC,C","sources":["webpack://telegram-t/./src/hooks/useImageLoader.ts","webpack://telegram-t/./src/components/common/PasswordMonkey.tsx","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/hooks/schedulers/useTimeout.ts","webpack://telegram-t/./src/components/common/PasswordForm.tsx","webpack://telegram-t/./src/util/events/getPointerPosition.ts","webpack://telegram-t/./src/util/trapFocus.ts","webpack://telegram-t/./src/components/common/TrackingMonkey.tsx","webpack://telegram-t/./src/components/auth/AuthCode.tsx","webpack://telegram-t/./src/components/auth/AuthPassword.tsx","webpack://telegram-t/./src/components/auth/AuthRegister.tsx","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/global/helpers/payments.ts"],"sourcesContent":["import { useEffect, useRef } from '../lib/teact/teact';\n\nimport { preloadImage } from '../util/files';\nimport useAsync from './useAsync';\n\nexport type UseImageLoaderResult = {\n  image?: HTMLImageElement;\n};\n\nexport default function useImageLoader(file?: Blob): UseImageLoaderResult {\n  const urlRef = useRef<string | undefined>();\n\n  const { result: image } = useAsync(() => {\n    if (!file) {\n      return Promise.resolve(undefined);\n    }\n\n    if (urlRef.current) {\n      URL.revokeObjectURL(urlRef.current);\n    }\n\n    const url = URL.createObjectURL(file);\n    urlRef.current = url;\n\n    return preloadImage(url);\n  }, [file]);\n\n  useEffect(() => {\n    return () => {\n      if (urlRef.current) {\n        URL.revokeObjectURL(urlRef.current);\n        urlRef.current = undefined;\n      }\n    };\n  }, []);\n\n  return { image };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport { memo, useCallback } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  isPasswordVisible: boolean;\n  isBig?: boolean;\n};\n\nconst PEEK_MONKEY_SHOW_DELAY = 2000;\nconst SEGMENT_COVER_EYES: [number, number] = [0, 50];\nconst SEGMENT_UNCOVER_EYE: [number, number] = [0, 20];\nconst SEGMENT_COVER_EYE: [number, number] = [20, 0];\n\nconst PasswordMonkey: FC<OwnProps> = ({ isPasswordVisible, isBig }) => {\n  const [isFirstMonkeyLoaded, markFirstMonkeyLoaded] = useFlag(false);\n  const [isPeekShown, markPeekShown] = useFlag(false);\n  const { isMobile } = useAppLayout();\n\n  const stikerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  useTimeout(markPeekShown, PEEK_MONKEY_SHOW_DELAY);\n  const handleFirstMonkeyLoad = useCallback(markFirstMonkeyLoaded, [markFirstMonkeyLoaded]);\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyClose}\n        playSegment={SEGMENT_COVER_EYES}\n        noLoop\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'shown' : 'hidden'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyPeek}\n        playSegment={isPasswordVisible ? SEGMENT_UNCOVER_EYE : SEGMENT_COVER_EYE}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(PasswordMonkey);\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\nimport type { Signal } from '../util/signals';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: ElementRef<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n  getIsReady?: Signal<boolean>,\n  shouldDisablePropagation?: boolean,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap || (getIsReady && !getIsReady())) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink, getIsReady,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import { useEffect } from '../../lib/teact/teact';\n\nimport useLastCallback from '../useLastCallback';\n\nfunction useTimeout(callback: NoneToVoidFunction, delay?: number) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    const id = setTimeout(() => savedCallback(), delay);\n    return () => clearTimeout(id);\n  }, [delay]);\n}\n\nexport default useTimeout;\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { MIN_PASSWORD_LENGTH } from '../../config';\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { IS_TAURI } from '../../util/browser/globalEnvironment';\nimport { IS_TOUCH_ENV } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Icon from './icons/Icon';\n\ntype OwnProps = {\n  submitLabel?: string;\n  error?: string;\n  hint?: string;\n  placeholder?: string;\n  description?: string;\n  isLoading?: boolean;\n  shouldDisablePasswordManager?: boolean;\n  shouldShowSubmit?: boolean;\n  shouldResetValue?: boolean;\n  isPasswordVisible?: boolean;\n  noRipple?: boolean;\n  onClearError: NoneToVoidFunction;\n  onChangePasswordVisibility: (state: boolean) => void;\n  onInputChange?: (password: string) => void;\n  onSubmit?: (password: string) => void;\n};\n\nconst PasswordForm: FC<OwnProps> = ({\n  isLoading = false,\n  isPasswordVisible,\n  error,\n  hint,\n  placeholder,\n  submitLabel,\n  description,\n  shouldShowSubmit,\n  shouldResetValue,\n  shouldDisablePasswordManager = false,\n  noRipple = false,\n  onClearError,\n  onChangePasswordVisibility,\n  onInputChange,\n  onSubmit,\n}) => {\n  const inputRef = useRef<HTMLInputElement>();\n\n  const lang = useLang();\n\n  const { isMobile } = useAppLayout();\n  const [password, setPassword] = useState('');\n  const [canSubmit, setCanSubmit] = useState(false);\n  const focusDelayTimeoutMs = isMobile ? 550 : 400;\n\n  useEffect(() => {\n    if (shouldResetValue) {\n      setPassword('');\n    }\n  }, [shouldResetValue]);\n\n  useTimeout(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, focusDelayTimeoutMs);\n\n  useEffect(() => {\n    if (error) {\n      requestMutation(() => {\n        inputRef.current!.focus();\n        inputRef.current!.select();\n      });\n    }\n  }, [error]);\n\n  function onPasswordChange(e: ChangeEvent<HTMLInputElement>) {\n    if (error) {\n      onClearError();\n    }\n\n    const { target } = e;\n    setPassword(target.value);\n    setCanSubmit(target.value.length >= MIN_PASSWORD_LENGTH);\n    if (onInputChange) {\n      onInputChange(target.value);\n    }\n  }\n\n  function togglePasswordVisibility() {\n    onChangePasswordVisibility(!isPasswordVisible);\n  }\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    if (isLoading) {\n      return;\n    }\n\n    if (canSubmit) {\n      onSubmit!(password);\n    }\n  }\n\n  function renderFakeInput() {\n    return (\n      <input\n        type=\"password\"\n        id=\"prevent_autofill\"\n        autoComplete=\"off\"\n        className=\"visually-hidden\"\n        tabIndex={-2}\n      />\n    );\n  }\n\n  return (\n    <form action=\"\" onSubmit={onSubmit ? handleSubmit : stopEvent} autoComplete=\"off\">\n      <div\n        className={buildClassName('input-group password-input', password && 'touched', error && 'error')}\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {shouldDisablePasswordManager && renderFakeInput()}\n        <input\n          ref={inputRef}\n          className=\"form-control\"\n          type={isPasswordVisible ? 'text' : 'password'}\n          id=\"sign-in-password\"\n          value={password || ''}\n          autoComplete={shouldDisablePasswordManager ? 'one-time-code' : 'current-password'}\n          spellCheck={IS_TAURI ? false : undefined}\n          onChange={onPasswordChange}\n          maxLength={256}\n          dir=\"auto\"\n        />\n        <label>{error || hint || placeholder || lang('PasswordFormPlaceholder')}</label>\n        <div\n          className=\"div-button toggle-password\"\n          onClick={togglePasswordVisibility}\n          role=\"button\"\n          tabIndex={0}\n          title={lang('AriaPasswordToggle')}\n          aria-label={lang('AriaPasswordToggle')}\n        >\n          <Icon name={isPasswordVisible ? 'eye' : 'eye-crossed'} />\n        </div>\n      </div>\n      {description && <p className=\"description\">{description}</p>}\n      {onSubmit && (canSubmit || shouldShowSubmit) && (\n        <Button type=\"submit\" ripple={!noRipple} isLoading={isLoading} disabled={!canSubmit}>\n          {submitLabel || lang('PasswordFormSubmit')}\n        </Button>\n      )}\n    </form>\n  );\n};\n\nexport default memo(PasswordForm);\n","export default function getPointerPosition(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  if ('touches' in e) {\n    return {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  }\n\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  };\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    );\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport useAppLayout from '../../hooks/useAppLayout';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  code: string;\n  codeLength: number;\n  trackingDirection: number;\n  isTracking: boolean;\n  isBig?: boolean;\n};\n\nconst TRACKING_START_FRAME = 15;\nconst TRACKING_END_FRAME = 180;\n\nconst TrackingMonkey: FC<OwnProps> = ({\n  code,\n  codeLength,\n  trackingDirection,\n  isTracking,\n  isBig,\n}) => {\n  const [isFirstMonkeyLoaded, setIsFirstMonkeyLoaded] = useState(false);\n  const { isMobile } = useAppLayout();\n  const trackningFramesPerSymbol = (TRACKING_END_FRAME - TRACKING_START_FRAME) / codeLength;\n  const stickerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  const handleFirstMonkeyLoad = useCallback(() => setIsFirstMonkeyLoaded(true), []);\n\n  function getTrackingFrames(): [number, number] {\n    const startFrame = (code && code.length > 1) || trackingDirection < 0\n      ? TRACKING_START_FRAME + trackningFramesPerSymbol * (code.length - 1)\n      : 0;\n    const endFrame = code.length === codeLength\n      ? TRACKING_END_FRAME\n      : TRACKING_START_FRAME + trackningFramesPerSymbol * code.length;\n\n    if (trackingDirection < 1) {\n      return [\n        endFrame,\n        startFrame,\n      ];\n    }\n\n    return [\n      startFrame,\n      endFrame,\n    ];\n  }\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stickerSize}\n        className={isTracking ? 'hidden' : undefined}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyIdle}\n        play={!isTracking}\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stickerSize}\n        className={!isTracking ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyTracking}\n        playSegment={isTracking ? getTrackingFrames() : undefined}\n        speed={2}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(TrackingMonkey);\n","import {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { IS_TOUCH_ENV } from '../../util/browser/windowEnvironment';\nimport { pick } from '../../util/iteratees';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Icon from '../common/icons/Icon';\nimport TrackingMonkey from '../common/TrackingMonkey';\nimport InputText from '../ui/InputText';\nimport Loading from '../ui/Loading';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst CODE_LENGTH = 5;\n\nconst AuthCode = ({\n  auth,\n}: StateProps) => {\n  const {\n    setAuthCode,\n    returnToAuthPhoneNumber,\n    clearAuthErrorKey,\n  } = getActions();\n\n  const { phoneNumber, isCodeViaApp, isLoading, errorKey } = auth;\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n\n  const [code, setCode] = useState<string>('');\n  const [isTracking, setIsTracking] = useState(false);\n  const [trackingDirection, setTrackingDirection] = useState(1);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, []);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: returnToAuthPhoneNumber,\n  });\n\n  const onCodeChange = useCallback((e: React.FormEvent<HTMLInputElement>) => {\n    if (errorKey) {\n      clearAuthErrorKey();\n    }\n\n    const { currentTarget: target } = e;\n    target.value = target.value.replace(/[^\\d]+/, '').substr(0, CODE_LENGTH);\n\n    if (target.value === code) {\n      return;\n    }\n\n    setCode(target.value);\n\n    if (!isTracking) {\n      setIsTracking(true);\n    } else if (!target.value.length) {\n      setIsTracking(false);\n    }\n\n    if (code && code.length > target.value.length) {\n      setTrackingDirection(-1);\n    } else {\n      setTrackingDirection(1);\n    }\n\n    if (target.value.length === CODE_LENGTH) {\n      setAuthCode({ code: target.value });\n    }\n  }, [errorKey, code, isTracking]);\n\n  function handleReturnToAuthPhoneNumber() {\n    returnToAuthPhoneNumber();\n  }\n\n  return (\n    <div id=\"auth-code-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <TrackingMonkey\n          code={code}\n          codeLength={CODE_LENGTH}\n          isTracking={isTracking}\n          trackingDirection={trackingDirection}\n        />\n        <h1>\n          {phoneNumber}\n          <div\n            className=\"auth-number-edit div-button\"\n            onClick={handleReturnToAuthPhoneNumber}\n            role=\"button\"\n            tabIndex={0}\n            title={lang('WrongNumber')}\n            aria-label={lang('WrongNumber')}\n          >\n            <Icon name=\"edit\" />\n          </div>\n        </h1>\n        <p className=\"note\">\n          {lang(isCodeViaApp ? 'SentAppCode' : 'LoginJustSentSms', undefined, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n        </p>\n        <InputText\n          ref={inputRef}\n          id=\"sign-in-code\"\n          label={lang('Code')}\n          onInput={onCodeChange}\n          value={code}\n          error={errorKey && lang.withRegular(errorKey)}\n          autoComplete=\"off\"\n          inputMode=\"numeric\"\n        />\n        {isLoading && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthCode));\n","import { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport useLang from '../../hooks/useLang';\n\nimport PasswordForm from '../common/PasswordForm';\nimport MonkeyPassword from '../common/PasswordMonkey';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst AuthPassword = ({\n  auth,\n}: StateProps) => {\n  const { setAuthPassword, clearAuthErrorKey } = getActions();\n  const { isLoading, errorKey, hint } = auth;\n\n  const lang = useLang();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleChangePasswordVisibility = useCallback((isVisible) => {\n    setShowPassword(isVisible);\n  }, []);\n\n  const handleSubmit = useCallback((password: string) => {\n    setAuthPassword({ password });\n  }, [setAuthPassword]);\n\n  return (\n    <div id=\"auth-password-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <MonkeyPassword isPasswordVisible={showPassword} />\n        <h1>{lang('LoginHeaderPassword')}</h1>\n        <p className=\"note\">{lang('LoginEnterPasswordDescription')}</p>\n        <PasswordForm\n          onClearError={clearAuthErrorKey}\n          error={errorKey && lang.withRegular(errorKey)}\n          hint={hint}\n          isLoading={isLoading}\n          isPasswordVisible={showPassword}\n          onChangePasswordVisibility={handleChangePasswordVisibility}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthPassword));\n","import { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport useLang from '../../hooks/useLang';\n\nimport AvatarEditable from '../ui/AvatarEditable';\nimport Button from '../ui/Button';\nimport InputText from '../ui/InputText';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst AuthRegister = ({\n  auth,\n}: StateProps) => {\n  const { signUp, clearAuthErrorKey, uploadProfilePhoto } = getActions();\n  const { isLoading, errorKey } = auth;\n\n  const lang = useLang();\n  const [isButtonShown, setIsButtonShown] = useState(false);\n  const [croppedFile, setCroppedFile] = useState<File | undefined>();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n\n  const handleFirstNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    if (errorKey) {\n      clearAuthErrorKey();\n    }\n\n    const { target } = event;\n\n    setFirstName(target.value);\n    setIsButtonShown(target.value.length > 0);\n  }, [errorKey]);\n\n  const handleLastNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n\n    setLastName(target.value);\n  }, []);\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    signUp({ firstName, lastName });\n\n    if (croppedFile) {\n      uploadProfilePhoto({ file: croppedFile });\n    }\n  }\n\n  return (\n    <div id=\"auth-registration-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <form action=\"\" method=\"post\" onSubmit={handleSubmit}>\n          <AvatarEditable onChange={setCroppedFile} />\n          <h2>{lang('YourName')}</h2>\n          <p className=\"note\">{lang('LoginRegisterDesc')}</p>\n          <InputText\n            id=\"registration-first-name\"\n            label={lang('LoginRegisterFirstNamePlaceholder')}\n            onChange={handleFirstNameChange}\n            value={firstName}\n            error={errorKey && lang.withRegular(errorKey)}\n            autoComplete=\"given-name\"\n          />\n          <InputText\n            id=\"registration-last-name\"\n            label={lang('LoginRegisterLastNamePlaceholder')}\n            onChange={handleLastNameChange}\n            value={lastName}\n            autoComplete=\"family-name\"\n          />\n          {isButtonShown && (\n            <Button type=\"submit\" ripple isLoading={isLoading}>{lang('Next')}</Button>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthRegister));\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type {\n  ApiInputInvoice,\n  ApiInputSavedStarGift,\n  ApiMessage,\n  ApiRequestInputInvoice,\n  ApiRequestInputSavedStarGift,\n  ApiStarsAmount,\n  ApiStarsTransaction,\n  ApiTypeCurrencyAmount,\n} from '../../api/types';\nimport type { CustomPeer } from '../../types';\nimport type { LangFn } from '../../util/localization';\nimport type { GlobalState } from '../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../config';\nimport arePropsShallowEqual from '../../util/arePropsShallowEqual';\nimport { convertTonFromNanos } from '../../util/formatCurrency';\nimport { selectChat, selectPeer, selectUser } from '../selectors';\n\nexport function getRequestInputInvoice<T extends GlobalState>(\n  global: T, inputInvoice: ApiInputInvoice,\n): ApiRequestInputInvoice | undefined {\n  if (inputInvoice.type === 'slug') return inputInvoice;\n\n  if (inputInvoice.type === 'stargiftResale') {\n    const {\n      slug,\n      peerId,\n    } = inputInvoice;\n    const peer = selectPeer(global, peerId);\n\n    if (!peer) return undefined;\n\n    return {\n      type: 'stargiftResale',\n      slug,\n      peer,\n      currency: inputInvoice.currency,\n    };\n  }\n\n  if (inputInvoice.type === 'stargift') {\n    const {\n      peerId, shouldHideName, giftId, message, shouldUpgrade,\n    } = inputInvoice;\n    const peer = selectPeer(global, peerId);\n\n    if (!peer) return undefined;\n\n    return {\n      type: 'stargift',\n      peer,\n      shouldHideName,\n      giftId,\n      message,\n      shouldUpgrade,\n    };\n  }\n\n  if (inputInvoice.type === 'starsgift') {\n    const {\n      userId, stars, amount, currency,\n    } = inputInvoice;\n    const user = selectUser(global, userId);\n\n    if (!user) return undefined;\n\n    return {\n      type: 'stars',\n      purpose: {\n        type: 'starsgift',\n        user,\n        stars,\n        amount,\n        currency,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'stars') {\n    const {\n      stars, amount, currency, spendPurposePeerId,\n    } = inputInvoice;\n\n    const spendPurposePeer = spendPurposePeerId ? selectPeer(global, spendPurposePeerId) : undefined;\n\n    return {\n      type: 'stars',\n      purpose: {\n        type: 'stars',\n        stars,\n        amount,\n        currency,\n        spendPurposePeer,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'chatInviteSubscription') {\n    const { hash } = inputInvoice;\n\n    return {\n      type: 'chatInviteSubscription',\n      hash,\n    };\n  }\n\n  if (inputInvoice.type === 'message') {\n    const chat = selectChat(global, inputInvoice.chatId);\n    if (!chat) {\n      return undefined;\n    }\n    return {\n      type: 'message',\n      chat,\n      messageId: inputInvoice.messageId,\n    };\n  }\n\n  if (inputInvoice.type === 'premiumGiftStars') {\n    const {\n      months, userId, message,\n    } = inputInvoice;\n    const user = selectUser(global, userId);\n\n    if (!user) return undefined;\n\n    return {\n      type: 'premiumGiftStars',\n      months,\n      message,\n      user,\n    };\n  }\n\n  if (inputInvoice.type === 'giftcode') {\n    const {\n      userIds, boostChannelId, amount, currency, option, message,\n    } = inputInvoice;\n    const users = userIds.map((id) => selectUser(global, id)).filter(Boolean);\n    const boostChannel = boostChannelId ? selectChat(global, boostChannelId) : undefined;\n\n    return {\n      type: 'giveaway',\n      option,\n      purpose: {\n        type: 'giftcode',\n        amount,\n        currency,\n        users,\n        boostChannel,\n        message,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'starsgiveaway') {\n    const {\n      chatId, additionalChannelIds, amount, currency, untilDate, areWinnersVisible, countries,\n      isOnlyForNewSubscribers, prizeDescription, stars, users,\n    } = inputInvoice;\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return undefined;\n    }\n    const additionalChannels = additionalChannelIds?.map((id) => selectChat(global, id)).filter(Boolean);\n\n    return {\n      type: 'starsgiveaway',\n      purpose: {\n        type: 'starsgiveaway',\n        amount,\n        currency,\n        chat,\n        additionalChannels,\n        untilDate,\n        areWinnersVisible,\n        countries,\n        isOnlyForNewSubscribers,\n        prizeDescription,\n        stars,\n        users,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'giveaway') {\n    const {\n      chatId, additionalChannelIds, amount, currency, option, untilDate, areWinnersVisible, countries,\n      isOnlyForNewSubscribers, prizeDescription,\n    } = inputInvoice;\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return undefined;\n    }\n    const additionalChannels = additionalChannelIds?.map((id) => selectChat(global, id)).filter(Boolean);\n\n    return {\n      type: 'giveaway',\n      option,\n      purpose: {\n        type: 'giveaway',\n        amount,\n        currency,\n        chat,\n        additionalChannels,\n        untilDate,\n        areWinnersVisible,\n        countries,\n        isOnlyForNewSubscribers,\n        prizeDescription,\n      },\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftUpgrade') {\n    const { inputSavedGift, shouldKeepOriginalDetails } = inputInvoice;\n    const savedGift = getRequestInputSavedStarGift(global, inputSavedGift);\n    if (!savedGift) return undefined;\n\n    return {\n      type: 'stargiftUpgrade',\n      inputSavedGift: savedGift,\n      shouldKeepOriginalDetails,\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftTransfer') {\n    const { inputSavedGift, recipientId } = inputInvoice;\n    const savedGift = getRequestInputSavedStarGift(global, inputSavedGift);\n    const peer = selectPeer(global, recipientId);\n    if (!savedGift || !peer) return undefined;\n\n    return {\n      type: 'stargiftTransfer',\n      inputSavedGift: savedGift,\n      recipient: peer,\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftDropOriginalDetails') {\n    const { inputSavedGift } = inputInvoice;\n    const savedGift = getRequestInputSavedStarGift(global, inputSavedGift);\n    if (!savedGift) return undefined;\n\n    return {\n      type: 'stargiftDropOriginalDetails',\n      inputSavedGift: savedGift,\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftPrepaidUpgrade') {\n    const { peerId, hash } = inputInvoice;\n    const peer = selectPeer(global, peerId);\n    if (!peer) return undefined;\n\n    return {\n      type: 'stargiftPrepaidUpgrade',\n      peer,\n      hash,\n    };\n  }\n\n  if (inputInvoice.type === 'stargiftAuctionBid') {\n    const {\n      giftId, bidAmount, peerId, message, shouldHideName, isUpdateBid,\n    } = inputInvoice;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      type: 'stargiftAuctionBid',\n      giftId,\n      bidAmount,\n      peer,\n      message,\n      shouldHideName,\n      isUpdateBid,\n    };\n  }\n\n  return undefined;\n}\n\nexport function getRequestInputSavedStarGift<T extends GlobalState>(\n  global: T, inputGift: ApiInputSavedStarGift,\n): ApiRequestInputSavedStarGift | undefined {\n  if (inputGift.type === 'user') return inputGift;\n\n  if (inputGift.type === 'chat') {\n    const chat = selectChat(global, inputGift.chatId);\n    if (!chat) return undefined;\n\n    return {\n      type: 'chat',\n      chat,\n      savedId: inputGift.savedId,\n    };\n  }\n\n  return undefined;\n}\n\nexport function shouldUseCustomPeer(transaction: ApiStarsTransaction) {\n  return transaction.peer.type !== 'peer' || Boolean(transaction.isPostsSearch);\n}\n\nexport function buildStarsTransactionCustomPeer(\n  transaction: ApiStarsTransaction,\n): CustomPeer {\n  const { peer } = transaction;\n  const isForTon = transaction.amount.currency === TON_CURRENCY_CODE;\n\n  if (transaction.isPostsSearch) {\n    return {\n      avatarIcon: 'search',\n      isCustomPeer: true,\n      title: '',\n      peerColorId: 5,\n    };\n  }\n\n  if (peer.type === 'appStore') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.AppleTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.AppleTopUp.Subtitle',\n      peerColorId: 5,\n    };\n  }\n\n  if (peer.type === 'playMarket') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.GoogleTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.GoogleTopUp.Subtitle',\n      peerColorId: 3,\n    };\n  }\n\n  if (peer.type === 'fragment') {\n    if (isForTon) {\n      return {\n        avatarIcon: 'fragment',\n        isCustomPeer: true,\n        titleKey: 'Stars.Gift.Received.Title',\n        subtitleKey: 'Stars.Intro.Transaction.Gift.UnknownUser',\n        customPeerAvatarColor: '#000000',\n      };\n    }\n    return {\n      avatarIcon: 'fragment',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.FragmentTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.FragmentTopUp.Subtitle',\n      customPeerAvatarColor: '#000000',\n    };\n  }\n\n  if (peer.type === 'premiumBot') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.PremiumBotTopUp.Title',\n      subtitleKey: 'Stars.Intro.Transaction.PremiumBotTopUp.Subtitle',\n      peerColorId: 1,\n      withPremiumGradient: true,\n    };\n  }\n\n  if (peer.type === 'ads') {\n    return {\n      avatarIcon: 'star',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.TelegramAds.Title',\n      subtitleKey: 'Stars.Intro.Transaction.TelegramAds.Subtitle',\n      peerColorId: 2,\n    };\n  }\n\n  if (peer.type === 'api') {\n    return {\n      avatarIcon: 'bots',\n      isCustomPeer: true,\n      titleKey: 'Stars.Intro.Transaction.TelegramBotApi.Title',\n      subtitleKey: 'Stars.Intro.Transaction.TelegramBotApi.Subtitle',\n      peerColorId: 4,\n    };\n  }\n\n  return {\n    avatarIcon: 'star',\n    isCustomPeer: true,\n    titleKey: 'Stars.Intro.Transaction.Unsupported.Title',\n    subtitleKey: 'Stars.Intro.Transaction.Unsupported.Title',\n    peerColorId: 0,\n  };\n}\n\nexport function formatStarsTransactionAmount(lang: LangFn, currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    const amount = currencyAmount.amount + currencyAmount.nanos / 1e9;\n    if (amount < 0) {\n      return `- ${lang.number(Math.abs(amount))}`;\n    }\n\n    return `+ ${lang.number(amount)}`;\n  }\n\n  if (currencyAmount.currency === TON_CURRENCY_CODE) {\n    const amount = convertTonFromNanos(currencyAmount.amount);\n    const absAmount = Math.abs(amount);\n\n    if (amount < 0) {\n      return `- ${lang.preciseNumber(absAmount)}`;\n    }\n\n    return `+ ${lang.preciseNumber(absAmount)}`;\n  }\n\n  return undefined;\n}\n\nexport function formatStarsAmount(lang: LangFn, starsAmount: ApiStarsAmount) {\n  return lang.number(starsAmount.amount + starsAmount.nanos / 1e9);\n}\n\nexport function getStarsTransactionFromGift(message: ApiMessage): ApiStarsTransaction | undefined {\n  const { action } = message.content;\n\n  if (action?.type === 'giftStars') {\n    const { transactionId, stars } = action;\n\n    return {\n      id: transactionId,\n      amount: {\n        currency: STARS_CURRENCY_CODE,\n        amount: stars,\n        nanos: 0,\n      },\n      peer: {\n        type: 'peer',\n        id: message.isOutgoing ? message.chatId : (message.senderId || message.chatId),\n      },\n      date: message.date,\n      isGift: true,\n      isMyGift: message.isOutgoing || undefined,\n    };\n  }\n\n  if (action?.type === 'giftTon') {\n    const { transactionId, cryptoAmount } = action;\n\n    return {\n      id: transactionId,\n      amount: {\n        currency: TON_CURRENCY_CODE,\n        amount: cryptoAmount,\n      },\n      peer: {\n        type: 'fragment',\n      },\n      date: message.date,\n      isGift: true,\n      isMyGift: message.isOutgoing || undefined,\n    };\n  }\n\n  return undefined;\n}\n\nexport function getPrizeStarsTransactionFromGiveaway(message: ApiMessage): ApiStarsTransaction | undefined {\n  const { action } = message.content;\n\n  if (action?.type !== 'prizeStars') return undefined;\n\n  const { transactionId, stars, boostPeerId } = action;\n\n  return {\n    id: transactionId,\n    amount: {\n      currency: STARS_CURRENCY_CODE,\n      amount: stars,\n      nanos: 0,\n    },\n    peer: {\n      type: 'peer',\n      id: boostPeerId,\n    },\n    date: message.date,\n    giveawayPostId: message.id,\n  };\n}\n\nexport function areInputSavedGiftsEqual(one: ApiInputSavedStarGift, two: ApiInputSavedStarGift) {\n  return arePropsShallowEqual(one, two);\n}\n"],"names":["useImageLoader","file","urlRef","useRef","result","image","useAsync","Promise","resolve","undefined","current","URL","revokeObjectURL","url","createObjectURL","preloadImage","useEffect","SEGMENT_COVER_EYES","SEGMENT_UNCOVER_EYE","SEGMENT_COVER_EYE","memo","PasswordMonkey","isPasswordVisible","isBig","isFirstMonkeyLoaded","markFirstMonkeyLoaded","useFlag","isPeekShown","markPeekShown","isMobile","useAppLayout","stikerSize","STICKER_SIZE_AUTH_MOBILE","STICKER_SIZE_AUTH","useTimeout","handleFirstMonkeyLoad","useCallback","_jsxs","id","className","children","_jsx","AnimatedSticker","size","STICKER_SIZE_TWO_FA","tgsUrl","LOCAL_TGS_URLS","MonkeyClose","playSegment","noLoop","onLoad","MonkeyPeek","stopEvent","e","stopImmediatePropagation","preventDefault","stopPropagation","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","getIsReady","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","useState","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","useLastCallback","button","requestMutation","addExtraClass","target","handleContextMenu","removeExtraClass","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","IS_TOUCH_ENV","element","timer","clearLongPressTimer","clearTimeout","startLongPressTimer","window","setTimeout","originalEvent","touches","document","addEventListener","IS_IOS","IS_PWA","removeEventListener","capture","once","emulateContextMenuEvent","passive","counter","disableDirectTextInput","enableDirectTextInput","getIsDirectTextInputDisabled","callback","delay","savedCallback","PasswordForm","isLoading","error","hint","placeholder","submitLabel","description","shouldShowSubmit","shouldResetValue","shouldDisablePasswordManager","noRipple","onClearError","onChangePasswordVisibility","onInputChange","onSubmit","inputRef","lang","useLang","password","setPassword","canSubmit","setCanSubmit","focusDelayTimeoutMs","focus","select","action","event","autoComplete","buildClassName","dir","isRtl","type","tabIndex","ref","value","spellCheck","IS_TAURI","onChange","length","MIN_PASSWORD_LENGTH","maxLength","onClick","role","title","Icon","name","Button","ripple","disabled","getPointerPosition","trapFocus","handleKeyDown","key","focusableElements","Array","from","querySelectorAll","currentFocusedIndex","findIndex","em","isSameNode","activeElement","newFocusedIndex","shiftKey","TrackingMonkey","code","codeLength","trackingDirection","isTracking","setIsFirstMonkeyLoaded","trackningFramesPerSymbol","stickerSize","MonkeyIdle","play","MonkeyTracking","startFrame","endFrame","getTrackingFrames","speed","withGlobal","global","pick","AuthCode","auth","setAuthCode","returnToAuthPhoneNumber","clearAuthErrorKey","getActions","phoneNumber","isCodeViaApp","errorKey","setCode","setIsTracking","setTrackingDirection","useHistoryBack","isActive","onBack","onCodeChange","currentTarget","replace","substr","withNodes","withMarkdown","InputText","label","onInput","withRegular","inputMode","Loading","AuthPassword","setAuthPassword","showPassword","setShowPassword","handleChangePasswordVisibility","isVisible","handleSubmit","MonkeyPassword","AuthRegister","signUp","uploadProfilePhoto","isButtonShown","setIsButtonShown","croppedFile","setCroppedFile","firstName","setFirstName","lastName","setLastName","handleFirstNameChange","handleLastNameChange","method","AvatarEditable","useLayoutEffectWithPrevDeps","cb","dependencies","debugKey","prevDepsRef","useLayoutEffect","prevDeps","getRequestInputInvoice","inputInvoice","slug","peerId","peer","selectPeer","currency","shouldHideName","giftId","message","shouldUpgrade","userId","stars","amount","user","selectUser","purpose","spendPurposePeerId","spendPurposePeer","hash","chat","selectChat","chatId","messageId","months","userIds","boostChannelId","option","users","map","filter","Boolean","boostChannel","additionalChannelIds","untilDate","areWinnersVisible","countries","isOnlyForNewSubscribers","prizeDescription","additionalChannels","inputSavedGift","shouldKeepOriginalDetails","savedGift","getRequestInputSavedStarGift","recipientId","recipient","bidAmount","isUpdateBid","inputGift","savedId","shouldUseCustomPeer","transaction","isPostsSearch","buildStarsTransactionCustomPeer","isForTon","TON_CURRENCY_CODE","avatarIcon","isCustomPeer","peerColorId","titleKey","subtitleKey","customPeerAvatarColor","withPremiumGradient","formatStarsTransactionAmount","currencyAmount","STARS_CURRENCY_CODE","nanos","number","Math","abs","convertTonFromNanos","absAmount","preciseNumber","formatStarsAmount","starsAmount","getStarsTransactionFromGift","content","transactionId","isOutgoing","senderId","date","isGift","isMyGift","cryptoAmount","getPrizeStarsTransactionFromGiveaway","boostPeerId","giveawayPostId","areInputSavedGiftsEqual","one","two","arePropsShallowEqual"],"sourceRoot":""}