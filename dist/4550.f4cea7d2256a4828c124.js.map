{"version":3,"file":"4550.f4cea7d2256a4828c124.js","mappings":"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","sources":["webpack://telegram-t/./node_modules/opus-recorder/dist/recorder.min.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Recorder=t():e.Recorder=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){\"use strict\";(function(t){function o(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var n=t.AudioContext||t.webkitAudioContext,i=function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.isRecordingSupported())throw new Error(\"Recording is not supported in this browser\");this.state=\"inactive\",this.config=Object.assign({bufferLength:4096,encoderApplication:2049,encoderFrameSize:20,encoderPath:\"encoderWorker.min.js\",encoderSampleRate:48e3,maxFramesPerPage:40,mediaTrackConstraints:!0,monitorGain:0,numberOfChannels:1,recordingGain:1,resampleQuality:3,streamPages:!1,wavBitDepth:16,sourceNode:{context:null}},o),this.encodedSamplePosition=0,this.initAudioContext(),this.initialize=this.initWorklet().then((function(){return t.initEncoder()}))};i.isRecordingSupported=function(){var e=t.navigator&&t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia;return n&&e&&t.WebAssembly},i.version=\"8.0.3\",i.prototype.clearStream=function(){this.stream&&(this.stream.getTracks?this.stream.getTracks().forEach((function(e){return e.stop()})):this.stream.stop())},i.prototype.close=function(){return this.monitorGainNode.disconnect(),this.recordingGainNode.disconnect(),this.sourceNode&&this.sourceNode.disconnect(),this.clearStream(),this.encoder&&(this.encoderNode.disconnect(),this.encoder.postMessage({command:\"close\"})),this.config.sourceNode.context?Promise.resolve():this.audioContext.close()},i.prototype.encodeBuffers=function(e){if(\"recording\"===this.state){for(var t=[],o=0;o<e.numberOfChannels;o++)t[o]=e.getChannelData(o);this.encoder.postMessage({command:\"encode\",buffers:t})}},i.prototype.initAudioContext=function(){this.audioContext=this.config.sourceNode.context?this.config.sourceNode.context:new n,this.monitorGainNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.recordingGainNode=this.audioContext.createGain(),this.setRecordingGain(this.config.recordingGain)},i.prototype.initEncoder=function(){var e=this;this.audioContext.audioWorklet?(this.encoderNode=new AudioWorkletNode(this.audioContext,\"encoder-worklet\",{numberOfOutputs:0}),this.encoder=this.encoderNode.port):(console.log(\"audioWorklet support not detected. Falling back to scriptProcessor\"),this.encodeBuffers=function(){return delete e.encodeBuffers},this.encoderNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.encoderNode.onaudioprocess=function(t){var o=t.inputBuffer;return e.encodeBuffers(o)},this.encoderNode.connect(this.audioContext.destination),this.encoder=new t.Worker(this.config.encoderPath))},i.prototype.initSourceNode=function(){var e=this;return this.config.sourceNode.context?(this.sourceNode=this.config.sourceNode,Promise.resolve()):t.navigator.mediaDevices.getUserMedia({audio:this.config.mediaTrackConstraints}).then((function(t){e.stream=t,e.sourceNode=e.audioContext.createMediaStreamSource(t)}))},i.prototype.initWorker=function(){var e=this,t=(this.config.streamPages?this.streamPage:this.storePage).bind(this);return this.recordedPages=[],this.totalLength=0,new Promise((function(n){e.encoder.addEventListener(\"message\",(function o(i){var r=i.data;switch(r.message){case\"ready\":n();break;case\"page\":e.encodedSamplePosition=r.samplePosition,t(r.page);break;case\"done\":e.encoder.removeEventListener(\"message\",o),e.finish()}})),e.encoder.start&&e.encoder.start();var i=e.config,r=(i.sourceNode,o(i,[\"sourceNode\"]));e.encoder.postMessage(Object.assign({command:\"init\",originalSampleRate:e.audioContext.sampleRate,wavSampleRate:e.audioContext.sampleRate},r))}))},i.prototype.initWorklet=function(){return this.audioContext.audioWorklet?this.audioContext.audioWorklet.addModule(this.config.encoderPath):Promise.resolve()},i.prototype.pause=function(e){var t=this;if(\"recording\"===this.state)return this.state=\"paused\",this.recordingGainNode.disconnect(),e&&this.config.streamPages?new Promise((function(e){t.encoder.addEventListener(\"message\",(function o(n){\"flushed\"===n.data.message&&(t.encoder.removeEventListener(\"message\",o),t.onpause(),e())})),t.encoder.start&&t.encoder.start(),t.encoder.postMessage({command:\"flush\"})})):(this.onpause(),Promise.resolve())},i.prototype.resume=function(){\"paused\"===this.state&&(this.state=\"recording\",this.recordingGainNode.connect(this.encoderNode),this.onresume())},i.prototype.setRecordingGain=function(e){this.config.recordingGain=e,this.recordingGainNode&&this.audioContext&&this.recordingGainNode.gain.setTargetAtTime(e,this.audioContext.currentTime,.01)},i.prototype.setMonitorGain=function(e){this.config.monitorGain=e,this.monitorGainNode&&this.audioContext&&this.monitorGainNode.gain.setTargetAtTime(e,this.audioContext.currentTime,.01)},i.prototype.start=function(){var e=this;return\"inactive\"===this.state?(this.state=\"loading\",this.encodedSamplePosition=0,this.audioContext.resume().then((function(){return e.initialize})).then((function(){return Promise.all([e.initSourceNode(),e.initWorker()])})).then((function(){e.state=\"recording\",e.encoder.postMessage({command:\"getHeaderPages\"}),e.sourceNode.connect(e.monitorGainNode),e.sourceNode.connect(e.recordingGainNode),e.monitorGainNode.connect(e.audioContext.destination),e.recordingGainNode.connect(e.encoderNode),e.onstart()})).catch((function(t){throw e.state=\"inactive\",t}))):Promise.resolve()},i.prototype.stop=function(){var e=this;return\"paused\"===this.state||\"recording\"===this.state?(this.state=\"inactive\",this.recordingGainNode.connect(this.encoderNode),this.monitorGainNode.disconnect(),this.clearStream(),new Promise((function(t){e.encoder.addEventListener(\"message\",(function o(n){\"done\"===n.data.message&&(e.encoder.removeEventListener(\"message\",o),t())})),e.encoder.start&&e.encoder.start(),e.encoder.postMessage({command:\"done\"})}))):Promise.resolve()},i.prototype.storePage=function(e){this.recordedPages.push(e),this.totalLength+=e.length},i.prototype.streamPage=function(e){this.ondataavailable(e)},i.prototype.finish=function(){if(!this.config.streamPages){var e=new Uint8Array(this.totalLength);this.recordedPages.reduce((function(t,o){return e.set(o,t),t+o.length}),0),this.ondataavailable(e)}this.onstop()},i.prototype.ondataavailable=function(){},i.prototype.onpause=function(){},i.prototype.onresume=function(){},i.prototype.onstart=function(){},i.prototype.onstop=function(){},e.exports=i}).call(this,o(1))},function(e,t){var o;o=function(){return this}();try{o=o||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(o=window)}e.exports=o}])}));"],"names":["self","module","exports","e","t","o","n","i","l","call","m","c","d","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","AudioContext","webkitAudioContext","this","arguments","length","isRecordingSupported","Error","state","config","assign","bufferLength","encoderApplication","encoderFrameSize","encoderPath","encoderSampleRate","maxFramesPerPage","mediaTrackConstraints","monitorGain","numberOfChannels","recordingGain","resampleQuality","streamPages","wavBitDepth","sourceNode","context","encodedSamplePosition","initAudioContext","initialize","initWorklet","then","initEncoder","navigator","mediaDevices","getUserMedia","WebAssembly","version","clearStream","stream","getTracks","forEach","stop","close","monitorGainNode","disconnect","recordingGainNode","encoder","encoderNode","postMessage","command","Promise","resolve","audioContext","encodeBuffers","getChannelData","buffers","createGain","setMonitorGain","setRecordingGain","audioWorklet","AudioWorkletNode","numberOfOutputs","port","console","log","createScriptProcessor","onaudioprocess","inputBuffer","connect","destination","Worker","initSourceNode","audio","createMediaStreamSource","initWorker","streamPage","storePage","recordedPages","totalLength","addEventListener","data","message","samplePosition","page","removeEventListener","finish","start","keys","indexOf","getOwnPropertySymbols","propertyIsEnumerable","originalSampleRate","sampleRate","wavSampleRate","addModule","pause","onpause","resume","onresume","gain","setTargetAtTime","currentTime","all","onstart","catch","push","ondataavailable","Uint8Array","reduce","set","onstop","Function","window"],"sourceRoot":""}