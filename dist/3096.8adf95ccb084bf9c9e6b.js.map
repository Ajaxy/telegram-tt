{"version":3,"file":"3096.8adf95ccb084bf9c9e6b.js","mappings":"yGAMO,SAASA,EAAWC,EAAQC,GAC/B,OAAOC,OAAOC,KAAKF,GAAQG,QAAO,SAAUC,EAAKC,GAK7C,OAJIA,EAAIC,WAAWP,KAEfK,EADYC,EAAIE,OAAOR,EAAOS,SACjBR,EAAOK,IAEjBD,CACX,GAAG,CAAC,EACR,C,2DCXO,SAASK,EAAYC,EAAWC,GACnC,IAAIC,EAAIC,SAASC,cAAc,KAC/BF,EAAEG,KAAOJ,EACT,IACIK,EADSJ,EAAEK,OAAOC,MAAM,GACRC,MAAM,KAAKhB,QAAO,SAAUC,EAAKgB,GACjD,IAAIC,EAAKD,EAAID,MAAM,KAAMG,EAAID,EAAG,GAAIE,EAAIF,EAAG,GAE3C,OADAjB,EAAIkB,IAAK,EAAAE,EAAA,GAA2BD,GAC7BnB,CACX,GAAG,CAAC,GACAqB,EAAQ,GACRC,EAAUV,EAAOU,QAASC,EAAYX,EAAOW,UAAWC,EAAUZ,EAAOY,QACzEP,GAAK,QAAcX,EAAUmB,QAAQC,gBACnCpB,EAAUmB,QAAQC,eAClB,CAAC,EAAGC,EAAKV,EAAGW,IAAKC,OAAoB,IAAPF,EAAgB,KAAOA,EAAIG,EAAKb,EAAGc,IAAKC,OAAoB,IAAPF,EAAgB,KAAOA,EAChH,GAAIN,EAAS,CACT,IAAIS,EAASC,MAAMC,QAAQvB,EAAOY,SAC5BZ,EAAOY,QAAQ,GACfZ,EAAOY,QACTK,EAAWO,KAAKH,IAChB3B,EAAU+B,eAAeJ,EAEjC,CACA,GAAIX,EAAS,CACT,IAAIS,EAAMG,MAAMC,QAAQvB,EAAOU,SACzBV,EAAOU,QAAQ,GACfV,EAAOU,QACb,GAAIU,EAAWI,KAAKL,GAAM,CACtB,IAAIO,EAAS5C,EAAW,aAAckB,GACtCS,EAAMkB,KAAKjC,EAAUkC,SAAST,EAAKO,GACvC,CACJ,CACA,GAAIf,EAAW,CACX,IAAIkB,EAAUP,MAAMC,QAAQvB,EAAOW,WAC7BX,EAAOW,UAAU,GACjBX,EAAOW,UACTmB,EAAQhD,EAAW,YAAakB,GACpCS,EAAMkB,KAAKjC,EAAUqC,MAAMF,EAASC,GACxC,CACA,OAAOE,QAAQC,IAAIxB,EACvB,C,kBCjCO,SAASyB,EAAcC,GAC1B,MAA2E,WAAnElD,OAAOmD,UAAUC,SAASC,KAAKH,GAAKjC,MAAM,GAAI,GAAGqC,aAC7D,C","sources":["webpack://telegram-t/./node_modules/@june-so/analytics-next/dist/pkg/core/query-string/pickPrefix.js","webpack://telegram-t/./node_modules/@june-so/analytics-next/dist/pkg/core/query-string/index.js","webpack://telegram-t/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js"],"sourcesContent":["/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nexport function pickPrefix(prefix, object) {\n    return Object.keys(object).reduce(function (acc, key) {\n        if (key.startsWith(prefix)) {\n            var field = key.substr(prefix.length);\n            acc[field] = object[key];\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=pickPrefix.js.map","import { pickPrefix } from './pickPrefix';\nimport { gracefulDecodeURIComponent } from './gracefulDecodeURIComponent';\nimport { isPlainObject } from '@segment/analytics-core';\nexport function queryString(analytics, query) {\n    var a = document.createElement('a');\n    a.href = query;\n    var parsed = a.search.slice(1);\n    var params = parsed.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], v = _a[1];\n        acc[k] = gracefulDecodeURIComponent(v);\n        return acc;\n    }, {});\n    var calls = [];\n    var ajs_uid = params.ajs_uid, ajs_event = params.ajs_event, ajs_aid = params.ajs_aid;\n    var _a = isPlainObject(analytics.options.useQueryString)\n        ? analytics.options.useQueryString\n        : {}, _b = _a.aid, aidPattern = _b === void 0 ? /.+/ : _b, _c = _a.uid, uidPattern = _c === void 0 ? /.+/ : _c;\n    if (ajs_aid) {\n        var anonId = Array.isArray(params.ajs_aid)\n            ? params.ajs_aid[0]\n            : params.ajs_aid;\n        if (aidPattern.test(anonId)) {\n            analytics.setAnonymousId(anonId);\n        }\n    }\n    if (ajs_uid) {\n        var uid = Array.isArray(params.ajs_uid)\n            ? params.ajs_uid[0]\n            : params.ajs_uid;\n        if (uidPattern.test(uid)) {\n            var traits = pickPrefix('ajs_trait_', params);\n            calls.push(analytics.identify(uid, traits));\n        }\n    }\n    if (ajs_event) {\n        var event_1 = Array.isArray(params.ajs_event)\n            ? params.ajs_event[0]\n            : params.ajs_event;\n        var props = pickPrefix('ajs_prop_', params);\n        calls.push(analytics.track(event_1, props));\n    }\n    return Promise.all(calls);\n}\n//# sourceMappingURL=index.js.map","export function isString(obj) {\n    return typeof obj === 'string';\n}\nexport function isNumber(obj) {\n    return typeof obj === 'number';\n}\nexport function isFunction(obj) {\n    return typeof obj === 'function';\n}\nexport function isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\nexport function hasUser(event) {\n    var _a, _b, _c;\n    var id = (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId;\n    return isString(id);\n}\n//# sourceMappingURL=helpers.js.map"],"names":["pickPrefix","prefix","object","Object","keys","reduce","acc","key","startsWith","substr","length","queryString","analytics","query","a","document","createElement","href","params","search","slice","split","str","_a","k","v","gracefulDecodeURIComponent","calls","ajs_uid","ajs_event","ajs_aid","options","useQueryString","_b","aid","aidPattern","_c","uid","uidPattern","anonId","Array","isArray","test","setAnonymousId","traits","push","identify","event_1","props","track","Promise","all","isPlainObject","obj","prototype","toString","call","toLowerCase"],"sourceRoot":""}