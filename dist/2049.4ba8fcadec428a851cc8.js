"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[2049],{81949:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(84051),a=n(87357);const r=({children:e,className:t,onClick:n})=>i.Ay.createElement("div",{className:(0,a.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n},e)},25404:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(84051),a=n(13439),r=n(31481),o=n(85982),s=n(39351),c=n(17712),l=n(24433);const d=(0,i.ph)((({peerId:e,canManage:t,gift:n,currentUserEmojiStatus:d,collectibleEmojiStatuses:m})=>{const{showNotification:A,openChatWithDraft:u,openGiftTransferModal:g,openGiftStatusInfoModal:y,setEmojiStatus:p,toggleSavedGiftPinned:f,changeGiftVisibility:h}=(0,a.ko)(),v=(0,s.A)(),E=n&&"gift"in n,I=E?n:void 0,C=E?n.gift:n,b="starGiftUnique"===C?.type?C.slug:void 0,N=(0,i.Kr)((()=>{if(b)return`${r.jsp}nft/${b}`}),[b]),P=(0,i.Kr)((()=>{if(b)return m?.find((e=>"collectible"===e.type&&e.slug===b))}),[b,m]),k="collectible"===d?.type?d.slug:void 0,S=C&&"starGiftUnique"===C.type,x=S&&k===C.slug,F=P&&!x,w=t&&I&&!I.isUnsaved&&S,T=(0,c.A)((()=>{const{inputGift:e,isUnsaved:t}=I;h({gift:e,shouldUnsave:!t})})),G=(0,c.A)((()=>{N&&((0,o.eM)(N),A({message:v("LinkCopied")}))})),U=(0,c.A)((()=>{N&&u({text:{text:N}})})),B=(0,c.A)((()=>{"starGiftUnique"===I?.gift.type&&g({gift:I})})),M=(0,c.A)((()=>{"starGiftUnique"===C?.type&&P&&y({emojiStatus:P})})),R=(0,c.A)((()=>{x&&p({emojiStatus:{type:"regular",documentId:r.zNY}})})),V=(0,c.A)((()=>{f({peerId:e,gift:I})}));return i.Ay.createElement(i.Ay.Fragment,null,w&&i.Ay.createElement(l.A,{icon:I.isPinned?"unpin":"pin",onClick:V},v(I.isPinned?"UnpinFromTop":"PinToTop")),i.Ay.createElement(l.A,{icon:"link-badge",onClick:G},v("CopyLink")),i.Ay.createElement(l.A,{icon:"forward",onClick:U},v("Share")),t&&S&&i.Ay.createElement(l.A,{icon:"diamond",onClick:B},v("GiftInfoTransfer")),t&&I&&i.Ay.createElement(l.A,{icon:I.isUnsaved?"eye-outline":"eye-crossed-outline",onClick:T},v(I.isUnsaved?"GiftActionShow":"GiftActionHide")),F&&i.Ay.createElement(l.A,{icon:"crown-wear",onClick:M},v("GiftInfoWear")),x&&i.Ay.createElement(l.A,{icon:"crown-take-off",onClick:R},v("GiftInfoTakeOff")))}))},87049:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(84051),a=n(13439),r=n(29807),o=n(87357),s=n(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"},l={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]]},d=new Set(Object.keys(l)),m=(0,i.ph)((0,a.EK)((e=>({theme:(0,r.SJA)(e)})))((({text:e,color:t,className:n,theme:a})=>{const r=`svg-${(0,s.A)()}`,m=d.has(t)?t:void 0,A=m?l[m]["dark"===a?1:0]:void 0,u=A?A[0]:t,g=A?A[1]:t;return i.Ay.createElement("div",{className:(0,o.A)(c.root,n)},i.Ay.createElement("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},i.Ay.createElement("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${r})`}),i.Ay.createElement("defs",null,i.Ay.createElement("linearGradient",{id:r,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse"},i.Ay.createElement("stop",{"stop-color":u}),i.Ay.createElement("stop",{offset:"1","stop-color":g})))),i.Ay.createElement("div",{className:c.text},e))})))},88668:(e,t,n)=>{n.d(t,{A:()=>Ne});var i=n(84051),a=n(13439),r=n(23174),o=n(89925),s=n(31481),c=n(90709),l=n(26129),d=n(29807),m=n(87357),A=n(60343),u=n(41512),g=n(82393),y=n(54464),p=n(43874),f=n(10722),h=n(49746),v=n(37661),E=n(5912),I=n(17712),C=n(14622),b=n(21511),N=n(48196),P=n(79519),k=n(96773),S=n(76023),x=n(21849),F=n(50805);const w=15*S.$,T=(0,i.ph)((({action:e,onClick:t,observeIntersection:n})=>i.Ay.createElement(x.A,{className:F.A.channelPhoto,photo:e.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:n,onClick:t,size:w})));var G=n(18501),U=n(39351),B=n(85118),M=n(82855);const R=(0,i.ph)((0,a.EK)(((e,{action:t})=>({sticker:"giftPremium"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e)})))((({action:e,sticker:t,canPlayAnimatedEmojis:n,onClick:a,observeIntersectionForLoading:r,observeIntersectionForPlaying:o})=>{const s=(0,i.li)(null),c=(0,U.A)(),l="giftPremium"===e.type?e.message:void 0;return i.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:a},i.Ay.createElement("div",{ref:s,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},t&&i.Ay.createElement(M.A,{containerRef:s,sticker:t,size:150,observeIntersectionForLoading:r,observeIntersectionForPlaying:o,noLoad:!n})),i.Ay.createElement("div",{className:F.A.info},i.Ay.createElement("h3",{className:F.A.title},"giftPremium"===e.type?c("ActionGiftPremiumTitle",{months:e.months},{pluralValue:e.months}):c("ActionGiftStarsTitle",{amount:e.stars},{pluralValue:e.stars})),i.Ay.createElement("div",null,l&&(0,G.f)(l),!l&&c("giftPremium"===e.type?"ActionGiftPremiumText":"ActionGiftStarsText"))),i.Ay.createElement("div",{className:F.A.actionButton},i.Ay.createElement(B.A,{preset:"button"}),c("ActionViewButton")))})));var V=n(4262);const L=(0,i.ph)((0,a.EK)(((e,{action:t})=>({sticker:"giftCode"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e),channel:(0,d.hds)(e,t.boostPeerId)})))((({action:e,sticker:t,canPlayAnimatedEmojis:n,channel:a,onClick:r,observeIntersectionForLoading:o,observeIntersectionForPlaying:s})=>{const l=(0,i.li)(null),d=(0,U.A)(),m=(0,i.Kr)((()=>{const e=a&&(0,c.F9)(d,a),t=d("ActionFallbackChannel");return(0,V.Nm)(a?.id,e||t)}),[a,d]);return i.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:r},i.Ay.createElement("div",{ref:l,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},t&&i.Ay.createElement(M.A,{containerRef:l,sticker:t,size:150,observeIntersectionForLoading:o,observeIntersectionForPlaying:s,noLoad:!n})),i.Ay.createElement("div",null,i.Ay.createElement("h3",{className:F.A.title},d("ActionGiveawayResultTitle")),i.Ay.createElement("div",null,"giftCode"===e.type&&d(e.isViaGiveaway?"ActionGiveawayResultPremiumText":"ActionGiftCodePremiumText",{months:e.months,channel:m},{withNodes:!0,withMarkdown:!0,pluralValue:e.months,renderTextFilters:["br"]}),"prizeStars"===e.type&&d("ActionGiveawayResultStarsText",{amount:e.stars,channel:m},{withNodes:!0,withMarkdown:!0,pluralValue:e.stars,renderTextFilters:["br"]}))),i.Ay.createElement("div",{className:F.A.actionButton},i.Ay.createElement(B.A,{preset:"button"}),d("giftCode"===e.type?"ActionOpenGiftButton":"ActionViewButton")))})));var j=n(70636),J=n(48775),O=n(80140),q=n(14242),z=n(66833),K=n(87094),W=n(87049);const D=(0,i.ph)((0,a.EK)(((e,{message:t,action:n})=>{const i=(0,d.mBe)(e,e.currentUserId),a=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),o=n.fromId?(0,d.PVB)(e,n.fromId):void 0,s=t.isOutgoing?(0,d.PVB)(e,t.chatId):i;return{canPlayAnimatedEmojis:a,sender:o||r,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||s,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod}}))((({action:e,message:t,canPlayAnimatedEmojis:n,sender:a,recipient:r,starGiftMaxConvertPeriod:o,onClick:s,observeIntersectionForLoading:l,observeIntersectionForPlaying:d})=>{const A=(0,i.li)(null),u=(0,i.li)(null),g=(0,U.A)(),{isOutgoing:y}=t,p=(0,z.yQ)(e.gift),f=y?r:a,h=f&&(0,j.vj)(f)&&(0,c.WX)(f),v=(0,K.A)(A,"background-color",!e.gift.availabilityTotal),E=g("ActionFallbackSomeone"),I=f&&(0,c.F9)(g,f),C=a?.id===r?.id,b=(0,i.Kr)((()=>{const n=(0,V.Nm)(f?.id,I||E),i=void 0!==e.starsToConvert?(0,J.K)(g,e.starsToConvert):void 0;return e.isUpgraded?g("ActionStarGiftUpgraded"):e.alreadyPaidUpgradeStars?(0,V.AD)(g,"ActionStarGiftUpgradeText",!y||C,{peer:n}):e.isConverted?(0,V.AD)(g,"ActionStarGiftConvertedText",!y||C,{peer:n,amount:i}):o&&(0,O.Fm)()<t.date+o?(0,V.AD)(g,"ActionStarGiftConvertText",!y||C,{peer:n,amount:i}):h?g("ActionStarGiftChannelText",{amount:i},{withNodes:!0}):(0,V.AD)(g,"ActionStarGiftNoConvertText",!y||C,{peer:n})}),[e,E,h,y,g,t.date,f?.id,I,o,C]);return i.Ay.createElement("div",{ref:A,className:(0,m.A)(F.A.contentBox,F.A.starGift),tabIndex:0,role:"button",onClick:s},i.Ay.createElement("div",{ref:u,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},p&&i.Ay.createElement(M.A,{containerRef:u,sticker:p,size:120,observeIntersectionForLoading:l,observeIntersectionForPlaying:d,noLoad:!n})),e.gift.availabilityTotal&&i.Ay.createElement(W.A,{color:v||"blue",text:g("ActionStarGiftLimitedRibbon",{total:(0,q.Vw)(e.gift.availabilityTotal)})}),i.Ay.createElement("div",{className:F.A.info},i.Ay.createElement("h3",{className:F.A.title},C?g("ActionStarGiftSelf"):g(y?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,V.Nm)(f?.id,I||E)},{withNodes:!0})),i.Ay.createElement("div",{className:F.A.subtitle},e.message&&(0,G.f)(e.message),!e.message&&b)),i.Ay.createElement("div",{className:F.A.actionButton},i.Ay.createElement(B.A,{preset:"button"}),!e.alreadyPaidUpgradeStars||e.isUpgraded||y?g("ActionViewButton"):g("ActionStarGiftUnpack")))})));var H=n(95807);const $=(0,i.ph)((({data:e,style:t,className:n,valueClassName:a,keyClassName:r})=>i.Ay.createElement("div",{className:(0,m.A)("cKr8J5k_",n),style:t},e.map((([e,t])=>i.Ay.createElement(i.Ay.Fragment,null,i.Ay.createElement("div",{className:(0,m.A)("c9RLLvfs",r)},e),i.Ay.createElement("div",{className:(0,m.A)("QEuGpzIc",a)},t)))))));var Q=n(40558);const X=(0,i.ph)((0,a.EK)(((e,{message:t,action:n})=>{const i=(0,d.mBe)(e,e.currentUserId),a=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),o=n.fromId?(0,d.PVB)(e,n.fromId):void 0,s=t.isOutgoing?(0,d.PVB)(e,t.chatId):i;return{canPlayAnimatedEmojis:a,sender:o||r,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||s}}))((({action:e,message:t,canPlayAnimatedEmojis:n,sender:a,recipient:r,onClick:o,observeIntersectionForLoading:s,observeIntersectionForPlaying:l})=>{const d=(0,i.li)(null),A=(0,U.A)(),{isOutgoing:u}=t,g=(0,z.yQ)(e.gift),y=(0,z.uc)(e.gift),p=y.model,f=y.pattern,h=y.backdrop,v=[h.centerColor,h.edgeColor],E=`${h.patternColor.slice(0,7)}55`,I=(0,i.Kr)((()=>[[A("ActionStarGiftUniqueModel"),p.name],[A("ActionStarGiftUniqueBackdrop"),h.name],[A("ActionStarGiftUniqueSymbol"),f.name]]),[A,p,f,h]),C=!u||e.isUpgrade,b=C&&!e.isUpgrade?a:r,N=A("ActionFallbackSomeone"),P=b&&(0,c.F9)(A,b),k=a?.id===r?.id;return i.Ay.createElement("div",{className:(0,m.A)(F.A.contentBox,F.A.starGift,F.A.uniqueGift),tabIndex:0,role:"button",onClick:o},i.Ay.createElement("div",{className:F.A.uniqueBackgroundWrapper},i.Ay.createElement(Q.A,{className:F.A.uniqueBackground,backgroundColors:v,patternColor:h.patternColor,patternIcon:f.sticker,clearBottomSector:!0})),i.Ay.createElement("div",{ref:d,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},g&&i.Ay.createElement(M.A,{containerRef:d,sticker:g,size:120,observeIntersectionForLoading:s,observeIntersectionForPlaying:l,noLoad:!n})),i.Ay.createElement(W.A,{color:E,text:A("ActionStarGiftUniqueRibbon")}),i.Ay.createElement("div",{className:F.A.info},i.Ay.createElement("h3",{className:F.A.title},k?A("ActionStarGiftSelf"):A(C?"ActionStarGiftFrom":"ActionStarGiftTo",{peer:(0,V.Nm)(b?.id,P||N)},{withNodes:!0})),i.Ay.createElement("div",{className:F.A.subtitle,style:`color: ${h.textColor}`},A("GiftUnique",{title:e.gift.title,number:e.gift.number})),i.Ay.createElement($,{data:I,style:`color: ${h.textColor}`,valueClassName:F.A.uniqueValue})),i.Ay.createElement("div",{className:F.A.actionButton,style:(0,H.A)(E&&`background-color: ${E}`)},i.Ay.createElement(B.A,{preset:"button"}),A("ActionViewButton")))})));var Z=n(87679),Y=n(62587),_=n(94189),ee=n(68584);const te=(0,i.ph)((0,a.EK)(((e,{message:t})=>({peer:(0,d.PVB)(e,t.chatId)})))((({message:e,action:t,peer:n,observeIntersection:s})=>{const{openMediaViewer:l,uploadProfilePhoto:d,showNotification:m}=(0,a.ko)(),{isOutgoing:A}=e,u=t.photo,g=(0,U.A)(),[y,p]=(0,i.J0)(),[f,h,E]=(0,v.A)(!1),C=(0,Y.A)((0,c.rI)(u,"full")),b=(0,Y.A)((0,c.Pg)(u)),N=u.isVideo,P=(0,i.Kr)((()=>{const e=n&&(0,c.F9)(g,n)||g("ActionFallbackUser"),t=(0,V.Nm)(n?.id,e);return g(A?"ActionSuggestedPhotoYou":"ActionSuggestedPhoto",{user:t},{withNodes:!0})}),[g,A,n]),k=(0,I.A)((()=>{m({title:g("ActionSuggestedPhotoUpdatedTitle"),message:g("ActionSuggestedPhotoUpdatedDescription"),action:{action:"requestNextSettingsScreen",payload:{screen:o.VS.Main}},actionText:g("Open")})})),S=(0,I.A)((e=>{p(void 0),d({file:e}),k()})),w=(0,I.A)((()=>{p(void 0)})),T=(0,I.A)((async()=>{if(!b)return;E(),k();const e=await(0,Z.sZ)(b);d({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:u.videoSizes?.find((e=>void 0!==e.videoStartTs))?.videoStartTs})}));return i.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:async()=>{!A&&C?N?h():p(await(0,Z.sZ)(C)):l({chatId:e.chatId,messageId:e.id,threadId:r.l3,origin:o.TQ.SuggestedAvatar})}},i.Ay.createElement(x.A,{className:F.A.suggestedAvatar,photo:t.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:s,size:"jumbo"}),i.Ay.createElement("div",{className:F.A.suggestedText},P),i.Ay.createElement("div",{className:F.A.actionButton},g("ActionSuggestedPhotoButton")),i.Ay.createElement(ee.A,{file:y,onClose:w,onChange:S}),i.Ay.createElement(_.A,{isOpen:f,title:g("ActionSuggestedVideoTitle"),confirmHandler:T,onClose:E,text:g("ActionSuggestedVideoText")}))})));var ne=n(99515),ie=n(43581),ae=n(14737),re=n(48894);var oe=n(36838),se=n(59030),ce=n(18276),le=n(64493),de=n(55158);const me="d8axZxyN",Ae="glDpC2av",ue="gqCs9fSo",ge="gnYhwnvf",ye="HWgwnKui",pe="BTNQ4KBH",fe="Xl9MVMTn",he="Qizai7yv";function ve({channel:e}){const{openChat:t}=(0,a.ko)(),n=function(e,t="#00000000"){const[n,a]=(0,i.J0)(t),o=(0,Y.A)((0,c.cP)(e),!1,r.qZ.BlobUrl);return(0,i.vJ)((()=>{(async()=>{if(!o)return;const e=await(0,re.rX)(o);a(`#${(0,re.v2)(e)}`)})()}),[o]),n}(e,"#3C3C4399");return i.Ay.createElement("div",{className:Ae,onClick:()=>t({id:e.id})},i.Ay.createElement(x.A,{className:ue,key:e.id,size:"large",peer:e}),i.Ay.createElement("div",{style:`background: ${n}`,className:ge},i.Ay.createElement(ce.A,{name:"user-filled",className:me}),i.Ay.createElement("span",{className:ye},(0,q.Vw)(e?.membersCount||0))),i.Ay.createElement("span",{className:pe},e.title))}function Ee({channel:e,chatId:t,channelsCount:n,isCurrentUserPremium:r}){const{openPremiumModal:o,openChatWithInfo:s}=(0,a.ko)(),c=(0,se.A)();return i.Ay.createElement("div",{className:(0,m.A)(Ae,"MBChXyXk"),onClick:()=>{r?s({id:t,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):o()}},i.Ay.createElement(x.A,{className:ue,key:e.id,size:"large",peer:e}),i.Ay.createElement("div",{className:fe},i.Ay.createElement("div",{className:he})),i.Ay.createElement("div",{className:(0,m.A)(fe,"JxSmtOFi")},i.Ay.createElement("div",{className:he})),i.Ay.createElement("div",{className:ge},i.Ay.createElement("span",{className:ye},`+${n}`),!r&&i.Ay.createElement(ce.A,{name:"lock-badge",className:me})),i.Ay.createElement("span",{className:pe},c("MoreSimilar")))}const Ie=(0,i.ph)((0,a.EK)(((e,{chatId:t})=>{const{similarChannelIds:n,isExpanded:i,count:a}=(0,d.dg4)(e,t)||{},r=(0,d.g29)(e),o=(0,d.AWZ)(e,t);return{similarChannelIds:n,isExpanded:i,count:a,isCurrentUserPremium:r,channelJoinInfo:o?.joinInfo}}))((({chatId:e,similarChannelIds:t,isExpanded:n,count:r,isCurrentUserPremium:o,channelJoinInfo:s})=>{const{toggleChannelRecommendations:c,loadChannelRecommendations:l}=(0,a.ko)(),A=(0,se.A)(),[u,g,y]=(0,v.A)(!1),[p,f,h]=(0,v.A)(!1),E=(0,i.li)(null),C=(0,i.li)(!1),b=(0,i.Kr)((()=>{if(!t)return;const e=(0,a.mS)();return t.map((t=>(0,d.hds)(e,t))).filter(Boolean)}),[t]),[N,P]=(0,i.J0)(!1),k=(0,i.Kr)((()=>b?.slice(0,10)),[b]),S=Boolean(k?.length),x=Boolean(!N&&(n||p||u)&&S);(0,oe.A)(E,!x,!0),(0,i.vJ)((()=>{t||l({chatId:e})}),[e,t]),(0,ae.A)((()=>P(!1)),2e3),(0,i.vJ)((()=>{if(N&&b&&n){const e=setTimeout((()=>{P(!1)}),300);return()=>clearTimeout(e)}}),[b,n,N]),(0,i.vJ)((()=>{n?(g(),h(),P(!t),C.current||setTimeout((()=>{E.current?.scrollIntoView({behavior:"smooth"})}),150)):(y(),f())}),[n,t]);const F=(0,I.A)((()=>{c({chatId:e})}));if((0,i.vJ)((()=>{s?.joinedDate&&!n&&(0,O.Fm)()-s.joinedDate<=10&&(F(),C.current=!0)}),[s,n]),x||N)return i.Ay.createElement("div",{className:(0,m.A)("V3RHiOJR")},N&&i.Ay.createElement(de.A,{className:"xKVZv7KE"}),x&&i.Ay.createElement("div",{className:(0,m.A)(u&&"eb8rX09E",p&&"XR6_qLCc")},i.Ay.createElement("div",{className:"tfG_BSDt"},i.Ay.createElement("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.Ay.createElement("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"}))),i.Ay.createElement("div",{className:"njAC8dR9"},i.Ay.createElement("div",{className:"s7QOi22Q"},i.Ay.createElement("span",{className:"JstcOhAN"},A("SimilarChannels")),i.Ay.createElement(le.A,{className:"meewH7t_",color:"translucent",onClick:F},i.Ay.createElement(ce.A,{name:"close"}))),i.Ay.createElement("div",{ref:E,className:(0,m.A)("h4gWlNen","no-scrollbar")},k?.map(((t,n)=>9===n?i.Ay.createElement(Ee,{channel:t,chatId:e,channelsCount:r-10+1,isCurrentUserPremium:o}):i.Ay.createElement(ve,{channel:t})))))))}))),Ce=new Set(["pinMessage","chatEditPhoto","chatDeletePhoto","unsupported"]),be=new Set(["giftCode","prizeStars","suggestProfilePhoto"]),Ne=(0,i.ph)((0,a.EK)(((e,{message:t,threadId:n})=>{const{settings:{themes:i}}=e,a=(0,d.nTw)(e),o=(0,d.hds)(e,t.chatId),s=(0,d.Y7C)(e,t),c=o?.isForum&&n!==r.l3,{replyToMsgId:m,replyToPeerId:A}=(0,l.Q)(t)||{},u=m?(0,d.O5q)(e,A||t.chatId,m):void 0,g=!!n&&(0,d.nJv)(e,t,n),{direction:y,noHighlight:p,isResizingContainer:f,scrollTargetPosition:h}=g&&a.focusedMessage||{},v=(0,d.g29)(e),E=o?.unreadReactions?.includes(t.id);return{sender:s,currentUserId:e.currentUserId,isCurrentUserPremium:v,isFocused:g,focusDirection:y,noFocusHighlight:p,isInsideTopic:c,replyMessage:u,isInSelectMode:(0,d.rTV)(e),patternColor:i[(0,d.SJA)(e)]?.patternColor,hasUnreadReaction:E,isResizingContainer:f,scrollTargetPosition:h}}))((({message:e,threadId:t,sender:n,currentUserId:r,appearanceOrder:d,isJustAdded:S,isLastInList:x,memoFirstUnreadIdRef:w,getIsMessageListReady:G,isInsideTopic:U,isFocused:B,focusDirection:M,noFocusHighlight:V,replyMessage:j,patternColor:J,isCurrentUserPremium:O,isInSelectMode:q,hasUnreadReaction:z,isResizingContainer:K,scrollTargetPosition:W,onIntersectPinnedMessage:H,observeIntersectionForBottom:$,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z})=>{const{requestConfetti:Y,openMediaViewer:_,getReceipt:ee,checkGiftCode:ae,openPrizeStarsTransactionFromGiveaway:re,openPremiumModal:oe,openStarsTransactionFromGift:se,openGiftInfoModalFromMessage:ce,toggleChannelRecommendations:le,animateUnreadReaction:de,markMentionsRead:me}=(0,a.ko)(),Ae=(0,i.li)(null),{id:ue,chatId:ge}=e,ye=e.content.action,pe=(0,A.iL)(ue),fe=be.has(ye.type),he=Ce.has(ye.type),ve=g.uH&&!he,Ee=(0,l.Q)(e),{replyToMsgId:Ne,replyToPeerId:Pe}=Ee||{},ke=Boolean(e.areReactionsPossible&&e?.reactions?.results?.length),Se=U&&"topicCreate"===ye.type,{isTouchScreen:xe}=(0,p.Ay)();(0,E.mv)(Ae,Se?void 0:$),(0,C.A)(Ae,!Se&&x&&"channelJoined"!==ye.type),(0,h.A)(Pe||ge,Ne,j,ue),(0,P.A)({elementRef:Ae,chatId:ge,isFocused:B,focusDirection:M,noFocusHighlight:V,isResizingContainer:K,isJustAdded:S,scrollTargetPosition:W}),(0,i._W)((()=>{e.isPinned&&H?.({viewportPinnedIdsToRemove:[e.id]})}));const{isContextMenuOpen:Fe,contextMenuAnchor:we,handleBeforeContextMenu:Te,handleContextMenu:Ge,handleContextMenuClose:Ue,handleContextMenuHide:Be}=(0,f.A)(Ae,xe&&q,!g.cp,g.Ni,G),Me=void 0!==we,Re=d<=0,[Ve,Le]=(0,v.A)(Re);(0,i.vJ)((()=>{Re||setTimeout(Le,d*s.zq7)}),[d,Le,Re]);const{ref:je}=(0,b.A)({isOpen:Ve,noOpenTransition:Re,noCloseTransition:!0,className:!1,ref:Ae});(0,i.vJ)((()=>{const t=Ae.current;t&&(0,u.Y)(t)&&(z&&de({messageIds:[ue]}),e.hasUnreadMention&&me({chatId:ge,messageIds:[ue]}))}),[z,ge,ue,de,e.hasUnreadMention]),(0,i.vJ)((()=>{"giftPremium"===ye.type&&(w?.current&&ue>=w.current||pe)&&Y({})}),[ye.type,ue,pe,w]);const Je=(0,N.A)(ve?J:void 0),Oe=(0,I.A)((()=>{switch(ye.type){case"paymentSent":case"paymentRefunded":ee({chatId:e.chatId,messageId:e.id});break;case"chatEditPhoto":_({chatId:e.chatId,messageId:e.id,threadId:t,origin:o.TQ.ChannelAvatar});break;case"giftCode":ae({slug:ye.slug,message:{chatId:e.chatId,messageId:e.id}});break;case"prizeStars":re({chatId:e.chatId,messageId:e.id});break;case"giftPremium":oe({isGift:!0,fromUserId:n?.id,toUserId:n&&n.id===r?ge:r,monthsAmount:ye.months});break;case"giftStars":se({chatId:e.chatId,messageId:e.id});break;case"starGift":case"starGiftUnique":ce({chatId:e.chatId,messageId:e.id});break;case"channelJoined":le({chatId:ge})}})),qe=(0,i.Kr)((()=>{switch(ye.type){case"chatEditPhoto":if(!ye.photo)return;return i.Ay.createElement(T,{action:ye,observeIntersection:Q,onClick:Oe});case"suggestProfilePhoto":return i.Ay.createElement(te,{message:e,action:ye,observeIntersection:Q});case"prizeStars":case"giftCode":return i.Ay.createElement(L,{action:ye,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Oe});case"giftPremium":case"giftStars":return i.Ay.createElement(R,{action:ye,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Oe});case"starGift":return i.Ay.createElement(D,{action:ye,message:e,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Oe});case"starGiftUnique":return i.Ay.createElement(X,{action:ye,message:e,observeIntersectionForLoading:Q,observeIntersectionForPlaying:Z,onClick:Oe});case"channelJoined":return i.Ay.createElement(Ie,{chatId:e.chatId});default:return}}),[ye,Q,e,Z]);if(!(U&&"topicCreate"===ye.type||"phoneCall"===ye.type))return i.Ay.createElement("div",{ref:je,id:(0,c.GZ)(ue),className:(0,m.A)("ActionMessage","message-list-item",F.A.root,he&&F.A.singleLine,ve&&F.A.fluidMultiline,qe&&F.A.hasFullContent,B&&!V&&"focused",Me&&"has-menu-open",x&&"last-in-list"),"data-message-id":e.id,"data-is-pinned":e.isPinned||void 0,"data-has-unread-mention":e.hasUnreadMention||void 0,"data-has-unread-reaction":z||void 0,onMouseDown:e=>{(0,y.l)(e),Te(e)},onContextMenu:Ge},!fe&&i.Ay.createElement(i.Ay.Fragment,null,ve&&i.Ay.createElement("div",{className:F.A.inlineWrapper},i.Ay.createElement("span",{className:F.A.fluidBackground,style:Je},i.Ay.createElement(k.A,{message:e,isInsideTopic:U}))),i.Ay.createElement("div",{className:F.A.inlineWrapper},i.Ay.createElement("span",{className:F.A.textContent,onClick:Oe},i.Ay.createElement(k.A,{message:e,isInsideTopic:U})))),qe,we&&i.Ay.createElement(ne.A,{isOpen:Fe,anchor:we,message:e,messageListType:"thread",className:F.A.contextContainer,onClose:Ue,onCloseAnimationEnd:Be}),ke&&i.Ay.createElement(ie.A,{isOutside:!0,message:e,threadId:t,observeIntersection:Z,isCurrentUserPremium:O}))})))},48196:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(84051),a=n(31481),r=n(28470);function o(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=new Map;class c{constructor(e){this.color=e,o(this,"filterId",void 0),o(this,"referenceCount",0),this.filterId=`fluid-background-filter-${e.slice(1)}`,(0,r.z)(i.Ay.createElement("filter",{"color-interpolation-filters":"sRGB",xmlns:a.jNX},i.Ay.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),i.Ay.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15",result:"goo"}),i.Ay.createElement("feComposite",{in:"SourceAlpha",in2:"goo",operator:"over",result:"outline"}),i.Ay.createElement("feFlood",{"flood-color":e,result:"color"}),i.Ay.createElement("feComposite",{in:"color",in2:"outline",operator:"in"})),this.filterId)}getFilterId(){return this.referenceCount+=1,this.filterId}removeReference(){this.referenceCount-=1,0===this.referenceCount&&(0,r.e)(this.filterId)}isUsed(){return this.referenceCount>0}}function l(e,t){if((0,i.vJ)((()=>{if(e)return()=>{const t=s.get(e);t&&(t.removeReference(),t.isUsed()||s.delete(t.color))}}),[e]),!e)return;if(s.has(e))return d(s.get(e).getFilterId(),t);const n=new c(e);return s.set(e,n),d(n.getFilterId(),t)}function d(e,t){return t?`url(#${e})`:`filter: url(#${e});`}}}]);
//# sourceMappingURL=2049.4ba8fcadec428a851cc8.js.map