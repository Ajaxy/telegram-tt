"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[2557],{101:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(87679),a=n(56863);function s(e){const t=(0,o.li)(),{result:n}=(0,a.A)(()=>{if(!e)return Promise.resolve(void 0);t.current&&URL.revokeObjectURL(t.current);const n=URL.createObjectURL(e);return t.current=n,(0,i.NN)(n)},[e]);return(0,o.vJ)(()=>()=>{t.current&&(URL.revokeObjectURL(t.current),t.current=void 0)},[]),{image:n}}},537:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e,t){const n=(0,o.li)(0);return(0,o.Kr)(()=>{t||(n.current+=1)},[...e]),n.current}},10187:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(13439),a=n(70636),s=n(91048),r=n(87357),c=n(95807),l=n(39351),d=n(39996),u=n(21849),h=n(34431),m=n(18276);var g=n(20021);const p=(0,o.ph)((0,i.EK)((e,{peerId:t,forceShowSelf:n})=>{const o=(0,s.SJA)(e);if(!t)return{peer:void 0,isSavedMessages:void 0,theme:o};const i=(0,s.PVB)(e,t),a=(0,s.mBe)(e,t);return{peer:i,isSavedMessages:!n&&a&&a.isSelf,theme:o}})(({icon:e,title:t,isMinimized:n,canClose:o,isCloseNonDestructive:i,clickArg:s,peer:p,mockPeer:A,customPeer:v,className:f,isSavedMessages:C,withPeerColors:y,withEmojiStatus:I,itemClassName:S,theme:w,onClick:N})=>{const b=(0,l.A)(),R=A||p,P=v||R,{className:k,style:M}=(0,d.Ay)({peer:P,theme:w}),Y=R&&(0,a.vj)(R)?R:void 0;let x,T,F;e&&t?(x=(0,g.Y)("div",{className:"NtoGLT22",children:(0,g.Y)(m.A,{name:e,style:"f91Ad80i"})}),T=t):P&&(x=(0,g.Y)(u.A,{className:"La8BQ9yr",peer:P,size:"small",isSavedMessages:C}),F=(0,a.F9)(b,P)||t,T=t||(0,g.Y)(h.A,{peer:P,isSavedMessages:C,withEmojiStatus:I}));const D=(0,r.A)("_Lq6_4e5",(Y?.isForum||v?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",o&&"uvvgSFUJ",i&&"fAk5yEeV",!N&&"P8r3OoaX",y&&k,f),L=(0,c.A)(y&&M);return(0,g.FD)("div",{className:D,style:L,onClick:()=>N?.(s),title:n?F:void 0,dir:b.isRtl?"rtl":void 0,children:[x,!n&&(0,g.Y)("div",{className:(0,r.A)("XPVuH29G",S),dir:"auto",children:T}),o&&(0,g.Y)("div",{className:"xVPG2UTy",children:(0,g.Y)(m.A,{name:"close"})})]})}))},11241:(e,t,n)=>{n.d(t,{A:()=>b});var o=n(84051),i=n(13439),a=n(90709),s=n(91048),r=n(87357),c=n(43336),l=n(76023),d=n(37661),u=n(5912),h=n(17712),m=n(62587),g=n(50680),p=n(45294),A=n(18104),v=n(87412),f=n(83594),C=n(17794),y=n(93879),I=n(20021);const S=1.5*l.$,w=6.5*l.$,N=l.$,b=(0,o.ph)((0,i.EK)((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:o}=e,{activeReactions:i}=(0,s.nTw)(e),a=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:i?.[t],availableReactions:o.availableReactions,genericEffects:n,withEffects:a}})(({containerId:e,reaction:t,className:n,size:s=S,effectSize:l=w,activeReactions:b,availableReactions:R,genericEffects:P,withEffects:k,withEffectOnly:M,shouldPause:Y,shouldLoop:x,loopLimit:T,observeIntersection:F})=>{const{stopActiveReaction:D}=(0,i.ko)(),L=(0,o.li)(),B="custom"===t.type,E=(0,o.Kr)(()=>R?.find(e=>(0,a.a0)(e.reaction,t)),[R,t]),U=E?.centerIcon?.id,{customEmoji:O}=(0,p.A)(B?t.documentId:void 0),K=(0,o.Kr)(()=>{if(!B)return E?.aroundAnimation?.id;if(!O)return;const e=R?.find(e=>e.reaction.emoticon===O.emoji)?.aroundAnimation?.id;return e},[E,R,O,B]),G=(0,o.Kr)(()=>{if(K)return K;if(!P?.stickers)return;const{stickers:e}=P;return e[Math.floor(Math.random()*e.length)].id},[K,P]),J=(0,u.Vz)(L,F),j=U&&(0,a.aL)(U),z=G&&(0,a.aL)(G),$=(0,m.A)(j),_=(0,m.A)(z),V=(0,o.Kr)(()=>b?.find(e=>(0,a.a0)(e,t)),[b,t]),H=Boolean(k&&V&&(B||$)&&_),q=J&&(H&&!M||x),{shouldRender:W,transitionClassNames:X}=(0,g.A)(H,void 0,!0,"slow"),{shouldRender:Q,transitionClassNames:Z}=(0,g.A)(q,void 0,!0,"slow"),ee=(0,h.A)(()=>{D({containerId:e,reaction:t})}),[te,ne,oe]=(0,d.A)(),ie=!(B||q&&te),{shouldRender:ae,transitionClassNames:se}=(0,g.A)(ie,void 0,!0),re=(0,r.A)(y.A.root,W&&y.A.animating,M&&y.A.withEffectOnly,n);return(0,I.FD)("div",{className:re,ref:L,children:[!M&&ae&&(0,I.Y)(C.A,{className:se,reaction:t,availableReactions:R,size:s,observeIntersection:F}),!M&&B&&(0,I.Y)(v.A,{documentId:t.documentId,className:y.A.customEmoji,size:s,noPlay:Y,noVideoOnMobile:!0,loopLimit:T,observeIntersectionForPlaying:F,forceAlways:!0}),Q&&!B&&(0,I.Y)(A.A,{className:(0,r.A)(y.A.animatedIcon,Z),size:(0,c.Ki)(1.9*s),tgsUrl:$,play:J&&!Y,noLoop:!x,onLoad:ne,onEnded:oe,forceAlways:!0},`${U}-${s}`),W&&(0,I.FD)(I.FK,{children:[(0,I.Y)(A.A,{className:(0,r.A)(y.A.effect,X),size:l,tgsUrl:_,play:J,noLoop:!0,onEnded:ee,forceAlways:!0},`${G}-${l}`),B&&!K&&J&&(0,I.Y)(f.A,{reaction:t,className:X,particleSize:Math.max(.5*s,N),onEnded:ee})]})]})}))},14622:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(13439),a=n(81954),s=n(17712),r=n(93545),c=n(672);const l=function(e,t=!1){const{scrollMessageListToBottom:n}=(0,i.ko)(),l=(0,o.li)(0),d=(0,s.A)(e=>{const t=l.current,i=e.contentRect.height;if(l.current=i,(0,a.o8)()||!t||i<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,o.VK)(400);const r=i-t,{offsetHeight:c,scrollHeight:d,scrollTop:u}=s;Math.round(d-u-c)-r<=5&&n()}),u=(0,c.A)(d,[d],300,!1);(0,r.A)(e,u,!t)}},14737:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(17712);const a=function(e,t){const n=(0,i.A)(e);(0,o.vJ)(()=>{if("number"!=typeof t)return;const e=setTimeout(()=>n(),t);return()=>clearTimeout(e)},[t])}},15535:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(84051),i=n(31481),a=n(66644),s=n(63495),r=n(96454),c=n(87357),l=n(83868),d=n(14737),u=n(43874),h=n(39351),m=n(64493),g=n(18276),p=n(20021);const A=(0,o.ph)(({isLoading:e=!1,isPasswordVisible:t,error:n,hint:A,placeholder:v,submitLabel:f,description:C,shouldShowSubmit:y,shouldResetValue:I,shouldDisablePasswordManager:S=!1,noRipple:w=!1,onClearError:N,onChangePasswordVisibility:b,onInputChange:R,onSubmit:P})=>{const k=(0,o.li)(),M=(0,h.A)(),{isMobile:Y}=(0,u.Ay)(),[x,T]=(0,o.J0)(""),[F,D]=(0,o.J0)(!1),L=Y?550:400;return(0,o.vJ)(()=>{I&&T("")},[I]),(0,d.A)(()=>{r.TF||k.current.focus()},L),(0,o.vJ)(()=>{n&&(0,a.RK)(()=>{k.current.focus(),k.current.select()})},[n]),(0,p.FD)("form",{action:"",onSubmit:P?function(t){t.preventDefault(),e||F&&P(x)}:l.A,autoComplete:"off",children:[(0,p.FD)("div",{className:(0,c.A)("input-group password-input",x&&"touched",n&&"error"),dir:M.isRtl?"rtl":void 0,children:[S&&(0,p.Y)("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),(0,p.Y)("input",{ref:k,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:x||"",autoComplete:S?"one-time-code":"current-password",spellCheck:!s.Vq&&void 0,onChange:function(e){n&&N();const{target:t}=e;T(t.value),D(t.value.length>=i.AGC),R&&R(t.value)},maxLength:256,dir:"auto"}),(0,p.Y)("label",{children:n||A||v||M("PasswordFormPlaceholder")}),(0,p.Y)("div",{className:"div-button toggle-password",onClick:function(){b(!t)},role:"button",tabIndex:0,title:M("AriaPasswordToggle"),"aria-label":M("AriaPasswordToggle"),children:(0,p.Y)(g.A,{name:t?"eye":"eye-crossed"})})]}),C&&(0,p.Y)("p",{className:"description",children:C}),P&&(F||y)&&(0,p.Y)(m.A,{type:"submit",ripple:!w,isLoading:e,disabled:!F,children:f||M("PasswordFormSubmit")})]})})},15640:(e,t,n)=>{function o(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}n.d(t,{A:()=>o})},17794:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(90709),a=n(87357),s=n(62587),r=n(83057),c=n(87412),l=n(18276),d=n(61911),u=n(20021);const h=(0,o.ph)(({reaction:e,availableReactions:t,className:n,size:h,withIconHeart:m,observeIntersection:g})=>{const p=(0,o.Kr)(()=>t?.find(t=>(0,i.a0)(t.reaction,e)),[t,e]),A=p?.staticIcon?.id,v=A?`document${A}`:void 0,f=(0,s.A)(v),C=(0,r.A)(f),y="emoji"===e.type&&"ðŸ¦„"===e.emoticon,I=m&&"emoji"===e.type&&"â¤"===e.emoticon;return"custom"===e.type?(0,u.Y)(c.A,{documentId:e.documentId,className:(0,a.A)("ReactionStaticEmoji",n),size:h,observeIntersectionForPlaying:g}):I?(0,u.Y)(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${h}px; width: ${h}px`}):(0,u.Y)("img",{className:(0,a.A)("ReactionStaticEmoji",y&&"with-unicorn-fix",C,n),style:h?`width: ${h}px; height: ${h}px`:void 0,src:f||d,alt:p?.title,draggable:!1})})},20333:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(84051),i=n(87357),a=n(95807),s=n(76023),r=n(537),c=n(30857),l=n(39351),d=n(29886),u=n(93545),h=n(35297),m=n(41036),g=n(18276);const p="HS9PzRKt",A="_b5HgBXr",v="P6mch4bB",f="xdKGgbKQ";var C=n(20021);const y=(0,o.ph)(({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:y,progress:I=0,isPrimary:S,isNegative:w,animationDirection:N="none",className:b})=>{const R=(0,o.li)(),P=(0,o.li)(),[k,M]=(0,o.J0)(0),[Y,x]=(0,o.J0)(0),[T,F]=(0,o.J0)(0),D=(0,d.A)(T),[L,B]=(0,o.J0)(w?0:I),[E,U]=(0,o.J0)(w?I:0),[O,K]=(0,o.J0)(I),[G,J]=(0,o.J0)(0),[j,z]=(0,o.J0)(!1),[$,_]=(0,o.J0)(!1),[V,H]=(0,o.J0)(!1),[q,W]=(0,o.J0)(!1),[X,Q]=(0,o.J0)(!1),Z=(0,r.A)([n,y]),ee=(0,o.li)(!1),te=(0,d.A)(e),ne=(0,d.A)(t),oe=(0,d.A)(w),ie=(0,l.A)(),ae=14+s.$,se=1.5*s.$,re=()=>{if(R.current&&P.current){const e=P.current.offsetWidth,t=T/2,n=t,o=e-t,i=14,a=w?(1-O)*e:O*e;let s=Math.max(n,Math.min(a,o));a<ae&&(s=a+t),a>e-ae&&(s=a-t);const r=t+(a-s)-i;M(s/e),x(r)}};(0,o.vJ)(re,[O,T,w,ae]),(0,u.A)(P,re),(0,o.vJ)(()=>{F((R?.current?.clientWidth||0)+se)},[n,y,se]);const ce=(0,c.A)();(0,h.A)(()=>{let e;if((te||ne)&&(void 0!==oe&&oe!==w||X)&&!ee.current){ee.current=!0;const t=X?800:400;e=window.setTimeout(()=>{ee.current=!1,ce()},t)}return()=>{e&&(clearTimeout(e),ee.current=!1)}},[e,te,t,ne,oe,w,N,X]);const le=ee.current;(0,o.vJ)(()=>{w?(B(0),U(I)):(U(0),B(I)),K(I)},[I,w]);const de=Boolean(y||n),ue=le?te:e,he=le?ne:t,me=(0,d.A)(I);(0,o.vJ)(()=>{const e=[];if("none"===N||void 0===me)return;const t=I,n=e=>{w?U(e):B(e)};if("forward"===N||"backward"===N){const o="forward"===N;Q(!0),n(o?1:0),H(!0),J(o?0:1),e.push(window.setTimeout(()=>{H(!1),z(!0),J(t),o&&(_(!0),n(0))},400)),e.push(window.setTimeout(()=>{_(!0),H(!0),W(!1),n(t),z(!1),e.push(window.setTimeout(()=>{_(!1),H(!1),Q(!1)},50))},800))}return()=>{e.forEach(clearTimeout)}},[I,N,w,me,800]);const ge=(e,t,n,o)=>{const a=e?"MzFvyMb5":"S6H6hBpP";return(0,C.FD)("div",{className:(0,i.A)(a,n,o&&p),style:`--layer-progress: ${t}`,children:[(0,C.Y)("div",{className:A,children:(0,C.Y)("span",{children:ue})}),(0,C.Y)("div",{className:v,children:(0,C.Y)("span",{children:he})})]})};return(0,C.FD)("div",{ref:P,className:(0,i.A)("nY2ggBsF",de&&"RYtVQAjM",S&&"Zi0w7QJ3",w&&"dXs41qvC",le&&"I7toQztx",X&&"SxTCkiyg",b),style:(0,a.A)(`--positive-progress: ${L}`,`--negative-progress: ${E}`,`--layer-progress: ${G}`,`--shift-x: ${k}`,"--cycling-animation-badge-position: 800ms","--cycling-animation-progress: 400ms"),children:[de&&(0,C.Y)("div",{className:"dhigNjAq",children:(0,C.FD)("div",{className:"cOpfCGPh",children:[(0,C.Y)("div",{className:(0,i.A)("uNwBLNOy",(!D||0===D)&&p),style:`width: ${T}px;`,children:(0,C.Y)(m.Ay,{activeKey:Z,name:"fade",shouldCleanup:!0,children:(0,C.FD)("div",{ref:R,className:"W4rqGyJl",children:[y&&(0,C.Y)(g.A,{name:y,className:"MJ7MTmxi"}),n&&(0,C.Y)("div",{className:"MwzZt3Qo",dir:ie.isRtl?"rtl":void 0,children:n})]})})}),(0,C.Y)("div",{className:"qRwO7SZm",style:`left: ${Y}px`,children:(0,C.Y)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:(0,C.Y)("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"currentColor"})})})]})}),(0,C.Y)("div",{className:A,children:(0,C.Y)("span",{children:ue})}),(0,C.Y)("div",{className:v,children:(0,C.Y)("span",{children:he})}),(0,C.FD)("div",{className:"_B4r3D5W",children:[ge(!0,L,(0,i.A)(q&&f),$),ge(!1,E,(0,i.A)(q&&f),$),ge(!w,G,(0,i.A)(w?"QZwWHVdB":"VmyTBAzN",j&&"tkyw4hXo"),V)]})]})})},24531:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(31481),a=n(17663),s=n(80140),r=n(17712),c=n(59030),l=n(80089),d=n(80464),u=n(20021);const h=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?(0,u.Y)(n,{...e}):void 0},m=(e,t,n)=>{const l=(0,c.A)(),[d,m]=(0,o.J0)(),g=(0,r.A)((e,t=!1)=>{const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());d?.(n),m(void 0)}),p=(0,r.A)(()=>{g(new Date(1e3*i.NkL),!0)}),A=(0,r.A)(()=>{m(void 0),t?.()}),v=(0,r.A)(e=>{m(()=>e)}),f=n?new Date(1e3*n):new Date;f.setSeconds(0),f.setMilliseconds(0);const C=new Date;return C.setFullYear(C.getFullYear()+1),[v,(0,u.Y)(h,{isOpen:Boolean(d),withTimePicker:!0,selectedAt:f.getTime(),maxAt:(0,a.CS)(C),isFutureMode:!0,secondButtonLabel:e?l("Schedule.SendWhenOnline"):void 0,onClose:A,onSubmit:g,onSecondButtonClick:e?p:void 0})]}},26875:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(84051),i=n(87357),a=n(39351),s=n(21849);var r=n(20021);const c=(0,o.ph)(({peers:e,size:t,className:n,limit:c=3,badgeText:l})=>{const d=(0,a.A)(),u="number"==typeof t?t:s.R[t],h=(0,o.Kr)(()=>l||(!e?.length||e.length<=c?void 0:"+"+(e.length-c)),[l,e,c]);return(0,r.FD)("div",{className:(0,i.A)(n,"kXs18Nmi"),style:`--_size: ${u}px;`,dir:d.isRtl?"rtl":"ltr",children:[e?.slice(0,c).map(e=>(0,r.Y)(s.A,{size:t,peer:e,className:"XND8fhC1"})),h&&(0,r.Y)("div",{className:"SHyAyGFO",children:h})]})})},27860:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(66644),a=n(87357),s=n(45470),r=n(39351),c=n(17712),l=n(50680),d=n(18276);var u=n(20021);const h=(0,o.ph)(({isVisible:e,withAnimation:t,thumbDataUri:n,isNsfw:h,className:m,width:g,height:p})=>{const A=(0,o.li)(),v=(0,r.A)(),{shouldRender:f,transitionClassNames:C}=(0,l.A)(e,void 0,!0,!t&&void 0,void 0,500),y=(0,s.A)(n,!f,void 0,25,g,p),I=(0,c.A)(e=>{if(!A.current)return;const t=A.current,n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,s=o-n.width/2,r=a-n.height/2;(0,i.RK)(()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${r}px`)})});if(f)return(0,u.FD)("div",{className:(0,a.A)("qF2WgYVg",C,m,t&&"pNM3cgkY"),ref:A,onClick:t?I:void 0,children:[(0,u.Y)("canvas",{ref:y,className:"eULqS2yR",width:g,height:p}),(0,u.Y)("div",{className:"XBor45hE"}),h&&(0,u.FD)("span",{className:"FJGQoa6s",children:[(0,u.Y)(d.A,{name:"eye-crossed-outline",className:"Y7JVRkxJ"}),v("MediaSpoilerSensitive")]})]})})},31460:(e,t,n)=>{n.d(t,{P:()=>a});var o=n(31481),i=n(96454);function a(e,t,n=!1,a=!1){return n||t===o.dnp?"none":t===o.zHL?"slideFade":"slideOptimized"===e?a?"slideOptimizedRtl":"slideOptimized":"slide"===e?a?"slideRtl":"slide":i.Ni?"slideFade":i.pz?"slideLayers":"pushSlide"}},31722:(e,t,n)=>{n.d(t,{A:()=>o});const o={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},36143:(e,t,n)=>{n.d(t,{A:()=>Te});var o=n(84051),i=n(13439),a=n(23174),s=n(89925),r=n(31481),c=n(90709),l=n(26129),d=n(91048),u=n(63495),h=n(96454),m=n(87357),g=n(60343),p=n(41512),A=n(54464),v=n(43874),f=n(10722),C=n(49746),y=n(37661),I=n(5912),S=n(17712),w=n(14622),N=n(34201),b=n(48196),R=n(42211),P=n(96773),k=n(76023),M=n(21849),Y=n(50805),x=n(20021);const T=15*k.$,F=(0,o.ph)(({action:e,onClick:t,observeIntersection:n})=>(0,x.Y)(M.A,{className:Y.A.channelPhoto,photo:e.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:n,onClick:t,size:T}));var D=n(17142),L=n(18501),B=n(39351),E=n(85118),U=n(82855);const O=(0,o.ph)((0,i.EK)((e,{action:t})=>({sticker:"giftPremium"===t.type?(0,d.t0O)(e,t.months):"giftStars"===t.type?(0,d.WLj)(e,t.stars):(0,d.OD9)(e,t.cryptoAmount),canPlayAnimatedEmojis:(0,d.BWX)(e)}))(({action:e,sticker:t,canPlayAnimatedEmojis:n,onClick:i,observeIntersectionForLoading:a,observeIntersectionForPlaying:s})=>{const r=(0,o.li)(),c=(0,B.A)(),l="giftPremium"===e.type?e.message:void 0;return(0,x.FD)("div",{className:Y.A.contentBox,tabIndex:0,role:"button",onClick:i,children:[(0,x.Y)("div",{ref:r,className:Y.A.stickerWrapper,style:"width: 150px; height: 150px",children:t&&(0,x.Y)(U.A,{containerRef:r,sticker:t,size:150,observeIntersectionForLoading:a,observeIntersectionForPlaying:s,noLoad:!n})}),(0,x.FD)("div",{className:Y.A.info,children:[(0,x.Y)("h3",{className:Y.A.title,children:"giftPremium"===e.type?c("ActionGiftPremiumTitle",{months:e.months},{pluralValue:e.months}):"giftStars"===e.type?c("ActionGiftStarsTitle",{amount:e.stars},{pluralValue:e.stars}):(()=>{const{cryptoAmount:t,cryptoCurrency:n}=e;return t?(0,D.vv)(c,t,n,{asFontIcon:!0}):void 0})()}),(0,x.FD)("div",{children:[l&&(0,L.fd)(l),!l&&c("giftTon"===e.type?"DescriptionAboutTon":"giftPremium"===e.type?"ActionGiftPremiumText":"ActionGiftStarsText")]})]}),(0,x.FD)("div",{className:Y.A.actionButton,children:[(0,x.Y)(E.A,{preset:"button"}),c("ActionViewButton")]})]})}));var K=n(70636),G=n(4262);const J=(0,o.ph)((0,i.EK)((e,{action:t})=>({currentUserId:e.currentUserId,sticker:"giftCode"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e),channel:t.boostPeerId?(0,d.hds)(e,t.boostPeerId):void 0}))(({currentUserId:e,action:t,sender:n,sticker:i,canPlayAnimatedEmojis:a,channel:s,onClick:r,observeIntersectionForLoading:c,observeIntersectionForPlaying:l})=>{const d=(0,o.li)(),u=(0,B.A)(),h=(0,o.Kr)(()=>{const e=s&&(0,K.F9)(u,s),t=u("ActionFallbackChannel");return(0,G.Nm)(s?.id,e||t)},[s,u]),m=(0,o.Kr)(()=>{const e=s||n,t=e&&(0,K.F9)(u,e),o=u("ActionFallbackChat");return(0,G.Nm)(e?.id,t||o)},[s,n,u]);return(0,x.FD)("div",{className:Y.A.contentBox,tabIndex:0,role:"button",onClick:r,children:[(0,x.Y)("div",{ref:d,className:Y.A.stickerWrapper,style:"width: 150px; height: 150px",children:i&&(0,x.Y)(U.A,{containerRef:d,sticker:i,size:150,observeIntersectionForLoading:c,observeIntersectionForPlaying:l,noLoad:!a})}),(0,x.FD)("div",{children:[(0,x.Y)("h3",{className:Y.A.title,children:u("giftCode"!==t.type||t.isViaGiveaway?"ActionGiveawayResultTitle":"GiftInfoTitle")}),(0,x.FD)("div",{children:["giftCode"===t.type&&(t.isViaGiveaway?u("ActionGiveawayResultPremiumText",{channel:h,months:t.months},{withNodes:!0,withMarkdown:!0,pluralValue:t.months,renderTextFilters:["br"]}):(0,G.AD)(u,"ActionGiftCodeSubscriptionText",n?.id===e,{peer:m,months:t.months},{pluralValue:t.months,renderTextFilters:["br"]})),"prizeStars"===t.type&&u("ActionGiveawayResultStarsText",{amount:t.stars,channel:h},{withNodes:!0,withMarkdown:!0,pluralValue:t.stars,renderTextFilters:["br"]})]})]}),(0,x.FD)("div",{className:Y.A.actionButton,children:[(0,x.Y)(E.A,{preset:"button"}),u("giftCode"===t.type?"ActionOpenGiftButton":"ActionViewButton")]})]})}));var j=n(48775),z=n(80140),$=n(14242),_=n(66833),V=n(87094),H=n(87049);const q=(0,o.ph)((0,i.EK)((e,{message:t,action:n})=>{const o=(0,d.mBe)(e,e.currentUserId),i=(0,d.BWX)(e),a=(0,d.Y7C)(e,t),s=n.fromId?(0,d.PVB)(e,n.fromId):void 0,r=t.isOutgoing?(0,d.PVB)(e,t.chatId):o;return{canPlayAnimatedEmojis:i,sender:s||a,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||r,starGiftMaxConvertPeriod:e.appConfig.starGiftMaxConvertPeriod}})(({action:e,message:t,canPlayAnimatedEmojis:n,sender:i,recipient:a,starGiftMaxConvertPeriod:s,onClick:r,observeIntersectionForLoading:l,observeIntersectionForPlaying:d})=>{const u=(0,o.li)(),g=(0,o.li)(),p=(0,B.A)(),[A,v,f]=(0,y.A)(),{isOutgoing:C}=t,I=(0,_.yQ)(e.gift),S=C?a:i,w=S&&(0,K.vj)(S)&&(0,c.WX)(S),N=(0,V.A)(u,"background-color",!e.gift.availabilityTotal),b=p("ActionFallbackSomeone"),R=S&&(0,K.F9)(p,S),P=i?.id===a?.id,k=(0,o.Kr)(()=>{const n=(0,G.Nm)(S?.id,R||b),o=void 0!==e.starsToConvert?(0,j.Kk)(p,e.starsToConvert):void 0;return e.isUpgraded?p("ActionStarGiftUpgraded"):e.alreadyPaidUpgradeStars?(0,G.AD)(p,"ActionStarGiftUpgradeText",!C||P,{peer:n}):e.isConverted?(0,G.AD)(p,"ActionStarGiftConvertedText",!C||P,{peer:n,amount:o}):s&&(0,z.Fm)()<t.date+s?(0,G.AD)(p,"ActionStarGiftConvertText",!C||P,{peer:n,amount:o}):w?p("ActionStarGiftChannelText",{amount:o},{withNodes:!0}):(0,G.AD)(p,"ActionStarGiftNoConvertText",!C||P,{peer:n})},[e,b,w,C,p,t.date,S?.id,R,s,P]);return(0,x.FD)("div",{ref:u,className:(0,m.A)("interactive-gift",Y.A.contentBox,Y.A.starGift),tabIndex:0,role:"button",onClick:r,onMouseEnter:h.TF?void 0:v,onMouseLeave:h.TF?void 0:f,children:[(0,x.Y)("div",{ref:g,className:Y.A.stickerWrapper,style:"width: 120px; height: 120px",children:I&&(0,x.Y)(U.A,{containerRef:g,sticker:I,size:120,shouldLoop:A,observeIntersectionForLoading:l,observeIntersectionForPlaying:d,noLoad:!n})}),Boolean(e.gift.availabilityTotal)&&(0,x.Y)(H.A,{color:N||"blue",text:p("ActionStarGiftLimitedRibbon",{total:(0,$.Vw)(p,e.gift.availabilityTotal)})}),(0,x.FD)("div",{className:Y.A.info,children:[(0,x.Y)("h3",{className:Y.A.title,children:P?p("ActionStarGiftSelf"):p(C?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,G.Nm)(S?.id,R||b)},{withNodes:!0})}),(0,x.FD)("div",{className:Y.A.subtitle,children:[e.message&&(0,L.fd)(e.message),!e.message&&k]})]}),(0,x.FD)("div",{className:Y.A.actionButton,children:[(0,x.Y)(E.A,{preset:"button"}),!e.alreadyPaidUpgradeStars||e.isUpgraded||C?p("ActionViewButton"):p("ActionStarGiftUnpack")]})]})}));var W=n(95807),X=n(92108),Q=n(40558);const Z=(0,o.ph)((0,i.EK)((e,{message:t,action:n})=>{const o=(0,d.mBe)(e,e.currentUserId),i=(0,d.BWX)(e),a=(0,d.Y7C)(e,t),s=n.fromId?(0,d.PVB)(e,n.fromId):void 0,r=t.isOutgoing?(0,d.PVB)(e,t.chatId):o;return{canPlayAnimatedEmojis:i,sender:s||a,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||r}})(({action:e,message:t,canPlayAnimatedEmojis:n,sender:i,recipient:a,onClick:s,observeIntersectionForLoading:r,observeIntersectionForPlaying:c})=>{const l=(0,o.li)(),d=(0,B.A)(),[u,g,p]=(0,y.A)(),{isOutgoing:A}=t,v=(0,_.yQ)(e.gift),f=(0,_.uc)(e.gift),C=f.model,I=f.pattern,S=f.backdrop,w=[S.centerColor,S.edgeColor],N=`${S.patternColor.slice(0,7)}55`,b=(0,o.Kr)(()=>[[d("ActionStarGiftUniqueModel"),C.name],[d("ActionStarGiftUniqueBackdrop"),S.name],[d("ActionStarGiftUniqueSymbol"),I.name]],[d,C,I,S]),R=!A||e.isUpgrade,P=R&&!e.isUpgrade?i:a,M=d("ActionFallbackSomeone"),T=P&&(0,K.F9)(d,P),F=i?.id===a?.id;return(0,x.FD)("div",{className:(0,m.A)("interactive-gift",Y.A.contentBox,Y.A.starGift,Y.A.uniqueGift),tabIndex:0,role:"button",onClick:s,onMouseEnter:h.TF?void 0:g,onMouseLeave:h.TF?void 0:p,children:[(0,x.Y)("div",{className:Y.A.uniqueBackgroundWrapper,children:(0,x.Y)(Q.A,{className:Y.A.uniqueBackground,backgroundColors:w,patternIcon:I.sticker,patternSize:14,yPosition:5*k.$,clearBottomSector:!0})}),(0,x.Y)("div",{ref:l,className:Y.A.stickerWrapper,style:"width: 120px; height: 120px",children:v&&(0,x.Y)(U.A,{containerRef:l,sticker:v,size:120,shouldLoop:u,observeIntersectionForLoading:r,observeIntersectionForPlaying:c,noLoad:!n})}),(0,x.Y)(H.A,{color:N,text:d("ActionStarGiftUniqueRibbon")}),(0,x.FD)("div",{className:Y.A.info,children:[(0,x.Y)("h3",{className:Y.A.title,children:F?d("ActionStarGiftSelf"):d(R?"ActionStarGiftFrom":"ActionStarGiftTo",{peer:(0,G.Nm)(P?.id,T||M)},{withNodes:!0})}),(0,x.Y)("div",{className:Y.A.subtitle,style:`color: ${S.textColor}`,children:d("GiftUnique",{title:e.gift.title,number:e.gift.number})}),(0,x.Y)(X.A,{data:b,style:`color: ${S.textColor}`,valueClassName:Y.A.uniqueValue})]}),(0,x.FD)("div",{className:Y.A.actionButton,style:(0,W.A)(N&&`background-color: ${N}`),children:[(0,x.Y)(E.A,{preset:"button"}),d("ActionViewButton")]})]})}));var ee=n(87679),te=n(62587),ne=n(94189),oe=n(90751);const ie=(0,o.ph)((0,i.EK)((e,{message:t})=>({peer:(0,d.PVB)(e,t.chatId)}))(({message:e,action:t,peer:n,observeIntersection:r})=>{const{openMediaViewer:l,uploadProfilePhoto:d,showNotification:u}=(0,i.ko)(),{isOutgoing:h}=e,m=t.photo,g=(0,B.A)(),[p,A]=(0,o.J0)(),[v,f,C]=(0,y.A)(!1),I=(0,te.A)((0,c.rI)(m,"full")),w=(0,te.A)((0,c.Pg)(m)),N=m.isVideo,b=(0,o.Kr)(()=>{const e=n&&(0,K.F9)(g,n)||g("ActionFallbackUser"),t=(0,G.Nm)(n?.id,e);return g(h?"ActionSuggestedPhotoYou":"ActionSuggestedPhoto",{user:t},{withNodes:!0})},[g,h,n]),R=(0,S.A)(()=>{u({title:g("ActionSuggestedPhotoUpdatedTitle"),message:g("ActionSuggestedPhotoUpdatedDescription"),action:{action:"openSettingsScreen",payload:{screen:s.VS.Main}},actionText:g("Open")})}),P=(0,S.A)(e=>{A(void 0),d({file:e}),R()}),k=(0,S.A)(()=>{A(void 0)}),T=(0,S.A)(async()=>{if(!w)return;C(),R();const e=await(0,ee.sZ)(w);d({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:m.videoSizes?.find(e=>void 0!==e.videoStartTs)?.videoStartTs})});return(0,x.FD)("div",{className:Y.A.contentBox,tabIndex:0,role:"button",onClick:async()=>{!h&&I?N?f():A(await(0,ee.sZ)(I)):l({chatId:e.chatId,messageId:e.id,threadId:a.l3,origin:s.TQ.SuggestedAvatar})},children:[(0,x.Y)(M.A,{className:Y.A.suggestedAvatar,photo:t.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:r,size:"jumbo"}),(0,x.Y)("div",{className:Y.A.suggestedText,children:b}),(0,x.Y)("div",{className:Y.A.actionButton,children:g("ActionSuggestedPhotoButton")}),(0,x.Y)(oe.A,{file:p,onClose:k,onChange:P}),(0,x.Y)(ne.A,{isOpen:v,title:g("ActionSuggestedVideoTitle"),confirmHandler:T,onClose:C,text:g("ActionSuggestedVideoText")})]})}));var ae=n(17663),se=n(4961),re=n(59030);const ce=(0,o.ph)((0,i.EK)((e,{message:t})=>{const n=(0,d.Y7C)(e,t),o=(0,d.k2W)(e,t.chatId),i=(0,l.Q)(t);let a;if("message"===i?.type&&i.replyToMsgId){const n=(0,d.gMr)(e,t);n&&(a=(0,d.Y7C)(e,n))}const{appConfig:s}=e;return{sender:n,chat:o,originalSender:a,ageMinSeconds:s.starsSuggestedPostAgeMin,isAdmin:!!o&&Boolean((0,d.ODG)(e,t.chatId))}})(({message:e,action:t,sender:n,chat:o,originalSender:i,ageMinSeconds:a,isAdmin:s,onClick:c})=>{const l=(0,B.A)(),d=(0,re.A)(),{scheduleDate:u,amount:h}=t,g=o&&(0,K.em)(l,o),p=()=>(0,G.Nm)(o?.id,g||l("ActionFallbackChat")),A=i&&(0,K.em)(l,i),v=(0,G.Nm)(i?.id,A||l("ActionFallbackUser")),f=u?(0,ae.e0)(u,l,d):l("SuggestMessageAnytime"),C=!!u&&u<=(0,z.Fm)(),y=h?.currency,I=h?.amount||0,S=I>0?y===r.ykW?(0,j.QH)(l,(0,D.wD)(I)):(0,j.Kk)(l,I):void 0,w=(0,ae.A$)(l,a,!0);return(0,x.FD)("div",{className:(0,m.A)(Y.A.contentBox,Y.A.suggestedPostContentBox),onClick:c,children:[(0,x.Y)("div",{className:Y.A.suggestedPostApprovalTitle,children:(0,se.A)(l("SuggestedPostAgreementReached"))}),(0,x.Y)("div",{className:Y.A.suggestedPostApprovalSection,children:(0,G.AD)(l,C?"SuggestedPostPublished":"SuggestedPostPublishSchedule",!s,{peer:p(),date:f},{withMarkdown:!0})}),S&&(0,x.Y)("div",{className:Y.A.suggestedPostApprovalSection,children:(0,G.AD)(l,"SuggestedPostCharged",!s,{user:v,amount:S},{withMarkdown:!0})}),C&&S&&(0,x.FD)(x.FK,{children:[(0,x.Y)("div",{className:Y.A.suggestedPostApprovalSection,children:(0,G.AD)(l,"SuggestedPostReceiveAmount",!s,{peer:p(),duration:w},{withMarkdown:!0})}),(0,x.Y)("div",{className:Y.A.suggestedPostApprovalSection,children:(0,G.AD)(l,"SuggestedPostRefund",!s,{peer:p(),duration:w},{withMarkdown:!0})})]})]})})),le=(0,o.ph)((0,i.EK)((e,{message:t})=>{const n=(0,d.Y7C)(e,t),o="message"===t.replyInfo?.type&&t.replyInfo.replyToMsgId?(0,d.O5q)(e,t.chatId,t.replyInfo.replyToMsgId):void 0;return{sender:n,replyMessageSender:o?(0,d.Y7C)(e,o):void 0,replyMessage:o}})(({onClick:e,message:t,sender:n,replyMessageSender:o,replyMessage:a})=>{const{openStarsBalanceModal:s}=(0,i.ko)(),c=(0,B.A)(),l=(0,S.A)(e=>{e.preventDefault(),e.stopPropagation(),s({})}),d=o||n,u=d&&(0,K.em)(c,d),h=(0,G.Nm)(d?.id,u||c("ActionFallbackUser")),g=a?.suggestedPostInfo?.price?.currency||r.OUy,p=g===r.ykW?c("CurrencyTon"):c("CurrencyStars"),A=g===r.ykW?c("ButtonTopUpViaFragment"):c("ButtonBuyStars");return(0,x.FD)("div",{className:(0,m.A)(Y.A.contentBox,Y.A.suggestedPostBalanceTooLowBox),onClick:e,children:[(0,x.Y)("div",{className:Y.A.suggestedPostBalanceTooLowTitle,children:c("SuggestedPostBalanceTooLow",{peer:h,currency:p},{withNodes:!0,withMarkdown:!0})}),!t.isOutgoing&&(0,x.FD)("div",{className:Y.A.actionButton,onClick:l,children:[(0,x.Y)(E.A,{preset:"button"}),A]})]})}));var de=n(18276);const ue=(0,o.ph)((0,i.EK)((e,{message:t})=>({sender:(0,d.Y7C)(e,t)}))(({message:e,action:t,sender:n,onClick:o})=>{const i=(0,B.A)(),{isOutgoing:a}=e,{rejectComment:s}=t,r=n&&(0,K.F9)(i,n),c=(0,G.Nm)(n?.id,r||i("ActionFallbackUser"));return(0,x.FD)("div",{className:(0,m.A)(Y.A.contentBox,Y.A.suggestedPostRejectedContentBox),onClick:o,children:[(0,x.FD)("div",{className:Y.A.suggestedPostRejectedTitle,children:[(0,x.Y)(de.A,{className:Y.A.rejectedIcon,name:"close"}),(0,G.AD)(i,s?"SuggestedPostRejectedWithReason":"SuggestedPostRejected",a,{peer:c},{withMarkdown:!0})]}),s&&(0,x.Y)("div",{className:Y.A.suggestedPostRejectedComment,children:i("SuggestedPostRejectedComment",{comment:s})})]})}));var he=n(99515),me=n(43581),ge=n(14737),pe=n(48894);var Ae=n(36838),ve=n(64493),fe=n(55158);const Ce="d8axZxyN",ye="glDpC2av",Ie="gqCs9fSo",Se="gnYhwnvf",we="HWgwnKui",Ne="BTNQ4KBH",be="Xl9MVMTn",Re="Qizai7yv";function Pe({channel:e}){const{openChat:t}=(0,i.ko)(),n=function(e,t="#00000000"){const[n,i]=(0,o.J0)(t),s=(0,te.A)((0,c.cP)(e),!1,a.qZ.BlobUrl);return(0,o.vJ)(()=>{(async()=>{if(!s)return;const e=await(0,pe.rX)(s);i((0,pe.v2)(e))})()},[s]),n}(e,"#3C3C4399"),s=(0,B.A)();return(0,x.FD)("div",{className:ye,onClick:()=>t({id:e.id}),children:[(0,x.Y)(M.A,{className:Ie,size:"large",peer:e},e.id),(0,x.FD)("div",{style:`background: ${n}`,className:Se,children:[(0,x.Y)(de.A,{name:"user-filled",className:Ce}),(0,x.Y)("span",{className:we,children:(0,$.Vw)(s,e?.membersCount||0)})]}),(0,x.Y)("span",{className:Ne,children:e.title})]})}function ke({channel:e,chatId:t,channelsCount:n,isCurrentUserPremium:o}){const{openPremiumModal:a,openChatWithInfo:s}=(0,i.ko)(),r=(0,re.A)();return(0,x.FD)("div",{className:(0,m.A)(ye,"MBChXyXk"),onClick:()=>{o?s({id:t,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):a()},children:[(0,x.Y)(M.A,{className:Ie,size:"large",peer:e},e.id),(0,x.Y)("div",{className:be,children:(0,x.Y)("div",{className:Re})}),(0,x.Y)("div",{className:(0,m.A)(be,"JxSmtOFi"),children:(0,x.Y)("div",{className:Re})}),(0,x.FD)("div",{className:Se,children:[(0,x.Y)("span",{className:we,children:`+${n}`}),!o&&(0,x.Y)(de.A,{name:"lock-badge",className:Ce})]}),(0,x.Y)("span",{className:Ne,children:r("MoreSimilar")})]})}const Me=(0,o.ph)((0,i.EK)((e,{chatId:t})=>{const{similarChannelIds:n,isExpanded:o,count:i}=(0,d.dg4)(e,t)||{},a=(0,d.g29)(e),s=(0,d.AWZ)(e,t);return{similarChannelIds:n,isExpanded:o,count:i,isCurrentUserPremium:a,channelJoinInfo:s?.joinInfo}})(({chatId:e,similarChannelIds:t,isExpanded:n,count:a,isCurrentUserPremium:s,channelJoinInfo:r})=>{const{toggleChannelRecommendations:c,loadChannelRecommendations:l}=(0,i.ko)(),u=(0,re.A)(),[h,g,p]=(0,y.A)(!1),[A,v,f]=(0,y.A)(!1),C=(0,o.li)(),I=(0,o.li)(!1),w=(0,o.Kr)(()=>{if(!t)return;const e=(0,i.mS)();return t.map(t=>(0,d.hds)(e,t)).filter(Boolean)},[t]),[N,b]=(0,o.J0)(!1),R=(0,o.Kr)(()=>w?.slice(0,10),[w]),P=Boolean(R?.length),k=Boolean(!N&&(n||A||h)&&P);(0,Ae.A)(C,!k,!0),(0,o.vJ)(()=>{t||l({chatId:e})},[e,t]),(0,ge.A)(()=>b(!1),2e3),(0,o.vJ)(()=>{if(N&&w&&n){const e=setTimeout(()=>{b(!1)},300);return()=>clearTimeout(e)}},[w,n,N]),(0,o.vJ)(()=>{n?(g(),f(),b(!t),I.current||setTimeout(()=>{C.current?.scrollIntoView({behavior:"smooth"})},150)):(p(),v())},[n,t]);const M=(0,S.A)(()=>{c({chatId:e})});if((0,o.vJ)(()=>{r?.joinedDate&&!n&&(0,z.Fm)()-r.joinedDate<=10&&(M(),I.current=!0)},[r,n]),k||N)return(0,x.FD)("div",{className:(0,m.A)("V3RHiOJR"),children:[N&&(0,x.Y)(fe.A,{className:"xKVZv7KE"}),k&&(0,x.FD)("div",{className:(0,m.A)(h&&"eb8rX09E",A&&"XR6_qLCc"),children:[(0,x.Y)("div",{className:"tfG_BSDt",children:(0,x.Y)("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,x.Y)("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"})})}),(0,x.FD)("div",{className:"njAC8dR9",children:[(0,x.FD)("div",{className:"s7QOi22Q",children:[(0,x.Y)("span",{className:"JstcOhAN",children:u("SimilarChannels")}),(0,x.Y)(ve.A,{className:"meewH7t_",color:"translucent",onClick:M,children:(0,x.Y)(de.A,{name:"close"})})]}),(0,x.Y)("div",{ref:C,className:(0,m.A)("h4gWlNen","no-scrollbar"),children:R?.map((t,n)=>9===n?(0,x.Y)(ke,{channel:t,chatId:e,channelsCount:a-10+1,isCurrentUserPremium:s}):(0,x.Y)(Pe,{channel:t}))})]})]})]})})),Ye=new Set(["pinMessage","chatEditPhoto","chatDeletePhoto","todoCompletions","todoAppendTasks","unsupported"]),xe=new Set(["giftCode","prizeStars","suggestProfilePhoto","suggestedPostApproval"]),Te=(0,o.ph)((0,i.EK)((e,{message:t,threadId:n})=>{const o=(0,d.nTw)(e),{themes:i}=e.settings,s=(0,d.hds)(e,t.chatId),r=(0,d.Y7C)(e,t),c=s?.isForum&&n!==a.l3,{replyToMsgId:u,replyToPeerId:h}=(0,l.Q)(t)||{},m=u?(0,d.O5q)(e,h||t.chatId,u):void 0,g=!!n&&(0,d.nJv)(e,t,n),{direction:p,noHighlight:A,isResizingContainer:v,scrollTargetPosition:f}=g&&o.focusedMessage||{},C=(0,d.g29)(e),y=s?.unreadReactions?.includes(t.id),I=(0,d.trm)(e);return{sender:r,currentUserId:e.currentUserId,isCurrentUserPremium:C,isFocused:g,focusDirection:p,noFocusHighlight:A,isInsideTopic:c,replyMessage:m,isInSelectMode:(0,d.rTV)(e),patternColor:i[(0,d.SJA)(e)]?.patternColor,hasUnreadReaction:y,isResizingContainer:v,scrollTargetPosition:f,isAccountFrozen:I}})(({message:e,threadId:t,sender:n,currentUserId:a,appearanceOrder:d,isJustAdded:k,isLastInList:M,memoFirstUnreadIdRef:T,getIsMessageListReady:D,isInsideTopic:L,isFocused:B,focusDirection:E,noFocusHighlight:U,replyMessage:K,patternColor:G,isCurrentUserPremium:j,isInSelectMode:z,hasUnreadReaction:$,isResizingContainer:_,scrollTargetPosition:V,onIntersectPinnedMessage:H,observeIntersectionForBottom:W,observeIntersectionForLoading:X,observeIntersectionForPlaying:Q,isAccountFrozen:ee})=>{const{requestConfetti:te,openMediaViewer:ne,getReceipt:oe,checkGiftCode:ae,openPrizeStarsTransactionFromGiveaway:se,openPremiumModal:re,openStarsTransactionFromGift:de,openGiftInfoModalFromMessage:ge,toggleChannelRecommendations:pe,animateUnreadReaction:Ae,markMentionsRead:ve,focusMessage:fe}=(0,i.ko)(),Ce=(0,o.li)(),{id:ye,chatId:Ie}=e,Se=e.content.action,we=(0,g.iL)(ye),Ne=xe.has(Se.type),be=Ye.has(Se.type),Re=h.uH&&!be,Pe="suggestedPostSuccess"===Se.type,ke=(0,l.Q)(e),{replyToMsgId:Te,replyToPeerId:Fe}=ke||{},De=Boolean(e.areReactionsPossible&&e?.reactions?.results?.length),Le=L&&"topicCreate"===Se.type,{isTouchScreen:Be}=(0,v.Ay)();(0,I.mv)(Ce,Le?void 0:W),(0,w.A)(Ce,!Le&&M&&"channelJoined"!==Se.type),(0,C.A)(Fe||Ie,Te,K,ye),(0,R.A)({elementRef:Ce,isFocused:B,focusDirection:E,noFocusHighlight:U,isResizingContainer:_,isJustAdded:k,scrollTargetPosition:V}),(0,o._W)(()=>{e.isPinned&&H?.({viewportPinnedIdsToRemove:[e.id]})});const{isContextMenuOpen:Ee,contextMenuAnchor:Ue,handleBeforeContextMenu:Oe,handleContextMenu:Ke,handleContextMenuClose:Ge,handleContextMenuHide:Je}=(0,f.A)(Ce,Be&&z||ee,!u.Vq,h.Ni,D),je=void 0!==Ue,ze=d<=0,[$e,_e]=(0,y.A)(ze);(0,o.vJ)(()=>{ze||setTimeout(_e,d*r.zq7)},[d,_e,ze]);const{ref:Ve}=(0,N.A)({isOpen:$e,noOpenTransition:ze,noCloseTransition:!0,className:!1,ref:Ce});(0,o.vJ)(()=>{const t=Ce.current;t&&(0,p.Y)(t)&&($&&Ae({messageIds:[ye]}),e.hasUnreadMention&&ve({chatId:Ie,messageIds:[ye]}))},[$,Ie,ye,Ae,e.hasUnreadMention]),(0,o.vJ)(()=>{"giftPremium"===Se.type&&(T?.current&&ye>=T.current||we)&&te({})},[Se.type,ye,we,T]);const He=(0,b.A)(Re?G:void 0),qe=(0,S.A)(()=>{switch(Se.type){case"paymentSent":case"paymentRefunded":oe({chatId:e.chatId,messageId:e.id});break;case"chatEditPhoto":ne({chatId:e.chatId,messageId:e.id,threadId:t,origin:s.TQ.ChannelAvatar});break;case"giftCode":ae({slug:Se.slug,message:{chatId:e.chatId,messageId:e.id}});break;case"prizeStars":se({chatId:e.chatId,messageId:e.id});break;case"giftPremium":re({isGift:!0,fromUserId:n?.id,toUserId:n&&n.id===a?Ie:a,monthsAmount:Se.months});break;case"giftTon":case"giftStars":de({chatId:e.chatId,messageId:e.id});break;case"starGift":case"starGiftUnique":ge({chatId:e.chatId,messageId:e.id});break;case"channelJoined":pe({chatId:Ie});break;case"suggestedPostApproval":{const n=(0,l.Q)(e);"message"===n?.type&&n.replyToMsgId&&fe({chatId:e.chatId,threadId:t,messageId:n.replyToMsgId});break}case"suggestedPostSuccess":{const n=(0,l.Q)(e);"message"===n?.type&&n.replyToMsgId&&fe({chatId:e.chatId,threadId:t,messageId:n.replyToMsgId});break}}}),We=(0,o.Kr)(()=>{switch(Se.type){case"chatEditPhoto":if(!Se.photo)return;return(0,x.Y)(F,{action:Se,observeIntersection:X,onClick:qe});case"suggestProfilePhoto":return(0,x.Y)(ie,{message:e,action:Se,observeIntersection:X});case"prizeStars":case"giftCode":return(0,x.Y)(J,{action:Se,sender:n,observeIntersectionForLoading:X,observeIntersectionForPlaying:Q,onClick:qe});case"giftPremium":case"giftTon":case"giftStars":return(0,x.Y)(O,{action:Se,observeIntersectionForLoading:X,observeIntersectionForPlaying:Q,onClick:qe});case"starGift":return(0,x.Y)(q,{action:Se,message:e,observeIntersectionForLoading:X,observeIntersectionForPlaying:Q,onClick:qe});case"starGiftUnique":return(0,x.Y)(Z,{action:Se,message:e,observeIntersectionForLoading:X,observeIntersectionForPlaying:Q,onClick:qe});case"channelJoined":return(0,x.Y)(Me,{chatId:e.chatId});case"suggestedPostApproval":return Se.isBalanceTooLow?(0,x.Y)(le,{message:e,action:Se,onClick:qe}):Se.isRejected?(0,x.Y)(ue,{message:e,action:Se,onClick:qe}):(0,x.Y)(ce,{message:e,action:Se,onClick:qe});default:return}},[Se,e,X,n,Q]);if(!(L&&"topicCreate"===Se.type||"phoneCall"===Se.type))return(0,x.FD)("div",{ref:Ve,id:(0,c.GZ)(ye),className:(0,m.A)("ActionMessage","message-list-item",Y.A.root,be&&Y.A.singleLine,Re&&Y.A.fluidMultiline,We&&Y.A.hasFullContent,B&&!U&&"focused",je&&"has-menu-open",M&&"last-in-list"),"data-message-id":e.id,"data-is-pinned":e.isPinned||void 0,"data-has-unread-mention":e.hasUnreadMention||void 0,"data-has-unread-reaction":$||void 0,onMouseDown:e=>{(0,A.l)(e),Oe(e)},onContextMenu:Ke,children:[!Ne&&(0,x.FD)(x.FK,{children:[Re&&(0,x.Y)("div",{className:(0,m.A)(Y.A.inlineWrapper,Pe&&Y.A.hoverable),children:(0,x.Y)("span",{className:Y.A.fluidBackground,style:He,children:(0,x.Y)(P.A,{message:e,isInsideTopic:L})})}),(0,x.Y)("div",{className:(0,m.A)(Y.A.inlineWrapper,Pe&&Y.A.hoverable),children:(0,x.Y)("span",{className:Y.A.textContent,onClick:qe,children:(0,x.Y)(P.A,{message:e,isInsideTopic:L})})})]}),We,Ue&&(0,x.Y)(he.A,{isOpen:Ee,anchor:Ue,message:e,messageListType:"thread",className:Y.A.contextContainer,onClose:Ge,onCloseAnimationEnd:Je}),De&&(0,x.Y)(me.A,{isOutside:!0,message:e,threadId:t,observeIntersection:Q,isCurrentUserPremium:j,isAccountFrozen:ee})]})}))},36838:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);const i=(e,t,n=!1)=>{(0,o.vJ)(()=>{if(t)return;const o=e.current;function i(e){e.deltaX||(o.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return o.addEventListener("wheel",i,{passive:!n}),()=>{o.removeEventListener("wheel",i)}},[e,t,n])}},40558:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(84051),i=n(66644),a=n(90709),s=n(87357),r=n(95807),c=n(48894),l=n(87679),d=n(76023),u=n(17712),h=n(62587),m=n(93545),g=n(38691);var p=n(20021);const A=4*d.$,v=(0,o.ph)(({backgroundColors:e,patternIcon:t,patternSize:n=20,centerEmptiness:d=.1,ringsCount:v=3,ovalFactor:f=1.4,withLinearGradient:C,clearBottomSector:y,className:I,yPosition:S,withAdaptiveHeight:w})=>{const N=(0,o.li)(),b=(0,o.li)(),[R,P]=(0,o.Ul)({width:0,height:0}),k=(0,g.A)(),[M,Y]=(0,o.J0)(),x=t&&(0,a.Mw)(t,"preview"),T=(0,h.A)(x);(0,o.vJ)(()=>{T&&(0,l.NN)(T).then(Y)},[T]);const F=(0,o.Kr)(()=>{const e=[];for(let t=1;t<=v;t++){const n=Math.floor(8*(1+.5*(t-1))),o=t/v,i=d+(.42-d)*o,a=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+a;if(y&&s>.45*Math.PI&&s<.55*Math.PI)continue;const r=i*Math.cos(s)*f,c=i*Math.sin(s),l=1.65-o+Math.random()/v;e.push({x:r,y:c,sizeFactor:l})}}return e},[d,y,f,v]);(0,m.A)(N,e=>{P({width:e.contentRect.width,height:e.contentRect.height})}),(0,o.vJ)(()=>{const e=N.current;e&&P({width:e.clientWidth,height:e.clientHeight})},[P]);const D=(0,u.A)(()=>{const t=b.current;if(!t||!M)return;const o=t.getContext("2d"),{width:i,height:a}=t;if(!i||!a)return;const s=i/2,r=w?a/2:void 0!==S?S*k:i/2;o.clearRect(0,0,i,a),F.forEach(({x:e,y:t,sizeFactor:c})=>{const l=e*Math.max(i,A*k)+s,d=t*Math.max(w?a:i,A*k)+r,u=n*k*c;o.drawImage(M,l-u/2,d-u/2,u,u)});const l=e?.[1]??e?.[0]??"#000000",d=(0,c.LS)((0,c.xp)(l))<51;o.fillStyle=(0,c.VT)(l,.5,d?.28:-.28),o.globalCompositeOperation="source-in",o.fillRect(0,0,i,a);const u=o.createRadialGradient(s,r,0,s,r,i/2);u.addColorStop(0,"rgb(255 255 255 / 0.4)"),u.addColorStop(1,"rgb(255 255 255 / 0.9)"),o.translate(s,r),o.scale(1,1/f),o.translate(-s,-r),o.globalCompositeOperation="destination-out",o.fillStyle=u;const h=a*f;o.fillRect(0,-h,i,2*h)});return(0,o.vJ)(()=>{D()},[M,F,S,f]),(0,o.Nf)(()=>{const{width:e,height:t}=R(),n=b.current;e&&t&&n&&(0,i.RK)(()=>{n.width=e*k,n.height=t*k,D()})},[R,k]),(0,p.Y)("div",{ref:N,className:(0,s.A)("Af3tYFMg",C&&Boolean(e?.length)&&"NorYkjxC",I),style:(0,r.A)(e&&`--_bg-light: ${e[0]}`,e&&`--_bg-dark: ${e[1]??e[0]}`,void 0!==S&&`--_y-shift: ${S}px`),children:(0,p.Y)("canvas",{ref:b,className:(0,s.A)("GbpiDSS_",M&&"Y5FyX1oo"),"aria-hidden":"true"})})})},41512:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(43503);function i(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=o.A.get();return t.top<=n&&t.top+t.height>=0}},42211:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(61433),a=n(31481),s=n(66644),r=n(81954),c=n(76023);const l=500,d=a.nxZ,u=1.25*c.$,h=.5*c.$;function m({elementRef:e,isFocused:t,focusDirection:n,noFocusHighlight:a,isResizingContainer:c,isJustAdded:m,isQuote:g,scrollTargetPosition:p}){const A=(0,o.li)(!m);(0,o.Nf)(()=>{const o=A.current;if(A.current=!1,t&&e.current){const t=e.current.closest(".MessageList");if(!t)return;const m=a,A=p||(m?"end":"centerOrTop"),v=()=>{const o=void 0!==n?m?l:d:void 0,a=(0,r.Ay)({container:t,element:e.current,position:A,margin:m?h:u,maxDistance:o,forceDirection:n,forceNormalContainerHeight:c,shouldReturnMutationFn:!0});if(g){const t=e.current.querySelector(".is-quote");t&&(0,s.RK)(()=>{(0,i.YM)(t,"animate")})}return a};o?(0,s.gm)(v):(0,s.YS)(()=>{(0,s.RK)(v())})}},[e,t,n,a,c,g,p])}},43581:(e,t,n)=>{n.d(t,{A:()=>J});var o=n(84051),i=n(13439),a=n(90709),s=n(91048),r=n(87357),c=n(60343),l=n(15283),d=n(17712),u=n(59030),h=n(14242),m=n(76023),g=n(63527),p=n(10722),A=n(82117),v=n(39351),f=n(29886),C=n(34201),y=n(68292),I=n(26875),S=n(96454),w=n(58443),N=n(5912),b=n(4438),R=n(9267),P=n(93879),k=n(20021);const M=1.5*m.$,Y=6.5*m.$,x=S.pz||S.Ni?2:5,T=S.pz||S.Ni?2:3,F=(0,o.ph)((0,i.EK)((e,{containerId:t})=>{const{activeReactions:n}=(0,s.nTw)(e),o=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:o}})(({containerId:e,reaction:t,className:n,size:s=M,effectSize:c=Y,activeReactions:l,localAmount:u,withEffects:h,observeIntersection:m})=>{const{stopActiveReaction:g}=(0,i.ko)(),p=(0,o.li)(),v=(0,o.li)(),[f,y]=(0,o.J0)([]),I=(0,N.Vz)(p,m),S=(0,o.Kr)(()=>l?.find(e=>(0,a.a0)(e,t)),[l,t]),F=Boolean(h&&S),D=f.length<x;(0,A.A)(([e])=>{F?!u||u<=(e||0)||D&&y(e=>[...e,Date.now()]):y([])},[u,D,F]);const{shouldRender:L}=(0,C.A)({ref:v,noMountTransition:!0,isOpen:F,className:"slow",withShouldRender:!0}),B=(0,d.A)(()=>{const n=f.slice(1);y(n),n.length||g({containerId:e,reaction:t})}),E=(0,r.A)(P.A.root,L&&P.A.animating,n);return(0,k.FD)("div",{className:E,ref:p,teactFastList:!0,children:[(0,k.Y)(R.A,{type:"gold",size:"adaptive",style:`width: ${s}px; height: ${s}px`},"icon"),L&&f.map(e=>(0,k.Y)(b.A,{ref:v,className:P.A.effect,size:c,tgsUrl:w.w.StarReactionEffect,play:I,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:T,onEnded:B},e))]})}));var D=n(11241),L=n(85118),B=n(64493),E=n(69988);const U=1.25*m.$;function O(e){return e.stars}const K=(0,o.ph)(({reaction:e,containerId:t,isOwnMessage:n,recentReactors:s,className:c,chosenClassName:l,chatId:u,messageId:m,isOutside:S,observeIntersection:w,onClick:N,onPaidClick:b})=>{const{openStarsBalanceModal:R,resetLocalPaidReactions:P,openPaidReactionModal:M,requestWave:Y}=(0,i.ko)(),x=(0,o.li)(),T=(0,o.li)(),K=(0,o.li)(),G=(0,v.A)(),J="paid"===e.reaction.type,j=(0,g.A)(O),z=Boolean(j),$=(0,d.A)((e=1)=>{b?.(e)}),_=(0,d.A)(t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void $();N?.(e.reaction)}),{isContextMenuOpen:V,handleBeforeContextMenu:H,handleContextMenu:q,handleContextMenuClose:W,handleContextMenuHide:X}=(0,p.A)(x,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,o.vJ)(()=>{V&&(M({chatId:u,messageId:m}),W(),X())},[W,X,V,u,m]),(0,A.A)(([t])=>{const n=e.localAmount,o=x.current;if(!n||!o||n===t?.localAmount)return;if(z&&n>j.balance.amount)return R({originReaction:{chatId:u,messageId:m,amount:n}}),void P({chatId:u,messageId:m});if(e.localAmount){const{left:e,top:t}=o.getBoundingClientRect(),n=e+o.offsetWidth/2,i=t+o.offsetHeight/2;Y({startX:n,startY:i})}const i=Number(getComputedStyle(o).scale)||1;K.current?.cancel(),K.current=o.animate([{scale:i},{scale:Math.min(1.2*i,3),offset:.2},{scale:1}],{duration:500*i,easing:"ease-out"})},[e,j?.balance,z,u,m]);const Q=(0,f.A)(e.localAmount),{shouldRender:Z}=(0,C.A)({isOpen:Boolean(e.localAmount),ref:T,className:"slow",withShouldRender:!0});return(0,k.FD)(B.A,{className:(0,r.A)(E.A.root,n&&E.A.own,J&&E.A.paid,S&&E.A.outside,(0,a.eu)(e)&&E.A.chosen,(0,a.eu)(e)&&l,c),size:"tiny",ref:x,onMouseDown:H,onContextMenu:q,onClick:_,children:["paid"===e.reaction.type?(0,k.FD)(k.FK,{children:[(0,k.Y)(L.A,{preset:"button"}),(0,k.Y)(F,{className:E.A.animatedEmoji,containerId:t,reaction:e.reaction,size:U,localAmount:e.localAmount,observeIntersection:w}),Z&&(0,k.Y)(y.A,{ref:T,text:`+${(0,h.Vw)(G,e.localAmount||Q)}`,className:E.A.paidCounter})]}):(0,k.Y)(D.A,{className:E.A.animatedEmoji,containerId:t,reaction:e.reaction,size:U,observeIntersection:w}),s?.length?(0,k.Y)(I.A,{size:"mini",peers:s}):(0,k.Y)(y.A,{text:(0,h.Vw)(G,e.count+(e.localAmount||0)),className:E.A.counter})]})});var G=n(92915);const J=(0,o.ph)(({message:e,threadId:t,isOutside:n,maxWidth:h,metaChildren:m,observeIntersection:g,noRecentReactors:p,isCurrentUserPremium:A,tags:v,isAccountFrozen:f})=>{const{toggleReaction:C,addLocalPaidReaction:y,updateMiddleSearch:I,performMiddleSearch:S,openPremiumModal:w,resetLocalPaidReactions:N,showNotification:b,openFrozenAccountModal:R}=(0,i.ko)(),P=(0,u.A)(),{results:M,areTags:Y,recentReactions:x}=e.reactions,T=Boolean(e.areReactionsPossible&&e.reactions),F=(0,o.Kr)(()=>M.reduce((e,t)=>e+t.count,0),[M]),D=(0,o.Kr)(()=>{const e=(0,i.mS)();return x?.reduce((t,n)=>{const{reaction:o,peerId:i}=n,r=(0,a.Jj)(o),c=(0,s.PVB)(e,i);if(!c)return t;const l=t[r]||[];return l.push(c),t[r]=l,t},{})},[x]),L=(0,o.Kr)(()=>{const t=(0,c.bj)(e);return M.map(e=>{const n=(0,a.Jj)(e.reaction),o=D?.[n],i=F>3||p,s=Y?v?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:i?void 0:o,isChosen:(0,a.eu)(e),tag:s}})},[e,p,D,M,Y,v,F]),B=(0,d.A)(n=>{if(!f)return Y?A?(I({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void S({chatId:e.chatId,threadId:t})):void w({initialSection:"saved_tags"}):void C({chatId:e.chatId,messageId:e.id,reaction:n});R()}),E=(0,o.Kr)(()=>M.find(e=>"paid"===e.reaction.type)?.localAmount||0,[M]),U=(0,d.A)(t=>{f?R():y({chatId:e.chatId,messageId:e.id,count:t})});(0,o.vJ)(()=>{E&&b({localId:(0,c.bj)(e),title:P("StarsSentTitle"),message:P("StarsSentText",E),actionText:P("StarsSentUndo"),cacheBreaker:E.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})},[P,e,E]);const O=(0,d.A)(t=>{f?R():C({chatId:e.chatId,messageId:e.id,reaction:t})});return(0,l.A)(()=>()=>{N({chatId:e.chatId,messageId:e.id})}),(0,k.FD)("div",{className:(0,r.A)("Reactions",n&&"is-outside",T&&"is-service"),style:h?`max-width: ${h}px`:void 0,dir:P.isRtl?"rtl":"ltr",children:[L.map(({reaction:t,recentReactors:o,messageKey:i,reactionKey:a,isChosen:s,tag:r})=>Y?(0,k.Y)(G.A,{className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,isChosen:s,reaction:t.reaction,tag:r,withContextMenu:A,onClick:B,onRemove:O,observeIntersection:g},a):(0,k.Y)(K,{chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,recentReactors:o,isOutside:n,reaction:t,onClick:B,onPaidClick:U,observeIntersection:g},a)),m]})})},45470:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(84051),i=n(32587),a=n(66644),s=n(96454),r=n(35297);const c=2,l=2;function d(e,t=!1,n,d=c,u,h){const m=(0,o.li)(),g=(0,o.li)();return(0,r.A)(()=>{t||(g.current=!1)},[e,t]),(0,o.vJ)(()=>{const o=m.current;if(!e||!o||t||g.current)return;g.current=!0;const r=new Image,c=()=>{const e=u||r.width,t=h||r.height,n=o.getContext("2d",{alpha:!1});(0,a.RK)(()=>{o.width=e,o.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(r,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,i.A)(n,0,0,e,t,d,l)})};r.onload=()=>{n?(0,a.YS)(c):c()},r.src=e},[e,t,h,u,d,n]),m}},45780:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(96454),i=n(87357),a=n(39351),s=n(17712),r=n(42452);var c=n(20021);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:u,inactive:h,ripple:m,className:g,titleClassName:p,subtitleClassName:A,style:v,onClick:f,onDisabledClick:C})=>{const y=(0,a.A)(),I=!h&&!u,S=(0,s.A)(()=>{h||(u?C?.():f?.())});return(0,c.FD)("div",{className:(0,i.A)("OHkx_W75",t&&"neXqB2_A",u&&"tvZeVJPh",I&&"VUSwo4t5",n&&"dMT9byM6",g),onClick:S,style:v,dir:y.isRtl?"rtl":void 0,role:I?"button":void 0,tabIndex:I?0:void 0,children:[!u&&!h&&m&&(0,c.Y)(r.A,{}),Boolean(l)&&(0,c.Y)("div",{className:(0,i.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm"),children:l}),Boolean(n)&&(0,c.Y)("div",{className:"dnAaRPCo",children:n}),(0,c.Y)("div",{className:(0,i.A)("JSSC0N8V",p),children:e}),Boolean(t)&&(0,c.Y)("div",{className:(0,i.A)("OYmzCSp2",A),children:t}),!l&&o.pz&&(0,c.Y)("div",{className:"P53DrbWA"})]})}},48196:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(31481),a=n(28470),s=n(20021);const r=new Map;class c{referenceCount=0;constructor(e){this.color=e,this.filterId=`fluid-background-filter-${e.slice(1)}`,(0,a.z)((0,s.FD)("filter",{"color-interpolation-filters":"sRGB",xmlns:i.jNX,children:[(0,s.Y)("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),(0,s.Y)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15",result:"goo"}),(0,s.Y)("feComposite",{in:"SourceAlpha",in2:"goo",operator:"over",result:"outline"}),(0,s.Y)("feFlood",{"flood-color":e,result:"color"}),(0,s.Y)("feComposite",{in:"color",in2:"outline",operator:"in"})]}),this.filterId)}getFilterId(){return this.referenceCount+=1,this.filterId}removeReference(){this.referenceCount-=1,0===this.referenceCount&&(0,a.e)(this.filterId)}isUsed(){return this.referenceCount>0}}function l(e,t){if((0,o.vJ)(()=>{if(e)return()=>{const t=r.get(e);t&&(t.removeReference(),t.isUsed()||r.delete(t.color))}},[e]),!e)return;if(r.has(e))return d(r.get(e).getFilterId(),t);const n=new c(e);return r.set(e,n),d(n.getFilterId(),t)}function d(e,t){return t?`url(#${e})`:`filter: url(#${e});`}},49086:(e,t,n)=>{n.d(t,{C:()=>m,V:()=>h});var o=n(13439),i=n(23174),a=n(90709),s=n(3544),r=n(60343),c=n(43044),l=n(58849),d=n(4961),u=n(18501);function h({message:e,highlight:t,emojiSize:n,asPreview:o,truncateLength:i,isProtected:s,forcePlayback:d,shouldRenderAsHtml:h,isForMediaViewer:m,threadId:g,maxTimestamp:p}){const{text:A,entities:v}=e.content.text||{};if(!A){const t=(0,a.BN)((0,c.Yw)(),e)?.text;return t?[(0,l.A)(t,i)]:void 0}const f=(0,r.bj)(e);return(0,u.fd)({text:(0,l.A)(A,i),entities:v,highlight:t,emojiSize:n,shouldRenderAsHtml:h,containerId:`${m?"mv-":""}${f}`,asPreview:o,isProtected:s,forcePlayback:d,messageId:"id"in e?e.id:void 0,chatId:e.chatId,threadId:g,maxTimestamp:p})}function m(e,t,n=!1,r,c=s.vs){const{entities:u}=t.content.text||{},m=(0,o.mS)(),g=(0,a.ni)(m,t),p=u?.some(e=>e.type===i.C7.Spoiler),A=u?.some(e=>e.type===i.C7.CustomEmoji);if(!p&&!A){const o=(0,l.A)((0,s.dS)(e,t,g,n),c);return r?(0,d.A)(o,["emoji","highlight"],{highlight:r}):(0,d.A)(o)}const v=!n&&(0,s.Su)(t),f=v?`${v} `:"",C=h({message:t,highlight:r,asPreview:!0,truncateLength:c}),y=(0,s.oL)(e,t,g,C);return[...(0,d.A)(f),...Array.isArray(y)?y:[y]].filter(Boolean)}},49746:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(13439);function a(e,t,n,a,s){const{loadMessage:r}=(0,i.ko)();(0,o.vJ)(()=>{s||t&&!n&&r({chatId:e,messageId:t,replyOriginForId:a})},[s,e,n,t,a])}},54960:(e,t,n)=>{n.d(t,{A:()=>Y});var o=n(84051),i=n(13439),a=n(31481),s=n(66644),r=n(90709),c=n(70636),l=n(91048),d=n(87357),u=n(97822),h=n(87894),m=n(79824),g=n(96374),p=n(17712),A=n(59030),v=n(19806),f=n(46222),C=n(40664),y=n(52745),I=n(24956),S=n(21849),w=n(34431),N=n(18276),b=n(10187),R=n(45780),P=n(31722),k=n(20021);const M="PeerPickerItem",Y=(0,o.ph)(({className:e,categories:t,itemIds:n,categoryPlaceholderKey:Y,filterValue:x,filterPlaceholder:T,notFoundText:F,searchInputId:D,itemClassName:L,isLoading:B,noScrollRestore:E,isSearchable:U,lockedUnselectedSubtitle:O,forceShowSelf:K,isViewOnly:G,itemInputType:J,withStatus:j,withPeerTypes:z,withPeerUsernames:$,withDefaultPadding:_,onFilterChange:V,onDisabledClick:H,onLoadMore:q,...W})=>{const X=(0,A.A)(),Q=W.allowMultiple,Z=Q?W.lockedSelectedIds:void 0,ee=Q?W.lockedUnselectedIds:void 0,te=(0,o.Kr)(()=>Q?W.selectedCategories:W.selectedCategory?[W.selectedCategory]:m.p,[Q,W.selectedCategory,W.selectedCategories]),ne=(0,o.Kr)(()=>Q?W.selectedIds:W.selectedId?[W.selectedId]:m.p,[Q,W.selectedId,W.selectedIds]),oe=(0,o.li)(),ie=ne.length>10;(0,o.vJ)(()=>{U&&(0,s.YS)(()=>{(0,u.A)(oe.current)})},[U]);const ae=(0,o.Kr)(()=>new Set(Z),[Z]),se=(0,o.Kr)(()=>new Set(ee),[ee]),re=(0,o.Kr)(()=>ne.filter(e=>!ae.has(e)),[ae,ne]),ce=(0,o.Kr)(()=>t?(0,h.dU)(t,"type"):{},[t]),le=(0,o.Kr)(()=>{if(x)return n;const e=[],t=[],o=[];return n.forEach(n=>{ae.has(n)?e.push(n):se.has(n)?o.push(n):t.push(n)}),e.concat(t,o)},[x,n,ae,se]),de=(0,p.A)(e=>{if(ae.has(e))H?.(e,!0);else if(se.has(e))H?.(e,!1);else{if(Q&&ce[e]){const t=ce[e].type,n=te?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void W.onSelectedCategoriesChange?.(n)}if(Q){const t=ne.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void W.onSelectedIdsChange?.(t)}ce[e]?W.onSelectedCategoryChange?.(ce[e].type):W.onSelectedIdChange?.(e)}}),ue=(0,p.A)(e=>{const{value:t}=e.currentTarget;V?.(t)}),[he,me]=(0,g.A)(q,le,Boolean(x)),ge=(0,o.hb)((e,t)=>{const n=(0,i.mS)(),o=t?ce[e]:void 0,s=t?void 0:(0,l.PVB)(n,e),u=s||o;if(!u)return a.Oig?(0,k.FD)("div",{children:["No peer or category with ID",e]},e):void 0;const h=s&&!(0,c.vj)(s)?s.isSelf&&!K:void 0,m=se.has(e),g=ae.has(e),p=m||g,A=o?te?.includes(o.type):ne.includes(e),[f,C]=function(){if(m)return[O];if(s){if($){const e=(0,r.Kl)(s);if(e)return[`@${e}`]}if(j){if((0,c.vj)(s))return[(0,r.sT)(X,s)];const e=(0,l.K0y)(n,s.id);return[(0,r.CD)(X,s,e),(0,d.A)((0,r.PF)(s,e,!0)&&P.A.onlineStatus)]}if(z){const e=(0,c.cy)(s);return e&&[X(e)]}}}()||[];return(0,k.Y)(R.A,{className:(0,d.A)(M,L),title:(0,k.Y)(w.A,{peer:u}),avatarElement:(0,k.Y)(S.A,{peer:s||o,isSavedMessages:h,size:"medium"}),subtitle:f,subtitleClassName:C,disabled:p,inactive:G,ripple:!0,inputElement:p?(0,k.Y)(N.A,{name:"lock-badge"}):"radio"===J?(0,k.Y)(I.A,{checked:A,disabled:p,onlyInput:!0}):"checkbox"===J?(0,k.Y)(v.A,{checked:A,disabled:p,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>de(e),onDisabledClick:H&&(()=>H(e,g))},e)},[ce,K,G,L,J,X,ae,se,O,H,te,ne,z,j,$]),pe=(0,o.Kr)(()=>{if(t?.length)return(0,k.FD)("div",{children:[Y&&(0,k.Y)("div",{className:P.A.pickerCategoryTitle,children:X(Y)}),t?.map(e=>ge(e.type,!0)),(0,k.Y)("div",{className:P.A.pickerCategoryTitle,children:X("FilterChats")})]},"categories")},[t,Y,X,ge]);return(0,k.FD)("div",{className:(0,d.A)(P.A.container,e),children:[U&&(0,k.FD)("div",{className:(0,d.A)(P.A.header,"custom-scroll"),dir:X.isRtl?"rtl":void 0,children:[te?.map(e=>(0,k.Y)(b.A,{className:P.A.peerChip,customPeer:ce[e],onClick:de,clickArg:e,canClose:!0})),Z?.map((e,t)=>(0,k.Y)(b.A,{className:P.A.peerChip,peerId:e,isMinimized:ie&&t<ne.length-5,forceShowSelf:K,onClick:de,clickArg:e})),re.map((e,t)=>(0,k.Y)(b.A,{className:P.A.peerChip,peerId:e,isMinimized:ie&&t+(Z?.length||0)<ne.length-5,canClose:!0,onClick:de,clickArg:e})),(0,k.Y)(C.A,{id:D,ref:oe,value:x,onChange:ue,placeholder:T||X("SelectChat")})]}),he?.length?(0,k.Y)(f.A,{className:(0,d.A)(P.A.pickerList,_&&P.A.padded,"custom-scroll"),items:he,itemSelector:`.${M}`,beforeChildren:pe,onLoadMore:me,noScrollRestore:E,children:he.map(e=>ge(e))}):B||!he||he.length?(0,k.Y)(y.A,{}):(0,k.Y)("p",{className:P.A.noResults,children:F||"Sorry, nothing found."})]})})},56133:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(16581);function i(e,t,n,i=[]){return(0,o.A)(e=>{e()},i,e,t,n)}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(13439),i=n(66644),a=n(91048),s=n(19822);const r=300,c=new Map;function l(e,t,n=r){(0,a.PKK)((0,o.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:u,scrollWidth:h,dataset:{scrollId:m}}=e;let g=t-d;if(g<0){const e=-d*(l?-1:1);g=Math.max(g,e)}else if(g>0){const e=h-(d+u);g=Math.min(g,e)}if(0===g)return Promise.resolve();m&&c.has(m)&&c.get(m)();const p=d+g;return new Promise(t=>{(0,i.RK)(()=>{if(0===n)return e.scrollLeft=p,void t();let o=!1;const a=Math.random().toString();e.dataset.scrollId=a,c.set(a,()=>{o=!0}),e.style.scrollSnapType="none";const r=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,c.delete(a)}(0,s.i0)(()=>{if(o)return l(),!1;const i=Math.min((Date.now()-r)/n,1),a=g*(1-function(e){return 1-(1-e)**3.5}(i));return e.scrollLeft=Math.round(p-a),i>=1&&(l(),t()),i<1},i.RK)})})}},58968:(e,t,n)=>{n.d(t,{I5:()=>s,LS:()=>a,V2:()=>i,lw:()=>o});const o={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},i=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],a=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},64489:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(87357),a=n(95807),s=n(37661),r=n(17712),c=n(83057),l=n(4438);const d="lM2usrZU";var u=n(20021);const h=new Set,m=(0,o.ph)(function(e){const{previewUrl:t,thumbDataUri:n,className:o,...m}=e,[g,,p]=(0,s.A)(Boolean(n)),A=(0,c.A)(g),[v,f,C]=(0,s.A)(h.has(t)),y=(0,c.A)(v),[I,S]=(0,s.A)(!1),w=(0,r.A)(()=>{f(),h.add(t)}),N=(0,r.A)(()=>{p(),C(),setTimeout(S,300)}),{size:b}=e;return(0,u.FD)("div",{className:(0,i.A)(o,"xCi2f0YH"),style:(0,a.A)(void 0!==b&&`width: ${b}px; height: ${b}px;`),children:[n&&!I&&(0,u.Y)("img",{src:n,className:(0,i.A)(d,A),draggable:!1}),t&&!I&&(0,u.Y)("img",{src:t,className:(0,i.A)(d,y),draggable:!1,onLoad:w}),(0,u.Y)(l.A,{...m,onLoad:N})]})})},65632:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(84051),i=n(13439),a=n(31481),s=n(74824),r=n(87679);const c=(e,t)=>{const{setThemeSettings:n}=(0,i.ko)(),[c,l]=(0,o.J0)(t);return(0,o.vJ)(()=>{t&&(t.startsWith("#")?l(t):s.fetch(a.nfi,e,s.Type.Blob).then(e=>{const t=URL.createObjectURL(e);(0,r.NN)(t).then(()=>{l(`url(${t})`)})}).catch(()=>{n({theme:e,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?a.MkD:a.be8})}))},[t,e]),t?c:void 0}},66833:(e,t,n)=>{function o(e){return"starGift"===e.type?e.sticker:e.attributes.find(e=>"model"===e.type)?.sticker}function i(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function a(e){if("starGiftUnique"===e.type)return function(e){const t=e.find(e=>"model"===e.type),n=e.find(e=>"backdrop"===e.type),o=e.find(e=>"pattern"===e.type);return{model:t,originalDetails:e.find(e=>"originalDetails"===e.type),pattern:o,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>i,uc:()=>a,yQ:()=>o})},68292:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(84051),i=n(13439),a=n(91048),s=n(87357),r=n(37836),c=n(30857),l=n(39351),d=n(73767);var u=n(20021);let h=0;const m=(0,r.Fe)(()=>{h=0}),g=(0,o.ph)(({text:e,className:t,isDisabled:n,ref:r})=>{const{isRtl:g}=(0,l.A)(),p=(0,d.A)(e),A=(0,c.A)(),v=!(!(!n&&(0,a.PKK)((0,i.mS)())&&void 0!==p&&p!==e)||h>=10||(0===h&&m(),h++,0)),f=(0,o.Kr)(()=>v?function(e,t){const n=[],o=e.length,i=t?.length??0;for(let a=0;a<=o;a++){const s=o-a,r=i-a;t&&r>=0&&e[s]!==t[r]?n.unshift((0,u.FD)("div",{className:"IYTzbS8o",children:[(0,u.Y)("div",{className:"Jw1oQFdk",children:e[s]??""}),(0,u.Y)("div",{className:"TZfEz3sc",children:t[r]}),(0,u.Y)("div",{className:"Y9ied8_t",children:e[s]??""})]})):n.unshift((0,u.Y)("span",{children:e[s]??""}))}return n}(e,p):e,[v,p,e]);return(0,o.vJ)(()=>{if(!v)return;const e=window.setTimeout(()=>{A()},200);return()=>{window.clearTimeout(e)}},[v,e]),(0,u.Y)("span",{ref:r,className:(0,s.A)(t,!n&&"tgKbsVmz"),dir:g?"rtl":void 0,children:f})})},69988:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}},73104:(e,t,n)=>{let o,i;n.d(t,{M6:()=>c,v5:()=>l});const a={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!o||!o.contains(e.target)||o.scrollTop<=0&&t<=0||o.scrollTop>=o.scrollHeight-o.offsetHeight&&t>=0){if(i&&e.target.closest(i))return;e.preventDefault()}};function r(e){a[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const o=t.getAttribute("type");return!!o&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(o.toLowerCase())>-1}(e.target)&&e.preventDefault()}function c(e,t){return o=e,i=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=r,l}function l(){o=void 0,i=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},74984:(e,t,n)=>{n.d(t,{Jm:()=>l,Rh:()=>s,g5:()=>c,ic:()=>r});var o=n(84051),i=n(49763),a=n(30857);function s(e){const t=(0,a.A)();return(0,o.vJ)(()=>(0,i.Yw)(e,t),[e,t]),(0,i.YA)(e)}function r(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.P1)(e),[e]),(0,i.PZ)()}function c(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.BU)(e),[e]),(0,i.jn)()}function l(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.dk)(e),[e]),(0,i.Xq)()}},76283:(e,t,n)=>{n.d(t,{A:()=>M});var o=n(84051),i=n(13439),a=n(90709),s=n(87357),r=n(17712),c=n(59030),l=n(18276),d=n(64493),u=n(96530),h=n(58443),m=n(76023),g=n(10722),p=n(4438),A=n(87412);const v="uGUjDZKl",f="M62HGuIV",C="WMpEr5XQ";var y=n(20021);const I=2*m.$,S=(0,o.ph)(({reaction:e,chosen:t,isReady:n,noAppearAnimation:i,style:a,isLocked:c,onToggleReaction:d,onSendPaidReaction:u,onShowPaidReactionModal:m})=>{const S=(0,o.li)(),w=(0,r.A)(()=>{"paid"!==e.type?d(e):u?.()}),{isContextMenuOpen:N,handleBeforeContextMenu:b,handleContextMenu:R,handleContextMenuClose:P,handleContextMenuHide:k}=(0,g.A)(S,"paid"!==e.type,void 0,void 0,void 0,!0);return(0,o.vJ)(()=>{N&&(m?.(),P(),k())},[P,m,k,N]),(0,y.FD)("div",{className:(0,s.A)(v,"oc1hpMwv",t&&"paid"!==e.type&&f,!i&&n&&"sx6RTuAU",i&&"kqcWe4tf"),ref:S,style:a,onClick:w,onMouseDown:b,onContextMenu:R,children:["paid"===e.type?(0,y.Y)(p.A,{tgsUrl:h.w.StarReaction,size:I,noLoop:!1}):(0,y.Y)(A.A,{documentId:e.documentId,size:I}),c&&(0,y.Y)(l.A,{className:C,name:"lock-badge"})]})});var w=n(37661),N=n(62587),b=n(18104);const R=2*m.$,P=(0,o.ph)(({reaction:e,isReady:t,noAppearAnimation:n,chosen:o,isLocked:i,onToggleReaction:a})=>{const r=(0,N.A)(`sticker${e.appearAnimation?.id}`,!t||n),c=(0,N.A)(`document${e.selectAnimation?.id}`,!t||n),d=(0,N.A)(`document${e.staticIcon?.id}`,!n),[u,h]=(0,w.A)(),[m,,g]=(0,w.A)(!0),[p,A,I]=(0,w.A)();return(0,y.FD)("div",{className:(0,s.A)(v,o&&f),onClick:function(){a(e.reaction)},onMouseEnter:t&&!m?A:void 0,children:[n&&(0,y.Y)("img",{className:"MZ2tH980",src:d,alt:e.reaction.emoticon,draggable:!1}),!u&&!n&&(0,y.Y)(b.A,{tgsUrl:r,play:m,noLoop:!0,size:R,onEnded:g,forceAlways:!0},e.appearAnimation?.id),!m&&!n&&(0,y.Y)(b.A,{tgsUrl:c,play:p,noLoop:!0,size:R,onLoad:h,onEnded:I,forceAlways:!0},e.selectAnimation?.id),i&&(0,y.Y)(l.A,{className:C,name:"lock-badge"})]})}),k=(0,s.x)("ReactionSelector"),M=(0,o.ph)(({allAvailableReactions:e,topReactions:t,defaultTagReactions:n,enabledReactions:h,currentReactions:m,reactionsLimit:g,isPrivate:p,isReady:A,canPlayAnimatedEmojis:v,className:f,isCurrentUserPremium:C,isInSavedMessages:I,isInStoryViewer:w,isForEffects:N,effectReactions:b,isWithPaidReaction:R,onClose:M,onToggleReaction:Y,onSendPaidReaction:x,onShowPaidReactionModal:T,onShowMore:F})=>{const{openPremiumModal:D}=(0,i.ko)(),L=(0,o.li)(),B=(0,c.A)(),E=I&&!C&&!w,U=Boolean(g&&m&&m.length>=g),O=(0,o.Kr)(()=>{const o=U?m?.map(e=>e.reaction):N?b:I?n:"some"===h?.type?h.allowed:e?.map(e=>e.reaction),i=o?.map(t=>{const n="custom"===t.type,o=e?.find(e=>(0,a.a0)(e.reaction,t));return N?o:(n||o)&&!o?.isInactive&&(p||U||h&&(0,a.A3)(t,h))?n?t:o:void 0}).filter(Boolean)||[],s=(0,a.fu)(i,t);return R&&s.unshift({type:"paid"}),s},[e,m,n,h,I,p,t,N,b,U,R]),K=(0,o.Kr)(()=>8===O.length?O:O.slice(0,7),[O]),G=K.length<O.length,J=(0,o.Kr)(()=>{const e=m?.filter(({chosenOrder:e})=>void 0!==e)||[];return new Set(e.map(({reaction:e})=>K.findIndex(t=>t&&(0,a.a0)("reaction"in t?t.reaction:t,e))))},[m,K]),j=(0,r.A)(()=>{const e=L.current?.getBoundingClientRect()||{x:0,y:0};F({x:e.x,y:e.y})}),z=(0,r.A)(()=>{M?.(),D({initialSection:"saved_tags"})}),$=(0,o.Kr)(()=>{if(I){if(!C){const e=B("lng_subscribe_tag_about").split("{link}");return(0,y.FD)("span",{children:[e[0],(0,y.Y)(u.A,{isPrimary:!0,onClick:z,children:B("lng_subscribe_tag_link")}),e[1]]})}return B("SavedTagReactionsHint2")}return w?B("StoryReactionsHint"):N?B("AddEffectMessageHint"):void 0},[C,I,w,B,N]);if(K.length)return(0,y.FD)("div",{className:(0,s.A)(k("&"),f),ref:L,children:[(0,y.Y)("div",{className:k("bubble-small",B.isRtl&&"isRtl")}),(0,y.FD)("div",{className:k("items-wrapper"),children:[(0,y.Y)("div",{className:k("bubble-big",B.isRtl&&"isRtl")}),(0,y.FD)("div",{className:k("items"),children:[$&&(0,y.Y)("div",{className:k("hint"),children:$}),(0,y.FD)("div",{className:k("reactions"),dir:B.isRtl?"rtl":void 0,children:[K.map((e,t)=>"reaction"in e?(0,y.Y)(P,{isReady:A,onToggleReaction:Y,reaction:e,noAppearAnimation:!v,chosen:J.has(t),isLocked:E},(0,a.Jj)(e.reaction)):(0,y.Y)(S,{isReady:A,onToggleReaction:Y,onSendPaidReaction:x,onShowPaidReactionModal:T,reaction:e,noAppearAnimation:!v,chosen:J.has(t),isLocked:E,style:`--_animation-delay: ${20*(7-t)}ms`},(0,a.Jj)(e))),G&&(0,y.Y)(d.A,{color:"translucent",className:k("show-more"),onClick:j,children:(0,y.Y)(l.A,{name:"down"})})]})]})]})]})})},79174:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(84051),i=n(66644),a=n(96454),s=n(97822);const r=300;function c(e,t,n){(0,o.vJ)(()=>{t?!a.TF&&e.current?.isConnected&&(0,i.YS)(()=>{(0,s.A)(e.current)}):(e.current?.isConnected&&e.current.blur(),n&&setTimeout(n,r))},[e,t,n])}},79577:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(23174),a=n(90709),s=n(62587),r=n(64489),c=n(20021);const l=(0,o.ph)(function(e){const{sticker:t,noLoad:n,forcePreview:o,...l}=e,d=t?.thumbnail?.dataUri,u=t&&(0,a.Mw)(t,"full"),h=(0,s.A)(t?(0,a.Mw)(t,"preview"):void 0,n&&!o,i.qZ.BlobUrl),m=(0,s.A)(u,n);return(0,c.Y)(r.A,{tgsUrl:m,previewUrl:h,thumbDataUri:d,...l})})},79582:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(13439),i=n(91048),a=n(87894);const s=3e9,r=3e8;function c(e,t=!1,n,c){const l=(0,o.mS)();return(0,a.My)(e,e=>{if(e===c)return 1/0;const o=(0,i.hds)(l,e);if(!o)return 0;let a=0;const d=(0,i.yHC)(l,e);return d&&(a+=d.date),t&&o.isVerified&&(a+=s),n&&n.includes(e)&&(a=Date.now()+r+(n.length-n.indexOf(e))),a},"desc")}},80539:(e,t,n)=>{n.d(t,{Ay:()=>c,g4:()=>l,qh:()=>s});var o=n(23174),i=n(31481),a=n(96454);const s={B:o.C7.Bold,STRONG:o.C7.Bold,I:o.C7.Italic,EM:o.C7.Italic,INS:o.C7.Underline,U:o.C7.Underline,S:o.C7.Strike,STRIKE:o.C7.Strike,DEL:o.C7.Strike,CODE:o.C7.Code,PRE:o.C7.Pre,BLOCKQUOTE:o.C7.Blockquote},r=3;function c(e,t=!1,n=!1){const c=document.createElement("div");c.innerHTML=n?e:function(e){let t=e.slice(0);return t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=t.replace(/^`{3}(.*?)[\n\r](.*?[\n\r]?)`{3}/gms,'<pre data-language="$1">$2</pre>'),t=t.replace(/^`{3}[\n\r]?(.*?)[\n\r]?`{3}/gms,"<pre>$1</pre>"),t=t.replace(/[`]{3}([^`]+)[`]{3}/g,"<pre>$1</pre>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[`]{1}([^`\n]+)[`]{1}(?![^<]*<\/(code|pre)>)/g,"<code>$2</code>"),a.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">'),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[*]{2}([^*\n]+)[*]{2}(?![^<]*<\/(code|pre)>)/g,"<b>$2</b>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[_]{2}([^_\n]+)[_]{2}(?![^<]*<\/(code|pre)>)/g,"<i>$2</i>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[~]{2}([^~\n]+)[~]{2}(?![^<]*<\/(code|pre)>)/g,"<s>$2</s>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[|]{2}([^|\n]+)[|]{2}(?![^<]*<\/(code|pre)>)/g,`<span data-entity-type="${o.C7.Spoiler}">$2</span>`),t}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${i.kNZ}+?)\\)`,"g"),(e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`)}(e):e),l(c);const d=c.innerText.trim().replace(/\u200b+/g,"");let u=-c.innerText.indexOf(d[0]),h=0;const m=[];function g(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const i=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(s[e.nodeName])return s[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===o.C7.MentionName?o.C7.MentionName:t.dataset.entityType===o.C7.Url?o.C7.Url:t.href.startsWith("mailto:")?o.C7.Email:t.href.startsWith("tel:")?o.C7.Phone:t.href!==t.textContent?o.C7.TextUrl:o.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?o.C7.CustomEmoji:void 0}(e);if(!i||!e.textContent)return{index:n,entity:void 0};const a=t.indexOf(e.textContent,n),r=a>=0?a:n,c=t.substring(0,r).length,{length:l}=t.substring(r,r+e.textContent.length);if(i===o.C7.TextUrl)return{index:r,entity:{type:i,offset:c,length:l,url:e.href}};if(i===o.C7.MentionName)return{index:r,entity:{type:i,offset:c,length:l,userId:e.dataset.userId}};if(i===o.C7.Pre)return{index:r,entity:{type:i,offset:c,length:l,language:e.dataset.language}};if(i===o.C7.CustomEmoji)return{index:r,entity:{type:i,offset:c,length:l,documentId:e.dataset.documentId}};if(i===o.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:r,entity:void 0}:{index:r,entity:{type:i,offset:c,length:l,timestamp:t}}}return{index:r,entity:{type:i,offset:c,length:l}}}(e,d,u);if(n)u=t,m.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;u+=e.textContent.length}e.hasChildNodes()&&h<=r&&(h+=1,Array.from(e.childNodes).forEach(g))}return Array.from(c.childNodes).forEach(e=>{h=1,g(e)}),{text:d,entities:m.length?m:void 0}}function l(e){e.querySelectorAll("img").forEach(e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")})}},81686:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(31481);const i=1;function a(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,o.zPk);if(!t||0===t.childElementCount)return;const a=Array.from(t.children).reduce((e,t)=>t.nodeType===i&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce((e,t)=>e.concat(Number(t.dataset.messageId)),e):t.nodeType===i&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e,[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||a.pop(),a}function s(e,t){return!(e.nodeType!==i||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},81949:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(87357);var i=n(20021);const a=({children:e,className:t,onClick:n,onMouseDown:a})=>(0,i.Y)("div",{className:(0,o.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n,onMouseDown:a,children:e})},81954:(e,t,n)=>{n.d(t,{Ay:()=>p,H$:()=>C,_v:()=>A,o8:()=>f});var o=n(84051),i=n(13439),a=n(89925),s=n(31481),r=n(66644),c=n(91048),l=n(96454),d=n(16460),u=n(19822);let h,m,g=!1;function p(e){h=e;const t=v(e);if(e.shouldReturnMutationFn)return t;(0,r.RK)(t)}function A(){g&&((0,u.vk)(),(0,r.YS)(()=>{(0,r.RK)(v(h))}))}function v(e){const{container:t,element:n,position:p,margin:A=0,maxDistance:v=s.nxZ,forceDirection:f,forceNormalContainerHeight:C}=e;let S=e.forceDuration;f!==a.CC.Static&&(0,c.PKK)((0,i.mS)())||(S=0);const{offsetHeight:w}=n,{scrollTop:N,clientHeight:b,scrollHeight:R}=t,P=(0,d.A)(n,t).top,k=C&&t.dataset.normalHeight?Number(t.dataset.normalHeight):b;let M;switch(p){case"start":M=P-A+(l.Ni?1:0);break;case"end":M=P+w+A-k;break;case"nearest":case"center":case"centerOrTop":M=w<k?P+w/2-k/2:P-A}const Y=function(e,t,n=s.nxZ,o){const{scrollTop:i}=e;if(void 0===o){const e=t-i;if(e<-n)return i+(e+n);if(e>n)return i+(e-n)}else{if(o===a.CC.Up)return t+n;if(o===a.CC.Down)return Math.max(0,t-n)}return i}(t,M,v,f);let x=M-Y;if(x<0){const e=-Y;x=Math.max(x,e)}else if(x>0){const e=R-(Y+k);x=Math.min(x,e)}const T=Math.abs(x);return()=>{if(T<1)return void(N!==Y&&(t.scrollTop=Y));const e=Y+x;if(0===S)return void(t.scrollTop=e);const n=T<=s.s8T?y:I,i=S||s.SKD+T/s.nxZ*(s.OzO-s.SKD),a=Date.now();g=!0;const c=m;m=(0,o.VK)(void 0,!0),c?.(),(0,u.S0)(()=>{const o=Math.min((Date.now()-a)/i,1),s=x*(1-n(o)),r=Math.round(e-s);return t.scrollTop=r,g=o<1&&r!==e,g||(h=void 0,m?.(),m=void 0),g},r.RK)}}function f(){return g}function C(){m(),m=void 0}function y(e){return 1-(1-e)**3.5}function I(e){return 1-(1-e)**6}},83594:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(90709),a=n(96454),s=n(87357),r=n(95807),c=n(62587),l=n(87412);const d="PZAuNVZH";var u=n(20021);const h=(0,o.ph)(({reaction:e,isLottie:t,className:n,particleSize:h,onEnded:m})=>{const g=(0,i.aL)(e.documentId,!0),p=(0,c.A)(t?void 0:g),A=(0,o.Kr)(()=>a.ol?Array.from({length:7}).map(()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(h)):[],[h]);if(p||t)return(0,u.Y)("div",{className:(0,s.A)("aInga6VW",n),style:(0,r.A)(Boolean(h)&&`--particle-size: ${h}px`),children:A.map((n,o)=>{const i=`--offset-path: path('${n}');`;return t?(0,u.Y)(l.A,{documentId:e.documentId,className:d,style:i,withSharedAnimation:!0,size:h,onAnimationEnd:0===o?m:void 0}):(0,u.Y)("img",{src:p,alt:"",className:d,style:i,draggable:!1,onAnimationEnd:0===o?m:void 0})})})})},87049:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(13439),a=n(91048),s=n(87357),r=n(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"};var l=n(20021);const d={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]],purple:[["#E367D7","#757BF6"],["#E367D7","#757BF6"]],green:[["#52D553","#4BB121"],["#52D553","#4BB121"]],orange:[["#D48F23","#BE7E15"],["#D48F23","#BE7E15"]]},u=new Set(Object.keys(d)),h=(0,o.ph)((0,i.EK)(e=>({theme:(0,a.SJA)(e)}))(({text:e,color:t,className:n,theme:o})=>{const i=`svg-${(0,r.A)()}`,a=u.has(t)?t:void 0,h="dark"===o,m=Array.isArray(t)?t:a?d[a][h?1:0]:void 0,g=m?m[0]:t,p=m?m[1]:t;return(0,l.FD)("div",{className:(0,s.A)(c.root,n),children:[(0,l.FD)("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",children:[(0,l.Y)("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${i})`}),(0,l.Y)("defs",{children:(0,l.FD)("linearGradient",{id:i,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse",children:[(0,l.Y)("stop",{"stop-color":g}),(0,l.Y)("stop",{offset:"1","stop-color":p})]})})]}),(0,l.Y)("div",{className:c.text,children:e})]})}))},92108:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(87357);var a=n(20021);const s=(0,o.ph)(({data:e,style:t,className:n,valueClassName:o,keyClassName:s})=>(0,a.Y)("div",{className:(0,i.A)("cKr8J5k_",n),style:t,children:e.map(([e,t])=>(0,a.FD)(a.FK,{children:[(0,a.Y)("div",{className:(0,i.A)("c9RLLvfs",s),children:e}),(0,a.Y)("div",{className:(0,i.A)("QEuGpzIc",o),children:t})]}))}))},92915:(e,t,n)=>{n.d(t,{A:()=>I});var o=n(84051),i=n(13439),a=n(87357),s=n(76023),r=n(10722),c=n(37661),l=n(17712),d=n(59030),u=n(11241),h=n(64493),m=n(40664),g=n(22337);var p=n(20021);const A=(0,o.ph)(({isOpen:e,title:t,subtitle:n,placeholder:i,submitText:a,maxLength:s,initialValue:r="",onClose:c,onSubmit:u})=>{const A=(0,d.A)(),[v,f]=(0,o.J0)(r),C=(0,l.A)(e=>{f(e.target.value)}),y=(0,l.A)(()=>{u(v)});return(0,p.FD)(g.A,{className:"narrow",title:t,isOpen:e,onClose:c,isSlim:!0,children:[Boolean(n)&&(0,p.Y)("div",{className:"cGrbcqD_",children:n}),(0,p.Y)(m.A,{placeholder:i,value:v,onChange:C,maxLength:s,teactExperimentControlled:!0}),(0,p.FD)("div",{className:"dialog-buttons mt-2",children:[(0,p.Y)(h.A,{className:"confirm-dialog-button",onClick:y,children:a||A("Save")}),(0,p.Y)(h.A,{className:"confirm-dialog-button",isText:!0,onClick:c,children:A("Cancel")})]})]})});var v=n(71429),f=n(24433),C=n(69988);const y=1.25*s.$,I=(0,o.ph)(({reaction:e,tag:t,containerId:n,isChosen:s,isOwnMessage:m,className:g,chosenClassName:I,withCount:S,isDisabled:w,withContextMenu:N,observeIntersection:b,onClick:R,onRemove:P})=>{const{editSavedReactionTag:k}=(0,i.ko)(),M=(0,o.li)(),Y=(0,o.li)(),x=(0,d.A)(),[T,F,D]=(0,c.A)(),{title:L,count:B}=t||{},E=Boolean(L||S&&B),U=(0,l.A)(()=>{R?.(e)}),O=(0,l.A)(()=>{P?.(e)}),K=(0,l.A)(t=>{k({reaction:e,title:t}),D()}),{isContextMenuOpen:G,contextMenuAnchor:J,handleBeforeContextMenu:j,handleContextMenu:z,handleContextMenuClose:$,handleContextMenuHide:_}=(0,r.A)(M,!N,void 0,void 0,void 0,!0),V=(0,l.A)(()=>M.current),H=(0,l.A)(()=>document.body),q=(0,l.A)(()=>Y.current),W=(0,l.A)(()=>({withPortal:!0,shouldAvoidNegativePosition:!0}));if(!S||0!==B)return(0,p.FD)(h.A,{className:(0,a.A)(C.A.root,C.A.tag,m&&C.A.own,s&&C.A.chosen,s&&I,w&&C.A.disabled,g),size:"tiny",onClick:U,onMouseDown:j,onContextMenu:z,ref:M,children:[(0,p.Y)(u.A,{className:C.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:y,observeIntersection:b}),E&&(0,p.FD)("span",{className:C.A.tagText,children:[L&&(0,p.Y)("span",{children:L}),S&&(0,p.Y)("span",{children:B})]}),(0,p.Y)("svg",{className:C.A.tail,width:"15",height:"30",viewBox:"0 0 15 30",children:(0,p.Y)("path",{className:C.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})}),N&&(0,p.Y)(A,{isOpen:T,maxLength:15,title:x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:x("SavedTagLabelTagText"),placeholder:x("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:D,onSubmit:K}),N&&J&&(0,p.FD)(v.A,{ref:Y,isOpen:G,anchor:J,getTriggerElement:V,getRootElement:H,getMenuElement:q,getLayout:W,autoClose:!0,withPortal:!0,onClose:$,onCloseAnimationEnd:_,children:[(0,p.Y)(f.A,{icon:"tag-filter",onClick:U,children:x("SavedTagFilterByTag")}),(0,p.Y)(f.A,{icon:"tag-name",onClick:F,children:x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")}),(0,p.Y)(f.A,{icon:"tag-crossed",destructive:!0,onClick:O,children:x("SavedTagRemoveTag")})]})]})})},93879:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},97822:(e,t,n)=>{function o(e){e&&e.focus({preventScroll:!0})}n.d(t,{A:()=>o})},99515:(e,t,n)=>{n.d(t,{A:()=>ee});var o=n(84051),i=n(13439),a=n(23174),s=n(31481),r=n(90709),c=n(91048),l=n(56494),d=n(87357),u=n(85982),h=n(48899),m=n(80539);const g=document.createElement("div"),p=new Set([a.C7.Bold,a.C7.Italic,a.C7.Underline,a.C7.Strike,a.C7.Spoiler,a.C7.CustomEmoji]);function A(e){const t=function(e){const t=e.cloneContents();g.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let o=e.commonAncestorContainer.parentElement;for(;o&&!o.classList.contains("text-content");){const e=o.tagName.toLowerCase(),n=o.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,o=o.parentElement}return t}(e,g.innerHTML);return g.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter(e=>p.has(e.type));return{...e,entities:t.length?t:void 0}}((0,m.Ay)(t,!1,!0))}var v=n(37661),f=n(39351),C=n(17712),y=n(59030),I=n(24531),S=n(34201),w=n(80089),N=n(80464),b=n(20021);const R=e=>{const{isOpen:t}=e,n=(0,N.A)(w.ar.Extra,"PinMessageModal",!t);return n?(0,b.Y)(n,{...e}):void 0};var P=n(94189),k=n(73104),M=n(76023),Y=n(4961),x=n(3544),T=n(96454),F=n(81686),D=n(43044),L=n(58554),B=n(49086);function E(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var U=n(43874),O=n(26875),K=n(71429),G=n(24433),J=n(60859),j=n(55158),z=n(17663);const $="C3LVl_JT",_="cd1ZZeSy",V=(0,o.ph)(function({message:e}){const t=(0,y.A)(),{editDate:n}=e,o=!n;return(0,b.Y)(G.A,{icon:"clock-edit",className:$,children:o?(0,b.Y)(j.A,{className:_}):Boolean(n)&&t("Chat.PrivateMessageEditTimestamp.Date",(0,z.U)(t,1e3*n))})});var H=n(76283),q=n(41036);const W=(0,o.ph)(function({message:e,shouldRenderShowWhen:t,canLoadReadDate:n,closeContextMenu:o}){const{openPrivacySettingsNoticeModal:a}=(0,i.ko)(),s=(0,y.A)(),{readDate:r}=e,c=n&&!r&&!t;return(0,b.Y)(G.A,{icon:"message-read",className:$,children:(0,b.Y)(q.Ay,{name:"fade",activeKey:c?1:2,className:"mg4sBQ9n",children:c?(0,b.Y)(j.A,{className:_}):(0,b.FD)(b.FK,{children:[Boolean(r)&&s("PmReadAt",(0,z.U)(s,1e3*r)),!r&&t&&(0,b.FD)("div",{children:[s("PmRead"),(0,b.Y)("span",{className:"bmxij_dk",onClick:()=>{o(),a({chatId:e.chatId,isReadDate:!0})},children:s("PmReadShowWhen")})]})]})})})}),X=(0,o.ph)(({isReactionPickerOpen:e,availableReactions:t,topReactions:n,defaultTagReactions:s,isOpen:c,message:l,poll:m,webPage:g,story:p,isPrivate:A,isCurrentUserPremium:I,enabledReactions:S,isWithPaidReaction:w,reactionsLimit:N,anchor:R,targetHref:P,canSendNow:z,canReschedule:$,canBuyPremium:_,canReply:q,canQuote:X,canEdit:Q,canAppendTodoList:Z,noReplies:ee,canPin:te,canUnpin:ne,canDelete:oe,canForward:ie,canReport:ae,canFaveSticker:se,canUnfaveSticker:re,canCopy:ce,canCopyLink:le,canSelect:de,canDownload:ue,canSaveGif:he,canRevote:me,canClosePoll:ge,canTranslate:pe,canShowOriginal:Ae,canSelectLanguage:ve,isDownloading:fe,repliesThreadInfo:Ce,canShowSeenBy:ye,canShowReactionsCount:Ie,canShowReactionList:Se,seenByRecentPeers:we,hasCustomEmoji:Ne,customEmojiSets:be,canPlayAnimatedEmojis:Re,isInSavedMessages:Pe,shouldRenderShowWhen:ke,canLoadReadDate:Me,onReply:Ye,onOpenThread:xe,onEdit:Te,onAppendTodoList:Fe,onPin:De,onUnpin:Le,onForward:Be,onDelete:Ee,onFaveSticker:Ue,onReport:Oe,onUnfaveSticker:Ke,onSelect:Ge,onSend:Je,onReschedule:je,onClose:ze,onCloseAnimationEnd:$e,onCopyLink:_e,onCopyNumber:Ve,onDownload:He,onSaveGif:qe,onCancelVote:We,onClosePoll:Xe,onShowSeenBy:Qe,onShowReactors:Ze,onToggleReaction:et,onSendPaidReaction:tt,onShowPaidReactionModal:nt,onCopyMessages:ot,onReactionPickerOpen:it,onTranslate:at,onShowOriginal:st,onSelectLanguage:rt,userFullName:ct,canGift:lt})=>{const{showNotification:dt,openStickerSet:ut,openCustomEmojiSets:ht,loadStickers:mt,openGiftModal:gt}=(0,i.ko)(),pt=(0,o.li)(),At=(0,o.li)(),vt=(0,y.A)(),ft=(0,f.A)(),Ct=!A&&!S,yt=l.areReactionsPossible,It=Se&&!Ct||yt,St="isEdited"in l&&l.isEdited,wt=l.seenByDates,Nt="giftPremium"===l.content.action?.type,bt="giftCode"===l.content.action?.type,Rt="starGift"===l.content.action?.type,Pt="starGiftUnique"===l.content.action?.type,kt=(0,h.L8)(l.chatId)&&lt&&(Nt||bt||Rt||Pt),[Mt,Yt]=(0,v.A)(),[xt,Tt,Ft]=(0,v.A)(),{isMobile:Dt}=(0,U.Ay)(),Lt=(0,o.Kr)(()=>wt?Object.keys(wt).length:0,[wt]),Bt=(0,C.A)(()=>{dt({message:vt("Share.Link.Copied")}),ze()}),Et=(0,C.A)(()=>{gt({forUserId:l.chatId}),ze()});(0,o.vJ)(()=>{c&&Mt&&!e&&ze()},[ze,c,e,Mt]),(0,o.vJ)(()=>{be?.length&&be.map(e=>mt({stickerSetInfo:{id:e.id,accessHash:e.accessHash}}))},[be,ht]);const Ut=(0,C.A)(()=>{be&&(1===be.length?ut({stickerSetInfo:{shortName:be[0].shortName}}):ht({setIds:be.map(e=>e.id)}),ze())}),Ot=function(e,t,n,o,i,s,c,l){const{webPage:d}=t||{},h=[],m=(0,r.P5)(e),g=(0,r.yl)(e)||((0,r.rU)(d)?void 0:(0,r.eY)(d)),p=(0,r.Qm)(e),A=g?(0,r.rI)(g,"full"):void 0,v=o&&g&&(A||(0,r.KG)(g))&&u.WO&&!T.Yw,f=window.getSelection();if(v&&h.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(A?L.hd(A,a.qZ.BlobUrl):g.blobUrl).then(u.qp),i?.()}}),o&&n)h.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,u.eM)(n),i?.()}});else if(o&&m){const n=Boolean(f?.anchorNode?.parentNode&&f.anchorNode.parentNode.closest(".Message .content-inner")&&""!==f.toString().replace(/(?:\r\n|\r|\n)/g,"")&&function(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,o=n?.closest(".Message.message-list-item");return(0,r.GZ)(e.id)===o?.id}(e));h.push({label:E(n),icon:"copy",handler:()=>{const o=(0,F.A)();if(o?.length&&c)c(o);else if(n)document.execCommand("copy");else{const n=(0,B.V)({message:e,shouldRenderAsHtml:!0});n&&(0,u.A)(n.join(""),(0,x.Gn)((0,D.Yw)(),e,t))}i?.()}})}return s&&h.push({label:"lng_context_copy_message_link",icon:"link",handler:s}),p&&l&&h.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{l(),i?.()}}),h}(l,(0,r.FE)({poll:m,webPage:g,story:p}),P,ce,Bt,le?_e:void 0,ot,Ve),Kt=(0,C.A)(()=>document.querySelector(".Transition_slide-active > .MessageList")),Gt=(0,C.A)(()=>document.body),Jt=(0,C.A)(()=>document.querySelector(".MessageContextMenu .bubble")),jt=(0,C.A)(()=>({extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,shouldAvoidNegativePosition:!0,menuElMinWidth:It&&Dt?19.25*M.$:void 0,withPortal:!0}));(0,o.vJ)(()=>{c?setTimeout(()=>{Tt()},200):Ft()},[c,Tt,Ft]),(0,o.vJ)(()=>(0,k.M6)(At.current,".ReactionPicker"),[c]);const zt=(0,C.A)(e=>{it(e),Yt()});return(0,b.FD)(K.A,{ref:pt,isOpen:c,anchor:R,getTriggerElement:Kt,getRootElement:Gt,getMenuElement:Jt,getLayout:jt,withMaxHeight:!0,className:(0,d.A)("MessageContextMenu","fluid",It&&"with-reactions"),withPortal:!0,onClose:ze,onCloseAnimationEnd:$e,children:[It&&(0,b.Y)(H.A,{enabledReactions:S,topReactions:n,allAvailableReactions:t,defaultTagReactions:s,currentReactions:l.reactions?.results,reactionsLimit:N,onToggleReaction:et,onSendPaidReaction:tt,onShowPaidReactionModal:nt,isWithPaidReaction:w,isPrivate:A,isReady:xt,canBuyPremium:_,isCurrentUserPremium:I,isInSavedMessages:Pe,canPlayAnimatedEmojis:Re,onShowMore:zt,onClose:ze,className:(0,d.A)(Mt&&"ReactionSelector-hidden")}),(0,b.FD)("div",{ref:At,className:(0,d.A)("MessageContextMenu_items scrollable-content custom-scroll",Mt&&"MessageContextMenu_items-hidden"),dir:ft.isRtl?"rtl":void 0,children:[kt&&(0,b.Y)(G.A,{icon:"gift",onClick:Et,children:l?.isOutgoing?vt("SendAnotherGift"):vt("Conversation.ContextMenuSendGiftTo",ct)}),z&&(0,b.Y)(G.A,{icon:"send-outline",onClick:Je,children:vt("MessageScheduleSend")}),$&&(0,b.Y)(G.A,{icon:"schedule",onClick:je,children:vt("MessageScheduleEditTime")}),q&&(0,b.Y)(G.A,{icon:"reply",onClick:Ye,children:vt(X?"lng_context_quote_and_reply":"Reply")}),!ee&&Boolean(Ce?.messagesCount)&&(0,b.Y)(G.A,{icon:"replies",onClick:xe,children:vt("Conversation.ContextViewReplies",Ce.messagesCount,"i")}),Q&&(0,b.Y)(G.A,{icon:"edit",onClick:Te,children:vt("Edit")}),Z&&(0,b.Y)(G.A,{icon:"add",onClick:Fe,children:ft("MenuButtonAppendTodoList")}),se&&(0,b.Y)(G.A,{icon:"favorite",onClick:Ue,children:vt("AddToFavorites")}),re&&(0,b.Y)(G.A,{icon:"favorite",onClick:Ke,children:vt("Stickers.RemoveFromFavorites")}),pe&&(0,b.Y)(G.A,{icon:"language",onClick:at,children:vt("TranslateMessage")}),Ae&&(0,b.Y)(G.A,{icon:"language",onClick:st,children:vt("ShowOriginalButton")}),ve&&(0,b.Y)(G.A,{icon:"web",onClick:rt,children:vt("lng_settings_change_lang")}),Ot.map(e=>(0,b.Y)(G.A,{icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0,children:vt(e.label)},e.label)),te&&(0,b.Y)(G.A,{icon:"pin",onClick:De,children:vt("DialogPin")}),ne&&(0,b.Y)(G.A,{icon:"unpin",onClick:Le,children:vt("DialogUnpin")}),he&&(0,b.Y)(G.A,{icon:"gifs",onClick:qe,children:vt("lng_context_save_gif")}),me&&(0,b.Y)(G.A,{icon:"revote",onClick:We,children:vt("lng_polls_retract")}),ge&&(0,b.Y)(G.A,{icon:"stop",onClick:Xe,children:vt("lng_polls_stop")}),ue&&(0,b.Y)(G.A,{icon:"download",onClick:He,children:vt(fe?"lng_context_cancel_download":"lng_media_download")}),ie&&(0,b.Y)(G.A,{icon:"forward",onClick:Be,children:vt("Forward")}),de&&(0,b.Y)(G.A,{icon:"select",onClick:Ge,children:vt("Common.Select")}),ae&&(0,b.Y)(G.A,{icon:"flag",onClick:Oe,children:vt("lng_context_report_msg")}),oe&&(0,b.Y)(G.A,{destructive:!0,icon:"delete",onClick:Ee,children:vt("Delete")}),Ne&&(0,b.FD)(b.FK,{children:[(0,b.Y)(J.A,{size:"thick"}),!be&&(0,b.FD)(b.FK,{children:[(0,b.Y)(j.A,{inline:!0,className:"menu-loading-row"}),(0,b.Y)(j.A,{inline:!0,className:"menu-loading-row"})]}),be&&1===be.length&&(0,b.Y)(G.A,{withWrap:!0,onClick:Ut,className:"menu-custom-emoji-sets",children:(0,Y.A)(vt("MessageContainsEmojiPack",be[0].title),["simple_markdown","emoji"])}),be&&be.length>1&&(0,b.Y)(G.A,{withWrap:!0,onClick:Ut,className:"menu-custom-emoji-sets",children:(0,Y.A)(vt("MessageContainsEmojiPacks",be.length),["simple_markdown"])})]}),(ye||Ie)&&(0,b.FD)(b.FK,{children:[(0,b.Y)(J.A,{size:Ne?"thin":"thick"}),(0,b.FD)(G.A,{icon:Ie?"heart-outline":"group",onClick:Ie?Ze:Qe,disabled:!Ie&&!Lt,children:[(0,b.Y)("span",{className:"MessageContextMenu--seen-by-label-wrapper",children:(0,b.Y)("span",{className:"MessageContextMenu--seen-by-label",dir:ft.isRtl?"rtl":void 0,children:Ie&&l.reactors?.count?ye&&Lt?vt("Chat.OutgoingContextMixedReactionCount",[l.reactors.count,Lt]):vt("Chat.ContextReactionCount",l.reactors.count,"i"):1===Lt&&we?(0,Y.A)((0,h.L8)(we[0].id)?(0,r.Yg)(we[0]):we[0].title):Lt?vt("Conversation.ContextMenuSeen",Lt,"i"):vt("Conversation.ContextMenuNoViews")})}),(0,b.Y)(O.A,{className:"avatars",size:"micro",peers:we})]})]}),(Me||ke||St)&&(0,b.Y)(J.A,{size:Ne?"thin":"thick"}),(Me||ke)&&(0,b.Y)(W,{canLoadReadDate:Me,shouldRenderShowWhen:ke,message:l,closeContextMenu:ze}),St&&(0,b.Y)(V,{message:l})]})]})}),Q=window.getSelection(),Z=-1,ee=(0,o.ph)((0,i.EK)((e,{message:t,messageListType:n,detectedLanguage:o})=>{const{threadId:i}=(0,c.Xf0)(e)||{},{defaultTags:a,topReactions:l,availableReactions:d}=e.reactions,u=(0,c.yuw)(e),m=(0,c.hds)(e,t.chatId),g=m&&(0,h.L8)(m.id),p=g?void 0:(0,c.AWZ)(e,t.chatId),A=(0,c.mBe)(e,t.chatId),v=A&&(0,r.Yg)(A),{seenByExpiresAt:f,seenByMaxChatMembers:C,maxUniqueReactions:y,readDateExpiresAt:I}=e.appConfig,S=p?.reactionsLimit||y,{noOptions:w,canReplyGlobally:N,canPin:b,canUnpin:R,canDelete:P,canReport:k,canEdit:M,canFaveSticker:Y,canUnfaveSticker:x,canCopy:T,canCopyLink:F,canSelect:D,canDownload:L,canSaveGif:B,canRevote:E,canClosePoll:U}=i&&(0,c.WAX)(e,t,i)||{},O=(0,c.R4s)(e,t),K=g?(0,c.K0y)(e,m.id):void 0,G=(0,r.Ie)(t),J=m&&(0,c.yps)(e,m.id),j=Boolean(J),z=(0,c.Jbz)(e,t),$=Boolean(g&&G&&!j&&!z&&I&&t.date>Date.now()/1e3-I&&!K?.isReadDateRestricted&&"scheduled"!==n),_=Boolean($&&g&&(0,c.K0y)(e,m.id)?.isReadDateRestrictedByMe),V="pinned"===n,H="scheduled"===n,q=m&&(0,r.WX)(m),W=i&&(0,c.Vw0)(e,t.chatId,i),X=Boolean(W&&!W?.isCommentsInfo&&W?.fromChannelId),Q=i?(0,c.S0q)(e,t.chatId,i):void 0,Z=m&&!(0,r.Sq)(m,"sendPlain",p),ee=!(!m||!i)&&(0,r.__)(m,Q,X,p)&&Z,te=(0,r.Nb)(t),ne=(0,r.G5)(t),oe=Boolean(!te&&m&&!m.isMonoforum&&!z&&C&&f&&(0,r.YE)(m)&&G&&!H&&m.membersCount&&m.membersCount<=C&&t.date>Date.now()/1e3-f),ie=(0,r._P)(t),ae=!te&&!q&&!H&&!ie&&!g&&t.reactions&&!(0,r.G)(t.reactions)&&t.reactions.canSeeList,se=(0,c.ynf)(e,t),re=Boolean(t.content.contact),ce=(0,c.g29)(e),le=(0,c.S1W)(e,t),de=le?.map(t=>(0,c.ycM)(e,t)),ue=de?.every(Boolean)?de:void 0,he=(0,c.Rny)(e,t.chatId,t.id),me=he?Boolean((0,c.a_$)(e,t.chatId,he)[t.id]?.text):void 0,ge=!me&&(0,c.S86)(e,t,o),pe=(0,c.qZq)(e,t.chatId),Ae=(0,c.nZ4)(e,t.chatId),ve=(0,c.zcZ)(e,t),fe=(0,c.Pn$)(e,t),Ce=t.content.storyData,ye=Ce?(0,c.Msb)(e,Ce.peerId,Ce.id):void 0,Ie=(0,c.X2D)(e,t.chatId),Se=(0,c.QP5)(e,t),we=e.appConfig.todoItemsMax;return{threadId:i,chat:m,availableReactions:d,topReactions:l,defaultTagReactions:a,noOptions:w,canReport:k,canSendNow:H,canReschedule:H,canReply:!V&&!H&&N,canPin:!H&&b,canUnpin:!H&&R,canDelete:P,canEdit:!V&&M,canAppendTodoList:t.content.todo?.todo.othersCanAppend&&t.content.todo?.todo.items?.length<we,canForward:!H&&O,canFaveSticker:!H&&Y,canUnfaveSticker:!H&&x,canCopy:re||!se&&T,canCopyLink:!H&&F,canSelect:D,canDownload:!se&&L,canSaveGif:!se&&B,canRevote:E,canClosePoll:!H&&U,activeDownloads:u,canShowSeenBy:oe,canLoadReadDate:$,shouldRenderShowWhen:_,enabledReactions:m?.isForbidden?void 0:p?.enabledReactions,reactionsLimit:S,isPrivate:g,isCurrentUserPremium:ce,hasFullInfo:Boolean(p),canShowReactionsCount:ae,canShowReactionList:!(te||ie||H||m?.id===s.zv8||ne),canBuyPremium:!ce&&!(0,c.n_C)(e),customEmojiSetsInfo:le,customEmojiSets:ue,canScheduleUntilOnline:(0,c.RBq)(e,t.chatId),canTranslate:ge,canShowOriginal:me&&!pe,canSelectLanguage:me&&!pe,isMessageTranslated:me,canPlayAnimatedEmojis:(0,c.BWX)(e),isReactionPickerOpen:(0,c.Ani)(e),isInSavedMessages:Ae,isChannel:q,canReplyInChat:ee,isWithPaidReaction:p?.isPaidReactionAvailable,poll:ve,story:ye,userFullName:v,canGift:Ie,savedDialogId:Se,webPage:fe}})(({threadId:e,availableReactions:t,topReactions:n,defaultTagReactions:c,isOpen:h,messageListType:m,message:g,customEmojiSetsInfo:p,customEmojiSets:w,album:N,poll:k,webPage:M,story:Y,anchor:x,targetHref:T,noOptions:F,canSendNow:D,hasFullInfo:L,canReschedule:B,canReply:E,canPin:U,repliesThreadInfo:O,canUnpin:K,canDelete:G,canShowReactionsCount:J,chat:j,canReport:z,canShowReactionList:$,canEdit:_,canAppendTodoList:V,enabledReactions:H,reactionsLimit:q,isPrivate:W,isCurrentUserPremium:ee,canForward:te,canBuyPremium:ne,canFaveSticker:oe,canUnfaveSticker:ie,canCopy:ae,canCopyLink:se,canSelect:re,canDownload:ce,canSaveGif:le,canRevote:de,canClosePoll:ue,canPlayAnimatedEmojis:he,canLoadReadDate:me,shouldRenderShowWhen:ge,activeDownloads:pe,noReplies:Ae,canShowSeenBy:ve,canScheduleUntilOnline:fe,canTranslate:Ce,isMessageTranslated:ye,canShowOriginal:Ie,canSelectLanguage:Se,isReactionPickerOpen:we,isInSavedMessages:Ne,canReplyInChat:be,isWithPaidReaction:Re,userFullName:Pe,canGift:ke,className:Me,savedDialogId:Ye,onClose:xe,onCloseAnimationEnd:Te})=>{const{openThread:Fe,updateDraftReplyInfo:De,setEditingId:Le,pinMessage:Be,openForwardMenu:Ee,openReplyMenu:Ue,faveSticker:Oe,unfaveSticker:Ke,toggleMessageSelection:Ge,sendScheduledMessages:Je,rescheduleMessage:je,downloadMedia:ze,cancelMediaDownload:$e,loadSeenBy:_e,openSeenByModal:Ve,openReactorListModal:He,loadFullChat:qe,loadReactors:We,copyMessagesByIds:Xe,saveGif:Qe,loadStickers:Ze,cancelPollVote:et,closePoll:tt,toggleReaction:nt,requestMessageTranslation:ot,showOriginalMessage:it,openChatLanguageModal:at,openMessageReactionPicker:st,openPremiumModal:rt,loadOutboxReadDate:ct,copyMessageLink:lt,openDeleteMessageModal:dt,addLocalPaidReaction:ut,openPaidReactionModal:ht,reportMessages:mt,openTodoListModal:gt,showNotification:pt}=(0,i.ko)(),At=(0,y.A)(),vt=(0,f.A)(),{ref:ft}=(0,S.A)({isOpen:h,onCloseAnimationEnd:Te,className:!1}),[Ct,yt]=(0,o.J0)(!0),[It,St]=(0,o.J0)(!1),[wt,Nt,bt]=(0,v.A)(),[Rt,Pt]=(0,o.J0)(Z),[kt,Mt]=(0,I.A)(fe,xe,g.date),Yt=void 0===p||Boolean(p.length);(0,o.vJ)(()=>{ve&&h&&_e({chatId:g.chatId,messageId:g.id})},[_e,h,g.chatId,g.id,ve]),(0,o.vJ)(()=>{me&&h&&ct({chatId:g.chatId,messageId:g.id})},[me,h,g.chatId,g.id,g.readDate]),(0,o.vJ)(()=>{J&&h&&We({chatId:g.chatId,messageId:g.id})},[J,h,We,g.chatId,g.id]),(0,o.vJ)(()=>{p?.length&&w?.length!==p.length&&p.forEach(e=>{Ze({stickerSetInfo:e})})},[p,w,Ze]),(0,o.vJ)(()=>{L||W||!h||qe({chatId:g.chatId})},[L,h,W,qe,g.chatId]);const xt=(0,o.Kr)(()=>{const e=(0,i.mS)().chats.byId,t=(0,i.mS)().users.byId;if(g.reactions?.recentReactions?.length){const n=new Set(g.reactions?.recentReactions?.map(({peerId:n})=>t[n]||e[n]));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(g.seenByDates)return Object.keys(g.seenByDates).slice(0,s.dqH).map(n=>t[n]||e[n]).filter(Boolean)},[g.reactions?.recentReactions,g.seenByDates]),Tt=(0,o.Kr)(()=>{const e=(0,i.mS)();if(N)return N.messages.some(t=>{const n=(0,l.iS)(e,t);return!!n&&(0,r.$r)(pe,n)});const t=(0,l.iS)(e,g);return!!t&&(0,r.$r)(pe,t)},[pe,N,g]),Ft=E&&Q?.rangeCount?Q.getRangeAt(0):void 0;(0,o.vJ)(()=>{if(ye)return void Pt(Z);if(!Ft||Ft.collapsed||!Boolean(g.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(Ft))return void Pt(Z);const e=A(Ft),t=g.content.text.text.replace(/\u00A0/g," ");e.text.trim().length>0&&t.includes(e.text)?Pt(Ft.startOffset):Pt(Z)},[Ft,Ft?.collapsed,Ft?.startOffset,Ft?.endOffset,ye,g.content.text]);const Dt=(0,C.A)(()=>{yt(!1),xe()}),Lt=(0,C.A)(()=>{yt(!1),Dt();const e=N?.messages?N.messages.map(({id:e})=>e):[g.id];dt({chatId:g.chatId,messageIds:e,isSchedule:"scheduled"===m})}),Bt=(0,C.A)(()=>{St(!1),xe()}),Et=(0,C.A)(()=>{const e=Rt!==Z&&Ft?A(Ft):void 0;be?De({replyToMsgId:g.id,quoteText:e,quoteOffset:Rt,monoforumPeerId:Ye,replyToPeerId:void 0}):Ue({fromChatId:g.chatId,messageId:g.id,quoteText:e,quoteOffset:Rt}),Dt()}),Ut=(0,C.A)(()=>{Fe({chatId:g.chatId,threadId:g.id}),Dt()}),Ot=(0,C.A)(()=>{g.content.todo?gt({chatId:g.chatId,messageId:g.id}):Le({messageId:g.id}),Dt()}),Kt=(0,C.A)(()=>{ee?gt({chatId:g.chatId,messageId:g.id,forNewTask:!0}):pt({message:vt("SubscribeToTelegramPremiumForAppendToDo"),action:{action:"openPremiumModal",payload:{initialSection:"todo"}},actionText:At("PremiumMore")}),Dt()}),Gt=(0,C.A)(()=>{yt(!1),St(!0)}),Jt=(0,C.A)(()=>{Be({chatId:g.chatId,messageId:g.id,isUnpin:!0}),Dt()}),jt=(0,C.A)(()=>{if(Dt(),N?.messages){const e=N.messages.map(({id:e})=>e);Ee({fromChatId:g.chatId,messageIds:e})}else Ee({fromChatId:g.chatId,messageIds:[g.id]})}),zt=(0,C.A)(()=>{Dt(),Oe({sticker:g.content.sticker})}),$t=(0,C.A)(()=>{Dt(),Ke({sticker:g.content.sticker})}),_t=(0,C.A)(()=>{Dt(),et({chatId:g.chatId,messageId:g.id})}),Vt=(0,C.A)(()=>{Dt(),tt({chatId:g.chatId,messageId:g.id})}),Ht=(0,C.A)(()=>{const e=N?.messages?{messageId:g.id,childMessageIds:N.messages.map(({id:e})=>e),withShift:!1}:{messageId:g.id,withShift:!1};Ge(e),Dt()}),qt=(0,C.A)(()=>{Je({chatId:g.chatId,id:g.id}),Dt()}),Wt=(0,C.A)(e=>{je({chatId:g.chatId,messageId:g.id,scheduledAt:e}),xe()}),Xt=(0,C.A)(()=>{yt(!1),kt(Wt)}),Qt=(0,C.A)(()=>{Dt(),Ve({chatId:g.chatId,messageId:g.id})}),Zt=(0,C.A)(()=>{Dt(),He({chatId:g.chatId,messageId:g.id})}),en=(0,C.A)(e=>{Xe({messageIds:e}),Dt()}),tn=(0,C.A)(()=>{lt({chatId:g.chatId,messageId:g.id,shouldIncludeThread:e!==a.l3,shouldIncludeGrouped:!0}),Dt()}),nn=(0,C.A)(()=>{(0,u.eM)(g.content.contact.phoneNumber),Dt()}),on=(0,C.A)(()=>{const e=(0,i.mS)();(N?.messages||[g]).forEach(t=>{const n=(0,l.iS)(e,t);n&&(Tt?$e({media:n}):ze({media:n,originMessage:t}))}),Dt()}),an=(0,C.A)(()=>{const e=(0,r.zX)(g);Qe({gif:e}),Dt()}),sn=(0,C.A)(e=>{Ne&&!ee?rt({initialSection:"saved_tags"}):nt({chatId:g.chatId,messageId:g.id,reaction:e,shouldAddToRecent:!0}),Dt()}),rn=(0,C.A)(()=>{ut({chatId:g.chatId,messageId:g.id,count:1}),Dt()}),cn=(0,C.A)(()=>{ht({chatId:g.chatId,messageId:g.id}),Dt()}),ln=(0,C.A)(e=>{st({chatId:g.chatId,messageId:g.id,position:e})}),dn=(0,C.A)(()=>{ot({chatId:g.chatId,id:g.id}),Dt()}),un=(0,C.A)(()=>{it({chatId:g.chatId,id:g.id}),Dt()}),hn=(0,C.A)(()=>{at({chatId:g.chatId,messageId:g.id}),Dt()}),mn=(0,o.Kr)(()=>(N?N.messages:[g]).map(({id:e})=>e),[N,g]),gn=(0,C.A)(()=>{j&&(yt(!1),xe(),mt({chatId:j.id,messageIds:mn}))});if(F)return void Dt();const pn=new Date;return pn.setFullYear(pn.getFullYear()+1),(0,b.FD)("div",{ref:ft,className:(0,d.A)("ContextMenuContainer",Me),children:[(0,b.Y)(X,{isReactionPickerOpen:we,availableReactions:t,topReactions:n,defaultTagReactions:c,isWithPaidReaction:Re,message:g,isPrivate:W,isCurrentUserPremium:ee,canBuyPremium:ne,isOpen:Ct,enabledReactions:H,reactionsLimit:q,anchor:x,targetHref:T,canShowReactionsCount:J,canShowReactionList:$,canSendNow:D,canReschedule:B,canReply:E,canQuote:Rt!==Z,canDelete:G,canPin:U,canReport:z,repliesThreadInfo:O,canUnpin:K,canEdit:_,canAppendTodoList:V,canForward:te,canFaveSticker:oe,canUnfaveSticker:ie,canCopy:ae,canCopyLink:se,canSelect:re,canDownload:ce,canSaveGif:le,canRevote:de,canClosePoll:ue,canShowSeenBy:ve,canTranslate:Ce,canShowOriginal:Ie,canSelectLanguage:Se,canPlayAnimatedEmojis:he,shouldRenderShowWhen:ge,canLoadReadDate:me,hasCustomEmoji:Yt,customEmojiSets:w,isDownloading:Tt,seenByRecentPeers:xt,isInSavedMessages:Ne,noReplies:Ae,poll:k,webPage:M,story:Y,onOpenThread:Ut,onReply:Et,onEdit:Ot,onAppendTodoList:Kt,onPin:Gt,onUnpin:Jt,onForward:jt,onDelete:Lt,onReport:gn,onFaveSticker:zt,onUnfaveSticker:$t,onSelect:Ht,onSend:qt,onReschedule:Xt,onClose:Dt,onCopyLink:tn,onCopyMessages:en,onCopyNumber:nn,onDownload:on,onSaveGif:an,onCancelVote:_t,onClosePoll:Nt,onShowSeenBy:Qt,onToggleReaction:sn,onSendPaidReaction:rn,onShowPaidReactionModal:cn,onShowReactors:Zt,onReactionPickerOpen:ln,onTranslate:dn,onShowOriginal:un,onSelectLanguage:hn,userFullName:Pe,canGift:ke}),(0,b.Y)(R,{isOpen:It,messageId:g.id,chatId:g.chatId,onClose:Bt}),(0,b.Y)(P.A,{isOpen:wt,onClose:bt,text:At("lng_polls_stop_warning"),confirmLabel:At("lng_polls_stop_sure"),confirmHandler:Vt}),B&&Mt]})}))}}]);
//# sourceMappingURL=2557.d29ba3ed02ed6a65c304.js.map