"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[6930],{1526:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(84051),i=a(87357),s=a(17142),n=a(14242),o=a(4961),l=a(37661),c=a(39351),d=a(59030),u=a(18276),m=a(9267),p=a(64493);const h={options:"OnCj9kef",option:"tpTHQAUF",active:"U_9MXPG5",wideOption:"dJcJl33b",optionTop:"x9G4lqMf",stackedStars:"etXLebjM",stackedStar:"swttXv9P",optionBottom:"tK7La7L2",moreOptions:"AWXBaWLW",iconDown:"zWYHZJmd"};var f=a(20021);const g=(0,r.ph)((({isActive:e,className:t,options:a,selectedStarOption:g,selectedStarCount:A,starsNeeded:b,onClick:S})=>{const v=(0,d.A)(),N=(0,c.A)(),[C,I,k]=(0,l.A)();(0,r.vJ)((()=>{e||k()}),[e]);const[Y,G]=(0,r.Kr)((()=>{if(!a)return[void 0,!1];const e=a.reduce(((e,t)=>e.stars>t.stars?e:t)),t=b&&e.stars<b,r=[];let i=0,s=!1;return a.forEach(((e,n)=>{e.isExtended||i++,b&&!t&&e.stars<b||(C||!e.isExtended?r.push({option:e,starsCount:Math.min(i,6),isWide:n===a.length-1}):s=!0)})),[r,s]}),[C,a,b]);return(0,f.FD)("div",{className:(0,i.A)(h.options,t),children:[Y?.map((({option:e,starsCount:t,isWide:a})=>{const r=Y?.length,l=r%2==0,c=e===g;let d;if(e&&"winners"in e){const t=e.winners.find((e=>e.users===A))||e.winners.reduce(((e,t)=>t.users>e.users?t:e),e.winners[0]);d=t?.perUserStars}return(0,f.FD)("div",{className:(0,i.A)(h.option,!l&&a&&h.wideOption,c&&h.active),onClick:()=>S?.(e),children:[(0,f.FD)("div",{className:h.optionTop,children:["+",(0,n.Sm)(e.stars),(0,f.Y)("div",{className:h.stackedStars,dir:N.isRtl?"ltr":"rtl",children:Array.from({length:t}).map((()=>(0,f.Y)(m.A,{className:h.stackedStar,type:"gold",size:"big"})))})]}),(0,f.Y)("div",{className:h.optionBottom,children:(0,s.v)(N,e.amount,e.currency)}),(c||g&&"winners"in g)&&Boolean(d)&&(0,f.Y)("div",{className:h.optionBottom,children:(0,f.Y)("div",{className:h.perUserStars,children:(0,o.A)(v("BoostGift.Stars.PerUser",(0,n.Sm)(d)))})})]},e.stars)})),!C&&G&&(0,f.FD)(p.A,{className:h.moreOptions,isText:!0,noForcedUpperCase:!0,onClick:I,children:[v("Stars.Purchase.ShowMore"),(0,f.Y)(u.A,{className:h.iconDown,name:"down"})]})]})}))},5463:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(84051),i=a(87357),s=a(18276),n=a(64493),o=a(22720),l=a(22337),c=a(32581);var d=a(20021);const u=(0,r.ph)((({isOpen:e,listItemData:t,headerIconName:a,header:r,footer:u,buttonText:m,hasBackdrop:p,withSeparator:h,onClose:f,onButtonClick:g,contentClassName:A})=>(0,d.FD)(l.A,{isOpen:e,className:(0,i.A)("LAh8evux",A),contentClassName:"hrizpMDe",hasAbsoluteCloseButton:!0,absoluteCloseButtonColor:p?"translucent-white":void 0,onClose:f,children:[a&&(0,d.Y)("div",{className:"jySLtQNG",children:(0,d.Y)(s.A,{name:a})}),r,(0,d.Y)("div",{children:t?.map((([e,t,a])=>(0,d.FD)(o.A,{isStatic:!0,multiline:!0,icon:e,iconClassName:"hQbEPsTU",children:[(0,d.Y)("span",{className:"title",children:t}),(0,d.Y)("span",{className:"subtitle",children:a})]})))}),h&&(0,d.Y)(c.A,{className:"En1zD2cT"}),u,m&&(0,d.Y)(n.A,{size:"smaller",onClick:g||f,children:m})]})))},34642:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(84051),i=a(87357),s=a(59030),n=a(64493),o=a(22337);var l=a(20021);const c=(0,r.ph)((({confirmButtonText:e,isConfirmDisabled:t,shouldAdaptToSearch:a,withFixedHeight:r,onConfirm:c,withPremiumGradient:d,...u})=>{const m=(0,s.A)(),p=Boolean(e||c);return(0,l.FD)(o.A,{...u,isSlim:!0,className:(0,i.A)(a&&"WGSZ8u75",r&&"CrEsDylb",u.className),contentClassName:(0,i.A)("FuFYE0AA",u.contentClassName),headerClassName:(0,i.A)("iEptOmIp",u.headerClassName),children:[u.children,p&&(0,l.Y)("div",{className:"HqeDTaSr",children:(0,l.Y)(n.A,{withPremiumGradient:d,onClick:c||u.onClose,color:"primary",size:"smaller",disabled:t,children:e||m("Confirm")})})]})}))},51973:(e,t,a)=>{a.r(t),a.d(t,{ChatRefundModal:()=>ua,GiftInfoModal:()=>Lt,GiftModal:()=>yt,GiftRecipientPicker:()=>wt,GiftResalePriceComposerModal:()=>Ot,GiftStatusInfoModal:()=>_t,GiftTransferModal:()=>da,GiftUpgradeModal:()=>Jt,GiftWithdrawModal:()=>Zt,PaidReactionModal:()=>Ve,StarPaymentModal:()=>pe,StarsBalanceModal:()=>le,StarsGiftModal:()=>I,StarsGiftingPickerModal:()=>P,StarsSubscriptionModal:()=>ke,StarsTransactionInfoModal:()=>Ce});var r=a(84051),i=a(13439),s=a(70636),n=a(29807),o=a(87357),l=a(17142),c=a(4961),d=a(14),u=a(17712),m=a(59030),p=a(21849),h=a(18276),f=a(84685),g=a(64493),A=a(22337),b=a(1526);const S={modalDialog:"MFXAwnxJ",content:"Sl6xVf1R",main:"bTN9Jeph",headerInfo:"c6MiyJgW",logo:"StGLWvzb",logoBackground:"SyTXSfml",description:"kFe3mIZo",section:"BgfHkWd2",header:"zMtAGfXs",starHeaderText:"q3v8orGj",hiddenHeader:"bq3FnXT0",closeButton:"bDsDTkbe",avatar:"jK36xUj4",center:"v1PckUQn",secondaryInfo:"TDWSRfP9"},v=a.p+"StarLogo.600328787c79d99dfd66.svg",N=a.p+"stars-bg.dee4c4b73c7d21c2ec73.png";var C=a(20021);const I=(0,r.ph)((0,i.EK)(((e,{modal:t})=>({user:t?.forUserId?(0,n.mBe)(e,t.forUserId):void 0})))((({modal:e,user:t})=>{const{closeStarsGiftModal:a,openInvoice:n,requestConfetti:I}=(0,i.ko)(),k=(0,r.li)(),Y=Boolean(e?.isOpen),G=(0,d.A)(e),y=(0,m.A)(),[w,B]=(0,r.J0)(),[P,D]=(0,r.J0)(!0);(0,r.vJ)((()=>{Y||D(!0)}),[Y]);const F=(0,u.A)((()=>{const e=k.current;if(e&&Y){const{top:t,left:a,width:r,height:i}=e.querySelector(".modal-content").getBoundingClientRect();I({top:t,left:a,width:r,height:i,withStars:!0})}}));(0,r.vJ)((()=>{G?.isCompleted&&F()}),[G,F]);const M=(0,u.A)((e=>{G&&(B(e),n(t?{type:"starsgift",userId:t.id,stars:e.stars,currency:e.currency,amount:e.amount}:{type:"stars",stars:e.stars,currency:e.currency,amount:e.amount}))})),T=(0,u.A)((()=>{a()})),x=(0,r.Kr)((()=>{const e=y("lng_credits_summary_options_about").split("{link}");return[e[0],(0,C.Y)(f.A,{url:y("StarsTOSLink"),text:y("lng_credits_summary_options_about_link")}),e[1]]}),[y]);return(0,C.Y)(A.A,{className:(0,o.A)(S.modalDialog),contentClassName:S.content,dialogRef:k,isSlim:!0,onClose:T,isOpen:Y,children:(0,C.FD)("div",{className:(0,o.A)(S.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;D(t<=150)},children:[(0,C.Y)(g.A,{round:!0,size:"smaller",className:S.closeButton,color:"translucent",onClick:()=>a(),ariaLabel:y("Close"),children:(0,C.Y)(h.A,{name:"close"})}),(0,C.Y)("div",{className:(0,o.A)(S.header,P&&S.hiddenHeader),children:(0,C.Y)("h2",{className:S.starHeaderText,children:y(t?"GiftStarsTitle":"Star.List.GetStars")})}),(0,C.Y)("div",{className:S.headerInfo,children:t?(0,C.FD)(C.FK,{children:[(0,C.Y)(p.A,{size:100,peer:t,className:S.avatar}),(0,C.Y)("img",{className:S.logoBackground,src:N,alt:"",draggable:!1})]}):(0,C.FD)(C.FK,{children:[(0,C.Y)("img",{className:S.logo,src:v,alt:"",draggable:!1}),(0,C.Y)("img",{className:S.logoBackground,src:N,alt:"",draggable:!1})]})}),(0,C.Y)("h2",{className:(0,o.A)(S.headerText,S.center),children:G?.isCompleted?t?(0,c.A)(y("Notification.StarsGift.SentYou",(0,l.A)(w.amount,w.currency,y.code)),["simple_markdown"]):(0,c.A)(y("StarsAcquiredInfo",w?.stars),["simple_markdown"]):y(t?"GiftStarsTitle":"Star.List.GetStars")}),(0,C.Y)("p",{className:S.description,children:t?(0,c.A)(y("ActionGiftStarsSubtitle",(0,s.F9)(y,t)),["simple_markdown"]):y("Stars.Purchase.GetStarsInfo")}),(0,C.FD)("div",{className:S.section,children:[(0,C.Y)(b.A,{options:G?.starsGiftOptions,onClick:M}),(0,C.Y)("div",{className:S.secondaryInfo,children:x})]})]})})})));var k=a(31481),Y=a(90709),G=a(87894),y=a(79582),w=a(54960),B=a(34642);const P=(0,r.ph)((0,i.EK)((e=>{const{chats:{listIds:t},currentUserId:a}=e;return{userIds:e.contactList?.userIds,activeListIds:t.active,archivedListIds:t.archived,currentUserId:a}}))((({isOpen:e,currentUserId:t,activeListIds:a,archivedListIds:n,userIds:o})=>{const{closeStarsGiftingPickerModal:l,openStarsGiftModal:c}=(0,i.ko)(),d=(0,m.A)(),[p,h]=(0,r.J0)(""),f=(0,r.Kr)((()=>{const e=(0,i.mS)().users.byId,r=(0,G.Am)([...o||[],...a||[],...n||[]]),l=(0,s.PU)({ids:r,query:p,type:"user"});return(0,y.A)(l.filter((a=>{const r=e[a];return!(!r||r.isSupport||(0,Y.tv)(r)||(0,Y.PL)(r)||a===t||a===k.zv8)})))}),[t,p,o,a,n]),g=(0,u.A)((e=>{e?.length&&(c({forUserId:e}),l())}));return(0,C.Y)(B.A,{className:"s3k01dTm",isOpen:e,onClose:l,title:d("GiftStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,confirmButtonText:d("Continue"),onEnter:l,children:(0,C.Y)(w.A,{className:"cuI2eDIY",itemIds:f,filterValue:p,filterPlaceholder:d("Search"),onFilterChange:h,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,onSelectedIdChange:g})})})));var D=a(37661),F=a(39351),M=a(46222),T=a(24680),x=a(41036),R=a(86046),U=a(81949),L=a(9267);const K={root:"TtE8LQNJ",minimal:"nkV4JXHc",transition:"nXQS4E59",main:"JuWZY1ds",container:"mnhBs1uK",section:"lYkNd_gb",sectionTitle:"FF8gm7MP",tos:"Vu6blJk9",logo:"sjhpNB8l",logoBackground:"jjESKN3H",headerHext:"xbpAOr37",description:"teXilLxe",header:"fnhXotO2",starHeaderText:"iUwego5s",botItem:"AhxcrKWn",hiddenHeader:"DZk6d6hF",closeButton:"piD1PXHW",addStarsButton:"dqnGL2uh",addStarsIcon:"w9Db2eiK",balanceBlock:"Yk0OQBKC",balanceInfo:"p2dW9NOV",smallerText:"rUnPcfmE",balanceBottom:"F5BTkZ9G",modalBalance:"t8tMrx3y",starButton:"oOt4VBD2",paymentContent:"OReEUNTV",paymentImages:"oKorQYTC",paymentPhoto:"HGTrEtUF",avatarStar:"Wu10dXoa",paymentImageBackground:"os8jb_qv",paymentButton:"VzR5cibf",paymentButtonStar:"Uhg7yWxK",transactions:"Qvc0fTTH",subscriptions:"IX5BhCUF",tabs:"KZVEyKOX",disclaimer:"bpVifdwH",amountBadge:"BPM7LKwo",loadMore:"TKmZjMyd",loadMoreIcon:"buepwtN1"},O=(0,r.ph)((({balance:e,className:t,withAddButton:a})=>{const r=(0,F.A)(),{openStarsBalanceModal:s}=(0,i.ko)();return(0,C.Y)("div",{className:(0,o.A)(K.balanceBlock,t),children:(0,C.FD)("div",{className:K.balanceInfo,children:[(0,C.Y)("span",{className:K.smallerText,children:r("StarsBalance")}),(0,C.FD)("div",{className:K.balanceBottom,children:[(0,C.Y)(L.A,{type:"gold",size:"middle"}),void 0!==e?(0,R.ZF)(r,e):"…",a&&(0,C.Y)(U.A,{className:K.addStarsButton,onClick:()=>s({}),children:(0,C.Y)(h.A,{className:K.addStarsIcon,name:"add"})})]})]})})}));var z=a(17663),E=a(14242),V=a(63527);const H={root:"ZXnbeQxP",info:"zLaaDX3c",status:"HbF2qTB2",statusPricing:"AveGvpdV",amount:"_CBiOQcv",title:"k9ZIv5Pd",description:"FlRlxMx2",subtitle:"YN2J8dw6",statusPeriod:"MRrP7Oew",statusEnded:"pRHwfr8m",preview:"t6Syyhzd",subscriptionStar:"ftlbevPm"},J=(0,r.ph)((({subscription:e})=>{const{openStarsSubscriptionModal:t}=(0,i.ko)(),{peerId:a,pricing:r,until:o,isCancelled:l,title:d,photo:h}=e,f=(0,m.A)(),g=(0,V.A)(function(e){return t=>(0,n.PVB)(t,e)}(a)),A=(0,u.A)((()=>{t({subscription:e})}));if(!g)return;const b=o<Date.now()/1e3,S=(0,z.A)(1e3*o,f.code,!0,"long");return(0,C.FD)("div",{className:H.root,onClick:A,children:[(0,C.FD)("div",{className:H.preview,children:[(0,C.Y)(p.A,{size:"medium",peer:g}),(0,C.Y)(L.A,{className:H.subscriptionStar,type:"gold",size:"small"})]}),(0,C.FD)("div",{className:H.info,children:[(0,C.Y)("h3",{className:H.title,children:(0,c.A)((0,s.F9)(f,g)||"")}),d&&(0,C.FD)("p",{className:H.subtitle,children:[h&&(0,C.Y)(p.A,{webPhoto:h,size:"micro"}),(0,c.A)(d)]}),(0,C.Y)("p",{className:H.description,children:f(b?"StarsSubscriptionExpired":l?"StarsSubscriptionExpires":"StarsSubscriptionRenews",S)})]}),(0,C.Y)("div",{className:H.status,children:l||b?(0,C.Y)("div",{className:H.statusEnded,children:f(b?"StarsSubscriptionStatusExpired":"StarsSubscriptionStatusCancelled")}):(0,C.FD)(C.FK,{children:[(0,C.FD)("div",{className:H.statusPricing,children:[(0,C.Y)(L.A,{className:H.star,type:"gold",size:"adaptive"}),(0,C.Y)("span",{className:H.amount,children:(0,E.Sm)(r.amount)})]}),(0,C.Y)("div",{className:H.statusPeriod,children:f("StarsParticipantSubscriptionPerMonth")})]})})]})}));var q=a(58968),_=a(66833);function W(e,t,a){if(a.paidMessages)return t("PaidMessageTransaction",{count:a.paidMessages},{withNodes:!0,pluralValue:a.paidMessages});if(a.isGiftResale)return j(a.stars)?t("StarGiftSaleTransaction"):t("StarGiftPurchaseTransaction");if(a.starRefCommision)return e("StarTransactionCommission",(0,E.l9)(a.starRefCommision));if(a.isGiftUpgrade)return e("Gift2TransactionUpgraded");if(a.extendedMedia)return e("StarMediaPurchase");if(a.subscriptionPeriod)return a.title||e("StarSubscriptionPurchase");if(a.isReaction)return e("StarsReactionsSent");if(a.giveawayPostId)return e("StarsGiveawayPrizeReceived");if(a.isMyGift)return e("StarsGiftSent");if(a.isGift)return e("StarsGiftReceived");if(a.starGift)return j(a.stars)?e("Gift2TransactionSent"):e("Gift2ConvertedTitle");const r=a.peer&&"peer"!==a.peer.type&&(0,R.Pc)(a.peer)||void 0;return r?r.title||e(r.titleKey):a.title}function j(e){return e.amount?e.amount<0:e.nanos<0}var Q=a(79577),X=a(40558),$=a(62587),Z=a(27860);const ee={root:"jQkp75Gb",preview:"OYGSN3PF",count:"KX1yz2Jy",thumb:"EvinKr5k",noOutline:"KSAAsUDv",itemCount1:"GxDajfX_",itemCount2:"jXuZoxq8",itemCount3:"TPn3XGHJ",blurry:"hWZuxLS8",full:"w56QPFhl",fadeIn:"ds43W8Wq"};function te({boughtMedia:e,index:t,className:a}){const r=e.video||e.photo,i=(0,Y.VO)(r,"pictogram"),s=(0,Y.VD)(r),n=(0,$.A)(i);return(0,C.FD)("div",{className:(0,o.A)(ee.thumb,void 0!==t&&`stars-transaction-media-${t}`,a),children:[s&&(0,C.Y)("img",{className:ee.blurry,src:s,alt:""}),n&&(0,C.Y)("img",{className:ee.full,src:n,alt:""})]})}const ae=(0,r.ph)((({media:e,className:t,isTransactionPreview:a,onClick:r})=>{const i=Math.min(e.length,a?2:3),s="mediaType"in e[0];return(0,C.FD)("div",{className:(0,o.A)(ee.root,ee[`itemCount${i}`],a&&ee.preview,t),dir:"rtl",onClick:r,children:[e.slice(0,i).reverse().map(((e,t,r)=>{const i=r.length-t-1;return"mediaType"in e?(0,C.Y)(Z.A,{className:ee.thumb,isVisible:!0,width:e.width,height:e.height,thumbDataUri:e.thumbnail?.dataUri}):(0,C.Y)(te,{className:(0,o.A)(a&&i>0&&ee.noOutline),boughtMedia:e,index:i})})),s&&(0,C.FD)("div",{className:ee.count,children:[(0,C.Y)(h.A,{name:"stars-lock"}),e.length>1?e.length:""]})]})})),re={root:"aHAxv_Jg",info:"oyYrn3II",stars:"K5lc75ku",amount:"QLQPuLAr",title:"e0pK8CJ_",description:"xbERdDMQ",date:"l6CwQ0Ev",positive:"P_42_ZWR",negative:"TGjnLJfH",preview:"cnjGihOT",subscriptionStar:"z43YvnDX",uniqueGiftBackground:"eNvzMw2p",giftSticker:"U3dqmnM4"},ie=(0,r.ph)((({transaction:e,className:t})=>{const{openStarsTransactionModal:a}=(0,i.ko)(),{date:l,stars:d,photo:h,peer:f,extendedMedia:g,subscriptionPeriod:A}=e,b=(0,F.A)(),S=(0,m.A)(),v="peer"===f.type?f.id:void 0,N=(0,V.A)(function(e){return t=>e?(0,n.PVB)(t,e):void 0}(v)),I=e.starGift,k="starGiftUnique"===I?.type,Y=I&&(0,_.yQ)(I),G=(0,r.Kr)((()=>{let t,a,r,i=W(S,b,e);if("peer"===e.peer.type)t=N&&(0,s.F9)(S,N),r=N||q.lw;else{const a=(0,R.Pc)(e.peer);i=a.title||S(a.titleKey),t=S(a.subtitleKey),r=a}return e.isGiftUpgrade&&"starGiftUnique"===e.starGift?.type&&(t=b("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.isGiftResale&&"starGiftUnique"===e.starGift?.type&&(t=b("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.photo&&(r=void 0),e.isRefund&&(a=S("StarsRefunded")),e.hasFailed&&(a=S("StarsFailed")),e.isPending&&(a=S("StarsPending")),{title:i,description:t,avatarPeer:r,status:a}}),[S,b,N,e]),y=(0,r.Kr)((()=>{if(k){const{backdrop:e}=(0,_.uc)(I),t=[e.centerColor,e.edgeColor];return(0,C.FD)(C.FK,{children:[(0,C.Y)(X.A,{className:re.uniqueGiftBackground,backgroundColors:t}),(0,C.Y)(Q.A,{className:re.giftSticker,sticker:Y,size:36,play:!1})]})}return Y?(0,C.Y)(Q.A,{className:re.giftSticker,sticker:Y,size:36,play:!1}):g?(0,C.Y)(ae,{media:g,isTransactionPreview:!0}):(0,C.FD)(C.FK,{children:[(0,C.Y)(p.A,{size:"medium",webPhoto:h,peer:G.avatarPeer}),Boolean(A)&&(0,C.Y)(L.A,{className:re.subscriptionStar,type:"gold",size:"small"})]})}),[k,g,h,G.avatarPeer,A,I,Y]),w=(0,u.A)((()=>{a({transaction:e})}));return(0,C.FD)("div",{className:(0,o.A)(re.root,t),onClick:w,children:[(0,C.Y)("div",{className:re.preview,children:y}),(0,C.FD)("div",{className:re.info,children:[(0,C.Y)("h3",{className:re.title,children:G.title}),G.description&&(0,C.Y)("p",{className:re.description,children:(0,c.A)(G.description)}),(0,C.FD)("p",{className:re.date,children:[(0,z.L2)(1e3*l,S.code,!0),G.status&&` — (${G.status})`]})]}),(0,C.FD)("div",{className:re.stars,children:[(0,C.Y)("span",{className:(0,o.A)(re.amount,j(d)?re.negative:re.positive),children:(0,R.hk)(b,d)}),(0,C.Y)(L.A,{className:re.star,type:"gold",size:"adaptive"})]})]})})),se=["all","inbound","outbound"],ne=["StarsTransactionsAll","StarsTransactionsIncoming","StarsTransactionsOutgoing"],oe="StarsTransactionItem",le=(0,r.ph)((0,i.EK)((e=>({shouldForceHeight:Boolean(e.stars?.history?.all?.transactions.length),starsBalanceState:e.stars,canBuyPremium:!(0,n.n_C)(e)})))((({modal:e,starsBalanceState:t,canBuyPremium:a,shouldForceHeight:l})=>{const{closeStarsBalanceModal:d,loadStarsTransactions:p,loadStarsSubscriptions:S,openStarsGiftingPickerModal:I,openInvoice:G}=(0,i.ko)(),{balance:y,history:w,subscriptions:B}=t||{},P=(0,m.A)(),R=(0,F.A)(),[U,L]=(0,r.J0)(!0),[z,E]=(0,r.J0)(0),[V,H,q]=(0,D.A)(),_=Boolean(e&&t),{originStarsPayment:W,originReaction:j,originGift:Q,topup:X}=e||{},$=W||j||Q||X,Z=W?.form?.invoice?.totalAmount||W?.subscriptionInfo?.subscriptionPricing?.amount||j?.amount||Q?.gift.stars||X?.balanceNeeded,ee=Z?Z-(y?.amount||0):void 0,te=(0,r.Kr)((()=>{const e=(0,i.mS)();if(j){const t=(0,n.hds)(e,j.chatId);if(!t)return;return P("StarsNeededTextReactions",(0,Y.Js)(P,t))}if(W){const t=W.form?.botId?(0,n.mBe)(e,W.form.botId):void 0;if(!t)return;return P("StarsNeededText",(0,Y.Yg)(t))}if(Q){const t=(0,n.mBe)(e,Q.peerId);if(!t)return;return P("StarsNeededTextGift",(0,s.F9)(R,t))}return"subs"===X?.purpose?P("StarsNeededTextLink"):X?.purpose===k.D3m?R("StarsNeededTextSendPaidMessages",void 0,{withMarkdown:!0,withNodes:!0}):void 0}),[j,W,Q,X?.purpose,R,P]),ae=Boolean(w?.all?.transactions.length&&!$),re=!$,le=(0,r.Kr)((()=>ne.map((e=>({title:R(e)})))),[R]);(0,r.vJ)((()=>{_||(L(!0),E(0),q())}),[_]),(0,r.vJ)((()=>{$?H():q()}),[$]);const ce=(0,r.Kr)((()=>{if(!_)return;const e=P("lng_credits_summary_options_about").split("{link}");return[e[0],(0,C.Y)(f.A,{url:P("StarsTOSLink"),text:P("lng_credits_summary_options_about_link")}),e[1]]}),[_,P]),de=(0,u.A)((()=>{p({type:se[z]})})),ue=(0,u.A)((()=>{S()})),me=(0,u.A)((()=>{I({})})),pe=(0,u.A)((e=>{G({type:"stars",stars:e.stars,currency:e.currency,amount:e.amount})}));return(0,C.Y)(A.A,{className:(0,o.A)(K.root,!l&&!V&&K.minimal),isOpen:_,onClose:d,children:(0,C.FD)("div",{className:(0,o.A)(K.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;L(t<=150)},children:[(0,C.Y)(g.A,{round:!0,size:"smaller",className:K.closeButton,color:"translucent",onClick:()=>d(),ariaLabel:R("Close"),children:(0,C.Y)(h.A,{name:"close"})}),(0,C.Y)(O,{balance:y,className:K.modalBalance}),(0,C.Y)("div",{className:(0,o.A)(K.header,U&&K.hiddenHeader),children:(0,C.Y)("h2",{className:K.starHeaderText,children:P("TelegramStars")})}),(0,C.FD)("div",{className:K.section,children:[(0,C.Y)("img",{className:K.logo,src:v,alt:"",draggable:!1}),(0,C.Y)("img",{className:K.logoBackground,src:N,alt:"",draggable:!1}),(0,C.Y)("h2",{className:K.headerText,children:ee?P("StarsNeededTitle",Z):P("TelegramStars")}),(0,C.Y)("div",{className:K.description,children:(0,c.A)(te||P("TelegramStarsInfo"),["simple_markdown","emoji"])}),a&&!V&&(0,C.Y)(g.A,{className:K.starButton,onClick:H,children:P("Star.List.BuyMoreStars")}),a&&!V&&re&&(0,C.Y)(g.A,{isText:!0,noForcedUpperCase:!0,className:K.starButton,onClick:me,children:P("TelegramStarsGift")}),V&&t?.topupOptions&&(0,C.Y)(b.A,{starsNeeded:ee,options:t.topupOptions,onClick:pe})]}),V&&(0,C.Y)("div",{className:K.tos,children:ce}),ae&&Boolean(B?.list.length)&&(0,C.FD)("div",{className:K.section,children:[(0,C.Y)("h3",{className:K.sectionTitle,children:P("StarMySubscriptions")}),(0,C.FD)("div",{className:K.subscriptions,children:[B?.list.map((e=>(0,C.Y)(J,{subscription:e},e.id))),B?.nextOffset&&(0,C.FD)(g.A,{isText:!0,disabled:B.isLoading,size:"smaller",noForcedUpperCase:!0,className:K.loadMore,onClick:ue,children:[(0,C.Y)(h.A,{name:"down",className:K.loadMoreIcon}),P("StarMySubscriptionsExpand")]})]})]}),ae&&(0,C.FD)("div",{className:K.container,children:[(0,C.Y)("div",{className:K.section,children:(0,C.Y)(x.Ay,{name:R.isRtl?"slideOptimizedRtl":"slideOptimized",activeKey:z,renderCount:ne.length,shouldRestoreHeight:!0,className:K.transition,children:(0,C.Y)(M.A,{onLoadMore:de,items:w?.[se[z]]?.transactions,scrollContainerClosest:`.${K.main}`,itemSelector:`.${oe}`,className:K.transactions,noFastList:!0,noScrollRestoreOnTop:!0,children:w?.[se[z]]?.transactions.map((e=>(0,C.Y)(ie,{transaction:e,className:oe},`${e.id}-${e.isRefund}`)))})})}),(0,C.Y)(T.A,{className:K.tabs,tabClassName:K.tab,activeTab:z,tabs:le,onSwitchTab:E})]})]})})})));var ce=a(48775),de=a(29886),ue=a(84991),me=a(10187);const pe=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a=t?.form?.botId?(0,n.mBe)(e,t.form.botId):void 0,r="message"===t?.inputInvoice?.type?t.inputInvoice:void 0,i=r?(0,n.O5q)(e,r.chatId,r.messageId):void 0,s=r?(0,n.hds)(e,r.chatId):void 0,o=i?.content.paidMedia;return{bot:a,starsBalanceState:e.stars,paidMediaMessage:o?i:void 0,paidMediaChat:o?s:void 0}}))((({modal:e,bot:t,starsBalanceState:a,paidMediaMessage:s,paidMediaChat:n})=>{const{closeStarsPaymentModal:l,openStarsBalanceModal:d,sendStarPaymentForm:h}=(0,i.ko)(),[b,S,v]=(0,D.A)(),I=Boolean(e?.inputInvoice&&a),k=(0,de.A)(e),G=e||k,{form:y,subscriptionInfo:w}=G||{},B=y?.invoice?.totalAmount||w?.subscriptionPricing?.amount,P=Boolean(y?.invoice.subscriptionPeriod),M=!w?.subscriptionPricing,T=y?.photo,x=(0,m.A)(),R=(0,F.A)();(0,r.vJ)((()=>{I||v()}),[I]);const U=(0,r.Kr)((()=>{if(!G?.inputInvoice)return"";const e=(0,Y.Yg)(t),a=x("Stars.Intro.PurchasedText.Stars",B);if(s){const e=s.content.paidMedia.extendedMedia,t=e.every((e=>!e.duration)),r=e.every((e=>Boolean(e.duration))),i=x(t?"Stars.Transfer.Photos":r?"Stars.Transfer.Videos":"Media",e.length),o=(0,Y.Js)(x,n);return x("Stars.Transfer.UnlockInfo",[i,o,a])}return w?R("StarsSubscribeText",{chat:w.title,amount:B},{withNodes:!0,withMarkdown:!0,pluralValue:B}):P?R("StarsSubscribeBotText",{name:y.title,amount:B,bot:e},{pluralValue:B}):x("Stars.Transfer.Info",[y.title,e,a])}),[G?.inputInvoice,t,x,B,s,w,P,y,n,R]),z=(0,r.Kr)((()=>{if(w)return R("StarsSubscribeInfo",{link:(0,C.Y)(f.A,{url:R("StarsSubscribeInfoLink"),text:R("StarsSubscribeInfoLinkText")})},{withNodes:!0})}),[w,R]),V=(0,r.Kr)((()=>{if(w)return(0,Y.nr)(w)}),[w]),H=(0,u.A)((()=>{const t=a?.balance;void 0!==B&&void 0!==t&&(B>t.amount?d({originStarsPayment:e}):(h({}),S()))}));return(0,C.FD)(A.A,{contentClassName:K.paymentContent,isOpen:I,hasAbsoluteCloseButton:!0,isSlim:!0,onClose:l,children:[(0,C.Y)(O,{balance:a?.balance,className:K.modalBalance}),(0,C.FD)("div",{className:K.paymentImages,dir:x.isRtl?"ltr":"rtl",children:[s?(0,C.Y)(ae,{media:s.content.paidMedia.extendedMedia}):V?(0,C.FD)(C.FK,{children:[(0,C.Y)(p.A,{className:K.paymentPhoto,peer:V,size:"giant"}),(0,C.Y)(L.A,{type:"gold",size:"adaptive",className:K.avatarStar})]}):(0,C.Y)(ue.A,{peer:T?void 0:t,avatarWebPhoto:T,avatarSize:"giant",badgeIcon:"star",badgeText:(0,E.Sm)(B),badgeClassName:K.amountBadge,className:K.paymentPhoto}),(0,C.Y)("img",{className:K.paymentImageBackground,src:N,alt:"",draggable:!1})]}),(0,C.Y)("h2",{className:K.headerText,children:x(V?"StarsSubscribeTitle":"StarsConfirmPurchaseTitle")}),M&&(0,C.Y)(me.A,{className:K.botItem,peerId:y?.botId}),(0,C.Y)("div",{className:K.description,children:(0,c.A)(U,["simple_markdown","emoji"])}),(0,C.Y)(g.A,{className:K.paymentButton,size:"smaller",onClick:H,isLoading:b,children:R(P?"StarsSubscribeBotButtonMonth":"StarsPay",{amount:(0,ce.U)(R,B,{asFont:!0})},{withNodes:!0})}),Boolean(z)&&(0,C.Y)("div",{className:(0,o.A)(K.disclaimer,K.smallerText),children:z})]})})));var he=a(89925),fe=a(85982),ge=a(70046),Ae=a(95807);const be=(0,r.ph)((({modelAttribute:e,backdropAttribute:t,patternAttribute:a,title:i,subtitle:s,className:n,resellPrice:l})=>{const c=(0,F.A)(),d=function(e){const t=(0,r.li)(0);return(0,r.Kr)((()=>{t.current+=1}),[...e]),t.current}([e,t,a]),u=t?.textColor,m=(0,r.Kr)((()=>{const e=[t.centerColor,t.edgeColor],r=t.patternColor;return(0,C.Y)(X.A,{className:"UvhsGZLf",backgroundColors:e,patternColor:r,patternIcon:a.sticker})}),[t,a]);return(0,C.FD)("div",{className:(0,o.A)("irv1C8bo",n),children:[(0,C.FD)(x.Ay,{className:"Tu6_OHoq",slideClassName:"iUTKLzTN",activeKey:d,direction:1,name:"zoomBounceSemiFade",children:[m,(0,C.Y)(Q.A,{className:"a1ASgPwu",sticker:e.sticker,size:120})]}),i&&(0,C.Y)("h1",{className:"ECTvfOda",children:i}),s&&(0,C.Y)("p",{className:"S6JwvHWD",style:(0,Ae.A)(u&&`color: ${u}`),children:s}),l&&(0,C.FD)("p",{className:"zTVWZg63",children:[(0,C.Y)("span",{children:(0,R.hk)(c,l)}),(0,C.Y)(L.A,{type:"gold",size:"middle"})]})]})})),Se="qBOIq6Jn",ve="sso9uZM6",Ne="NuWOY7ED",Ce=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a="peer"===t?.transaction?.peer?.type&&t.transaction.peer.id,r=a?(0,n.PVB)(e,a):void 0,i=e.appConfig?.starsPaidMessageCommissionPermille,s=t?.transaction.stars,o=t?.transaction.isGift&&(0,n.WLj)(e,s?.amount);return{peer:r,canPlayAnimatedEmojis:(0,n.BWX)(e),topSticker:o,paidMessageCommission:i}}))((({modal:e,peer:t,canPlayAnimatedEmojis:a,topSticker:s,paidMessageCommission:n})=>{const{showNotification:l,openMediaViewer:c,closeStarsTransactionModal:d}=(0,i.ko)(),g=(0,F.A)(),A=(0,m.A)(),{transaction:b}=e||{},S=(0,u.A)((()=>{const e=b?.extendedMedia;e&&c({origin:he.TQ.StarsTransaction,standaloneMedia:e.flatMap((e=>Object.values(e)))})})),v=(0,r.Kr)((()=>{if(!b)return;const{giveawayPostId:e,photo:r,stars:i,isGiftUpgrade:c,starGift:d,isGiftResale:u}=b,m=b?.starGift,v="starGiftUnique"===m?.type,I=b?.starGift?(0,_.yQ)(b.starGift):s,k=v?(0,_.uc)(m):void 0,G=b.peer&&"peer"!==b.peer.type&&(0,R.Pc)(b.peer)||void 0,y="peer"===b.peer?.type?b.peer.id:void 0,w=b.peer&&A(function(e){switch(e.type){case"appStore":return"AppStore";case"playMarket":return"PlayMarket";case"fragment":return"Fragment";case"premiumBot":return"StarsTransactionBot";case"ads":return"StarsTransactionAds";case"api":return"Stars.Intro.Transaction.TelegramBotApi.Subtitle";default:return"Stars.Transaction.Unsupported.Title"}}(b.peer)),B=W(A,g,b),P=t&&b.messageId&&!c?(0,Y.yt)(t,void 0,b.messageId):void 0,D=t&&e?(0,Y.yt)(t,void 0,e):void 0,F=b.extendedMedia,M=F?.length||0,T=F?.every((e=>!e.video)),x=F?.every((e=>!e.photo)),U=A(T?"Stars.Transfer.Photos":x?"Stars.Transfer.Videos":"Media",M),K=b.description||(c&&"starGiftUnique"===d?.type?d.title:void 0)||(F?U:void 0),O=!F&&!I,V=r?void 0:t||G,H=v&&(0,C.Y)("div",{className:(0,o.A)(Se,"ApoQz22o"),children:(0,C.Y)(be,{backdropAttribute:k.backdrop,patternAttribute:k.pattern,modelAttribute:k.model,title:m.title,subtitle:g("GiftInfoCollectible",{number:m.number}),resellPrice:b.stars})}),J=(0,C.FD)("div",{className:Se,children:[F&&(0,C.Y)(ae,{className:(0,o.A)("C5r59yiV","transaction-media-preview"),media:F,onClick:S}),!F&&I&&(0,C.Y)(Q.A,{sticker:I,play:a,noLoop:!0},b.id),O&&(0,C.Y)(p.A,{peer:V,webPhoto:r,size:"giant"}),!I&&(0,C.Y)("img",{className:(0,o.A)("nML8IQqX"),src:N,alt:"",draggable:!1}),Boolean(B)&&(0,C.Y)("h1",{className:"ZZAj3hj7",children:B}),(0,C.Y)("p",{className:Ne,children:K}),(0,C.FD)("p",{className:ve,children:[(0,C.Y)("span",{className:(0,o.A)(ve,j(i)?"xDyq9cc0":"jvBZSrpd"),children:(0,R.hk)(g,i)}),(0,C.Y)(L.A,{type:"gold",size:"middle"}),b.isRefund&&(0,C.Y)("p",{className:"sxWAwxTd",children:g("Refunded")})]}),Boolean(b.paidMessages&&b.starRefCommision&&n)&&(0,C.Y)("p",{className:Ne,children:g("PaidMessageTransactionDescription",{percent:(0,E.l9)(n/10)},{withNodes:!0,withMarkdown:!0})})]}),q=[];let X;!b||b.paidMessages||u||q.push([A("StarsTransaction.StarRefReason.Title"),A("StarsTransaction.StarRefReason.Program")]),c&&q.push([A("StarGiftReason"),A("StarGiftReasonUpgrade")]),u&&q.push([A("StarGiftReason"),j(b.stars)?g("StarGiftSaleTransaction"):g("StarGiftPurchaseTransaction")]),X=c?A("Stars.Transaction.GiftFrom"):j(i)||b.isMyGift?A("Stars.Transaction.To"):!b.starRefCommision||b.paidMessages||u?A(y?"Star.Transaction.From":"Stars.Transaction.Via"):A("StarsTransaction.StarRefReason.Miniapp"),q.push([X,y?{chatId:y}:w||""]),b.starRefCommision&&b.paidMessages&&q.push([g("PaidMessageTransactionTotal"),(0,ce.U)(g,b.stars.amount/((100-b.starRefCommision)/100),{asFont:!1,className:"cU5QlvwL",containerClassName:"Z2YALGgl"})]),P&&q.push([A("Stars.Transaction.Reaction.Post"),(0,C.Y)(f.A,{url:P,text:P})]),D&&(q.push([A("BoostReason"),(0,C.Y)(f.A,{url:D,text:A("Giveaway")})]),q.push([A("Gift"),A("Stars",b.stars,"i")])),b.id&&q.push([A("Stars.Transaction.Id"),(0,C.FD)(C.FK,{children:[(0,C.Y)("div",{className:"tMF8VIOM",onClick:()=>{(0,fe.eM)(b.id),l({message:A("StarsTransactionIDCopied")})},children:b.id}),(0,C.Y)(h.A,{className:"voCttFzS",name:"copy"})]})]),q.push([A("Stars.Transaction.Date"),(0,z.L2)(1e3*b.date,A.code,!0)]);const $=A("lng_credits_box_out_about").split("{link}");return{header:v?H:J,tableData:q,footer:(0,C.FD)("span",{className:"KgzPpgS6",children:[$[0],(0,C.Y)(f.A,{url:A("StarsTOSLink"),text:A("lng_credits_summary_options_about_link")}),$[1]]})}}),[b,A,g,t,a,s,n]),I=(0,de.A)(v)||v;return(0,C.Y)(ge.A,{isOpen:Boolean(b),className:"IzhfRIWu",hasBackdrop:"starGiftUnique"===b?.starGift?.type,header:I?.header,tableData:I?.tableData,footer:I?.footer,buttonText:A("OK"),onClose:d})}))),Ie="oBLHWBtJ",ke=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a=t?.subscription.peerId;return{peer:a?(0,n.PVB)(e,a):void 0}}))((({modal:e,peer:t})=>{const{closeStarsSubscriptionModal:a,fulfillStarsSubscription:n,changeStarsSubscription:l,checkChatInvite:c,loadStarStatus:d,openInvoice:h}=(0,i.ko)(),A=(0,m.A)(),b=(0,F.A)(),{subscription:S}=e||{},v=(0,r.Kr)((()=>{if(!S)return"hidden";if(S.canRefulfill)return"refulfill";const e=S.until>Date.now()/1e3;if(e&&!S.isCancelled)return"cancel";if(e&&S.isCancelled)return"renew";const t=S.chatInviteHash||S.invoiceSlug;return!e&&t?"restart":"ok"}),[S]),I=(0,u.A)((()=>{if(S){switch(v){case"refulfill":n({id:S.id});break;case"restart":S.chatInviteHash?c({hash:S.chatInviteHash}):S.invoiceSlug&&h({type:"slug",slug:S.invoiceSlug}),d();break;case"renew":l({id:S.id,isCancelled:!1});break;case"cancel":l({id:S.id,isCancelled:!0})}a()}})),Y=(0,r.Kr)((()=>{if(!S||!t)return;const{pricing:e,until:a,isCancelled:r,canRefulfill:i,photo:n,title:l,hasBotCancelled:c}=S,d=(0,s.mO)(t),u=(0,C.FD)("div",{className:"E3R22yAI",children:[(0,C.FD)("div",{className:"wuTMXDP9",children:[(0,C.Y)(p.A,{peer:n?void 0:t,webPhoto:n,size:"giant"}),(0,C.Y)(L.A,{className:"enRetSny",type:"gold",size:"adaptive"})]}),(0,C.Y)("img",{className:(0,o.A)("zGCayu45"),src:N,alt:"",draggable:!1}),(0,C.Y)("h1",{className:"qdydQHgc",children:l||A("StarsSubscriptionTitle")}),(0,C.Y)("p",{className:"FI6rEJlK",children:b("StarsPerMonth",{amount:e.amount},{withNodes:!0,specialReplacement:{[k.Cyx]:(0,C.Y)(L.A,{className:"J8HIcN6k",size:"adaptive",type:"gold"})}})})]}),m=[];m.push([A(d?"StarsSubscriptionBot":"StarsSubscriptionChannel"),{chatId:t.id}]),l&&m.push([A("StarsSubscriptionBotProduct"),l]);const h=a<Date.now()/1e3;m.push([A(h?"StarsSubscriptionUntilExpired":r?"StarsSubscriptionUntilExpires":"StarsSubscriptionUntilRenews"),(0,z.L2)(1e3*a,A.code,!0)]);const Y=b("StarsTransactionTOS",{link:(0,C.Y)(f.A,{url:b("StarsTransactionTOSLink"),text:b("StarsTransactionTOSLinkText")})},{withNodes:!0});return{header:u,tableData:m,footer:(0,C.FD)("span",{className:"GMWMuWCr",children:[(0,C.Y)("p",{className:Ie,children:Y}),r&&(0,C.Y)("p",{className:"nkwiG25Q",children:A(c?"StarsSubscriptionBotCancelledText":"StarsSubscriptionCancelledText")}),i&&(0,C.Y)("p",{className:Ie,children:A("StarsSubscriptionRefulfillInfo",(0,z.L2)(1e3*a,A.code,!0))}),!r&&!i&&h&&(0,C.Y)("p",{className:Ie,children:A("StarsSubscriptionExpiredInfo",(0,z.L2)(1e3*a,A.code,!0))}),!r&&!i&&!h&&(0,C.Y)("p",{className:Ie,children:A("StarsSubscriptionCancelInfo",(0,z.L2)(1e3*a,A.code,!0))}),"hidden"!==v&&(0,C.Y)(g.A,{size:"smaller",color:"cancel"===v?"danger":"primary",isText:"cancel"===v,onClick:I,children:A("cancel"===v?"StarsSubscriptionCancel":"refulfill"===v?"StarsSubscriptionRefulfill":"restart"===v?"StarsSubscriptionAgain":"renew"===v?"StarsSubscriptionRenew":"OK")})]})}}),[v,b,A,t,S]),G=(0,de.A)(Y)||Y;return(0,C.Y)(ge.A,{isOpen:Boolean(S),className:"eR_RZfGB",header:G?.header,tableData:G?.tableData,footer:G?.footer,onClose:a})})));var Ye=a(43874),Ge=a(34431),ye=a(19806),we=a(22699),Be=a(24433),Pe=a(32581),De=a(66644),Fe=a(15283),Me=a(93545),Te=a(68292),xe=a(85118);const Re={root:"CuBAw2yg",slider:"euOOAbZi",sparkles:"_L1YQTIP",progress:"kwK0cNPX",floatingBadgeWrapper:"uvlMoXj0",floatingBadge:"BGSDWAYc",floatingBadgeText:"qqQan8uF",floatingBadgeTriangle:"mIdJOmsB"},Ue=[50,100,500,1e3,2e3,5e3,1e4];function Le(e,t){const a=e.findIndex((e=>t<=e)),r=e[a-1]||1,i=e[a]||e[e.length-1];return a+(t-r)/(i-r)}function Ke(e,t){const a=Math.floor(t),r=e[a-1]||1,i=r+((e[a]||e[e.length-1])-r)*(t-a);return Math.round(i)}const Oe=(0,r.ph)((({maxValue:e,defaultValue:t,className:a,onChange:i})=>{const s=(0,r.li)(),n=(0,r.Kr)((()=>{const t=[];for(let a=0;a<Ue.length;a++)if(Ue[a]<e&&t.push(Ue[a]),Ue[a]>=e){t.push(e);break}return t}),[e]),[l,c]=(0,r.J0)(0);(0,Fe.A)((()=>{c(Le(n,t))}));const d=(0,u.A)((()=>{const e=s.current;if(!e)return;const t=e.parentElement;(0,De.YS)((()=>{const a=t.offsetLeft+e.offsetWidth/2,r=t.offsetLeft+t.offsetWidth-e.offsetWidth/2;(0,De.RK)((()=>{t.style.setProperty("--_min-x",`${a}px`),t.style.setProperty("--_max-x",`${r}px`)}))}))}));(0,Me.A)(s,d);const m=(0,u.A)((e=>{const t=Number(e.currentTarget.value);c(t),i(Ke(n,t))}));return(0,C.FD)("div",{className:(0,o.A)(Re.root,a),style:"--progress: "+l/n.length,children:[(0,C.Y)("div",{className:Re.floatingBadgeWrapper,children:(0,C.FD)("div",{className:Re.floatingBadge,ref:s,children:[(0,C.FD)("div",{className:Re.floatingBadgeText,children:[(0,C.Y)(h.A,{name:"star",className:Re.floatingBadgeIcon}),(0,C.Y)(Te.A,{text:(0,E.Sm)(Ke(n,l))})]}),(0,C.FD)("svg",{className:Re.floatingBadgeTriangle,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:[(0,C.Y)("defs",{children:(0,C.FD)("linearGradient",{id:"StarBadgeTriangle",x1:"0",x2:"1",y1:"0",y2:"0",children:[(0,C.Y)("stop",{offset:"-50%","stop-color":"#FFAA00"}),(0,C.Y)("stop",{offset:"150%","stop-color":"#FFCD3A"})]})}),(0,C.Y)("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"url(#StarBadgeTriangle)"})]})]})}),(0,C.Y)("div",{className:Re.progress,children:(0,C.Y)(xe.A,{preset:"progress",className:Re.sparkles})}),(0,C.Y)("input",{className:Re.slider,type:"range",min:0,max:n.length,defaultValue:Le(n,t),step:"any",onChange:m})]})})),ze={content:"RdhRpsCn",title:"yzbjj73U",slider:"xePPMXOI",description:"BlpfdOtK",itemInfo:"nS9V516D",itemTitle:"sH5Nukjy",itemSubtitle:"dHlNODTI",itemIcon:"H_iHihXU",sendAsPeerButtonAvatar:"_mjvLELm",sendAsPeerMenuButton:"zxsRaWYV",buttonDownIcon:"zrwUUELS",sendAsPeerMenuBubble:"X1PB6mhQ",sendAsPeerMenu:"Px1MDij9",sendAsPeersMenuContainer:"Al1nfhHJ",headerControlPanel:"vu90kSL_",separator:"uhQLUjmo",checkBox:"Mc3bVeF0",topLabel:"bnou4CpV",top:"QludQDKR",topBadge:"JBF9pTUK",buttonStar:"NJJFuym9",topPeer:"Ty4Ud_Rd",disclaimer:"KRvkHeo1"},Ee={avatarIcon:"author-hidden",customPeerAvatarColor:"#9eaab5",isCustomPeer:!0,titleKey:"StarsReactionAnonymous"},Ve=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a=t&&(0,n.hds)(e,t.chatId),r=t&&(0,n.O5q)(e,t.chatId,t.messageId),i=e.stars?.balance,s=e.appConfig?.paidReactionMaxAmount||2500,o=e.settings.paidReactionPrivacy,l=a?.sendPaidReactionsAsPeerIds,c=e.currentUserId;return{chat:a,message:r,starBalance:i,maxAmount:s,defaultPrivacy:o,sendPaidReactionsAsPeerIds:l,currentUserId:c,currentUser:(0,n.mBe)(e,c)}}))((({modal:e,chat:t,message:a,maxAmount:l,starBalance:d,defaultPrivacy:b,sendPaidReactionsAsPeerIds:S,currentUserId:v,currentUser:N})=>{const{closePaidReactionModal:I,addLocalPaidReaction:Y,loadSendPaidReactionsAs:G}=(0,i.ko)(),[y,w]=(0,r.J0)(50),[B,P,M]=(0,D.A)(),[T,x]=(0,r.J0)(!0),[R,U]=(0,r.J0)(v),L=t?.id,K=R?(0,n.PVB)((0,i.mS)(),R):N,z=(0,m.A)(),{isMobile:V}=(0,Ye.Ay)(),H=(0,F.A)(),J=(0,u.A)((e=>{x(!e.target.checked)})),q=(0,u.A)((e=>{w(e),P()}));(0,r.vJ)((()=>{L&&!S&&G({chatId:L})}),[L,S]);const _=(0,r.Kr)((()=>{const e=S?.map((e=>e.id)).filter((e=>e!==L));return e?.unshift(v),e}),[S,L,v]),W=_&&_.length>1;(0,r.vJ)((()=>{e||M()}),[e]),(0,r.vJ)((()=>{const e=a?.reactions?.topReactors?.find((e=>e.isMy));if(e)return x(Boolean(e.isAnonymous)),void(e.peerId&&U(e.peerId));x("anonymous"===b?.type||!1),"peer"===b?.type&&_?.includes(b.peerId)?U(b.peerId):U(v)}),[b,a?.reactions?.topReactors,_,v]);const j=(0,u.A)((()=>{e&&(Y({chatId:e.chatId,messageId:e.messageId,count:y,isPrivate:T,peerId:T||R===v?void 0:R,shouldIgnoreDefaultPrivacy:!0}),I())})),Q=(0,u.A)((e=>{x(!1),U(e)})),X=(0,u.A)((e=>{const t=(0,n.PVB)((0,i.mS)(),e),a=R===e&&!T;if(t)return(0,C.FD)(Be.A,{onClick:()=>Q(e),children:[(0,C.Y)(p.A,{size:"small",peer:t}),(0,C.FD)("div",{className:(0,o.A)(ze.itemInfo),children:[(0,C.Y)(Ge.A,{className:ze.itemTitle,peer:t,noFake:!0,noVerified:!0}),(0,C.Y)("span",{className:ze.itemSubtitle,children:(0,s.mO)(t)?H("PeerPersonalAccount"):H("PeerChannel")})]}),(0,C.Y)(h.A,{className:ze.itemIcon,name:a?"check":"placeholder"})]})})),$=(0,r.Kr)((()=>({onTrigger:e,isOpen:t})=>(0,C.FD)(g.A,{ripple:!V,size:"smaller",color:"translucent",className:(0,o.A)(ze.sendAsPeerMenuButton,t?"active":""),onClick:e,ariaLabel:H("AccDescrOpenMenu2"),children:[(0,C.Y)(p.A,{className:ze.sendAsPeerButtonAvatar,size:"mini",peer:T?Ee:K}),(0,C.Y)(h.A,{name:"down",className:ze.buttonDownIcon})]})),[V,H,K,T]),Z=(0,r.Kr)((()=>{if(W)return(0,C.Y)(we.A,{className:(0,o.A)(ze.sendAsPeerMenu,"with-menu-transitions"),bubbleClassName:ze.sendAsPeerMenuBubble,trigger:$,positionX:"right",autoClose:!0,children:_.map((e=>X(e)))})}),[$,_,W]),ee=(0,r.Kr)((()=>{const e=(0,i.mS)(),t=a?.reactions?.topReactors;if(!t)return;const r=[];let s=!1,o=0;if(t.forEach((t=>{const a=t.peerId?(0,n.PVB)(e,t.peerId):void 0;if(!a&&!t.isAnonymous&&!t.isMy)return;if(t.isMy&&(o=t.count),t.isMy&&(t.peerId!==R||t.isAnonymous&&!T))return;const i=R===t.peerId||T&&t.isAnonymous;i&&(s=!0),r.push({amount:t.count,localAmount:i&&B?y:0,isMy:t.isMy,isAnonymous:t.isAnonymous,user:a})})),!s){const t=(0,n.PVB)(e,R);r.push({amount:o,localAmount:B?y:0,isMy:!0,user:t})}return r.sort(((e,t)=>t.amount+t.localAmount-(e.amount+e.localAmount))),r.slice(0,3)}),[B,a?.reactions?.topReactors,y,R,T]),te=t&&(0,s.F9)(z,t);return(0,C.FD)(A.A,{isOpen:Boolean(e),onClose:I,isSlim:!0,hasAbsoluteCloseButton:!0,contentClassName:ze.content,isLowStackPriority:!0,children:[(0,C.Y)("div",{className:ze.sendAsPeersMenuContainer,children:Z}),(0,C.Y)("div",{className:ze.headerControlPanel,children:(0,C.Y)(O,{balance:d,className:ze.modalBalance,withAddButton:!0})}),(0,C.Y)(Oe,{className:ze.slider,defaultValue:50,maxValue:l,onChange:q}),(0,C.Y)("h3",{className:ze.title,children:z("StarsReactionTitle")}),(0,C.Y)("div",{className:ze.description,children:(0,c.A)(z("StarsReactionText",te),["simple_markdown","emoji"])}),(0,C.Y)(Pe.A,{children:ee&&(0,C.Y)("div",{className:ze.topLabel,children:z("StarsReactionTopSenders")})}),ee&&(0,C.Y)("div",{className:ze.top,children:ee.map((e=>{const t=(0,E.Sm)(e.amount+e.localAmount),a=e.isAnonymous||!e.user||e.isMy&&T?Ee:e.user,r="isCustomPeer"in a?z(a.titleKey):a&&(0,s.F9)(z,a);return(0,C.Y)(ue.A,{className:ze.topPeer,peer:a,badgeText:t,badgeIcon:"star",badgeClassName:ze.topBadge,text:r},`${e.user?.id||"anonymous"}-${t}`)}))}),ee&&(0,C.Y)(Pe.A,{className:ze.separator}),(0,C.Y)(ye.A,{className:(0,o.A)(ze.checkBox,"dialog-checkbox"),checked:!T,onChange:J,label:z("StarsReactionShowMeInTopSenders")}),(0,C.Y)(g.A,{size:"smaller",onClick:j,children:H("SendPaidReaction",{amount:y},{withNodes:!0,specialReplacement:{[k.Cyx]:(0,C.Y)(h.A,{className:ze.buttonStar,name:"star"})}})}),(0,C.Y)("p",{className:ze.disclaimer,children:H("StarsReactionTerms",{link:(0,C.Y)(f.A,{text:H("StarsReactionLinkText"),url:H("StarsReactionLink")})},{withNodes:!0})})]})})));var He=a(37836),Je=a(5912),qe=a(23174),_e=a(65632),We=a(20333),je=a(4523),Qe=a(96530),Xe=a(22720),$e=a(63152),Ze=a(94079);const et="zZUpGRSI",tt="zAee80Dv",at="nTPAv1ci",rt=(0,r.ph)((0,i.EK)(((e,{peerId:t})=>{const a=(0,n.SJA)(e),{stars:r}=e,{isBlurred:i,patternColor:s,background:o,backgroundColor:l}=(0,n.Gyz)(e,a)||{},c=(0,n.PVB)(e,t),d=(0,n.WA9)(e,t),u=(0,n.vGo)(e,t),m=e.currentUserId===t,p=!m&&u?.disallowedGifts?.shouldDisallowUniqueStarGifts,h=!m&&u?.disallowedGifts?.shouldDisallowLimitedStarGifts,f=(0,n.nTw)(e);return{starBalance:r?.balance,peer:c,theme:a,isBackgroundBlurred:i,patternColor:s,customBackground:o,backgroundColor:l,captionLimit:e.appConfig?.starGiftMaxMessageLength,currentUserId:e.currentUserId,isPaymentFormLoading:f.isPaymentFormLoading,paidMessagesStars:d,areUniqueStarGiftsDisallowed:p,shouldDisallowLimitedStarGifts:h}}))((function({gift:e,giftByStars:t,peerId:a,peer:n,captionLimit:c,theme:d,isBackgroundBlurred:m,patternColor:p,backgroundColor:h,customBackground:f,currentUserId:A,isPaymentFormLoading:b,starBalance:S,paidMessagesStars:v,areUniqueStarGiftsDisallowed:N,shouldDisallowLimitedStarGifts:I}){const{sendStarGift:k,sendPremiumGiftByStars:Y,openInvoice:G,openGiftUpgradeModal:y,openStarsBalanceModal:w}=(0,i.ko)(),B=(0,F.A)(),[P,D]=(0,r.J0)(""),[M,T]=(0,r.J0)(!1),[x,R]=(0,r.J0)(!1),[U,L]=(0,r.J0)(!1),K=(0,_e.A)(d,f);(0,r.vJ)((()=>{I&&R(!0)}),[I,x]);const O="id"in e&&"starGift"===e.type,z="months"in e,E=t&&"amount"in t,V=n&&(0,s.mO)(n),H=a===A,J=(0,r.Kr)((()=>{if(z){const a=U&&E?t:e;return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"giftPremium",amount:a.amount,currency:a.currency,months:e.months,message:P?{text:P}:void 0}}}}if(O)return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"starGift",message:P?.length?{text:P}:void 0,isNameHidden:M||void 0,starsToConvert:e.starsToConvert,canUpgrade:x||void 0,alreadyPaidUpgradeStars:x?e.upgradeStars:void 0,gift:e,peerId:a,fromId:A}}}}),[A,e,P,O,M,x,a,U,E,t,z]),q=(0,u.A)((e=>{D(e.target.value)})),_=(0,u.A)((()=>{T(!M)})),W=(0,u.A)((()=>{R(!x)})),j=(0,u.A)((()=>{E&&L(!U)})),Q=(0,u.A)((()=>{O&&y({giftId:e.id,peerId:a})})),X=(0,u.A)((()=>{w({})})),$=(0,u.A)((()=>{O?k({peerId:a,shouldHideName:M,gift:e,message:P?{text:P}:void 0,shouldUpgrade:x}):U&&E?Y({userId:a,months:t.months,amount:t.amount,message:P?{text:P}:void 0}):z&&G({type:"giftcode",userIds:[a],currency:e.currency,amount:e.amount,option:e,message:P?{text:P}:void 0})})),Z=E&&S&&S.amount>t.amount,ee=(0,o.A)("ZORVRSG3","soDpW2YR",f&&"Eny_G3JI",h&&"TkJZPU2u",f&&m&&"M6k91TdM");if((O||z)&&J)return(0,C.FD)("div",{className:(0,o.A)("jKOG0It6","custom-scroll"),children:[(0,C.FD)("div",{className:(0,o.A)("CB1mxsgp","MessageList"),inert:!0,style:(0,Ae.A)(`--pattern-color: ${p}`,h&&`--theme-background-color: ${h}`),children:[(0,C.Y)("div",{className:ee,style:K?`--custom-background: ${K}`:void 0}),(0,C.Y)(je.A,{message:J,threadId:qe.l3,appearanceOrder:0},O?e.id:z?e.months:void 0)]}),function(){const a=c?c-P.length:void 0,r=(0,s.F9)(B,n);return(0,C.FD)("div",{className:"Y68CEIKn",children:[!v&&(0,C.Y)(Ze.A,{className:"o5r2IPoA",onChange:q,value:P,label:B("GiftMessagePlaceholder"),maxLength:c,maxLengthIndicator:a&&a<50?a.toString():void 0}),Z&&(0,C.FD)(Xe.A,{className:et,narrow:!0,ripple:!0,onClick:j,children:[(0,C.Y)("span",{children:B("GiftPremiumPayWithStars",{stars:(0,ce.U)(B,t.amount,{className:tt})},{withNodes:!0})}),(0,C.Y)($e.A,{checked:U,onChange:j,label:B("GiftPremiumPayWithStarsAcc")})]}),E&&S&&(0,C.Y)("div",{className:at,children:B("GiftPremiumDescriptionYourBalance",{stars:(0,ce.U)(B,S.amount,{className:tt}),link:(0,C.Y)(Qe.A,{isPrimary:!0,onClick:X,children:B("GetMoreStarsLinkText")})},{withNodes:!0,withMarkdown:!0})}),O&&Boolean(e.upgradeStars)&&!N&&(0,C.FD)(Xe.A,{className:et,narrow:!0,ripple:!0,onClick:W,disabled:I,children:[(0,C.Y)("span",{children:B("GiftMakeUnique",{stars:(0,ce.U)(B,e.upgradeStars,{className:tt})},{withNodes:!0})}),(0,C.Y)($e.A,{checked:x,onChange:W,label:B("GiftMakeUniqueAcc")})]}),O&&Boolean(e.upgradeStars)&&!N&&(0,C.Y)("div",{className:at,children:V?B("GiftMakeUniqueDescription",{user:r,link:(0,C.Y)(Qe.A,{isPrimary:!0,onClick:Q,children:B("GiftMakeUniqueLink")})},{withNodes:!0}):B("GiftMakeUniqueDescriptionChannel",{peer:r,link:(0,C.Y)(Qe.A,{isPrimary:!0,onClick:Q,children:B("GiftMakeUniqueLink")})},{withNodes:!0})}),O&&(0,C.FD)(Xe.A,{className:et,narrow:!0,ripple:!0,onClick:_,children:[(0,C.Y)("span",{children:B("GiftHideMyName")}),(0,C.Y)($e.A,{checked:M,onChange:_,label:B("GiftHideMyName")})]}),O&&(0,C.Y)("div",{className:at,children:H?B("GiftHideNameDescriptionSelf"):V?B("GiftHideNameDescription",{receiver:r}):B("GiftHideNameDescriptionChannel")})]})}(),(0,C.Y)("div",{className:"ATowWJ60"}),function(){const a=U&&E?(0,ce.U)(B,t.amount,{asFont:!0}):O?(0,ce.U)(B,e.stars+(x?e.upgradeStars:0),{asFont:!0}):z?(0,l.v)(B,e.amount,e.currency):void 0;return(0,C.FD)("div",{className:"jxWZSvet",children:[O&&Boolean(e.availabilityRemains)&&(0,C.Y)(We.A,{isPrimary:!0,progress:e.availabilityRemains/e.availabilityTotal,rightText:B("GiftSoldCount",{count:e.availabilityTotal-e.availabilityRemains}),leftText:B("GiftLeftCount",{count:e.availabilityRemains}),className:"mWzLu0c0"}),(0,C.Y)(g.A,{className:"IDuhjrne",size:"smaller",onClick:$,isLoading:b,children:B("GiftSend",{amount:a},{withNodes:!0})})]})}()]})})));var it=a(87049);const st="G1mBmzxs",nt="a8no5WH0",ot=(0,r.ph)((0,i.EK)(((e,{option:t})=>({sticker:(0,n.t0O)(e,t.months),canPlayAnimatedEmojis:(0,n.BWX)(e)})))((function({sticker:e,canPlayAnimatedEmojis:t,baseMonthAmount:a,option:r,optionByStars:i,onClick:s}){const{months:n,amount:o,currency:c}=r,d=(0,F.A)(),m=(0,u.A)((()=>{s(r)})),p=Math.floor(o/n),h=a&&a>p?Math.ceil(100-p/(a/100)):void 0;return(0,C.FD)("div",{className:st,tabIndex:0,role:"button",onClick:m,children:[(0,C.Y)(Q.A,{sticker:e,play:t,noLoop:!0,nonInteractive:!0,size:86}),function(){const e=12===n?d("Years",{count:1},{pluralValue:1}):d("Months",{count:n},{pluralValue:n});return(0,C.Y)("div",{className:"rn9aWFNA",children:e})}(),(0,C.Y)("div",{className:"q4_ydkAx",children:d("PremiumGiftDescription")}),(0,C.Y)(g.A,{className:nt,nonInteractive:!0,size:"tiny",pill:!0,fluid:!0,children:(0,l.A)(o,c)}),i&&(0,C.Y)("div",{className:"QB5SI7ta",children:d("GiftPremiumStarsPrice",{stars:(0,ce.U)(d,i.amount,{className:"jgnEfoeM"})},{withNodes:!0,withMarkdown:!0})}),Boolean(h)&&(0,C.Y)(it.A,{color:"purple",text:d("GiftDiscount",{percent:h})})]})})));var lt=a(82855);const ct=(0,r.ph)((function({gift:e,observeIntersection:t,onClick:a,isResale:s}){const{openGiftInfoModal:n}=(0,i.ko)(),l=(0,r.li)(),c=(0,r.li)(),d=(0,F.A)(),[m,p]=(0,r.J0)(!1),h=(0,_.yQ)(e),f="starGiftUnique"===e.type,A=f?e:void 0,b=f?void 0:e,S=f?A?.resellPriceInStars:b?.stars,v=b?.resellMinStars,N=!f&&s&&v?d.number(v)+"+":S,I=!f&&Boolean(b?.isLimited),k=!f&&Boolean(b?.isSoldOut),Y=(0,u.A)((()=>{!k||s?a(e,s?"resell":"original"):n({gift:e})})),G=(0,r.Kr)((()=>{const{backdrop:t,pattern:a}=(0,_.uc)(e)||{};if(!t||!a)return;const r=[t.centerColor,t.edgeColor],i=t.patternColor;return(0,C.Y)(X.A,{className:"Nkotr8Q4",backgroundColors:r,patternColor:i,patternIcon:a.sticker})}),[e]),y=f?e.number:0,w=(0,r.Kr)((()=>{if(f){const{backdrop:t}=(0,_.uc)(e)||{};if(!t)return;return(0,C.Y)(it.A,{color:[t.centerColor,t.edgeColor],text:d("GiftSavedNumber",{number:y})})}return s?(0,C.Y)(it.A,{color:"green",text:d("GiftRibbonResale")}):k?(0,C.Y)(it.A,{color:"red",text:d("GiftSoldOut")}):I?(0,C.Y)(it.A,{color:"blue",text:d("GiftLimited")}):void 0}),[f,s,e,k,I,d,y]);return(0,Je.mv)(l,t,(e=>{const t=e.isIntersecting;p(t)})),(0,C.FD)("div",{ref:l,className:(0,o.A)(st,"f5ArEO1S","starGiftItem"),tabIndex:0,role:"button",onClick:Y,children:[G,(0,C.Y)("div",{ref:c,className:"rUSoeQXb",style:"width: 90px; height: 90px",children:h&&(0,C.Y)(lt.A,{observeIntersectionForPlaying:t,observeIntersectionForLoading:t,containerRef:c,sticker:h,size:90,shouldPreloadPreview:!0})}),(0,C.Y)(g.A,{className:nt,nonInteractive:!0,size:"tiny",color:f?"bluredStarsBadge":"stars",withSparkleEffect:m,pill:!0,fluid:!0,children:(0,ce.U)(d,N||0,{asFont:!0,className:"DvJLTVFU"})}),w]})}));var dt=a(78376),ut=a(96374),mt=a(64489);const pt={root:"tJK1W0pJ",transition:"pP8TxefR",content:"o3V1HqbL",resaleScreenRoot:"Vce_TsJO",main:"cVXqeu9P",giftSection:"v4eKefwN",section:"EqfarEYb",resaleStarGiftsContainer:"RSFcSNGL",starGiftsContainer:"OQX3GZl5",premiumGiftsGallery:"n40m3BK2",header:"iqqoyRgW",resaleHeader:"cJRBgg9B",resaleHeaderContentContainer:"OXYQmfGK",headerSlide:"BTWhJUQB",headerText:"lLRmbpIu",hiddenHeader:"XgGzn1cQ",resaleHeaderText:"bp_KPx8I",commonHeaderText:"ybZo03if",resaleHeaderDescription:"XefHUFm1",closeButton:"r_Y5uG1T",balance:"soqAknia",avatars:"N_7tYJKr",logoBackground:"ieK4TzSb",center:"Ey5gX40t",description:"ZioU5h_k",starGiftsDescription:"gFgzS8pV",boostIcon:"Qi2YR6Dz",optionBottom:"RTbClMKE",secondaryInfo:"g0R9GSNq",footer:"J3Gju3bv",starGiftsTransition:"kB6IyXqS",notFoundGiftsRoot:"UqnRlJ1n",notFoundGiftsDescription:"g0VbwIG_",notFoundGiftsLink:"j2zPEQr8"},ht=(0,r.ph)((0,i.EK)((e=>{const{starGifts:t}=e,{resaleGifts:a}=(0,n.nTw)(e),r=a?.giftId?t?.byId[a.giftId]:void 0,i=a.filter,s=a.isAllLoaded,o=a.isLoading,l=a.updateIteration;return{resellGifts:a.gifts,gift:r,filter:i,areGiftsAllLoaded:s,areGiftsLoading:o,updateIteration:l}}))((({resellGifts:e,gift:t,filter:a,areGiftsAllLoaded:s,areGiftsLoading:n,updateIteration:l,onGiftClick:c})=>{const{loadResaleGifts:d,updateResaleGiftsFilter:m}=(0,i.ko)(),p=(0,r.li)(),h=(0,F.A)(),f=(0,r.Kr)((()=>e?.map((e=>e.id))),[e]),g=Boolean(a?.modelAttributes?.length||a?.patternAttributes?.length||a?.backdropAttributes?.length),A=(0,u.A)((()=>{t&&d({giftId:t.id})})),b=Boolean(!e||0===e.length),[S,v]=(0,ut.A)(A,f,!t,k.bcN),{observe:N}=(0,Je.BL)({rootRef:p,throttleMs:200}),I=(0,u.A)((()=>{m({filter:{...a,modelAttributes:[],backdropAttributes:[],patternAttributes:[]}})}));return(0,C.Y)("div",{ref:p,className:(0,o.A)(pt.resaleScreenRoot,"custom-scroll"),children:(0,C.FD)(x.Ay,{name:"zoomFade",activeKey:l,children:[b&&s&&(0,C.FD)("div",{className:pt.notFoundGiftsRoot,children:[(0,C.Y)(mt.A,{size:160,tgsUrl:dt.w.SearchingDuck,nonInteractive:!0,noLoop:!0}),(0,C.Y)("div",{className:pt.notFoundGiftsDescription,children:h("ResellGiftsNoFound")}),g&&(0,C.Y)(Qe.A,{className:pt.notFoundGiftsLink,onClick:I,children:h("ResellGiftsClearFilters")})]}),(0,C.Y)(M.A,{className:(0,o.A)(pt.resaleStarGiftsContainer),items:S,onLoadMore:v,itemSelector:".starGiftItem",noFastList:!0,preloadBackwards:k.bcN,scrollContainerClosest:`.${pt.resaleScreenRoot}`,children:e?.map((e=>(0,C.Y)(ct,{gift:e,observeIntersection:N,isResale:!0,onClick:c},e.id)))})]})})})));var ft=a(10722),gt=a(71429),At=a(36393),bt=a(76023),St=a(87094);const vt=1.5*bt.$,Nt=(0,r.ph)((0,i.EK)((e=>({theme:(0,n.SJA)(e)})))((({className:e,type:t,sticker:a,observeIntersectionForLoading:i,observeIntersectionForPlaying:s,theme:n})=>{const l=(0,r.li)(),c=(0,St.A)(l,void 0,"pattern"!==t);return(0,C.Y)("div",{ref:l,className:(0,o.A)("KLFLR9ji",e),style:`width: ${vt}px; height: ${vt}px`,children:(0,C.Y)(lt.A,{containerRef:l,sticker:a,size:vt,shouldPreloadPreview:!0,observeIntersectionForLoading:i,observeIntersectionForPlaying:s,thumbClassName:"fCL5rY2D",customColor:c})})}))),Ct={root:"_VgmQnUg",buttonsContainer:"IDlp6U6g",itemIcon:"yuctLnuR",sticker:"VT562JS0",backdropAttributeMenuItemText:"D50wFfRL",menuItemStickerText:"THcGWXSA",menuItemText:"L6EVE2Ux",backdrop:"A29QNxKb",menuItemIcon:"GL4rVsev",item:"qiYcBOYc",menuContentContainer:"EDsBn29z",menu:"ISaNdBwd",left:"e4Kkh_MR",right:"Kz_nCGC3"},It=(0,r.ph)((0,i.EK)((e=>{const{resaleGifts:t}=(0,n.nTw)(e);return{attributes:t.attributes,counters:t.counters,filter:t.filter}}))((({attributes:e,counters:t,filter:a,dialogRef:s})=>{const n=(0,F.A)(),{updateResaleGiftsFilter:l}=(0,i.ko)(),[c,d]=(0,r.J0)(""),[m,p]=(0,r.J0)(""),[f,g]=(0,r.J0)(""),A=(0,r.Kr)((()=>{const a={model:[],pattern:[],backdrop:[]};for(const r of t??[]){const{attribute:t}=r;if(!r.count)continue;const i=e?.find((e=>"backdrop"===e.type&&"backdrop"===t.type?e.backdropId===t.backdropId:("model"===e.type&&"model"===t.type||"pattern"===e.type&&"pattern"===t.type)&&e.sticker.id===t.documentId));"backdrop"===i?.type&&a.backdrop.push(i),"model"===i?.type&&a.model.push(i),"pattern"===i?.type&&a.pattern.push(i)}return a}),[e,t]),b=(0,r.Kr)((()=>{const e=(e,t)=>t.trim()?e.filter((e=>Boolean(e.name?.toLowerCase().includes(t.toLowerCase())))):e;return{model:e(A.model,c),pattern:e(A.pattern,f),backdrop:e(A.backdrop,m)}}),[A,c,m,f]),S=(0,r.li)(),{isContextMenuOpen:v,contextMenuAnchor:N,handleContextMenu:I,handleContextMenuClose:k,handleContextMenuHide:Y}=(0,ft.A)(s),G=(0,u.A)((()=>S.current)),y=(0,r.li)(),{isContextMenuOpen:w,contextMenuAnchor:B,handleContextMenu:P,handleContextMenuClose:D,handleContextMenuHide:M}=(0,ft.A)(s),T=(0,u.A)((()=>y.current)),x=(0,r.li)(),{isContextMenuOpen:R,contextMenuAnchor:U,handleContextMenu:L,handleContextMenuClose:K,handleContextMenuHide:O}=(0,ft.A)(s),z=(0,u.A)((()=>x.current)),E=(0,r.li)(),{isContextMenuOpen:V,contextMenuAnchor:H,handleContextMenu:J,handleContextMenuClose:q,handleContextMenuHide:_}=(0,ft.A)(s),W=(0,u.A)((()=>E.current)),j=(0,r.Kr)((()=>{const e=a.sortType;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:Ct.item,onClick:t,children:["byDate"===e&&n("ValueGiftSortByDate"),"byNumber"===e&&n("ValueGiftSortByNumber"),"byPrice"===e&&n("ValueGiftSortByPrice"),(0,C.Y)(h.A,{name:"dropdown-arrows",className:Ct.itemIcon})]})}),[n,a]),Q=(0,r.Kr)((()=>{const e=a?.modelAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:Ct.item,onClick:t,children:[0===e&&n("GiftAttributeModel"),e>0&&n("GiftAttributeModelPlural",{count:e},{pluralValue:e}),(0,C.Y)(h.A,{name:"dropdown-arrows",className:Ct.itemIcon})]})}),[n,a]),$=(0,r.Kr)((()=>{const e=a?.backdropAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:Ct.item,onClick:t,children:[0===e&&n("GiftAttributeBackdrop"),e>0&&n("GiftAttributeBackdropPlural",{count:e},{pluralValue:e}),(0,C.Y)(h.A,{name:"dropdown-arrows",className:Ct.itemIcon})]})}),[n,a]),Z=(0,r.Kr)((()=>{const e=a?.patternAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:Ct.item,onClick:t,children:[0===e&&n("GiftAttributeSymbol"),e>0&&n("GiftAttributeSymbolPlural",{count:e},{pluralValue:e}),(0,C.Y)(h.A,{name:"dropdown-arrows",className:Ct.itemIcon})]})}),[n,a]),ee=(0,u.A)((e=>{l({filter:{...a,sortType:e}})})),te=(0,u.A)((()=>{l({filter:{...a,modelAttributes:[]}})})),ae=(0,u.A)((()=>{l({filter:{...a,patternAttributes:[]}})})),re=(0,u.A)((()=>{l({filter:{...a,backdropAttributes:[]}})})),ie=(0,u.A)((e=>{if(!t)return;const r=a.modelAttributes||[],i=t.find((t=>"model"===t.attribute.type&&t.attribute.documentId===e.sticker.id))?.attribute;if(!i)return;const s=r.some((e=>e.documentId===i.documentId))?r.filter((e=>e.documentId!==i.documentId)):[...r,i];l({filter:{...a,modelAttributes:s}})})),se=(0,u.A)((e=>{if(!t)return;const r=a.patternAttributes||[],i=t.find((t=>"pattern"===t.attribute.type&&t.attribute.documentId===e.sticker.id))?.attribute;if(!i)return;const s=r.some((e=>e.documentId===i.documentId))?r.filter((e=>e.documentId!==i.documentId)):[...r,i];l({filter:{...a,patternAttributes:s}})})),ne=(0,u.A)((e=>{if(!t)return;const r=a.backdropAttributes||[],i=t.find((t=>"backdrop"===t.attribute.type&&t.attribute.backdropId===e.backdropId))?.attribute;if(!i)return;const s=r.some((e=>e.backdropId===i.backdropId))?r.filter((e=>e.backdropId!==i.backdropId)):[...r,i];l({filter:{...a,backdropAttributes:s}})})),oe=(0,r.hb)((()=>{d("")}),[]),le=(0,r.hb)((()=>{p("")}),[]),ce=(0,r.hb)((()=>{g("")}),[]),de=(0,u.A)((e=>{e.stopPropagation(),e.preventDefault()})),ue=(0,r.li)(),{observe:me}=(0,Je.BL)({rootRef:ue,isDisabled:!B});return(0,C.FD)("div",{className:Ct.root,children:[Boolean(N)&&(0,C.Y)(gt.A,{isOpen:v,anchor:N,ref:S,className:(0,o.A)(Ct.menu,Ct.left,"with-menu-transitions"),getMenuElement:G,autoClose:!0,onClose:k,onCloseAnimationEnd:Y,positionX:"left",children:(0,C.FD)(C.FK,{children:[(0,C.FD)(Be.A,{icon:"sort-by-price",onClick:()=>{ee("byPrice")},children:[(0,C.Y)("div",{className:Ct.menuItemText,children:n("GiftSortByPrice")}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:"byPrice"===a?.sortType?"check":"placeholder"})]}),(0,C.FD)(Be.A,{icon:"sort-by-date",onClick:()=>{ee("byDate")},children:[(0,C.Y)("div",{className:Ct.menuItemText,children:n("GiftSortByDate")}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:"byDate"===a?.sortType?"check":"placeholder"})]}),(0,C.FD)(Be.A,{icon:"sort-by-number",onClick:()=>{ee("byNumber")},children:[(0,C.Y)("div",{className:Ct.menuItemText,children:n("GiftSortByNumber")}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:"byNumber"===a?.sortType?"check":"placeholder"})]})]})}),Boolean(B)&&(0,C.Y)(gt.A,{isOpen:w,anchor:B,ref:y,className:(0,o.A)(Ct.menu,Ct.left,"with-menu-transitions"),getMenuElement:T,autoClose:!0,onClose:D,onCloseAnimationEnd:M,children:function(){const e=b.model,t=a.modelAttributes??[],r=0===t.length;return(0,C.FD)("div",{className:Ct.menuContentContainer,ref:ue,children:[(0,C.Y)(At.A,{onClick:de,className:Ct.search,value:c,onChange:d,onReset:oe,placeholder:n("Search")}),(0,C.Y)(Be.A,{icon:"select",onClick:te,disabled:r,children:n("ContextMenuItemSelectAll")}),e.map((e=>{const a=r||t.some((t=>t.documentId===e.sticker.id));return(0,C.FD)(Be.A,{onClick:()=>{ie(e)},children:[(0,C.Y)(Nt,{className:Ct.sticker,sticker:e.sticker,type:"model",observeIntersectionForLoading:me,observeIntersectionForPlaying:me}),(0,C.Y)("div",{className:Ct.menuItemStickerText,children:e.name}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:a?"check":"placeholder"})]},e.name)}))]})}()}),Boolean(U)&&(0,C.Y)(gt.A,{isOpen:R,anchor:U,ref:x,className:(0,o.A)(Ct.menu,Ct.right,"with-menu-transitions"),getMenuElement:z,autoClose:!0,onClose:K,onCloseAnimationEnd:O,positionX:"right",children:function(){const e=b.backdrop,t=a.backdropAttributes??[],r=0===t.length;return(0,C.FD)("div",{className:Ct.menuContentContainer,children:[(0,C.Y)(At.A,{onClick:de,className:Ct.search,value:m,onChange:p,onReset:le,placeholder:n("Search")}),(0,C.Y)(Be.A,{icon:"select",onClick:re,disabled:r,children:n("ContextMenuItemSelectAll")}),e.map((e=>{const a=r||t.some((t=>t.backdropId===e.backdropId));return(0,C.FD)(Be.A,{onClick:()=>{ne(e)},children:[(0,C.Y)(X.A,{className:Ct.backdrop,backgroundColors:[e.centerColor,e.edgeColor],patternColor:e.patternColor}),(0,C.Y)("div",{className:Ct.backdropAttributeMenuItemText,children:e.name}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:a?"check":"placeholder"})]},e.name)}))]})}()}),Boolean(H)&&(0,C.Y)(gt.A,{isOpen:V,anchor:H,ref:E,className:(0,o.A)(Ct.menu,Ct.right,"with-menu-transitions"),getMenuElement:W,autoClose:!0,onClose:q,onCloseAnimationEnd:_,children:function(){const e=b.pattern,t=a.patternAttributes??[],r=0===t.length;return(0,C.FD)("div",{className:Ct.menuContentContainer,children:[(0,C.Y)(At.A,{onClick:de,className:Ct.search,value:f,onChange:g,onReset:ce,placeholder:n("Search")}),(0,C.Y)(Be.A,{icon:"select",onClick:ae,disabled:r,children:n("ContextMenuItemSelectAll")}),e.map((e=>{const a=r||t.some((t=>t.documentId===e.sticker.id));return(0,C.FD)(Be.A,{onClick:()=>{se(e)},children:[(0,C.Y)(Nt,{className:Ct.sticker,sticker:e.sticker,type:"pattern"}),(0,C.Y)("div",{className:Ct.menuItemStickerText,children:e.name}),(0,C.Y)(h.A,{className:Ct.menuItemIcon,name:a?"check":"placeholder"})]},e.name)}))]})}()}),(0,C.FD)("div",{className:Ct.buttonsContainer,children:[(0,C.Y)(j,{onTrigger:I,isOpen:v}),(0,C.Y)(Q,{onTrigger:P,isOpen:w}),(0,C.Y)($,{onTrigger:L,isOpen:R}),(0,C.Y)(Z,{onTrigger:J,isOpen:V})]})]})})));var kt=a(36838);const Yt=(0,r.ph)((0,i.EK)((e=>{const{starGifts:t}=e;return{idsByCategory:t?.idsByCategory}}))((({idsByCategory:e,onCategoryChanged:t,areLimitedStarGiftsDisallowed:a})=>{const i=(0,r.li)(),s=(0,F.A)(),n=(0,r.Kr)((()=>e&&Object.keys(e).filter((e=>"all"!==e&&"limited"!==e)).map(Number).sort(((e,t)=>e-t))),[e]),l=e&&e.resale.length>0,[c,d]=(0,r.J0)("all");function u(e){return"all"===e?s("AllGiftsCategory"):"stock"===e?s("StockGiftsCategory"):"limited"===e?s("LimitedGiftsCategory"):"resale"===e?s("GiftCategoryResale"):e}function m(e){return(0,C.FD)("div",{className:(0,o.A)("dO7FKYY4",c===e&&"B2lEJk1v"),onClick:()=>function(e){d(e),t(e)}(e),children:[Number.isInteger(e)&&(0,C.Y)(L.A,{className:"Pb7AU805",type:"gold",size:"middle"}),u(e)]})}return(0,kt.A)(i,void 0,!0),(0,C.FD)("div",{ref:i,className:(0,o.A)("cUjwvN00","no-scrollbar"),children:[m("all"),!a&&m("limited"),!a&&l&&m("resale"),m("stock"),n?.map(m)]})}))),Gt=(0,He.nF)((e=>e()),200,!0),yt=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const{starGifts:a,stars:r,currentUserId:i}=e,s=t?.forPeerId?(0,n.PVB)(e,t.forPeerId):void 0,o=Boolean(i&&t?.forPeerId===i),l=s?(0,n.vGo)(e,s?.id):void 0,{resaleGifts:c}=(0,n.nTw)(e),d=c.count,u=!1!==c.isLoading;return{boostPerSentGift:e.appConfig?.boostsPerSentGift,starGiftsById:a?.byId,starGiftIdsByCategory:a?.idsByCategory,starBalance:r?.balance,peer:s,isSelf:o,disallowedGifts:l?.disallowedGifts,resaleGiftsCount:d,areResaleGiftsLoading:u}}))((({modal:e,starGiftsById:t,starGiftIdsByCategory:a,starBalance:n,peer:l,isSelf:c,disallowedGifts:h,resaleGiftsCount:b,areResaleGiftsLoading:S})=>{const{closeGiftModal:v,openGiftInfoModal:I,resetResaleGifts:G,loadResaleGifts:y}=(0,i.ko)(),w=(0,r.li)(),B=(0,r.li)(),P=(0,r.li)(),D=(0,r.li)(),M=Boolean(e),T=(0,d.A)(e),R=l&&(0,s.mO)(l)?l:void 0,U=l&&(0,s.vj)(l)?l:void 0,[L,K]=(0,r.J0)(),[z,E]=(0,r.J0)(),[V,H]=(0,r.J0)(!1),[J,q]=(0,r.J0)(!1),[_,W]=(0,r.J0)(!1),[j,Q]=(0,r.J0)("all"),X=(0,r.Kr)((()=>{if(!h)return;const{shouldDisallowPremiumGifts:e,...t}=h;return!c&&Object.values(t).every(Boolean)}),[c,h]),$=!c&&h?.shouldDisallowUnlimitedStarGifts,Z=!c&&h?.shouldDisallowLimitedStarGifts,ee=(0,m.A)(),te=(0,F.A)(),ae=T?.gifts,re=(0,r.Kr)((()=>ae?.sort(((e,t)=>e.months-t.months)).filter((e=>1===e.users&&"XTR"!==e.currency))),[ae]),ie=(0,r.Kr)((()=>{const e=new Map;return re?(re.forEach((t=>{const a=ae?.find((e=>e.currency===k.OUy&&e.months===t.months));a&&e.set(t,a)})),e):e}),[ae,re]),se=(0,r.Kr)((()=>re?.reduce(((e,t)=>e.amount<t.amount?e:t))),[re]),{observe:ne}=(0,Je.BL)({rootRef:D,throttleMs:200,isDisabled:!M}),oe=Boolean(z)&&!L,le=Boolean(L),ce=oe||le||V,de=le?_:J;(0,r.vJ)((()=>{z&&y({giftId:z.id})}),[z]),(0,r.vJ)((()=>{M||(H(!1),K(void 0),E(void 0),Q("all"))}),[M]);const ue=(0,u.A)((e=>{if(le)return;const t=e.currentTarget;Gt((()=>{const{scrollTop:e}=t;if(H(e>150),B.current&&P.current){const{top:e}=P.current.getBoundingClientRect(),{top:t}=B.current.getBoundingClientRect();q(e-t<=0)}}))})),me=te("GiftPremiumDescription",{user:(0,Y.Yg)(R),link:(0,C.Y)(f.A,{text:te("GiftPremiumDescriptionLinkCaption"),url:te("GiftPremiumDescriptionLink")})},{withNodes:!0}),pe=U?te("StarGiftDescriptionChannel",{peer:(0,s.F9)(te,U)},{withNodes:!0,withMarkdown:!0}):c?te("StarGiftDescriptionSelf",void 0,{withNodes:!0,renderTextFilters:["br"]}):te("StarGiftDescription",{user:(0,Y.Yg)(R)},{withNodes:!0,withMarkdown:!0}),he=(0,u.A)(((e,t)=>{if("resell"===t){if(!("id"in e))return;return oe?void I({gift:e,recipientId:T?.forPeerId}):void E(e)}K(e),W("id"in e)}));const fe=(0,u.A)((e=>{Q(e)})),ge=(0,u.A)((()=>{K(void 0),E(void 0),G(),v()})),Ae=(0,u.A)((()=>{if(oe)return E(void 0),void G();le?K(void 0):ge()})),be=le||oe,Se=(0,o.A)("animated-close-icon",be&&"state-back");return(0,C.FD)(A.A,{dialogRef:w,onClose:ge,isOpen:M,isSlim:!0,contentClassName:pt.content,className:(0,o.A)(pt.modalDialog,pt.root),isLowStackPriority:!0,children:[(0,C.Y)(g.A,{className:pt.closeButton,round:!0,color:"translucent",size:"smaller",onClick:Ae,ariaLabel:ee(be?"Common.Back":"Common.Close"),children:(0,C.Y)("div",{className:Se})}),(0,C.Y)(O,{className:pt.balance,balance:n,withAddButton:!0}),(0,C.Y)("div",{className:(0,o.A)(pt.header,oe&&pt.resaleHeader,!ce&&pt.hiddenHeader),children:(0,C.Y)(x.Ay,{name:"slideVerticalFade",activeKey:ce?oe?1:de?2:3:0,slideClassName:pt.headerSlide,children:function(){if(ce){if(oe){const e=S&&!b;return(0,C.FD)("div",{className:pt.resaleHeaderContentContainer,children:[(0,C.Y)("h2",{className:pt.resaleHeaderText,children:z.title}),e&&(0,C.Y)("div",{className:pt.resaleHeaderDescription,children:te("Loading")}),!e&&void 0!==b&&(0,C.Y)("div",{className:pt.resaleHeaderDescription,children:te("HeaderDescriptionResaleGifts",{count:b},{withNodes:!0,withMarkdown:!0,pluralValue:b})}),(0,C.Y)(It,{dialogRef:w})]})}return(0,C.Y)("h2",{className:pt.commonHeaderText,children:te(de?c?"StarsGiftHeaderSelf":"StarsGiftHeader":"GiftPremiumHeader")})}}()})}),(0,C.FD)(x.Ay,{ref:B,className:pt.transition,name:"pushSlide",activeKey:le?1:oe?2:0,children:[!le&&!oe&&(0,C.FD)("div",{ref:D,className:(0,o.A)(pt.main,"custom-scroll"),onScroll:ue,children:[(0,C.FD)("div",{className:pt.avatars,children:[(0,C.Y)(p.A,{size:100,peer:l}),(0,C.Y)("img",{className:pt.logoBackground,src:N,alt:"",draggable:!1})]}),!c&&!U&&!h?.shouldDisallowPremiumGifts&&(0,C.FD)(C.FK,{children:[(0,C.Y)("h2",{className:(0,o.A)(pt.headerText,pt.center),children:te("GiftPremiumHeader")}),(0,C.Y)("p",{className:(0,o.A)(pt.description,pt.center),children:me}),(0,C.Y)("div",{className:pt.premiumGiftsGallery,children:re?.map((e=>(0,C.Y)(ot,{option:e,optionByStars:ie.get(e),baseMonthAmount:se?Math.floor(se.amount/se.months):void 0,onClick:he})))})]}),!X&&(0,C.FD)(C.FK,{children:[(0,C.Y)("h2",{ref:P,className:(0,o.A)(pt.headerText,pt.center),children:te(c?"StarsGiftHeaderSelf":"StarsGiftHeader")}),(0,C.Y)("p",{className:(0,o.A)(pt.description,pt.starGiftsDescription,pt.center),children:pe}),(0,C.Y)(Yt,{areLimitedStarGiftsDisallowed:Z,onCategoryChanged:fe}),(0,C.Y)(x.Ay,{name:"zoomFade",activeKey:(ve=j,"all"===ve?0:"limited"===ve?1:"resale"===ve?2:"stock"===ve?3:ve+3),className:pt.starGiftsTransition,children:function(){const e=a?.[j]?.filter((e=>{const a=t?.[e];if(!a)return!1;const{isLimited:r,isSoldOut:i,upgradeStars:s}=a;return $&&!Z?r:Z&&!$?!r&&!i:!$||!Z||Boolean(r&&Boolean(s))}));return(0,C.Y)("div",{className:pt.starGiftsContainer,children:t&&e?.flatMap((e=>{const a=t[e],r="stock"!==j&&Boolean(a.availabilityResale),i="resale"!==j&&r&&!a.isSoldOut,s=[(0,C.Y)(ct,{gift:a,observeIntersection:ne,isResale:r&&!i,onClick:he},e)];return i&&s.push((0,C.Y)(ct,{isResale:!0,gift:a,observeIntersection:ne,onClick:he},`resale_${e}`)),s}))})}()})]})]}),oe&&z&&(0,C.Y)(ht,{onGiftClick:he}),le&&T?.forPeerId&&(0,C.Y)(rt,{gift:L,giftByStars:ie.get(L),peerId:T.forPeerId})]})]});var ve})));const wt=(0,r.ph)((0,i.EK)((e=>{const{currentUserId:t}=e;return{currentUserId:t,userIds:e.contactList?.userIds}}))((({modal:e,currentUserId:t,userIds:a})=>{const{closeGiftRecipientPicker:o,openGiftModal:l}=(0,i.ko)(),c=(0,m.A)(),d=e,[p,h]=(0,r.J0)(""),f=(0,r.Kr)((()=>{const e=(0,i.mS)(),r=a?a.concat(t):void 0,o=r?(0,s.PU)({ids:r,query:p}):[];return(0,y.A)((0,G.Am)(o).filter((t=>(0,n.X2D)(e,t))),void 0,[t])}),[t,p,a]),g=(0,u.A)((e=>{l({forUserId:e}),o()}));return(0,C.Y)(B.A,{className:"W3JMs1YE",isOpen:d,onClose:o,title:c("GiftTelegramPremiumOrStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,children:(0,C.Y)(w.A,{className:"wOipz1Y_",itemIds:f,filterValue:p,filterPlaceholder:c("Search"),onSelectedIdChange:g,onFilterChange:h,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,forceShowSelf:!0})})})));var Bt=a(80140),Pt=a(18501),Dt=a(25404);const Ft={root:"Ef0cKSqQ",giftPreview:"IvuNzslN",backdrop:"dNukis4X",arrow:"oufsMLLF"},Mt=4*bt.$,Tt=3*bt.$,xt=(0,r.ph)((({peer:e,gift:t})=>{const a=(0,r.Kr)((()=>(0,_.uc)(t)),[t]);if(a)return(0,C.FD)("div",{className:Ft.root,children:[(0,C.FD)("div",{className:Ft.giftPreview,children:[(0,C.Y)(X.A,{className:Ft.backdrop,backgroundColors:[a.backdrop.centerColor,a.backdrop.edgeColor],patternColor:a.backdrop?.patternColor,patternIcon:a.pattern?.sticker}),(0,C.Y)(Q.A,{className:Ft.sticker,size:Tt,sticker:a.model?.sticker})]}),(0,C.Y)(h.A,{name:"next",className:Ft.arrow}),(0,C.Y)(p.A,{peer:e,size:Mt,className:Ft.avatar})]})}));var Rt=a(94189);const Ut={modal:"nnublcCk",header:"p7FTs7_p",title:"pIbzzTir",description:"CCPfr26t",soldOut:"kjWcRp4W",headerSplitButton:"XOMI_4PO",headerButton:"WA0INleU",giftResalePriceContainer:"BN8gf5y6",starAmountIcon:"_5guecUe",giftResalePriceStar:"H_q8o2vY",left:"aOhTHZlf",right:"rJOB1u5Q",footer:"bho0GTYt",footerDescription:"VUylTszM",unknown:"zDauXmpS",giftValue:"w_E4LkUj",uniqueAttribute:"OJQnkf17",uniqueGift:"I6o_pGAm",modalHeader:"ie9tImaj",modalCloseButton:"p38RBGdC",ownerAddress:"DavMRg4Q",copyIcon:"SLX5tX8C"},Lt=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a=t?.gift,r=a&&"gift"in a,i=e.currentUserId,o=r&&a.fromId,l=o?(0,n.PVB)(e,o):void 0,c=t?.peerId?(0,n.PVB)(e,t.peerId):void 0,d=c&&(0,s.vj)(c)?c:void 0,u=d&&(0,Y.ub)(d,"postMessages"),m=(0,n.mBe)(e,i),p=t?.recipientId&&i!==t.recipientId?(0,n.PVB)(e,t.recipientId):void 0,h=m?.emojiStatus,f=e.collectibleEmojiStatuses?.statuses;return{fromPeer:l,targetPeer:c,currentUserId:i,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod,tonExplorerUrl:e.appConfig?.tonExplorerUrl,hasAdminRights:u,currentUserEmojiStatus:h,collectibleEmojiStatuses:f,currentUser:m,recipientPeer:p}}))((({modal:e,fromPeer:t,targetPeer:a,currentUserId:l,starGiftMaxConvertPeriod:c,hasAdminRights:A,currentUserEmojiStatus:b,collectibleEmojiStatuses:S,tonExplorerUrl:v,currentUser:N,recipientPeer:I})=>{const{closeGiftInfoModal:k,changeGiftVisibility:Y,convertGiftToStars:G,openChatWithInfo:y,focusMessage:w,openGiftUpgradeModal:B,showNotification:P,buyStarGift:M,closeGiftModal:T}=(0,i.ko)(),[x,R,L]=(0,D.A)(),K=(0,F.A)(),O=(0,m.A)(),[V,H]=(0,r.J0)(!1),J=Boolean(e),W=(0,d.A)(e),j=(0,d.A)(t),X=(0,d.A)(a),$=X&&(0,s.vj)(X),{gift:Z}=W||{},ee=Z&&"gift"in Z,te=ee?Z:void 0,ae=te?.fromId===l,re=te&&c&&te.date+c-(0,Bt.Fm)()||0,ie=Math.ceil(re/60/60/24),se=ee?Z.gift:Z,ne=se&&(0,_.yQ)(se),oe=re>0&&Boolean(te?.starsToConvert),le=se&&"starGiftUnique"===se.type,de=le?se:void 0,ue=Boolean(te?.upgradeMsgId),me=!ue&&te?.inputGift&&($?A:X?.id===l),pe=le?se.resellPriceInStars:void 0,he=!me&&Boolean(pe),Ae=(()=>{if(!le)return;const{ownerName:e,ownerId:t}=se,a=(0,i.mS)(),r=t?(0,n.PVB)(a,t):void 0;return r?(0,s.F9)(K,r):e})(),Se=(0,u.A)((()=>{k()})),ve=(0,u.A)((()=>{const e=ae?X:j;if(!te?.upgradeMsgId||!e)return;const{upgradeMsgId:t}=te;w({chatId:e.id,messageId:t}),Se()})),Ne=(0,u.A)((()=>{const{inputGift:e,isUnsaved:t}=te;Y({gift:e,shouldUnsave:!t}),Se()})),Ce=(0,u.A)((()=>{const{inputGift:e}=te;G({gift:e}),L(),Se()})),Ie=(0,u.A)((()=>{te&&B({giftId:te.gift.id,gift:te})})),ke=(0,u.A)((()=>{"starGiftUnique"===se?.type&&se.resellPriceInStars&&H(!0)})),Ye=(0,u.A)((()=>{H(!1)})),Ge=(0,u.A)((()=>{const e=I||N;e&&"starGiftUnique"===se?.type&&se.resellPriceInStars&&(Ye(),T(),M({peerId:e.id,slug:se.slug,stars:se.resellPriceInStars}))})),ye=(0,r.Kr)((()=>se&&(0,_.uc)(se)),[se]),Be=(0,r.Kr)((()=>({onTrigger:e})=>(0,C.Y)("div",{className:(0,o.A)(Ut.headerButton,Ut.left),tabIndex:0,role:"button","aria-haspopup":"menu","aria-label":K("AriaMoreButton"),onClick:e,children:(0,C.Y)(h.A,{name:"more",className:Ut.icon})})),[K]),Pe=(0,u.A)((()=>he?(0,C.Y)(g.A,{noForcedUpperCase:!0,size:"smaller",onClick:ke,children:K("ButtonBuyGift",{stars:(0,ce.U)(K,pe,{asFont:!0})},{withNodes:!0})}):ue?(0,C.Y)(g.A,{size:"smaller",onClick:ve,children:K("GiftInfoViewUpgraded")}):me&&te?.alreadyPaidUpgradeStars&&!te.upgradeMsgId?(0,C.Y)(g.A,{size:"smaller",isShiny:!0,onClick:Ie,children:K("GiftInfoUpgradeForFree")}):(0,C.Y)(g.A,{size:"smaller",onClick:Se,children:K("OK")}))),De=(0,r.Kr)((()=>{if(!se)return;let e="";return"starGift"===se.type&&(se.firstSaleDate&&(e+=`${K("GiftInfoFirstSale")} ${(0,z.L2)(1e3*se.firstSaleDate,K.code,!0)}`),se.lastSaleDate&&(e+="\n",e+=`${K("GiftInfoLastSale")} ${(0,z.L2)(1e3*se.lastSaleDate,K.code,!0)}`)),e}),[se,K]),Fe=(0,r.Kr)((()=>{if(!Z||!se)return;const{fromId:e,isNameHidden:t,starsToConvert:a,isUnsaved:r,isConverted:l,upgradeMsgId:c}=te||{},d=oe&&Boolean(a),u=t&&X,m=(()=>{if(!te)return K("GiftInfoSoldOutDescription");if(!$){if(te.upgradeMsgId)return K("GiftInfoDescriptionUpgraded");if(te.canUpgrade&&te.alreadyPaidUpgradeStars)return me?K("GiftInfoDescriptionFreeUpgrade"):K("GiftInfoPeerDescriptionFreeUpgradeOut",{peer:(0,s.F9)(K,X)});if(me||ae)return l&&d?me?K("GiftInfoDescriptionConverted",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):K("GiftInfoPeerDescriptionOutConverted",{amount:a,peer:(0,s.F9)(K,X)},{pluralValue:a,withNodes:!0,withMarkdown:!0}):te.canUpgrade&&me?d?K("GiftInfoDescriptionUpgrade",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):K("GiftInfoDescriptionUpgradeRegular"):me?d?K("GiftInfoDescription",{amount:a},{withNodes:!0,withMarkdown:!0,pluralValue:a}):K("GiftInfoDescriptionRegular"):d?K("GiftInfoPeerDescriptionOut",{amount:a,peer:(0,s.F9)(K,X)},{withNodes:!0,withMarkdown:!0,pluralValue:a}):K("GiftInfoPeerDescriptionOutRegular",{peer:(0,s.F9)(K,X)})}})(),g=(0,C.Y)(we.A,{className:"with-menu-transitions",trigger:Be,positionX:"right",children:(0,C.Y)(Dt.A,{peerId:W.peerId,gift:Z,canManage:me,collectibleEmojiStatuses:S,currentUserEmojiStatus:b})}),A=(0,C.FD)("div",{className:Ut.modalHeader,children:[Boolean(me&&pe)&&(0,C.Y)("div",{className:Ut.giftResalePriceContainer,children:(0,ce.U)(K,pe,{asFont:!0,className:Ut.giftResalePriceStar})}),(0,C.FD)("div",{className:Ut.headerSplitButton,children:[J&&g,(0,C.Y)("div",{className:(0,o.A)(Ut.headerButton,Ut.right),tabIndex:0,role:"button","aria-haspopup":"menu","aria-label":K("Close"),onClick:Se,children:(0,C.Y)(h.A,{name:"close",className:(0,o.A)(Ut.icon,Ut.moreIcon)})})]})]}),N=le&&(0,C.Y)("div",{className:(0,o.A)(Ut.header,Ut.uniqueGift),children:(0,C.Y)(be,{backdropAttribute:ye.backdrop,patternAttribute:ye.pattern,modelAttribute:ye.model,title:se.title,subtitle:K("GiftInfoCollectible",{number:se.number})})}),I=(0,C.FD)("div",{className:Ut.header,children:[(0,C.Y)(Q.A,{className:Ut.giftSticker,sticker:ne,size:120}),(0,C.Y)("h1",{className:Ut.title,children:le?se.title:K(te?me?"GiftInfoReceived":"GiftInfoTitle":"GiftInfoSoldOutTitle")}),Boolean(m)&&(0,C.Y)("p",{className:(0,o.A)(Ut.description,!te&&"starGift"===se?.type&&Ut.soldOut),children:m})]}),Y=[];if("starGift"===se.type){(e||t)&&Y.push([K("GiftInfoFrom"),e?{chatId:e}:(0,C.FD)(C.FK,{children:[(0,C.Y)(p.A,{size:"small",peer:q.I5}),(0,C.Y)("span",{className:Ut.unknown,children:O(q.I5.titleKey)})]})]),te?.date&&Y.push([K("GiftInfoDate"),(0,C.Y)("span",{title:De,children:(0,z.L2)(1e3*te.date,K.code,!0)})]),se.firstSaleDate&&!te&&Y.push([K("GiftInfoFirstSale"),(0,z.L2)(1e3*se.firstSaleDate,K.code,!0)]),se.lastSaleDate&&!te&&Y.push([K("GiftInfoLastSale"),(0,z.L2)(1e3*se.lastSaleDate,K.code,!0)]);const r=se.stars+(te?.alreadyPaidUpgradeStars||0);Y.push([K("GiftInfoValue"),(0,C.FD)("div",{className:Ut.giftValue,children:[(0,ce.U)(K,r,{className:Ut.starAmountIcon}),me&&oe&&Boolean(a)&&(0,C.Y)(U.A,{onClick:R,children:K("GiftInfoConvert",{amount:a},{pluralValue:a})})]})]),se.availabilityTotal&&Y.push([K("GiftInfoAvailability"),K("GiftInfoAvailabilityValue",{count:se.availabilityRemains||0,total:se.availabilityTotal},{pluralValue:se.availabilityRemains||0})]),se.upgradeStars&&!c&&Y.push([K("GiftInfoStatus"),(0,C.FD)("div",{className:Ut.giftValue,children:[K("GiftInfoStatusNonUnique"),me&&(0,C.Y)(U.A,{onClick:Ie,children:K("GiftInfoUpgradeBadge")})]})]),te?.message&&Y.push([void 0,(0,Pt.fd)(te.message)])}if(le){const{ownerName:e,ownerAddress:t,ownerId:a}=se,{model:r,backdrop:o,pattern:l,originalDetails:c}=ye||{};if(t?Y.push([K("GiftInfoOwner"),(0,C.FD)("span",{className:Ut.ownerAddress,onClick:()=>{(0,fe.eM)(t),P({message:{key:"WalletAddressCopied"},icon:"copy"})},children:[t,(0,C.Y)(h.A,{className:Ut.copyIcon,name:"copy"})]})]):Y.push([K("GiftInfoOwner"),a?{chatId:a,withEmojiStatus:!0}:e||""]),r&&Y.push([K("GiftAttributeModel"),(0,C.FD)("span",{className:Ut.uniqueAttribute,children:[r.name,(0,C.Y)(U.A,{children:(0,E.l9)(r.rarityPercent)})]})]),o&&Y.push([K("GiftAttributeBackdrop"),(0,C.FD)("span",{className:Ut.uniqueAttribute,children:[o.name,(0,C.Y)(U.A,{children:(0,E.l9)(o.rarityPercent)})]})]),l&&Y.push([K("GiftAttributeSymbol"),(0,C.FD)("span",{className:Ut.uniqueAttribute,children:[l.name,(0,C.Y)(U.A,{children:(0,E.l9)(l.rarityPercent)})]})]),Y.push([K("GiftInfoAvailability"),K("GiftInfoIssued",{issued:se.issuedCount,total:se.totalCount})]),c){const{date:e,recipientId:t,message:a,senderId:r}=c,o=(0,i.mS)(),l=e=>{y({id:e}),k()},d=(0,n.PVB)(o,t),u=r?(0,n.PVB)(o,r):void 0,m=(0,z.L2)(1e3*e,K.code,!0),p=(0,C.Y)(Qe.A,{onClick:()=>l(t),isPrimary:!0,children:(0,s.F9)(K,d)});let h;if(u&&r!==t){const e=(0,C.Y)(Qe.A,{onClick:()=>l(u.id),isPrimary:!0,children:(0,s.F9)(K,u)});h=a?K("GiftInfoPeerOriginalInfoTextSender",{peer:p,sender:e,text:(0,Pt.fd)(a),date:m},{withNodes:!0}):K("GiftInfoPeerOriginalInfoSender",{peer:p,date:m,sender:e},{withNodes:!0})}else h=a?K("GiftInfoPeerOriginalInfoText",{peer:p,text:(0,Pt.fd)(a),date:m},{withNodes:!0}):K("GiftInfoPeerOriginalInfo",{peer:p,date:m},{withNodes:!0});Y.push([void 0,(0,C.Y)("span",{children:h})])}}const G=v&&le&&se.giftAddress&&`${v}${se.giftAddress}`,w=(0,C.FD)("div",{className:Ut.footer,children:[(me||G||he)&&(0,C.FD)("div",{className:Ut.footerDescription,children:[G&&(0,C.Y)("div",{children:K("GiftInfoTonText",{link:(0,C.Y)(f.A,{url:G,shouldSkipModal:!0,text:K("GiftInfoTonLinkText")})},{withNodes:!0})}),me&&(0,C.Y)("div",{children:K(`GiftInfo${$?"Channel":""}${r?"Hidden":"Saved"}`,{link:(0,C.Y)(Qe.A,{isPrimary:!0,onClick:Ne,children:K("GiftInfoSaved"+(r?"Show":"Hide"))})},{withNodes:!0})}),!he&&u&&(0,C.Y)("div",{children:K("GiftInfoSenderHidden")}),he&&Ae&&(0,C.Y)("div",{children:K("GiftInfoBuyGift",{user:Ae},{withNodes:!0})})]}),Pe()]});return{modalHeader:le?A:void 0,header:le?N:I,tableData:Y,footer:w}}),[Z,te,X,ne,K,me,oe,ae,O,v,se,ye,Pe,$,Be,le,W,S,b,De,he,Ae,J,pe]);return(0,C.FD)(C.FK,{children:[(0,C.Y)(ge.A,{isOpen:J,modalHeader:Fe?.modalHeader,header:Fe?.header,hasBackdrop:le,tableData:Fe?.tableData,footer:Fe?.footer,className:Ut.modal,onClose:Se,withBalanceBar:Boolean(he),isLowStackPriority:!0}),de&&N&&Boolean(pe)&&(0,C.FD)(Rt.A,{isOpen:V,noDefaultTitle:!0,onClose:Ye,confirmLabel:K("ButtonBuyGift",{stars:(0,ce.U)(K,pe,{asFont:!0})},{withNodes:!0}),confirmHandler:Ge,children:[(0,C.Y)(xt,{peer:I||N,gift:de}),!I&&(0,C.Y)("p",{children:K("GiftBuyConfirmDescription",{gift:K("GiftUnique",{title:de.title,number:de.number}),stars:(0,ce.K)(K,pe)},{withNodes:!0,withMarkdown:!0})}),I&&(0,C.Y)("p",{children:K("GiftBuyForPeerConfirmDescription",{gift:K("GiftUnique",{title:de.title,number:de.number}),stars:(0,ce.K)(K,pe),peer:(0,s.F9)(K,I)},{withNodes:!0,withMarkdown:!0})})]}),te&&(0,C.FD)(Rt.A,{isOpen:x,onClose:L,confirmHandler:Ce,title:K("GiftInfoConvertTitle"),children:[(0,C.Y)("div",{children:K("GiftInfoPeerConvertDescription",{amount:(0,ce.K)(K,te.starsToConvert),peer:(0,s.F9)(K,j)},{withNodes:!0,withMarkdown:!0})}),oe&&(0,C.Y)("div",{children:K("GiftInfoConvertDescriptionPeriod",{count:ie},{withNodes:!0,withMarkdown:!0,pluralValue:ie})}),(0,C.Y)("div",{children:K("GiftInfoConvertDescription2")})]})]})})));var Kt=a(40664);const Ot=(0,r.ph)((0,i.EK)((e=>{const t=e.appConfig?.starsStargiftResaleCommissionPermille,a=t?t/1e3:void 0,r=e.appConfig?.starsStargiftResaleAmountMin||0,i=e.appConfig?.starsStargiftResaleAmountMax,s=e.appConfig?.starsUsdWithdrawRateX1000;return{starsStargiftResaleCommissionPermille:a,starsStargiftResaleAmountMin:r,starsStargiftResaleAmountMax:i,starsUsdWithdrawRate:s?s/1e3:1}}))((({modal:e,starsStargiftResaleCommissionPermille:t,starsStargiftResaleAmountMin:a,starsStargiftResaleAmountMax:s,starsUsdWithdrawRate:n})=>{const{closeGiftResalePriceComposerModal:o,closeGiftInfoModal:c,updateStarGiftPrice:m,showNotification:p}=(0,i.ko)(),h=Boolean(e),[f,b]=(0,r.J0)(void 0),S=(0,d.A)(e),{gift:v}=S||{},N=v&&"gift"in v?v:void 0,I=Boolean(f),k=(0,F.A)(),Y=(0,u.A)((e=>{const t=e.target.value,a=parseFloat(t),r=""===t||Number.isNaN(a)?void 0:s?Math.min(a,s):a;b(r)})),G=(0,u.A)((()=>{o()})),y=(0,u.A)((()=>{N&&"starGiftUnique"===N.gift.type&&N.inputGift&&f&&(o(),c(),m({gift:N.inputGift,price:f}),p({icon:"sell-outline",message:{key:"NotificationGiftIsSale",variables:{gift:k("GiftUnique",{title:N.gift.title,number:N.gift.number})}}}))})),w=t,B=I&&f>a;return(0,C.FD)(A.A,{isOpen:h,title:k("GiftSellTitle"),hasCloseButton:!0,isSlim:!0,onClose:G,children:[(0,C.Y)("div",{className:"ElDo1Bru",children:(0,C.Y)(Kt.A,{label:k("InputPlaceholderGiftResalePrice"),onChange:Y,value:f?.toString(),inputMode:"numeric",tabIndex:0,teactExperimentControlled:!0})}),(0,C.FD)("div",{className:"wqkAvYGE",children:[(0,C.FD)("span",{children:[!B&&Boolean(w)&&k("DescriptionComposerGiftMinimumPrice",{stars:(0,ce.K)(k,a)},{withMarkdown:!0,withNodes:!0}),B&&k("DescriptionComposerGiftResalePrice",{stars:(0,ce.K)(k,w?Number((f*w).toFixed()):f)},{withMarkdown:!0,withNodes:!0})]}),B&&Boolean(n)&&(0,C.Y)("span",{className:"r9R0VR_w",children:`≈ ${(0,l.A)(f*n,"USD",k.code)}`})]}),(0,C.FD)(g.A,{noForcedUpperCase:!0,disabled:!B,size:"smaller",onClick:y,children:[B&&k("ButtonSellGift",{stars:(0,ce.U)(k,f,{asFont:!0})},{withNodes:!0}),!B&&k("Sell")]})]})})));var zt=a(58554),Et=a(32625),Vt=a(5463);const Ht="_Dt6RSQV",Jt=(0,r.ph)((0,i.EK)(((e,{modal:t})=>{const a=t?.recipientId;return{recipient:a?(0,n.PVB)(e,a):void 0}}))((({modal:e,recipient:t})=>{const{closeGiftUpgradeModal:a,upgradeGift:n}=(0,i.ko)(),o=Boolean(e),l=(0,d.A)(e),c=(0,d.A)(t),[m,p]=(0,r.J0)(!1),[h,f]=(0,r.J0)(),A=(0,F.A)(),b=(0,u.A)((()=>a())),S=(0,u.A)((()=>{const e=l?.gift;e?.inputGift&&(n({gift:e.inputGift,shouldKeepOriginalDetails:m,upgradeStars:e.alreadyPaidUpgradeStars?void 0:e.gift.upgradeStars}),b())})),v=(0,u.A)((()=>{l?.sampleAttributes&&f(function(e,t){const a=e.filter((e=>"model"===e.type&&e.name!==t?.model.name)),r=e.filter((e=>"pattern"===e.type&&e.name!==t?.pattern.name)),i=e.filter((e=>"backdrop"===e.type&&e.name!==t?.backdrop.name));return{model:a[Math.floor(Math.random()*a.length)],pattern:r[Math.floor(Math.random()*r.length)],backdrop:i[Math.floor(Math.random()*i.length)]}}(l.sampleAttributes,h))}));(0,Et.A)(v,o?3e3:void 0,!0),(0,r.vJ)((()=>{o&&l?.sampleAttributes&&v()}),[o,l?.sampleAttributes]),(0,r.vJ)((()=>{const e=l?.sampleAttributes;e&&[...e.filter((e=>"pattern"===e.type)).map((e=>e.sticker)),...e.filter((e=>"model"===e.type)).map((e=>e.sticker))].map((e=>(0,Y.Mw)(e,"full"))).forEach((e=>{(0,zt.hd)(e,qe.qZ.BlobUrl)}))}),[l?.sampleAttributes]);const N=(0,r.Kr)((()=>{if(!h||!o)return;const e=l?.gift,t=[["diamond",A("GiftUpgradeUniqueTitle"),A("GiftUpgradeUniqueDescription")],["trade",A("GiftUpgradeTransferableTitle"),A("GiftUpgradeTransferableDescription")],["auction",A("GiftUpgradeTradeableTitle"),A("GiftUpgradeTradeableDescription")]],a=c?A("GiftPeerUpgradeText",{peer:(0,s.F9)(A,c)}):A("GiftUpgradeTextOwn");return{listItemData:t,header:(0,C.Y)(be,{modelAttribute:h.model,backdropAttribute:h.backdrop,patternAttribute:h.pattern,title:A("GiftUpgradeTitle"),subtitle:a}),footer:(0,C.FD)("div",{className:"EWaVCxY4",children:[!e&&(0,C.Y)(g.A,{className:Ht,size:"smaller",onClick:b,children:A("OK")}),e&&(0,C.FD)(C.FK,{children:[(0,C.Y)(ye.A,{label:A("GiftUpgradeKeepDetails"),onCheck:p,checked:m}),(0,C.Y)(g.A,{className:Ht,size:"smaller",isShiny:!0,onClick:S,children:e.alreadyPaidUpgradeStars?A("GeneralConfirm"):A("GiftUpgradeButton",{amount:(0,ce.U)(A,e.gift.upgradeStars,{asFont:!0})},{withNodes:!0})})]})]})}}),[h,o,A,c,l?.gift,m]);return(0,C.Y)(Vt.A,{isOpen:o,header:N?.header,footer:N?.footer,listItemData:N?.listItemData,hasBackdrop:!0,onClose:b})})));var qt=a(47483);const _t=(0,r.ph)((0,i.EK)((e=>({currentUser:(0,n.mBe)(e,e.currentUserId),isCurrentUserPremium:(0,n.g29)(e)})))((({modal:e,currentUser:t,isCurrentUserPremium:a})=>{const{closeGiftStatusInfoModal:s,setEmojiStatus:n}=(0,i.ko)(),l=(0,F.A)(),c=Boolean(e),m=(0,d.A)(e),{emojiStatus:f}=m||{},A=f?.textColor,b=(0,qt.A)(f?.patternDocumentId),S=(0,u.A)((()=>{s()})),v=(0,u.A)((()=>{f&&n({emojiStatus:f}),s()})),N=(0,r.Kr)((()=>{if(!f||!c)return;const e=[f.centerColor,f.edgeColor],t=f.patternColor;return(0,C.Y)(X.A,{className:"_1RfhkfB",backgroundColors:e,patternColor:t,patternIcon:b.customEmoji})}),[f,c,b]),I=(0,r.Kr)((()=>({...t,emojiStatus:f})),[t,f]),k=(0,r.Kr)((()=>(0,C.FD)("div",{className:"qL0cHbwS",children:[(0,C.FD)("div",{className:(0,o.A)("t18QCmAb"),style:(0,Ae.A)(A&&`color: ${A}`),children:[N,(0,C.Y)(p.A,{peer:I,size:"jumbo",className:"JK2zOWA7"}),(0,C.Y)(Ge.A,{peer:I,className:"lxxbgNCl",withEmojiStatus:!0,noFake:!0,noVerified:!0,statusSparklesColor:A}),(0,C.Y)("p",{className:"MLMdxkUg",style:(0,Ae.A)(A&&`color: ${A}`),children:l("Online")})]}),(0,C.FD)("div",{className:"q8w7tnmR",children:[(0,C.Y)("div",{className:"wxg_5ou_",children:l("UniqueStatusWearTitle",{gift:I?.emojiStatus?.title})}),(0,C.Y)("div",{className:"KSCLIMZm",children:l("UniqueStatusBenefitsDescription")})]})]})),[A,N,I,l]),Y=[["radial-badge",l("UniqueStatusBadgeBenefitTitle"),l("UniqueStatusBadgeDescription")],["unique-profile",l("UniqueStatusProfileDesignBenefitTitle"),l("UniqueStatusProfileDesignDescription")],["proof-of-ownership",l("UniqueStatusProofOfOwnershipBenefitTitle"),l("UniqueStatusProofOfOwnershipDescription")]],G=(0,r.Kr)((()=>{if(c)return(0,C.Y)("div",{className:"VDrvalBo",children:(0,C.FD)(g.A,{size:"smaller",onClick:v,children:[l("UniqueStatusWearButton"),!a&&(0,C.Y)(h.A,{name:"lock-badge",className:"jiPObOWv"})]})})}),[l,a,c]);return(0,C.Y)(Vt.A,{isOpen:c,header:k,listItemData:Y,footer:G,hasBackdrop:!0,onClose:S})})));var Wt=a(21309),jt=a(15535);const Qt={header:"LQgz8Nlx",giftPreview:"hgs0ts_O",backdrop:"OnBhMaBw",description:"HBxB4QPY",arrow:"kXTOUpfb",noPassword:"BnqLhoKr"},Xt={isCustomPeer:!0,avatarIcon:"fragment",title:"",customPeerAvatarColor:"#000000"},$t=4.5*bt.$,Zt=(0,r.ph)((0,i.EK)((e=>{const{settings:{byKey:{hasPassword:t}},twoFaSettings:{hint:a}}=e;return{hasPassword:t,passwordHint:a}}))((({modal:e,hasPassword:t,passwordHint:a})=>{const{closeGiftWithdrawModal:s,clearGiftWithdrawError:n,closeGiftInfoModal:o,processStarGiftWithdrawal:l,openSettingsScreen:c}=(0,i.ko)(),m=Boolean(e),[f,b]=(0,r.J0)(!1),S=(0,F.A)(),v=(0,d.A)(e),N=v?.gift?.gift,I=N&&(0,_.uc)(N),k=v?.gift?.canExportAt?Math.max(v.gift.canExportAt-(0,Bt.Fm)(),0):void 0,Y=(0,u.A)((()=>{s()})),G=(0,u.A)((e=>{l({gift:v.gift.inputGift,password:e})})),y=(0,u.A)((()=>{c({screen:he.VS.TwoFaDisabled}),s(),o()}));return(0,C.FD)(A.A,{isOpen:m,title:S("GiftWithdrawTitle"),hasCloseButton:!0,isSlim:!0,onClose:Y,children:[I&&(0,C.FD)(C.FK,{children:[(0,C.FD)("div",{className:Qt.header,children:[(0,C.FD)("div",{className:Qt.giftPreview,children:[(0,C.Y)(X.A,{className:Qt.backdrop,backgroundColors:[I.backdrop.centerColor,I.backdrop.edgeColor],patternColor:I.backdrop?.patternColor,patternIcon:I.pattern?.sticker}),(0,C.Y)(Q.A,{className:Qt.sticker,size:$t,sticker:I.model?.sticker})]}),(0,C.Y)(h.A,{name:"next",className:Qt.arrow}),(0,C.Y)(p.A,{peer:Xt,size:"giant",className:Qt.avatar})]}),(0,C.Y)("p",{className:Qt.description,children:S("GiftWithdrawDescription",{gift:`${N.title} #${N.number}`},{withNodes:!0,withMarkdown:!0,renderTextFilters:["br"]})})]}),Boolean(k)&&(0,C.Y)("p",{className:Qt.exportHint,children:S("GiftWithdrawWait",{days:(0,Wt._k)(k)},{pluralValue:(0,Wt._k)(k)})}),!t&&(0,C.FD)(C.FK,{children:[(0,C.Y)("span",{className:Qt.noPassword,children:S("ErrorPasswordMissing")}),(0,C.Y)(g.A,{className:"mt-2",size:"smaller",onClick:y,children:S("SetUp2FA")})]}),t&&!k&&(0,C.Y)(jt.A,{shouldShowSubmit:!0,placeholder:S("CheckPasswordPlaceholder"),error:v?.errorKey&&S.withRegular(v?.errorKey),description:S("CheckPasswordDescription"),clearError:n,isLoading:v?.isLoading,hint:a,isPasswordVisible:f,shouldResetValue:m,onChangePasswordVisibility:b,submitLabel:S("GiftWithdrawSubmit"),onSubmit:G})]})})));var ea=a(79824),ta=a(74984),aa=a(4875),ra=a(56863),ia=a(30857),sa=a(84080),na=a(56133),oa=a(35297);function la(){}async function ca(e){const t=await(0,aa.px)("searchChats",{query:e});if(t)return[...t.accountResultIds,...t.globalResultIds]}const da=(0,r.ph)((0,i.EK)((e=>{const{contactList:t,currentUserId:a}=e;return{contactIds:t?.userIds,currentUserId:a}}))((({modal:e,contactIds:t,currentUserId:a})=>{const{closeGiftTransferModal:o,openGiftWithdrawModal:l,transferGift:c}=(0,i.ko)(),m=Boolean(e),p=(0,F.A)(),[h,f]=(0,r.J0)(""),g=(0,d.A)(e),A=g?.gift?.gift,b=A&&(0,_.uc)(A),[S,v]=(0,r.J0)(),N=(0,d.A)(S),I=(0,r.Kr)((()=>{const e=(0,i.mS)();return N?(0,n.PVB)(e,N):void 0}),[N]),Y=(0,ta.Rh)(k.DSF),P=(0,r.Kr)((()=>(0,G.Am)([...t||[],...Y||[]])),[t,Y]),{result:D,currentResultsQuery:M}=function({query:e,queryFn:t=ca,defaultValue:a,debounceTimeout:i=300,isDisabled:s}){const n=function(e,t,a){const[i,s]=(0,r.J0)(),{isFrozen:n,updateWhenUnfrozen:o}=function(){const e=(0,r.li)(!1),t=(0,r.hb)((()=>{e.current=!0}),[]),a=(0,ia.A)(),i=(0,r.hb)((()=>{e.current&&(e.current=!1,a())}),[a]);return(0,sa.Ay)(la,i),{isFrozen:(0,r.OV)(),updateWhenUnfrozen:t}}(),l=(0,na.A)(t,!0);return(0,oa.A)((()=>{n?o():l((()=>{s(e())}))}),[...a,n]),i}((()=>e),i,[e]),[o,l]=(0,r.J0)(""),c=e?n:e,d=(0,u.A)(t);return{...(0,ra.A)((async()=>{if(!c||s)return l(""),Promise.resolve(a);const e=await d(c);return l(c),e}),[c,a,d,s],a),currentResultsQuery:o}}({query:h,defaultValue:P}),T=M!==h,x=(0,r.Kr)((()=>M?ea.p:[{type:"withdraw",isCustomPeer:!0,avatarIcon:"toncoin",peerColorId:5,title:p("GiftTransferTON")}]),[p,M]),R=(0,u.A)((e=>{"withdraw"===e&&(l({gift:g.gift}),o())})),U=(0,r.Kr)((()=>{if(T)return ea.p;const e=(0,i.mS)();return(0,y.A)((D||[]).filter((t=>t!==a&&(0,n.X2D)(e,t))),!1)}),[T,D,a]),L=(0,u.A)((()=>{v(void 0)}));(0,r.vJ)((()=>{m||v(void 0)}),[m]);const K=(0,u.A)((()=>{g?.gift.inputGift&&(c({gift:g.gift.inputGift,recipientId:N,transferStars:g.gift.transferStars}),L(),o())}));return(0,C.FD)(B.A,{isOpen:m,onClose:o,title:p("GiftTransferTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,ignoreFreeze:!0,children:[(0,C.Y)(w.A,{itemIds:U,categories:x,onSelectedCategoryChange:R,withDefaultPadding:!0,withPeerUsernames:!0,isSearchable:!0,noScrollRestore:!0,isLoading:T,filterValue:h,filterPlaceholder:p("Search"),onFilterChange:f,onSelectedIdChange:v}),b&&(0,C.FD)(Rt.A,{isOpen:Boolean(S),noDefaultTitle:!0,onClose:L,confirmLabel:g?.gift.transferStars?p("GiftTransferConfirmButton",{amount:(0,ce.U)(p,g.gift.transferStars,{asFont:!0})},{withNodes:!0}):p("GiftTransferConfirmButtonFree"),confirmHandler:K,children:[I&&(0,C.Y)(xt,{peer:I,gift:A}),(0,C.Y)("p",{children:g?.gift.transferStars?p("GiftTransferConfirmDescription",{gift:p("GiftUnique",{title:A.title,number:A.number}),amount:(0,ce.K)(p,g.gift.transferStars),peer:(0,s.F9)(p,I)},{withNodes:!0,withMarkdown:!0}):p("GiftTransferConfirmDescriptionFree",{gift:p("GiftUnique",{title:A.title,number:A.number}),peer:(0,s.F9)(p,I)},{withNodes:!0,withMarkdown:!0})})]})]})}))),ua=(0,r.ph)((0,i.EK)(((e,{modal:t})=>({user:t?.userId?(0,n.mBe)(e,t.userId):void 0})))((({modal:e,user:t})=>{const{closeChatRefundModal:a,addNoPaidMessagesException:n}=(0,i.ko)(),[o,l]=(0,r.J0)(!1),c=(0,d.A)(e),m=(0,d.A)(t),{starsToRefund:p,userId:h}=c||{},f=(0,F.A)(),g=Boolean(e),A=(0,u.A)((()=>{a(),h&&n({userId:h,shouldRefundCharged:o})}));return(0,C.FD)(Rt.A,{isOpen:g,onClose:a,title:f("RemoveFeeTitle"),confirmLabel:f("ConfirmRemoveMessageFee"),confirmHandler:A,children:[f("ConfirmDialogMessageRemoveFee",{peer:m&&(0,s.F9)(f,m)},{withMarkdown:!0,withNodes:!0}),Boolean(p)&&(0,C.Y)(ye.A,{className:"dialog-checkbox",label:f("ConfirmDialogRemoveFeeRefundStars",{amount:(0,ce.K)(f,p)},{withMarkdown:!0,withNodes:!0}),checked:o,onCheck:l})]})})))},70046:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(84051),i=a(13439),s=a(87357),n=a(17712),o=a(21849),l=a(10187),c=a(64493),d=a(22337);const u="Cnh5ENvm";var m=a(20021);const p=(0,r.ph)((({isOpen:e,title:t,tableData:a,headerAvatarPeer:r,header:p,modalHeader:h,footer:f,buttonText:g,className:A,hasBackdrop:b,onClose:S,onButtonClick:v,withBalanceBar:N,isLowStackPriority:C})=>{const{openChat:I}=(0,i.ko)(),k=(0,n.A)((e=>{I({id:e}),S()}));return(0,m.FD)(d.A,{isOpen:e,hasCloseButton:Boolean(t),hasAbsoluteCloseButton:!t,absoluteCloseButtonColor:b?"translucent-white":void 0,isSlim:!0,header:h,title:t,className:A,contentClassName:"KYHkJ9Qf",onClose:S,withBalanceBar:N,isLowStackPriority:C,children:[r&&(0,m.Y)(o.A,{peer:r,size:"jumbo",className:"SHQbPR5Y"}),p,(0,m.Y)("div",{className:"DFRB0Ad4",children:a?.map((([e,t])=>(0,m.FD)(m.FK,{children:[Boolean(e)&&(0,m.Y)("div",{className:(0,s.A)(u,"AwnUe4Qk"),children:e}),(0,m.Y)("div",{className:(0,s.A)(u,"JGH6P9Az",!e&&"UssCZwgy"),children:"object"==typeof t&&"chatId"in t?(0,m.Y)(l.A,{peerId:t.chatId,className:"aS9U4hiQ",forceShowSelf:!0,withEmojiStatus:t.withEmojiStatus,clickArg:t.chatId,onClick:k}):t})]})))}),f,g&&(0,m.Y)(c.A,{className:f?void 0:"cSamlkt9",size:"smaller",onClick:v||S,children:g})]})}))},84991:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(84051),i=a(87357),s=a(39351),n=a(21849),o=a(18276);const l={root:"hyRfEyRz",top:"p_Ny8jqJ",badge:"QRrryqp4",text:"I5jdPgFL"};var c=a(20021);const d=(0,r.ph)((({peer:e,avatarWebPhoto:t,avatarSize:a,text:r,badgeText:d,badgeIcon:u,className:m,badgeClassName:p,badgeIconClassName:h,textClassName:f,onClick:g})=>{const A=(0,s.A)();return(0,c.FD)("div",{className:(0,i.A)(l.root,g&&l.clickable,m),onClick:g,children:[(0,c.FD)("div",{className:l.top,children:[(0,c.Y)(n.A,{size:a,peer:e,webPhoto:t}),d&&(0,c.FD)("div",{className:(0,i.A)(l.badge,p),dir:A.isRtl?"rtl":"ltr",children:[u&&(0,c.Y)(o.A,{name:u,className:h}),d]})]}),r&&(0,c.Y)("p",{className:(0,i.A)(l.text,f),children:r})]})}))}}]);
//# sourceMappingURL=6930.0c34c1bc808124839b20.js.map