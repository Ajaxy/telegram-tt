"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[6930],{25404:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(84051),n=a(13439),r=a(31481),o=a(85982),s=a(17663),l=a(80140),c=a(39351),d=a(17712),u=a(59030),m=a(24433),f=a(20021);const p=(0,i.ph)(({peerId:e,canManage:t,gift:a,currentUserEmojiStatus:p,collectibleEmojiStatuses:h})=>{const{showNotification:g,openChatWithDraft:A,openGiftTransferModal:b,openGiftResalePriceComposerModal:S,openGiftStatusInfoModal:v,setEmojiStatus:N,toggleSavedGiftPinned:C,changeGiftVisibility:k,updateStarGiftPrice:y,closeGiftInfoModal:I}=(0,n.ko)(),G=(0,c.A)(),Y=(0,u.A)(),w=a&&"gift"in a,P=w?a:void 0,B=w?a.gift:a,M="starGiftUnique"===B?.type?B.slug:void 0,T=(0,i.Kr)(()=>{if(M)return`${r.jsp}nft/${M}`},[M]),D=(0,i.Kr)(()=>{if(M)return h?.find(e=>"collectible"===e.type&&e.slug===M)},[M,h]),F="collectible"===p?.type?p.slug:void 0,U=B&&"starGiftUnique"===B.type,R=U&&F===B.slug,x=D&&!R,L=U?B.resellPrice:void 0,O=t&&P&&!P.isUnsaved&&U,K=(0,d.A)(()=>{const{inputGift:e,isUnsaved:t}=P;k({gift:e,shouldUnsave:!t})}),V=(0,d.A)(()=>{T&&((0,o.eM)(T),g({message:G("LinkCopied")}))}),E=(0,d.A)(()=>{T&&A({text:{text:T}})}),q=(0,d.A)(()=>{P&&"starGiftUnique"===P?.gift.type&&(P.canTransferAt&&P.canTransferAt>(0,l.Fm)()?g({message:{key:"NotificationGiftCanTransferAt",variables:{date:(0,s.U)(Y,1e3*P.canTransferAt)}}}):b({gift:P}))}),z=(0,d.A)(()=>{P&&(P.canResellAt&&P.canResellAt>(0,l.Fm)()?g({message:{key:"NotificationGiftCanResellAt",variables:{date:(0,s.U)(Y,1e3*P.canResellAt)}}}):S({peerId:e,gift:P}))}),H=(0,d.A)(()=>{P&&"starGiftUnique"===P.gift.type&&P.inputGift&&(I(),y({gift:P.inputGift,price:{currency:r.OUy,amount:0,nanos:0}}),g({icon:"unlist-outline",message:{key:"NotificationGiftIsUnlist",variables:{gift:G("GiftUnique",{title:P.gift.title,number:P.gift.number})}}}))}),J=(0,d.A)(()=>{"starGiftUnique"===B?.type&&D&&v({emojiStatus:D})}),W=(0,d.A)(()=>{R&&N({emojiStatus:{type:"regular",documentId:r.zNY}})}),j=(0,d.A)(()=>{C({peerId:e,gift:P})});return(0,f.FD)(f.FK,{children:[O&&(0,f.Y)(m.A,{icon:P.isPinned?"unpin":"pin",onClick:j,children:G(P.isPinned?"ChatListUnpinFromTop":"ChatListPinToTop")}),(0,f.Y)(m.A,{icon:"link-badge",onClick:V,children:G("CopyLink")}),(0,f.Y)(m.A,{icon:"forward",onClick:E,children:G("Share")}),t&&U&&(0,f.Y)(m.A,{icon:"diamond",onClick:q,children:G("GiftInfoTransfer")}),t&&U&&!L&&(0,f.Y)(m.A,{icon:"sell-outline",onClick:z,children:G("Sell")}),t&&U&&Boolean(L)&&(0,f.Y)(m.A,{icon:"unlist-outline",onClick:H,children:G("GiftInfoUnlist")}),t&&P&&(0,f.Y)(m.A,{icon:P.isUnsaved?"eye-outline":"eye-crossed-outline",onClick:K,children:G(P.isUnsaved?"GiftActionShow":"GiftActionHide")}),x&&(0,f.Y)(m.A,{icon:"crown-wear-outline",onClick:J,children:G("GiftInfoWear")}),R&&(0,f.Y)(m.A,{icon:"crown-take-off-outline",onClick:W,children:G("GiftInfoTakeOff")})]})})},47647:(e,t,a)=>{a.r(t),a.d(t,{ChatRefundModal:()=>Ba,GiftInfoModal:()=>ea,GiftInfoValueModal:()=>aa,GiftLockedModal:()=>ia,GiftModal:()=>qt,GiftRecipientPicker:()=>zt,GiftResalePriceComposerModal:()=>ra,GiftStatusInfoModal:()=>ma,GiftTransferModal:()=>Pa,GiftUpgradeModal:()=>da,GiftWithdrawModal:()=>ba,PaidReactionModal:()=>at,PriceConfirmModal:()=>Ta,StarPaymentModal:()=>ge,StarsBalanceModal:()=>ue,StarsGiftModal:()=>k,StarsGiftingPickerModal:()=>B,StarsSubscriptionModal:()=>xe,StarsTransactionInfoModal:()=>Fe});var i=a(84051),n=a(13439),r=a(70636),o=a(91048),s=a(87357),l=a(17142),c=a(4961),d=a(14),u=a(17712),m=a(59030),f=a(21849),p=a(18276),h=a(84685),g=a(64493),A=a(22337),b=a(1526);const S={modalDialog:"MFXAwnxJ",content:"Sl6xVf1R",main:"bTN9Jeph",headerInfo:"c6MiyJgW",logo:"StGLWvzb",logoBackground:"SyTXSfml",description:"kFe3mIZo",section:"BgfHkWd2",header:"zMtAGfXs",starHeaderText:"q3v8orGj",hiddenHeader:"bq3FnXT0",closeButton:"bDsDTkbe",avatar:"jK36xUj4",center:"v1PckUQn",secondaryInfo:"TDWSRfP9"},v=a.p+"GoldStar.fb6812e915ddfe27f504.svg",N=a.p+"stars-bg.dee4c4b73c7d21c2ec73.png";var C=a(20021);const k=(0,i.ph)((0,n.EK)((e,{modal:t})=>({user:t?.forUserId?(0,o.mBe)(e,t.forUserId):void 0}))(({modal:e,user:t})=>{const{closeStarsGiftModal:a,openInvoice:o,requestConfetti:k}=(0,n.ko)(),y=(0,i.li)(),I=Boolean(e?.isOpen),G=(0,d.A)(e),Y=(0,m.A)(),[w,P]=(0,i.J0)(),[B,M]=(0,i.J0)(!0);(0,i.vJ)(()=>{I||M(!0)},[I]);const T=(0,u.A)(()=>{const e=y.current;if(e&&I){const{top:t,left:a,width:i,height:n}=e.querySelector(".modal-content").getBoundingClientRect();k({top:t,left:a,width:i,height:n,withStars:!0})}});(0,i.vJ)(()=>{G?.isCompleted&&T()},[G,T]);const D=(0,u.A)(e=>{G&&(P(e),o(t?{type:"starsgift",userId:t.id,stars:e.stars,currency:e.currency,amount:e.amount}:{type:"stars",stars:e.stars,currency:e.currency,amount:e.amount}))}),F=(0,u.A)(()=>{a()}),U=(0,i.Kr)(()=>{const e=Y("lng_credits_summary_options_about").split("{link}");return[e[0],(0,C.Y)(h.A,{url:Y("StarsTOSLink"),text:Y("lng_credits_summary_options_about_link")}),e[1]]},[Y]);return(0,C.Y)(A.A,{className:(0,s.A)(S.modalDialog),contentClassName:S.content,dialogRef:y,isSlim:!0,onClose:F,isOpen:I,children:(0,C.FD)("div",{className:(0,s.A)(S.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;M(t<=150)},children:[(0,C.Y)(g.A,{round:!0,size:"smaller",className:S.closeButton,color:"translucent",onClick:()=>a(),ariaLabel:Y("Close"),children:(0,C.Y)(p.A,{name:"close"})}),(0,C.Y)("div",{className:(0,s.A)(S.header,B&&S.hiddenHeader),children:(0,C.Y)("h2",{className:S.starHeaderText,children:Y(t?"GiftStarsTitle":"Star.List.GetStars")})}),(0,C.Y)("div",{className:S.headerInfo,children:t?(0,C.FD)(C.FK,{children:[(0,C.Y)(f.A,{size:100,peer:t,className:S.avatar}),(0,C.Y)("img",{className:S.logoBackground,src:N,alt:"",draggable:!1})]}):(0,C.FD)(C.FK,{children:[(0,C.Y)("img",{className:S.logo,src:v,alt:"",draggable:!1}),(0,C.Y)("img",{className:S.logoBackground,src:N,alt:"",draggable:!1})]})}),(0,C.Y)("h2",{className:(0,s.A)(S.headerText,S.center),children:G?.isCompleted?t?(0,c.A)(Y("Notification.StarsGift.SentYou",(0,l.Ad)(w.amount,w.currency,Y.code)),["simple_markdown"]):(0,c.A)(Y("StarsAcquiredInfo",w?.stars),["simple_markdown"]):Y(t?"GiftStarsTitle":"Star.List.GetStars")}),(0,C.Y)("p",{className:S.description,children:t?(0,c.A)(Y("ActionGiftStarsSubtitle",(0,r.F9)(Y,t)),["simple_markdown"]):Y("Stars.Purchase.GetStarsInfo")}),(0,C.FD)("div",{className:S.section,children:[(0,C.Y)(b.A,{options:G?.starsGiftOptions,onClick:D}),(0,C.Y)("div",{className:S.secondaryInfo,children:U})]})]})})}));var y=a(31481),I=a(90709),G=a(87894),Y=a(79582),w=a(54960),P=a(34642);const B=(0,i.ph)((0,n.EK)(e=>{const{chats:{listIds:t},currentUserId:a}=e;return{userIds:e.contactList?.userIds,activeListIds:t.active,archivedListIds:t.archived,currentUserId:a}})(({isOpen:e,currentUserId:t,activeListIds:a,archivedListIds:o,userIds:s})=>{const{closeStarsGiftingPickerModal:l,openStarsGiftModal:c}=(0,n.ko)(),d=(0,m.A)(),[f,p]=(0,i.J0)(""),h=(0,i.Kr)(()=>{const e=(0,n.mS)().users.byId,i=(0,G.Am)([...s||[],...a||[],...o||[]]),l=(0,r.PU)({ids:i,query:f,type:"user"});return(0,Y.A)(l.filter(a=>{const i=e[a];return!(!i||i.isSupport||(0,I.tv)(i)||(0,I.PL)(i)||a===t||a===y.zv8)}))},[t,f,s,a,o]),g=(0,u.A)(e=>{e?.length&&(c({forUserId:e}),l())});return(0,C.Y)(P.A,{className:"s3k01dTm",isOpen:e,onClose:l,title:d("GiftStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,confirmButtonText:d("Continue"),onEnter:l,children:(0,C.Y)(w.A,{className:"cuI2eDIY",itemIds:h,filterValue:f,filterPlaceholder:d("Search"),onFilterChange:p,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,onSelectedIdChange:g})})}));var M=a(30708),T=a(31460),D=a(37661),F=a(39351),U=a(46222),R=a(24680),x=a(41036),L=a(38777),O=a(86046),K=a(81949),V=a(9267);const E={root:"TtE8LQNJ",minimal:"nkV4JXHc",transition:"nXQS4E59",main:"JuWZY1ds",container:"mnhBs1uK",section:"lYkNd_gb",lastSection:"f749AI4g",sectionTitle:"FF8gm7MP",hint:"Rs8WXoOz",tos:"Vu6blJk9",topUpButton:"dc_DZoVF",tonBalanceContainer:"lorbW9II",tonBalance:"h2Fs3tOv",tonIconBalance:"Ut6GidJP",tonInUsd:"FdcdsB4l",tonIconLogo:"_hCjjyEv",description:"teXilLxe",header:"fnhXotO2",starHeaderText:"iUwego5s",botItem:"AhxcrKWn",hiddenHeader:"DZk6d6hF",closeButton:"piD1PXHW",addStarsButton:"dqnGL2uh",addStarsIcon:"w9Db2eiK",balanceBlock:"Yk0OQBKC",balanceInfo:"p2dW9NOV",smallerText:"rUnPcfmE",balanceBottom:"F5BTkZ9G",modalBalance:"t8tMrx3y",starButton:"oOt4VBD2",paymentContent:"OReEUNTV",paymentImages:"oKorQYTC",paymentPhoto:"HGTrEtUF",avatarStar:"Wu10dXoa",paymentImageBackground:"os8jb_qv",paymentButton:"VzR5cibf",paymentButtonStar:"Uhg7yWxK",transactions:"Qvc0fTTH",subscriptions:"IX5BhCUF",tabs:"KZVEyKOX",disclaimer:"bpVifdwH",amountBadge:"BPM7LKwo",loadMore:"TKmZjMyd",loadMoreIcon:"buepwtN1"},q=(0,i.ph)(({balance:e,className:t,withAddButton:a})=>{const i=(0,F.A)(),{openStarsBalanceModal:r}=(0,n.ko)();return(0,C.Y)("div",{className:(0,s.A)(E.balanceBlock,t),children:(0,C.FD)("div",{className:E.balanceInfo,children:[(0,C.Y)("span",{className:E.smallerText,children:i("StarsBalance")}),(0,C.Y)("div",{className:E.balanceBottom,children:e?.currency===y.ykW?(0,C.FD)(C.FK,{children:[(0,C.Y)(p.A,{name:"toncoin"}),void 0!==e?(0,l.UL)(e.amount,e.currency):"…"]}):(0,C.FD)(C.FK,{children:[(0,C.Y)(V.A,{type:"gold",size:"middle"}),void 0!==e&&e.currency===y.OUy?(0,O.ZF)(i,e):"…",a&&(0,C.Y)(K.A,{className:E.addStarsButton,onClick:()=>r({}),children:(0,C.Y)(p.A,{className:E.addStarsIcon,name:"add"})})]})})]})})});var z=a(17663),H=a(14242),J=a(63527);const W={root:"ZXnbeQxP",info:"zLaaDX3c",status:"HbF2qTB2",statusPricing:"AveGvpdV",amount:"_CBiOQcv",title:"k9ZIv5Pd",description:"FlRlxMx2",subtitle:"YN2J8dw6",statusPeriod:"MRrP7Oew",statusEnded:"pRHwfr8m",preview:"t6Syyhzd",subscriptionStar:"ftlbevPm"},j=(0,i.ph)(({subscription:e})=>{const{openStarsSubscriptionModal:t}=(0,n.ko)(),{peerId:a,pricing:i,until:s,isCancelled:l,title:d,photo:p}=e,h=(0,m.A)(),g=(0,J.A)(function(e){return t=>(0,o.PVB)(t,e)}(a)),A=(0,u.A)(()=>{t({subscription:e})});if(!g)return;const b=s<Date.now()/1e3,S=(0,z.A)(1e3*s,h.code,!0,"long");return(0,C.FD)("div",{className:W.root,onClick:A,children:[(0,C.FD)("div",{className:W.preview,children:[(0,C.Y)(f.A,{size:"medium",peer:g}),(0,C.Y)(V.A,{className:W.subscriptionStar,type:"gold",size:"small"})]}),(0,C.FD)("div",{className:W.info,children:[(0,C.Y)("h3",{className:W.title,children:(0,c.A)((0,r.F9)(h,g)||"")}),d&&(0,C.FD)("p",{className:W.subtitle,children:[p&&(0,C.Y)(f.A,{webPhoto:p,size:"micro"}),(0,c.A)(d)]}),(0,C.Y)("p",{className:W.description,children:h(b?"StarsSubscriptionExpired":l?"StarsSubscriptionExpires":"StarsSubscriptionRenews",S)})]}),(0,C.Y)("div",{className:W.status,children:l||b?(0,C.Y)("div",{className:W.statusEnded,children:h(b?"StarsSubscriptionStatusExpired":"StarsSubscriptionStatusCancelled")}):(0,C.FD)(C.FK,{children:[(0,C.FD)("div",{className:W.statusPricing,children:[(0,C.Y)(V.A,{className:W.star,type:"gold",size:"adaptive"}),(0,C.Y)("span",{className:W.amount,children:(0,H.Sm)(i.amount)})]}),(0,C.Y)("div",{className:W.statusPeriod,children:h("StarsParticipantSubscriptionPerMonth")})]})})]})});var _=a(58968),Q=a(66833);function X(e,t,a){if(a.paidMessages)return t("PaidMessageTransaction",{count:a.paidMessages},{withNodes:!0,pluralValue:a.paidMessages});if(a.isGiftResale)return $(a.amount)?t("StarGiftSaleTransaction"):t("StarGiftPurchaseTransaction");if(a.isPostsSearch)return t("PostsSearchTransaction");if(a.starRefCommision)return e("StarTransactionCommission",(0,H.l9)(a.starRefCommision));if(a.isGiftUpgrade)return e("Gift2TransactionUpgraded");if(a.extendedMedia)return e("StarMediaPurchase");if(a.subscriptionPeriod)return a.title||e("StarSubscriptionPurchase");if(a.isReaction)return e("StarsReactionsSent");if(a.giveawayPostId)return e("StarsGiveawayPrizeReceived");if(a.isMyGift)return e("StarsGiftSent");if(a.isGift)return a.amount.currency===y.ykW?t("TonGiftReceived"):e("StarsGiftReceived");if(a.starGift)return $(a.amount)?e("Gift2TransactionSent"):e("Gift2ConvertedTitle");const i=a.peer&&(0,O.MA)(a)&&(0,O.Pc)(a)||void 0;return i?i.title||e(i.titleKey):a.title}function $(e){return e.currency===y.OUy?(t=e).amount?t.amount<0:t.nanos<0:e.amount<0;var t}var Z=a(79577),ee=a(40558),te=a(62587),ae=a(27860);const ie={root:"jQkp75Gb",preview:"OYGSN3PF",count:"KX1yz2Jy",thumb:"EvinKr5k",noOutline:"KSAAsUDv",itemCount1:"GxDajfX_",itemCount2:"jXuZoxq8",itemCount3:"TPn3XGHJ",blurry:"hWZuxLS8",full:"w56QPFhl",fadeIn:"ds43W8Wq"};function ne({boughtMedia:e,index:t,className:a}){const i=e.video||e.photo,n=(0,I.VO)(i,"pictogram"),r=(0,I.VD)(i),o=(0,te.A)(n);return(0,C.FD)("div",{className:(0,s.A)(ie.thumb,void 0!==t&&`stars-transaction-media-${t}`,a),children:[r&&(0,C.Y)("img",{className:ie.blurry,src:r,alt:""}),o&&(0,C.Y)("img",{className:ie.full,src:o,alt:""})]})}const re=(0,i.ph)(({media:e,className:t,isTransactionPreview:a,onClick:i})=>{const n=Math.min(e.length,a?2:3),r="mediaType"in e[0];return(0,C.FD)("div",{className:(0,s.A)(ie.root,ie[`itemCount${n}`],a&&ie.preview,t),dir:"rtl",onClick:i,children:[e.slice(0,n).reverse().map((e,t,i)=>{const n=i.length-t-1;return"mediaType"in e?(0,C.Y)(ae.A,{className:ie.thumb,isVisible:!0,width:e.width,height:e.height,thumbDataUri:e.thumbnail?.dataUri}):(0,C.Y)(ne,{className:(0,s.A)(a&&n>0&&ie.noOutline),boughtMedia:e,index:n})}),r&&(0,C.FD)("div",{className:ie.count,children:[(0,C.Y)(p.A,{name:"stars-lock"}),e.length>1?e.length:""]})]})}),oe={root:"aHAxv_Jg",info:"oyYrn3II",stars:"K5lc75ku",amount:"QLQPuLAr",title:"e0pK8CJ_",description:"xbERdDMQ",date:"l6CwQ0Ev",positive:"P_42_ZWR",negative:"TGjnLJfH",preview:"cnjGihOT",subscriptionStar:"z43YvnDX",uniqueGiftBackground:"eNvzMw2p",giftSticker:"U3dqmnM4"},se=(0,i.ph)(({transaction:e,className:t})=>{const{openStarsTransactionModal:a}=(0,n.ko)(),{date:l,amount:d,photo:h,peer:g,extendedMedia:A,subscriptionPeriod:b}=e,S=(0,F.A)(),v=(0,m.A)(),N="peer"===g.type?g.id:void 0,k=(0,J.A)(function(e){return t=>e?(0,o.PVB)(t,e):void 0}(N)),I=e.starGift,G="starGiftUnique"===I?.type,Y=I&&(0,Q.yQ)(I),w=(0,i.Kr)(()=>{let t,a,i,n=X(v,S,e);if((0,O.MA)(e)){const a=(0,O.Pc)(e);n=a.title||v(a.titleKey),t=v(a.subtitleKey),i=a}else t=k&&(0,r.F9)(v,k),i=k||_.lw;return e.isGiftUpgrade&&"starGiftUnique"===e.starGift?.type&&(t=S("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.isGiftResale&&"starGiftUnique"===e.starGift?.type&&(t=S("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.isPostsSearch&&(n=X(v,S,e),t=void 0),e.photo&&(i=void 0),e.isRefund&&(a=v("StarsRefunded")),e.hasFailed&&(a=v("StarsFailed")),e.isPending&&(a=v("StarsPending")),{title:n,description:t,avatarPeer:i,status:a}},[v,S,k,e]),P=(0,i.Kr)(()=>{if(G){const{backdrop:e}=(0,Q.uc)(I),t=[e.centerColor,e.edgeColor];return(0,C.FD)(C.FK,{children:[(0,C.Y)(ee.A,{className:oe.uniqueGiftBackground,backgroundColors:t}),(0,C.Y)(Z.A,{className:oe.giftSticker,sticker:Y,size:36,play:!1})]})}return Y?(0,C.Y)(Z.A,{className:oe.giftSticker,sticker:Y,size:36,play:!1}):A?(0,C.Y)(re,{media:A,isTransactionPreview:!0}):(0,C.FD)(C.FK,{children:[(0,C.Y)(f.A,{size:"medium",webPhoto:h,peer:w.avatarPeer}),Boolean(b)&&(0,C.Y)(V.A,{className:oe.subscriptionStar,type:"gold",size:"small"})]})},[G,A,h,w.avatarPeer,b,I,Y]),B=(0,u.A)(()=>{a({transaction:e})}),M=$(d)?oe.negative:oe.positive;return(0,C.FD)("div",{className:(0,s.A)(oe.root,t),onClick:B,children:[(0,C.Y)("div",{className:oe.preview,children:P}),(0,C.FD)("div",{className:oe.info,children:[(0,C.Y)("h3",{className:oe.title,children:w.title}),w.description&&(0,C.Y)("p",{className:oe.description,children:(0,c.A)(w.description)}),(0,C.FD)("p",{className:oe.date,children:[(0,z.L2)(1e3*l,v.code,!0),w.status&&` — (${w.status})`]})]}),(0,C.FD)("div",{className:oe.stars,children:[(0,C.Y)("span",{className:(0,s.A)(oe.amount,M),children:(0,O.hk)(S,d)}),d.currency===y.OUy&&(0,C.Y)(V.A,{className:oe.star,type:"gold",size:"adaptive"}),d.currency===y.ykW&&(0,C.Y)(p.A,{name:"toncoin",className:M})]})]})}),le=["all","inbound","outbound"],ce=["StarsTransactionsAll","StarsTransactionsIncoming","StarsTransactionsOutgoing"],de="StarsTransactionItem",ue=(0,i.ph)((0,n.EK)((e,{modal:t})=>({shouldForceHeight:t?.currency===y.ykW?Boolean(e.ton?.history?.all?.transactions.length):Boolean(e.stars?.history?.all?.transactions.length),starsBalanceState:e.stars,tonBalanceState:e.ton,canBuyPremium:!(0,o.n_C)(e),tonUsdRate:e.appConfig.tonUsdRate,tonTopupUrl:e.appConfig.tonTopupUrl,animationLevel:(0,M.l)(e).animationLevel}))(({modal:e,starsBalanceState:t,tonBalanceState:a,canBuyPremium:d,shouldForceHeight:f,tonUsdRate:S,tonTopupUrl:v,animationLevel:N})=>{const{closeStarsBalanceModal:k,loadStarsTransactions:G,loadStarsSubscriptions:Y,openStarsGiftingPickerModal:w,openInvoice:P,openUrl:B}=(0,n.ko)(),M=e?.currency||y.OUy,O=M===y.ykW?a:t,{balance:K,history:V}=O||{},{subscriptions:z}=M===y.OUy&&t||{},H=(0,m.A)(),J=(0,F.A)(),[W,_]=(0,i.J0)(!0),[Q,X]=(0,i.J0)(0),[$,Z,ee]=(0,D.A)(),te=Boolean(e&&(t||a)),{originStarsPayment:ae,originReaction:ie,originGift:ne,topup:re}=e||{},oe=ae||ie||ne||re,ue=ae?.form?.invoice?.totalAmount||ae?.subscriptionInfo?.subscriptionPricing?.amount||ie?.amount||ne?.gift.stars||re?.balanceNeeded,me=ue?ue-(K?.amount||0):void 0,fe=(0,i.Kr)(()=>{const e=(0,n.mS)();if(ie){const t=(0,o.hds)(e,ie.chatId);if(!t)return;return H("StarsNeededTextReactions",(0,I.Js)(H,t))}if(ae){const t=ae.form?.botId?(0,o.mBe)(e,ae.form.botId):void 0;if(!t)return;return H("StarsNeededText",(0,I.Yg)(t))}if(ne){const t=(0,o.mBe)(e,ne.peerId);if(!t)return;return H("StarsNeededTextGift",(0,r.F9)(J,t))}return"subs"===re?.purpose?H("StarsNeededTextLink"):re?.purpose===y.D3m?J("StarsNeededTextSendPaidMessages",void 0,{withMarkdown:!0,withNodes:!0}):void 0},[ie,ae,ne,re?.purpose,J,H]),pe=Boolean(V?.all?.transactions.length&&!oe),he=!oe,ge=(0,i.Kr)(()=>{const e=V?.all?.transactions.length||0;return 1===e?"35.5rem":2===e?"39.25rem":3===e?"43rem":"45rem"},[V?.all?.transactions.length]),Ae=(0,i.Kr)(()=>ce.map(e=>({title:J(e)})),[J]);(0,i.vJ)(()=>{te||(_(!0),X(0),ee())},[te]),(0,i.vJ)(()=>{oe?Z():ee()},[oe]);const be=(0,i.Kr)(()=>{if(!te)return;const e=H("lng_credits_summary_options_about").split("{link}");return[e[0],(0,C.Y)(h.A,{url:H("StarsTOSLink"),text:H("lng_credits_summary_options_about_link")}),e[1]]},[te,H]),Se=(0,u.A)(()=>{G({type:le[Q],isTon:M===y.ykW})}),ve=(0,u.A)(()=>{Y()}),Ne=(0,u.A)(()=>{w({})}),Ce=(0,u.A)(e=>{P({type:"stars",stars:e.stars,currency:e.currency,amount:e.amount})}),ke=(0,u.A)(()=>{B({url:v})});return(0,C.Y)(A.A,{className:(0,s.A)(E.root,!f&&!$&&E.minimal),isOpen:te,onClose:k,dialogStyle:`--modal-height: ${ge}`,children:(0,C.FD)("div",{className:(0,s.A)(E.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;_(t<=150)},children:[(0,C.Y)(g.A,{round:!0,size:"smaller",className:E.closeButton,color:"translucent",onClick:()=>k(),ariaLabel:J("Close"),children:(0,C.Y)(p.A,{name:"close"})}),M!==y.ykW&&(0,C.Y)(q,{balance:K,className:E.modalBalance}),(0,C.Y)("div",{className:(0,s.A)(E.header,W&&E.hiddenHeader),children:(0,C.Y)("h2",{className:E.starHeaderText,children:H("TelegramStars")})}),(0,C.Y)("div",{className:E.section,children:M===y.ykW?(()=>{const e=(0,l.UL)(K?.amount||0,y.ykW);return(0,C.FD)(C.FK,{children:[(0,C.Y)(L.A,{model:"speeding-diamond",color:"blue",title:J("CurrencyTon"),description:J("DescriptionAboutTon"),isDisabled:!te}),(0,C.FD)("div",{className:E.tonBalanceContainer,children:[(0,C.FD)("div",{className:E.tonBalance,children:[(0,C.Y)(p.A,{name:"toncoin",className:E.tonIconBalance}),e]}),Boolean(S)&&(0,C.Y)("span",{className:E.tonInUsd,children:`≈ ${(0,l.Ad)((0,l.C)(K?.amount||0,S,!0),"USD",J.code)}`})]}),(0,C.Y)(g.A,{className:E.topUpButton,onClick:ke,fluid:!0,children:J("ButtonTopUpViaFragment")})]})})():(0,C.FD)(C.FK,{children:[(0,C.Y)(L.A,{model:"swaying-star",color:"gold",title:me?H("StarsNeededTitle",ue):H("TelegramStars"),description:(0,c.A)(fe||H("TelegramStarsInfo"),["simple_markdown","emoji"]),isDisabled:!te}),d&&!$&&(0,C.Y)(g.A,{className:E.starButton,onClick:Z,fluid:!0,children:H("Star.List.BuyMoreStars")}),d&&!$&&he&&(0,C.Y)(g.A,{isText:!0,noForcedUpperCase:!0,className:E.starButton,fluid:!0,onClick:Ne,children:H("TelegramStarsGift")}),$&&t?.topupOptions&&(0,C.Y)(b.A,{starsNeeded:me,options:t.topupOptions,onClick:Ce})]})}),$&&(0,C.Y)("div",{className:E.tos,children:be}),M===y.ykW&&(0,C.Y)("div",{className:E.hint,children:J("TonModalHint")}),pe&&Boolean(z?.list.length)&&(0,C.FD)("div",{className:E.section,children:[(0,C.Y)("h3",{className:E.sectionTitle,children:H("StarMySubscriptions")}),(0,C.FD)("div",{className:E.subscriptions,children:[z?.list.map(e=>(0,C.Y)(j,{subscription:e},e.id)),z?.nextOffset&&(0,C.FD)(g.A,{isText:!0,disabled:z.isLoading,size:"smaller",noForcedUpperCase:!0,className:E.loadMore,onClick:ve,children:[(0,C.Y)(p.A,{name:"down",className:E.loadMoreIcon}),H("StarMySubscriptionsExpand")]})]})]}),pe&&(0,C.FD)("div",{className:E.container,children:[(0,C.Y)("div",{className:E.lastSection,children:(0,C.Y)(x.Ay,{name:(0,T.P)("slideOptimized",N,void 0,J.isRtl),activeKey:Q,renderCount:ce.length,shouldRestoreHeight:!0,className:E.transition,children:(0,C.Y)(U.A,{onLoadMore:Se,items:V?.[le[Q]]?.transactions,scrollContainerClosest:`.${E.main}`,itemSelector:`.${de}`,className:E.transactions,noFastList:!0,noScrollRestoreOnTop:!0,children:V?.[le[Q]]?.transactions.map(e=>(0,C.Y)(se,{transaction:e,className:de},`${e.id}-${e.isRefund}`))})})}),(0,C.Y)(R.A,{className:E.tabs,tabClassName:E.tab,activeTab:Q,tabs:Ae,onSwitchTab:X})]})]})})}));var me=a(48775),fe=a(29886),pe=a(84991),he=a(10187);const ge=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a=t?.form?.botId?(0,o.mBe)(e,t.form.botId):void 0,i="message"===t?.inputInvoice?.type?t.inputInvoice:void 0,n=i?(0,o.O5q)(e,i.chatId,i.messageId):void 0,r=i?(0,o.hds)(e,i.chatId):void 0,s=n?.content.paidMedia;return{bot:a,starsBalanceState:e.stars,paidMediaMessage:s?n:void 0,paidMediaChat:s?r:void 0}})(({modal:e,bot:t,starsBalanceState:a,paidMediaMessage:r,paidMediaChat:o})=>{const{closeStarsPaymentModal:l,openStarsBalanceModal:d,sendStarPaymentForm:p}=(0,n.ko)(),[b,S,v]=(0,D.A)(),k=Boolean(e?.inputInvoice&&a),y=(0,fe.A)(e),G=e||y,{form:Y,subscriptionInfo:w}=G||{},P=Y?.invoice?.totalAmount||w?.subscriptionPricing?.amount,B=Boolean(Y?.invoice.subscriptionPeriod),M=!w?.subscriptionPricing,T=Y?.photo,U=(0,m.A)(),R=(0,F.A)();(0,i.vJ)(()=>{k||v()},[k]);const x=(0,i.Kr)(()=>{if(!G?.inputInvoice)return"";const e=(0,I.Yg)(t),a=U("Stars.Intro.PurchasedText.Stars",P);if(r){const e=r.content.paidMedia.extendedMedia,t=e.every(e=>!e.duration),i=e.every(e=>Boolean(e.duration)),n=U(t?"Stars.Transfer.Photos":i?"Stars.Transfer.Videos":"Media",e.length),s=(0,I.Js)(U,o);return U("Stars.Transfer.UnlockInfo",[n,s,a])}return w?R("StarsSubscribeText",{chat:w.title,amount:P},{withNodes:!0,withMarkdown:!0,pluralValue:P}):B?R("StarsSubscribeBotText",{name:Y.title,amount:P,bot:e},{pluralValue:P}):U("Stars.Transfer.Info",[Y.title,e,a])},[G?.inputInvoice,t,U,P,r,w,B,Y,o,R]),L=(0,i.Kr)(()=>{if(w)return R("StarsSubscribeInfo",{link:(0,C.Y)(h.A,{url:R("StarsSubscribeInfoLink"),text:R("StarsSubscribeInfoLinkText")})},{withNodes:!0})},[w,R]),O=(0,i.Kr)(()=>{if(w)return(0,I.nr)(w)},[w]),K=(0,u.A)(()=>{const t=a?.balance;void 0!==P&&void 0!==t&&(P>t.amount?d({originStarsPayment:e}):(p({}),S()))});return(0,C.FD)(A.A,{contentClassName:E.paymentContent,isOpen:k,hasAbsoluteCloseButton:!0,isSlim:!0,onClose:l,children:[(0,C.Y)(q,{balance:a?.balance,className:E.modalBalance}),(0,C.FD)("div",{className:E.paymentImages,dir:U.isRtl?"ltr":"rtl",children:[r?(0,C.Y)(re,{media:r.content.paidMedia.extendedMedia}):O?(0,C.FD)(C.FK,{children:[(0,C.Y)(f.A,{className:E.paymentPhoto,peer:O,size:"giant"}),(0,C.Y)(V.A,{type:"gold",size:"adaptive",className:E.avatarStar})]}):(0,C.Y)(pe.A,{peer:T?void 0:t,avatarWebPhoto:T,avatarSize:"giant",badgeIcon:"star",badgeText:(0,H.Sm)(P),badgeClassName:E.amountBadge,className:E.paymentPhoto}),(0,C.Y)("img",{className:E.paymentImageBackground,src:N,alt:"",draggable:!1})]}),(0,C.Y)("h2",{className:E.headerText,children:U(O?"StarsSubscribeTitle":"StarsConfirmPurchaseTitle")}),M&&(0,C.Y)(he.A,{className:E.botItem,peerId:Y?.botId}),(0,C.Y)("div",{className:E.description,children:(0,c.A)(x,["simple_markdown","emoji"])}),(0,C.Y)(g.A,{className:E.paymentButton,onClick:K,isLoading:b,children:R(B?"StarsSubscribeBotButtonMonth":"StarsPay",{amount:(0,me.U2)(R,P,{asFont:!0})},{withNodes:!0})}),Boolean(L)&&(0,C.Y)("div",{className:(0,s.A)(E.disclaimer,E.smallerText),children:L})]})}));var Ae=a(89925),be=a(85982),Se=a(97040),ve=a(70046),Ne=a(96454),Ce=a(95807),ke=a(537),ye=a(80140);const Ie="biAUzmLA",Ge="hsDNs5hG",Ye="APNjRx1K",we=(0,i.ph)((0,n.EK)(e=>{const{currentUserId:t}=e,a=t?(0,o.mBe)(e,t):void 0,i=a?.emojiStatus,n=e.collectibleEmojiStatuses?.statuses;return{currentUserEmojiStatus:i,collectibleEmojiStatuses:n}})(({savedGift:e,currentUserEmojiStatus:t,collectibleEmojiStatuses:a})=>{const{openGiftTransferModal:r,openGiftResalePriceComposerModal:s,openGiftStatusInfoModal:l,setEmojiStatus:c,updateStarGiftPrice:d,showNotification:f,closeGiftInfoModal:p}=(0,n.ko)(),h=(0,F.A)(),A=(0,m.A)(),b=e?.gift,S="starGiftUnique"===b?.type?b.resellPrice:void 0,v=(0,n.mS)(),N=(0,o.nTw)(v).giftInfoModal,k=N?.peerId,I="starGiftUnique"===b?.type?b.slug:void 0,G=(0,i.Kr)(()=>{if(I)return a?.find(e=>"collectible"===e.type&&e.slug===I)},[I,a]),Y="collectible"===t?.type?t.slug:void 0,w=void 0!==I&&Y===I,P=Boolean(G)&&!w,B=(0,u.A)(()=>{e&&"starGiftUnique"===e?.gift.type&&(e.canTransferAt&&e.canTransferAt>(0,ye.Fm)()?f({message:{key:"NotificationGiftCanTransferAt",variables:{date:(0,z.U)(A,1e3*e.canTransferAt)}}}):r({gift:e}))}),M=(0,u.A)(()=>{w?c({emojiStatus:{type:"regular",documentId:y.zNY}}):G&&l({emojiStatus:G})}),T=(0,u.A)(()=>{e&&k&&(e.canResellAt&&e.canResellAt>(0,ye.Fm)()?f({message:{key:"NotificationGiftCanResellAt",variables:{date:(0,z.U)(A,1e3*e.canResellAt)}}}):s({peerId:k,gift:e}))}),D=(0,u.A)(()=>{e&&"starGiftUnique"===e.gift.type&&e.inputGift&&(p(),d({gift:e.inputGift,price:{currency:y.OUy,amount:0,nanos:0}}),f({icon:"unlist-outline",message:{key:"NotificationGiftIsUnlist",variables:{gift:h("GiftUnique",{title:e.gift.title,number:e.gift.number})}}}))});return(0,C.FD)("div",{className:"feHNN0j8",children:[(0,C.Y)(g.A,{color:"transparentBlured",iconName:"gift-transfer-inline",iconAlignment:"top",iconClassName:Ye,onClick:B,ariaLabel:h("GiftInfoTransfer"),noForcedUpperCase:!0,fluid:!0,className:Ie,children:(0,C.Y)("span",{className:Ge,children:h("GiftInfoTransfer")})}),(P||!w)&&(0,C.Y)(g.A,{color:"transparentBlured",iconName:w?"crown-take-off":"crown-wear",iconAlignment:"top",iconClassName:Ye,onClick:P||w?M:void 0,disabled:!P&&!w,ariaLabel:h(w?"GiftInfoTakeOff":"GiftInfoWear"),noForcedUpperCase:!0,fluid:!0,className:Ie,children:(0,C.Y)("span",{className:Ge,children:h(w?"GiftInfoTakeOff":"GiftInfoWear")})}),!S&&(0,C.Y)(g.A,{color:"transparentBlured",iconName:"sell",iconAlignment:"top",iconClassName:Ye,onClick:T,ariaLabel:h("Sell"),noForcedUpperCase:!0,fluid:!0,className:Ie,children:(0,C.Y)("span",{className:Ge,children:h("Sell")})}),Boolean(S)&&(0,C.Y)(g.A,{color:"transparentBlured",iconName:"unlist",iconAlignment:"top",iconClassName:Ye,onClick:D,ariaLabel:h("GiftInfoUnlist"),noForcedUpperCase:!0,fluid:!0,className:Ie,children:(0,C.Y)("span",{className:Ge,children:h("GiftInfoUnlist")})})]})})),Pe=(0,i.ph)(({modelAttribute:e,backdropAttribute:t,patternAttribute:a,title:r,subtitle:o,subtitlePeer:l,className:c,resellPrice:d,showManageButtons:u,savedGift:m})=>{const{openChat:f}=(0,n.ko)(),h=(0,F.A)(),[g,A,b]=(0,D.A)(!1),S=(0,ke.A)([e,t,a]),v=t?.textColor,N=(0,i.Kr)(()=>{const e=[t.centerColor,t.edgeColor],i=t.patternColor;return(0,C.Y)(ee.A,{className:"UvhsGZLf",backgroundColors:e,patternColor:i,patternIcon:a.sticker})},[t,a]);return(0,C.FD)("div",{className:(0,s.A)("irv1C8bo",g&&"interactive-gift",u&&"QcTw5OSp",c),children:[(0,C.FD)(x.Ay,{className:"Tu6_OHoq",slideClassName:(0,s.A)("iUTKLzTN"),activeKey:S,direction:1,name:"zoomBounceSemiFade",children:[N,(0,C.Y)(Z.A,{className:"a1ASgPwu",sticker:e.sticker,size:120,noLoop:!g,onMouseEnter:Ne.TF?void 0:A,onMouseLeave:Ne.TF?void 0:b})]}),r&&(0,C.Y)("h1",{className:"ECTvfOda",children:r}),Boolean(o)&&(0,C.Y)("div",{className:(0,s.A)("S6JwvHWD",l&&"V7kDVPLm"),style:(0,Ce.A)(v&&`color: ${v}`),onClick:()=>{l&&f({id:l.id})},children:o}),m&&u&&(0,C.Y)(we,{savedGift:m}),d&&(0,C.FD)("p",{className:"zTVWZg63",children:[(0,C.Y)("span",{children:(0,O.hk)(h,d)}),"XTR"===d.currency&&(0,C.Y)(V.A,{type:"gold",size:"middle"}),"TON"===d.currency&&(0,C.Y)(p.A,{name:"toncoin"})]})]})}),Be="qBOIq6Jn",Me="sso9uZM6",Te="NuWOY7ED",De=[0,-50],Fe=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a="peer"===t?.transaction?.peer?.type&&t.transaction.peer.id,i=a?(0,o.PVB)(e,a):void 0,n=e.appConfig.starsPaidMessageCommissionPermille,r=t?.transaction.amount,s=t?.transaction.isGift?r?.currency===y.OUy?(0,o.WLj)(e,r?.amount):(0,o.OD9)(e,r?.amount):void 0;return{peer:i,canPlayAnimatedEmojis:(0,o.BWX)(e),topSticker:s,paidMessageCommission:n}})(({modal:e,peer:t,canPlayAnimatedEmojis:a,topSticker:r,paidMessageCommission:o})=>{const{showNotification:l,openMediaViewer:c,closeStarsTransactionModal:d}=(0,n.ko)(),g=(0,F.A)(),A=(0,m.A)(),{transaction:b}=e||{},S=(0,i.li)(),v=(0,u.A)(()=>{const e=b?.extendedMedia;e&&c({origin:Ae.TQ.StarsTransaction,standaloneMedia:e.flatMap(e=>Object.values(e))})}),N=(0,u.A)(()=>{S.current?.()}),k=(0,u.A)(e=>{S.current=e}),G=(0,i.Kr)(()=>{if(!b)return;const{giveawayPostId:e,photo:i,amount:n,isGiftUpgrade:c,starGift:d,isGiftResale:u,starRefCommision:m}=b,S=b?.starGift,G="starGiftUnique"===S?.type,Y=b?.starGift?(0,Q.yQ)(b.starGift):r,w=G?(0,Q.uc)(S):void 0,P=b.peer&&(0,O.MA)(b)&&(0,O.Pc)(b)||void 0,B="peer"===b.peer?.type?b.peer.id:void 0,M=b.peer&&A(function(e){switch(e.type){case"appStore":return"AppStore";case"playMarket":return"PlayMarket";case"fragment":return"Fragment";case"premiumBot":return"StarsTransactionBot";case"ads":return"StarsTransactionAds";case"api":return"Stars.Intro.Transaction.TelegramBotApi.Subtitle";default:return"Stars.Transaction.Unsupported.Title"}}(b.peer)),T=X(A,g,b),D=t&&b.messageId&&!c?(0,I.yt)(t,void 0,b.messageId):void 0,F=t&&e?(0,I.yt)(t,void 0,e):void 0,U=b.extendedMedia,R=U?.length||0,x=U?.every(e=>!e.video),L=U?.every(e=>!e.photo),K=A(x?"Stars.Transfer.Photos":L?"Stars.Transfer.Videos":"Media",R),E=b.description||(c&&"starGiftUnique"===d?.type?d.title:void 0)||(U?K:void 0),q=!U&&!Y&&!b.isPostsSearch,J=i?void 0:!(0,O.MA)(b)&&t||P,W=G&&(0,C.Y)("div",{className:(0,s.A)(Be,"ApoQz22o"),children:(0,C.Y)(Pe,{backdropAttribute:w.backdrop,patternAttribute:w.pattern,modelAttribute:w.model,title:S.title,subtitle:g("GiftInfoCollectible",{number:S.number}),resellPrice:b.amount})}),j=$(n)?"xDyq9cc0":"jvBZSrpd",_=(0,C.FD)("div",{className:Be,children:[U&&(0,C.Y)(re,{className:(0,s.A)("C5r59yiV","transaction-media-preview"),media:U,onClick:v}),!U&&Y&&(0,C.Y)(Z.A,{sticker:Y,play:a,noLoop:!0},b.id),q&&(0,C.Y)(f.A,{className:"hcrszlpT",peer:J,webPhoto:i,size:"giant",onMouseMove:N}),!Y&&!b.isPostsSearch&&(0,C.Y)(Se.A,{className:(0,s.A)("nML8IQqX"),color:"gold",onRequestAnimation:k,centerShift:De}),Boolean(T)&&(0,C.Y)("h1",{className:"ZZAj3hj7",children:T}),(0,C.Y)("p",{className:Te,children:E}),(0,C.FD)("p",{className:Me,children:[(0,C.Y)("span",{className:(0,s.A)(Me,j),children:(0,O.hk)(g,n)}),n.currency===y.OUy&&(0,C.Y)(V.A,{type:"gold",size:"middle"}),"TON"===n.currency&&(0,C.Y)(p.A,{name:"toncoin",className:j}),b.isRefund&&(0,C.Y)("p",{className:"sxWAwxTd",children:g("Refunded")})]}),Boolean(b.paidMessages&&b.starRefCommision&&o)&&(0,C.Y)("p",{className:Te,children:g("PaidMessageTransactionDescription",{percent:(0,H.l9)(o/10)},{withNodes:!0,withMarkdown:!0})})]}),ee=[];let te;b&&m&&!b.paidMessages&&!u&&ee.push([A("StarsTransaction.StarRefReason.Title"),A("StarsTransaction.StarRefReason.Program")]),c&&ee.push([A("StarGiftReason"),A("StarGiftReasonUpgrade")]),u&&ee.push([A("StarGiftReason"),$(b.amount)?g("StarGiftSaleTransaction"):g("StarGiftPurchaseTransaction")]),te=c?A("Stars.Transaction.GiftFrom"):$(n)||b.isMyGift?A("Stars.Transaction.To"):!b.starRefCommision||b.paidMessages||u?A(B?"Star.Transaction.From":"Stars.Transaction.Via"):A("StarsTransaction.StarRefReason.Miniapp"),b.isPostsSearch||ee.push([te,B?{chatId:B}:M||""]),b.starRefCommision&&b.paidMessages&&ee.push([g("PaidMessageTransactionTotal"),(0,me.U2)(g,b.amount.amount/((100-b.starRefCommision)/100),{asFont:!1,className:"cU5QlvwL",containerClassName:"Z2YALGgl"})]),D&&ee.push([A("Stars.Transaction.Reaction.Post"),(0,C.Y)(h.A,{url:D,text:D})]),F&&b.amount.currency===y.OUy&&(ee.push([A("BoostReason"),(0,C.Y)(h.A,{url:F,text:A("Giveaway")})]),ee.push([A("Gift"),A("Stars",b.amount,"i")])),b.id&&ee.push([A("Stars.Transaction.Id"),(0,C.FD)(C.FK,{children:[(0,C.Y)("div",{className:"tMF8VIOM",onClick:()=>{(0,be.eM)(b.id),l({message:A("StarsTransactionIDCopied")})},children:b.id}),(0,C.Y)(p.A,{className:"voCttFzS",name:"copy"})]})]),ee.push([A("Stars.Transaction.Date"),(0,z.L2)(1e3*b.date,A.code,!0)]);const ae=A("lng_credits_box_out_about").split("{link}");return{header:G?W:_,tableData:ee,footer:(0,C.FD)("span",{className:"KgzPpgS6",children:[ae[0],(0,C.Y)(h.A,{url:A("StarsTOSLink"),text:A("lng_credits_summary_options_about_link")}),ae[1]]})}},[b,A,g,t,a,r,o,k]),Y=(0,fe.A)(G)||G;return(0,C.Y)(ve.A,{isOpen:Boolean(b),className:"IzhfRIWu",hasBackdrop:"starGiftUnique"===b?.starGift?.type,header:Y?.header,tableData:Y?.tableData,footer:Y?.footer,buttonText:A("OK"),onClose:d})})),Ue="oBLHWBtJ",Re=[0,-50],xe=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a=t?.subscription.peerId;return{peer:a?(0,o.PVB)(e,a):void 0}})(({modal:e,peer:t})=>{const{closeStarsSubscriptionModal:a,fulfillStarsSubscription:o,changeStarsSubscription:l,checkChatInvite:c,loadStarStatus:d,openInvoice:p}=(0,n.ko)(),A=(0,m.A)(),b=(0,F.A)(),{subscription:S}=e||{},v=(0,i.li)(),N=(0,u.A)(()=>{v.current?.()}),k=(0,u.A)(e=>{v.current=e}),I=(0,i.Kr)(()=>{if(!S)return"hidden";if(S.canRefulfill)return"refulfill";const e=S.until>Date.now()/1e3;if(e&&!S.isCancelled)return"cancel";if(e&&S.isCancelled)return"renew";const t=S.chatInviteHash||S.invoiceSlug;return!e&&t?"restart":"ok"},[S]),G=(0,u.A)(()=>{if(S){switch(I){case"refulfill":o({id:S.id});break;case"restart":S.chatInviteHash?c({hash:S.chatInviteHash}):S.invoiceSlug&&p({type:"slug",slug:S.invoiceSlug}),d();break;case"renew":l({id:S.id,isCancelled:!1});break;case"cancel":l({id:S.id,isCancelled:!0})}a()}}),Y=(0,i.Kr)(()=>{if(!S||!t)return;const{pricing:e,until:a,isCancelled:i,canRefulfill:n,photo:o,title:l,hasBotCancelled:c}=S,d=(0,r.mO)(t),u=(0,C.FD)("div",{className:"E3R22yAI",children:[(0,C.FD)("div",{className:"wuTMXDP9",children:[(0,C.Y)(f.A,{peer:o?void 0:t,webPhoto:o,size:"giant",onMouseMove:N}),(0,C.Y)(V.A,{className:"enRetSny",type:"gold",size:"adaptive"})]}),(0,C.Y)(Se.A,{className:(0,s.A)("zGCayu45"),color:"gold",onRequestAnimation:k,centerShift:Re}),(0,C.Y)("h1",{className:"qdydQHgc",children:l||A("StarsSubscriptionTitle")}),(0,C.Y)("p",{className:"FI6rEJlK",children:b("StarsPerMonth",{amount:e.amount},{withNodes:!0,specialReplacement:{[y.Cyx]:(0,C.Y)(V.A,{className:"J8HIcN6k",size:"adaptive",type:"gold"})}})})]}),m=[];m.push([A(d?"StarsSubscriptionBot":"StarsSubscriptionChannel"),{chatId:t.id}]),l&&m.push([A("StarsSubscriptionBotProduct"),l]);const p=a<Date.now()/1e3;m.push([A(p?"StarsSubscriptionUntilExpired":i?"StarsSubscriptionUntilExpires":"StarsSubscriptionUntilRenews"),(0,z.L2)(1e3*a,A.code,!0)]);const v=b("StarsTransactionTOS",{link:(0,C.Y)(h.A,{url:b("StarsTransactionTOSLink"),text:b("StarsTransactionTOSLinkText")})},{withNodes:!0});return{header:u,tableData:m,footer:(0,C.FD)("span",{className:"GMWMuWCr",children:[(0,C.Y)("p",{className:Ue,children:v}),i&&(0,C.Y)("p",{className:"nkwiG25Q",children:A(c?"StarsSubscriptionBotCancelledText":"StarsSubscriptionCancelledText")}),n&&(0,C.Y)("p",{className:Ue,children:A("StarsSubscriptionRefulfillInfo",(0,z.L2)(1e3*a,A.code,!0))}),!i&&!n&&p&&(0,C.Y)("p",{className:Ue,children:A("StarsSubscriptionExpiredInfo",(0,z.L2)(1e3*a,A.code,!0))}),!i&&!n&&!p&&(0,C.Y)("p",{className:Ue,children:A("StarsSubscriptionCancelInfo",(0,z.L2)(1e3*a,A.code,!0))}),"hidden"!==I&&(0,C.Y)(g.A,{color:"cancel"===I?"danger":"primary",isText:"cancel"===I,onClick:G,children:A("cancel"===I?"StarsSubscriptionCancel":"refulfill"===I?"StarsSubscriptionRefulfill":"restart"===I?"StarsSubscriptionAgain":"renew"===I?"StarsSubscriptionRenew":"OK")})]})}},[I,b,A,t,S]),w=(0,fe.A)(Y)||Y;return(0,C.Y)(ve.A,{isOpen:Boolean(S),className:"eR_RZfGB",header:w?.header,tableData:w?.tableData,footer:w?.footer,onClose:a})}));var Le=a(43874),Oe=a(34431),Ke=a(19806),Ve=a(22699),Ee=a(24433),qe=a(32581),ze=a(66644),He=a(15283),Je=a(93545),We=a(68292),je=a(85118);const _e={root:"CuBAw2yg",slider:"euOOAbZi",sparkles:"_L1YQTIP",progress:"kwK0cNPX",floatingBadgeWrapper:"uvlMoXj0",floatingBadge:"BGSDWAYc",floatingBadgeText:"qqQan8uF",floatingBadgeTriangle:"mIdJOmsB"},Qe=[50,100,500,1e3,2e3,5e3,1e4];function Xe(e,t){const a=e.findIndex(e=>t<=e),i=e[a-1]||1,n=e[a]||e[e.length-1];return a+(t-i)/(n-i)}function $e(e,t){const a=Math.floor(t),i=e[a-1]||1,n=i+((e[a]||e[e.length-1])-i)*(t-a);return Math.round(n)}const Ze=(0,i.ph)(({maxValue:e,defaultValue:t,className:a,onChange:n})=>{const r=(0,i.li)(),o=(0,i.Kr)(()=>{const t=[];for(let a=0;a<Qe.length;a++)if(Qe[a]<e&&t.push(Qe[a]),Qe[a]>=e){t.push(e);break}return t},[e]),[l,c]=(0,i.J0)(0);(0,He.A)(()=>{c(Xe(o,t))});const d=(0,u.A)(()=>{const e=r.current;if(!e)return;const t=e.parentElement;(0,ze.YS)(()=>{const a=t.offsetLeft+e.offsetWidth/2,i=t.offsetLeft+t.offsetWidth-e.offsetWidth/2;(0,ze.RK)(()=>{t.style.setProperty("--_min-x",`${a}px`),t.style.setProperty("--_max-x",`${i}px`)})})});(0,Je.A)(r,d);const m=(0,u.A)(e=>{const t=Number(e.currentTarget.value);c(t),n($e(o,t))});return(0,C.FD)("div",{className:(0,s.A)(_e.root,a),style:"--progress: "+l/o.length,children:[(0,C.Y)("div",{className:_e.floatingBadgeWrapper,children:(0,C.FD)("div",{className:_e.floatingBadge,ref:r,children:[(0,C.FD)("div",{className:_e.floatingBadgeText,children:[(0,C.Y)(p.A,{name:"star",className:_e.floatingBadgeIcon}),(0,C.Y)(We.A,{text:(0,H.Sm)($e(o,l))})]}),(0,C.FD)("svg",{className:_e.floatingBadgeTriangle,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:[(0,C.Y)("defs",{children:(0,C.FD)("linearGradient",{id:"StarBadgeTriangle",x1:"0",x2:"1",y1:"0",y2:"0",children:[(0,C.Y)("stop",{offset:"-50%","stop-color":"#FFAA00"}),(0,C.Y)("stop",{offset:"150%","stop-color":"#FFCD3A"})]})}),(0,C.Y)("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"url(#StarBadgeTriangle)"})]})]})}),(0,C.Y)("div",{className:_e.progress,children:(0,C.Y)(je.A,{preset:"progress",className:_e.sparkles})}),(0,C.Y)("input",{className:_e.slider,type:"range",min:0,max:o.length,defaultValue:Xe(o,t),step:"any",onChange:m})]})}),et={content:"RdhRpsCn",title:"yzbjj73U",slider:"xePPMXOI",description:"BlpfdOtK",itemInfo:"nS9V516D",itemTitle:"sH5Nukjy",itemSubtitle:"dHlNODTI",itemIcon:"H_iHihXU",sendAsPeerButtonAvatar:"_mjvLELm",sendAsPeerMenuButton:"zxsRaWYV",buttonDownIcon:"zrwUUELS",sendAsPeerMenuBubble:"X1PB6mhQ",sendAsPeerMenu:"Px1MDij9",sendAsPeersMenuContainer:"Al1nfhHJ",headerControlPanel:"vu90kSL_",separator:"uhQLUjmo",checkBox:"Mc3bVeF0",topLabel:"bnou4CpV",top:"QludQDKR",topBadge:"JBF9pTUK",buttonStar:"NJJFuym9",topPeer:"Ty4Ud_Rd",disclaimer:"KRvkHeo1"},tt={avatarIcon:"author-hidden",customPeerAvatarColor:"#9eaab5",isCustomPeer:!0,titleKey:"StarsReactionAnonymous"},at=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a=t&&(0,o.hds)(e,t.chatId),i=t&&(0,o.O5q)(e,t.chatId,t.messageId),n=e.stars?.balance,r=e.appConfig.paidReactionMaxAmount||2500,s=e.settings.paidReactionPrivacy,l=a?.sendPaidReactionsAsPeerIds,c=e.currentUserId;return{chat:a,message:i,starBalance:n,maxAmount:r,defaultPrivacy:s,sendPaidReactionsAsPeerIds:l,currentUserId:c,currentUser:(0,o.mBe)(e,c)}})(({modal:e,chat:t,message:a,maxAmount:l,starBalance:d,defaultPrivacy:b,sendPaidReactionsAsPeerIds:S,currentUserId:v,currentUser:N})=>{const{closePaidReactionModal:k,addLocalPaidReaction:I,loadSendPaidReactionsAs:G}=(0,n.ko)(),[Y,w]=(0,i.J0)(50),[P,B,M]=(0,D.A)(),[T,U]=(0,i.J0)(!0),[R,x]=(0,i.J0)(v),L=t?.id,O=R?(0,o.PVB)((0,n.mS)(),R):N,K=(0,m.A)(),{isMobile:V}=(0,Le.Ay)(),E=(0,F.A)(),z=(0,u.A)(e=>{U(!e.target.checked)}),J=(0,u.A)(e=>{w(e),B()});(0,i.vJ)(()=>{L&&!S&&G({chatId:L})},[L,S]);const W=(0,i.Kr)(()=>{const e=S?.map(e=>e.id).filter(e=>e!==L);return e?.unshift(v),e},[S,L,v]),j=W&&W.length>1;(0,i.vJ)(()=>{e||M()},[e]),(0,i.vJ)(()=>{const e=a?.reactions?.topReactors?.find(e=>e.isMy);if(e)return U(Boolean(e.isAnonymous)),void(e.peerId&&x(e.peerId));U("anonymous"===b?.type||!1),"peer"===b?.type&&W?.includes(b.peerId)?x(b.peerId):x(v)},[b,a?.reactions?.topReactors,W,v]);const _=(0,u.A)(()=>{e&&(I({chatId:e.chatId,messageId:e.messageId,count:Y,isPrivate:T,peerId:T||R===v?void 0:R,shouldIgnoreDefaultPrivacy:!0}),k())}),Q=(0,u.A)(e=>{U(!1),x(e)}),X=(0,u.A)(e=>{const t=(0,o.PVB)((0,n.mS)(),e),a=R===e&&!T;if(t)return(0,C.FD)(Ee.A,{onClick:()=>Q(e),children:[(0,C.Y)(f.A,{size:"small",peer:t}),(0,C.FD)("div",{className:(0,s.A)(et.itemInfo),children:[(0,C.Y)(Oe.A,{className:et.itemTitle,peer:t,noFake:!0,noVerified:!0}),(0,C.Y)("span",{className:et.itemSubtitle,children:(0,r.mO)(t)?E("PeerPersonalAccount"):E("PeerChannel")})]}),(0,C.Y)(p.A,{className:et.itemIcon,name:a?"check":"placeholder"})]})}),$=(0,i.Kr)(()=>({onTrigger:e,isOpen:t})=>(0,C.FD)(g.A,{ripple:!V,size:"smaller",color:"translucent",className:(0,s.A)(et.sendAsPeerMenuButton,t?"active":""),onClick:e,ariaLabel:E("AccDescrOpenMenu2"),children:[(0,C.Y)(f.A,{className:et.sendAsPeerButtonAvatar,size:"mini",peer:T?tt:O}),(0,C.Y)(p.A,{name:"down",className:et.buttonDownIcon})]}),[V,E,O,T]),Z=(0,i.Kr)(()=>{if(j)return(0,C.Y)(Ve.A,{className:(0,s.A)(et.sendAsPeerMenu,"with-menu-transitions"),bubbleClassName:et.sendAsPeerMenuBubble,trigger:$,positionX:"right",autoClose:!0,children:W.map(e=>X(e))})},[$,W,j]),ee=(0,i.Kr)(()=>{const e=(0,n.mS)(),t=a?.reactions?.topReactors;if(!t)return;const i=[];let r=!1,s=0;if(t.forEach(t=>{const a=t.peerId?(0,o.PVB)(e,t.peerId):void 0;if(!a&&!t.isAnonymous&&!t.isMy)return;if(t.isMy&&(s=t.count),t.isMy&&(t.peerId!==R||t.isAnonymous&&!T))return;const n=R===t.peerId||T&&t.isAnonymous;n&&(r=!0),i.push({amount:t.count,localAmount:n&&P?Y:0,isMy:t.isMy,isAnonymous:t.isAnonymous,user:a})}),!r){const t=(0,o.PVB)(e,R);i.push({amount:s,localAmount:P?Y:0,isMy:!0,user:t})}return i.sort((e,t)=>t.amount+t.localAmount-(e.amount+e.localAmount)),i.slice(0,3)},[P,a?.reactions?.topReactors,Y,R,T]),te=t&&(0,r.F9)(K,t);return(0,C.FD)(A.A,{isOpen:Boolean(e),onClose:k,isSlim:!0,hasAbsoluteCloseButton:!0,contentClassName:et.content,isLowStackPriority:!0,children:[(0,C.Y)("div",{className:et.sendAsPeersMenuContainer,children:Z}),(0,C.Y)("div",{className:et.headerControlPanel,children:(0,C.Y)(q,{balance:d,className:et.modalBalance,withAddButton:!0})}),(0,C.Y)(Ze,{className:et.slider,defaultValue:50,maxValue:l,onChange:J}),(0,C.Y)("h3",{className:et.title,children:K("StarsReactionTitle")}),(0,C.Y)("div",{className:et.description,children:(0,c.A)(K("StarsReactionText",te),["simple_markdown","emoji"])}),(0,C.Y)(qe.A,{children:ee&&(0,C.Y)("div",{className:et.topLabel,children:K("StarsReactionTopSenders")})}),ee&&(0,C.Y)("div",{className:et.top,children:ee.map(e=>{const t=(0,H.Sm)(e.amount+e.localAmount),a=e.isAnonymous||!e.user||e.isMy&&T?tt:e.user,i="isCustomPeer"in a?K(a.titleKey):a&&(0,r.F9)(K,a);return(0,C.Y)(pe.A,{className:et.topPeer,peer:a,badgeText:t,badgeIcon:"star",badgeClassName:et.topBadge,text:i},`${e.user?.id||"anonymous"}-${t}`)})}),ee&&(0,C.Y)(qe.A,{className:et.separator}),(0,C.Y)(Ke.A,{className:(0,s.A)(et.checkBox,"dialog-checkbox"),checked:!T,onChange:z,label:K("StarsReactionShowMeInTopSenders")}),(0,C.Y)(g.A,{onClick:_,children:E("SendPaidReaction",{amount:Y},{withNodes:!0,specialReplacement:{[y.Cyx]:(0,C.Y)(p.A,{className:et.buttonStar,name:"star"})}})}),(0,C.Y)("p",{className:et.disclaimer,children:E("StarsReactionTerms",{link:(0,C.Y)(h.A,{text:E("StarsReactionLinkText"),url:E("StarsReactionLink")})},{withNodes:!0})})]})}));var it=a(37836),nt=a(5912),rt=a(23174),ot=a(65632),st=a(20333),lt=a(36143),ct=a(96530),dt=a(22720),ut=a(63152),mt=a(94079);const ft="zZUpGRSI",pt="zAee80Dv",ht="nTPAv1ci",gt=(0,i.ph)((0,n.EK)((e,{peerId:t})=>{const a=(0,o.SJA)(e),{stars:i}=e,{isBlurred:n,patternColor:r,background:s,backgroundColor:l}=(0,o.Gyz)(e,a)||{},c=(0,o.PVB)(e,t),d=(0,o.WA9)(e,t),u=(0,o.vGo)(e,t),m=e.currentUserId===t,f=!m&&u?.disallowedGifts?.shouldDisallowUniqueStarGifts,p=!m&&u?.disallowedGifts?.shouldDisallowLimitedStarGifts,h=(0,o.nTw)(e);return{starBalance:i?.balance,peer:c,theme:a,isBackgroundBlurred:n,patternColor:r,customBackground:s,backgroundColor:l,captionLimit:e.appConfig.starGiftMaxMessageLength,currentUserId:e.currentUserId,isPaymentFormLoading:h.isPaymentFormLoading,paidMessagesStars:d,areUniqueStarGiftsDisallowed:f,shouldDisallowLimitedStarGifts:p}})(function({gift:e,giftByStars:t,peerId:a,peer:o,captionLimit:c,theme:d,isBackgroundBlurred:m,patternColor:f,backgroundColor:p,customBackground:h,currentUserId:A,isPaymentFormLoading:b,starBalance:S,paidMessagesStars:v,areUniqueStarGiftsDisallowed:N,shouldDisallowLimitedStarGifts:k}){const{sendStarGift:y,sendPremiumGiftByStars:I,openInvoice:G,openGiftUpgradeModal:Y,openStarsBalanceModal:w}=(0,n.ko)(),P=(0,F.A)(),[B,M]=(0,i.J0)(""),[T,D]=(0,i.J0)(!1),[U,R]=(0,i.J0)(!1),[x,L]=(0,i.J0)(!1),O=(0,ot.A)(d,h);(0,i.vJ)(()=>{k&&R(!0)},[k,U]);const K="id"in e&&"starGift"===e.type,V="months"in e,E=t&&"amount"in t,q=o&&(0,r.mO)(o),z=a===A,H=(0,i.Kr)(()=>{if(V){const a=x&&E?t:e;return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"giftPremium",amount:a.amount,currency:a.currency,months:e.months,message:B?{text:B}:void 0}}}}if(K)return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"starGift",message:B?.length?{text:B}:void 0,isNameHidden:T||void 0,starsToConvert:e.starsToConvert,canUpgrade:U||void 0,alreadyPaidUpgradeStars:U?e.upgradeStars:void 0,gift:e,peerId:a,fromId:A}}}},[A,e,B,K,T,U,a,x,E,t,V]),J=(0,u.A)(e=>{M(e.target.value)}),W=(0,u.A)(()=>{D(!T)}),j=(0,u.A)(()=>{R(!U)}),_=(0,u.A)(()=>{E&&L(!x)}),Q=(0,u.A)(()=>{K&&Y({giftId:e.id,peerId:a})}),X=(0,u.A)(()=>{w({})}),$=(0,u.A)(()=>{K?y({peerId:a,shouldHideName:T,gift:e,message:B?{text:B}:void 0,shouldUpgrade:U}):x&&E?I({userId:a,months:t.months,amount:t.amount,message:B?{text:B}:void 0}):V&&G({type:"giftcode",userIds:[a],currency:e.currency,amount:e.amount,option:e,message:B?{text:B}:void 0})}),Z=E&&S&&S.amount>t.amount,ee=(0,s.A)("ZORVRSG3","soDpW2YR",h&&"Eny_G3JI",p&&"TkJZPU2u",h&&m&&"M6k91TdM");if((K||V)&&H)return(0,C.FD)("div",{className:(0,s.A)("jKOG0It6","custom-scroll"),children:[(0,C.FD)("div",{className:(0,s.A)("CB1mxsgp","MessageList"),inert:!0,style:(0,Ce.A)(`--pattern-color: ${f}`,p&&`--theme-background-color: ${p}`),children:[(0,C.Y)("div",{className:ee,style:O?`--custom-background: ${O}`:void 0}),(0,C.Y)(lt.A,{message:H,threadId:rt.l3,appearanceOrder:0},K?e.id:V?e.months:void 0)]}),function(){const a=c?c-B.length:void 0,i=(0,r.F9)(P,o);return(0,C.FD)("div",{className:"Y68CEIKn",children:[!v&&(0,C.Y)(mt.A,{className:"o5r2IPoA",onChange:J,value:B,label:P("GiftMessagePlaceholder"),maxLength:c,maxLengthIndicator:a&&a<50?a.toString():void 0}),Z&&(0,C.FD)(dt.A,{className:ft,narrow:!0,ripple:!0,onClick:_,children:[(0,C.Y)("span",{children:P("GiftPremiumPayWithStars",{stars:(0,me.U2)(P,t.amount,{className:pt})},{withNodes:!0})}),(0,C.Y)(ut.A,{checked:x,onChange:_,label:P("GiftPremiumPayWithStarsAcc")})]}),E&&S&&(0,C.Y)("div",{className:ht,children:P("GiftPremiumDescriptionYourBalance",{stars:(0,me.U2)(P,S.amount,{className:pt}),link:(0,C.Y)(ct.A,{isPrimary:!0,onClick:X,children:P("GetMoreStarsLinkText")})},{withNodes:!0,withMarkdown:!0})}),K&&Boolean(e.upgradeStars)&&!N&&(0,C.FD)(dt.A,{className:ft,narrow:!0,ripple:!0,onClick:j,disabled:k,children:[(0,C.Y)("span",{children:P("GiftMakeUnique",{stars:(0,me.U2)(P,e.upgradeStars,{className:pt})},{withNodes:!0})}),(0,C.Y)(ut.A,{checked:U,onChange:j,label:P("GiftMakeUniqueAcc")})]}),K&&Boolean(e.upgradeStars)&&!N&&(0,C.Y)("div",{className:ht,children:q?P("GiftMakeUniqueDescription",{user:i,link:(0,C.Y)(ct.A,{isPrimary:!0,onClick:Q,children:P("GiftMakeUniqueLink")})},{withNodes:!0}):P("GiftMakeUniqueDescriptionChannel",{peer:i,link:(0,C.Y)(ct.A,{isPrimary:!0,onClick:Q,children:P("GiftMakeUniqueLink")})},{withNodes:!0})}),K&&(0,C.FD)(dt.A,{className:ft,narrow:!0,ripple:!0,onClick:W,children:[(0,C.Y)("span",{children:P("GiftHideMyName")}),(0,C.Y)(ut.A,{checked:T,onChange:W,label:P("GiftHideMyName")})]}),K&&(0,C.Y)("div",{className:ht,children:z?P("GiftHideNameDescriptionSelf"):q?P("GiftHideNameDescription",{receiver:i}):P("GiftHideNameDescriptionChannel")})]})}(),(0,C.Y)("div",{className:"ATowWJ60"}),function(){const a=x&&E?(0,me.U2)(P,t.amount,{asFont:!0}):K?(0,me.U2)(P,e.stars+(U?e.upgradeStars:0),{asFont:!0}):V?(0,l.vv)(P,e.amount,e.currency):void 0;return(0,C.FD)("div",{className:"jxWZSvet",children:[K&&Boolean(e.availabilityRemains)&&(0,C.Y)(st.A,{isPrimary:!0,progress:e.availabilityRemains/e.availabilityTotal,rightText:P("GiftSoldCount",{count:e.availabilityTotal-e.availabilityRemains}),leftText:P("GiftLeftCount",{count:e.availabilityRemains}),className:"mWzLu0c0"}),(0,C.Y)(g.A,{className:"IDuhjrne",size:"smaller",onClick:$,isLoading:b,children:P("GiftSend",{amount:a},{withNodes:!0})})]})}()]})}));var At=a(87049);const bt="G1mBmzxs",St="a8no5WH0",vt="DvJLTVFU",Nt=(0,i.ph)((0,n.EK)((e,{option:t})=>({sticker:(0,o.t0O)(e,t.months),canPlayAnimatedEmojis:(0,o.BWX)(e)}))(function({sticker:e,canPlayAnimatedEmojis:t,baseMonthAmount:a,option:i,optionByStars:n,onClick:r}){const{months:o,amount:s,currency:c}=i,d=(0,F.A)(),m=(0,u.A)(()=>{r(i)}),f=Math.floor(s/o),p=a&&a>f?Math.ceil(100-f/(a/100)):void 0;return(0,C.FD)("div",{className:bt,tabIndex:0,role:"button",onClick:m,children:[(0,C.Y)(Z.A,{sticker:e,play:t,noLoop:!0,nonInteractive:!0,size:86}),function(){const e=12===o?d("Years",{count:1},{pluralValue:1}):d("Months",{count:o},{pluralValue:o});return(0,C.Y)("div",{className:"rn9aWFNA",children:e})}(),(0,C.Y)("div",{className:"q4_ydkAx",children:d("PremiumGiftDescription")}),(0,C.Y)(g.A,{className:St,nonInteractive:!0,size:"tiny",pill:!0,fluid:!0,children:(0,l.Ad)(s,c)}),n&&(0,C.Y)("div",{className:"QB5SI7ta",children:d("GiftPremiumStarsPrice",{stars:(0,me.U2)(d,n.amount,{className:"jgnEfoeM"})},{withNodes:!0,withMarkdown:!0})}),Boolean(p)&&(0,C.Y)(At.A,{color:"purple",text:d("GiftDiscount",{percent:p})})]})}));var Ct=a(82855);const kt=(0,i.ph)((0,n.EK)(e=>({isCurrentUserPremium:(0,o.g29)(e)}))(function({gift:e,observeIntersection:t,onClick:a,isResale:r,isCurrentUserPremium:o}){const{openGiftInfoModal:l,openPremiumModal:c,showNotification:d,checkCanSendGift:m}=(0,n.ko)(),f=(0,i.li)(),h=(0,i.li)(),A=(0,F.A)(),[b,S]=(0,i.J0)(!1),[v,N,k]=(0,D.A)(),I=(0,Q.yQ)(e),G="starGiftUnique"===e.type,Y=G?e:void 0,w=G?void 0:e,P=G?function(t){if(!t)return{amount:0,currency:y.OUy};if("starGiftUnique"===e.type&&e.resaleTonOnly){const e=t.find(e=>e.currency===y.ykW);if(e)return e}return t.find(e=>e.currency===y.OUy)}(Y?.resellPrice):{amount:w?.stars||0,currency:y.OUy},B=P?.currency||y.OUy,M=w?.resellMinStars,T=!G&&r&&M?A.number(M)+"+":P?.amount||0,U=!G&&Boolean(w?.isLimited),R=!G&&Boolean(w?.isSoldOut),x=Boolean(e?.requirePremium),L=Boolean(w?.limitedPerUser&&!w?.perUserRemains),O=w?.perUserTotal,K=(0,u.A)(()=>{!R||r?L?d({message:A("NotificationGiftsLimit2",{count:O},{pluralValue:O,withMarkdown:!0,withNodes:!0})}):!x||o?q?m({gift:e,onSuccess:()=>a(e,r?"resell":"original")}):a(e,r?"resell":"original"):c({gift:e}):l({gift:e})}),V=(0,i.Kr)(()=>{const{backdrop:t,pattern:a}=(0,Q.uc)(e)||{};if(!t||!a)return;const i=[t.centerColor,t.edgeColor],n=t.patternColor;return(0,C.Y)(ee.A,{className:"Nkotr8Q4",backgroundColors:i,patternColor:n,patternIcon:a.sticker})},[e]),E=G?e.number:0,q=Boolean("starGift"===e.type&&e.lockedUntilDate),z=(0,i.Kr)(()=>{if(G){const{backdrop:t}=(0,Q.uc)(e)||{};if(!t)return;return(0,C.Y)(At.A,{color:[t.centerColor,t.edgeColor],text:A("GiftSavedNumber",{number:E})})}return r?(0,C.Y)(At.A,{color:"green",text:A("GiftRibbonResale")}):R?(0,C.Y)(At.A,{color:"red",text:A("GiftSoldOut")}):x?(0,C.Y)(At.A,{color:"orange",text:A("LimitPremium")}):U?(0,C.Y)(At.A,{color:"blue",text:A("GiftLimited")}):void 0},[G,r,e,R,U,A,E,x]);return(0,nt.mv)(f,t,e=>{const t=e.isIntersecting;S(t)}),(0,C.FD)("div",{ref:f,className:(0,s.A)("interactive-gift",bt,"f5ArEO1S","starGiftItem",x&&"NBYIITte"),tabIndex:0,role:"button",onClick:K,onMouseEnter:Ne.TF?void 0:N,onMouseLeave:Ne.TF?void 0:k,children:[V,(0,C.Y)("div",{ref:h,className:"rUSoeQXb",style:"width: 90px; height: 90px",children:I&&(0,C.Y)(Ct.A,{observeIntersectionForPlaying:t,observeIntersectionForLoading:t,containerRef:h,sticker:I,size:90,shouldLoop:v,shouldPreloadPreview:!0})}),(0,C.Y)(g.A,{className:St,nonInteractive:!0,size:"tiny",color:G?"bluredStarsBadge":"stars",withSparkleEffect:b,pill:!0,fluid:!0,children:B===y.ykW?(0,me.Ms)(A,T||0,{shouldConvertFromNanos:!0,className:vt}):(0,me.U2)(A,T||0,{asFont:!0,className:vt})}),z,q&&(0,C.Y)(p.A,{name:"lock-badge",className:"kwuipwV7"})]})}));var yt=a(13235),It=a(58443),Gt=a(96374),Yt=a(64489);const wt={root:"tJK1W0pJ",transition:"pP8TxefR",content:"o3V1HqbL",resaleScreenRoot:"Vce_TsJO",main:"cVXqeu9P",giftSection:"v4eKefwN",section:"EqfarEYb",resaleStarGiftsContainer:"RSFcSNGL",starGiftsContainer:"OQX3GZl5",premiumGiftsGallery:"n40m3BK2",header:"iqqoyRgW",resaleHeader:"cJRBgg9B",resaleHeaderContentContainer:"OXYQmfGK",headerSlide:"BTWhJUQB",headerText:"lLRmbpIu",hiddenHeader:"XgGzn1cQ",resaleHeaderText:"bp_KPx8I",commonHeaderText:"ybZo03if",resaleHeaderDescription:"XefHUFm1",closeButton:"r_Y5uG1T",balance:"soqAknia",avatars:"N_7tYJKr",avatar:"_3hY4vIep",logoBackground:"ieK4TzSb",center:"Ey5gX40t",description:"ZioU5h_k",starGiftsDescription:"gFgzS8pV",boostIcon:"Qi2YR6Dz",optionBottom:"RTbClMKE",secondaryInfo:"g0R9GSNq",footer:"J3Gju3bv",starGiftsTransition:"kB6IyXqS",notFoundGiftsRoot:"UqnRlJ1n",notFoundGiftsDescription:"g0VbwIG_",notFoundGiftsLink:"j2zPEQr8"},Pt=(0,i.ph)((0,n.EK)(e=>{const{starGifts:t}=e,{resaleGifts:a}=(0,o.nTw)(e),i=a?.giftId?t?.byId[a.giftId]:void 0,n=a.filter,r=a.isAllLoaded,s=a.isLoading,l=a.updateIteration;return{resellGifts:a.gifts,gift:i,filter:n,areGiftsAllLoaded:r,areGiftsLoading:s,updateIteration:l}})(({resellGifts:e,gift:t,filter:a,areGiftsAllLoaded:r,areGiftsLoading:o,updateIteration:l,onGiftClick:c})=>{const{loadResaleGifts:d,updateResaleGiftsFilter:m}=(0,n.ko)(),f=(0,i.li)(),p=(0,F.A)(),h=(0,i.Kr)(()=>e?.map(e=>e.id),[e]),g=Boolean(a?.modelAttributes?.length||a?.patternAttributes?.length||a?.backdropAttributes?.length),A=(0,u.A)(()=>{if(t){const e="regularGiftId"in t?t.regularGiftId:t.id;d({giftId:e})}}),b=Boolean(!e||0===e.length),[S,v]=(0,Gt.A)(A,h,!t,yt.bc),{observe:N}=(0,nt.BL)({rootRef:f,throttleMs:200}),k=(0,u.A)(()=>{m({filter:{...a,modelAttributes:[],backdropAttributes:[],patternAttributes:[]}})});return(0,C.Y)("div",{ref:f,className:(0,s.A)(wt.resaleScreenRoot,"custom-scroll"),children:(0,C.FD)(x.Ay,{name:"zoomFade",activeKey:l,children:[b&&r&&(0,C.FD)("div",{className:wt.notFoundGiftsRoot,children:[(0,C.Y)(Yt.A,{size:160,tgsUrl:It.w.SearchingDuck,nonInteractive:!0,noLoop:!0}),(0,C.Y)("div",{className:wt.notFoundGiftsDescription,children:p("ResellGiftsNoFound")}),g&&(0,C.Y)(ct.A,{className:wt.notFoundGiftsLink,onClick:k,children:p("ResellGiftsClearFilters")})]}),(0,C.Y)(U.A,{className:(0,s.A)(wt.resaleStarGiftsContainer),items:S,onLoadMore:v,itemSelector:".starGiftItem",noFastList:!0,preloadBackwards:yt.bc,scrollContainerClosest:`.${wt.resaleScreenRoot}`,children:e?.map(e=>(0,C.Y)(kt,{gift:e,observeIntersection:N,isResale:!0,onClick:c},e.id))})]})})}));var Bt=a(10722),Mt=a(71429),Tt=a(36393),Dt=a(76023),Ft=a(87094);const Ut=1.5*Dt.$,Rt=(0,i.ph)((0,n.EK)(e=>({theme:(0,o.SJA)(e)}))(({className:e,type:t,sticker:a,observeIntersectionForLoading:n,observeIntersectionForPlaying:r,theme:o})=>{const l=(0,i.li)(),c=(0,Ft.A)(l,void 0,"pattern"!==t);return(0,C.Y)("div",{ref:l,className:(0,s.A)("KLFLR9ji",e),style:`width: ${Ut}px; height: ${Ut}px`,children:(0,C.Y)(Ct.A,{containerRef:l,sticker:a,size:Ut,shouldPreloadPreview:!0,observeIntersectionForLoading:n,observeIntersectionForPlaying:r,thumbClassName:"fCL5rY2D",customColor:c})})})),xt={root:"_VgmQnUg",buttonsContainer:"IDlp6U6g",itemIcon:"yuctLnuR",sticker:"VT562JS0",backdropAttributeMenuItemText:"D50wFfRL",menuItemStickerText:"THcGWXSA",menuItemText:"L6EVE2Ux",backdrop:"A29QNxKb",menuItemIcon:"GL4rVsev",item:"qiYcBOYc",menuContentContainer:"EDsBn29z",menu:"ISaNdBwd",left:"e4Kkh_MR",right:"Kz_nCGC3"},Lt=(0,i.ph)((0,n.EK)(e=>{const{resaleGifts:t}=(0,o.nTw)(e);return{attributes:t.attributes,counters:t.counters,filter:t.filter}})(({attributes:e,counters:t,filter:a,dialogRef:r})=>{const o=(0,F.A)(),{updateResaleGiftsFilter:l}=(0,n.ko)(),[c,d]=(0,i.J0)(""),[m,f]=(0,i.J0)(""),[h,g]=(0,i.J0)(""),A=(0,i.Kr)(()=>{const a={model:[],pattern:[],backdrop:[]};for(const i of t??[]){const{attribute:t}=i;if(!i.count)continue;const n=e?.find(e=>"backdrop"===e.type&&"backdrop"===t.type?e.backdropId===t.backdropId:("model"===e.type&&"model"===t.type||"pattern"===e.type&&"pattern"===t.type)&&e.sticker.id===t.documentId);"backdrop"===n?.type&&a.backdrop.push(n),"model"===n?.type&&a.model.push(n),"pattern"===n?.type&&a.pattern.push(n)}return a},[e,t]),b=(0,i.Kr)(()=>{const e=(e,t)=>t.trim()?e.filter(e=>Boolean(e.name?.toLowerCase().includes(t.toLowerCase()))):e;return{model:e(A.model,c),pattern:e(A.pattern,h),backdrop:e(A.backdrop,m)}},[A,c,m,h]),S=(0,i.li)(),{isContextMenuOpen:v,contextMenuAnchor:N,handleContextMenu:k,handleContextMenuClose:y,handleContextMenuHide:I}=(0,Bt.A)(r),G=(0,u.A)(()=>S.current),Y=(0,i.li)(),{isContextMenuOpen:w,contextMenuAnchor:P,handleContextMenu:B,handleContextMenuClose:M,handleContextMenuHide:T}=(0,Bt.A)(r),D=(0,u.A)(()=>Y.current),U=(0,i.li)(),{isContextMenuOpen:R,contextMenuAnchor:x,handleContextMenu:L,handleContextMenuClose:O,handleContextMenuHide:K}=(0,Bt.A)(r),V=(0,u.A)(()=>U.current),E=(0,i.li)(),{isContextMenuOpen:q,contextMenuAnchor:z,handleContextMenu:H,handleContextMenuClose:J,handleContextMenuHide:W}=(0,Bt.A)(r),j=(0,u.A)(()=>E.current),_=(0,i.Kr)(()=>{const e=a.sortType;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:xt.item,onClick:t,children:["byDate"===e&&o("ValueGiftSortByDate"),"byNumber"===e&&o("ValueGiftSortByNumber"),"byPrice"===e&&o("ValueGiftSortByPrice"),(0,C.Y)(p.A,{name:"dropdown-arrows",className:xt.itemIcon})]})},[o,a]),Q=(0,i.Kr)(()=>{const e=a?.modelAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:xt.item,onClick:t,children:[0===e&&o("GiftAttributeModel"),e>0&&o("GiftAttributeModelPlural",{count:e},{pluralValue:e}),(0,C.Y)(p.A,{name:"dropdown-arrows",className:xt.itemIcon})]})},[o,a]),X=(0,i.Kr)(()=>{const e=a?.backdropAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:xt.item,onClick:t,children:[0===e&&o("GiftAttributeBackdrop"),e>0&&o("GiftAttributeBackdropPlural",{count:e},{pluralValue:e}),(0,C.Y)(p.A,{name:"dropdown-arrows",className:xt.itemIcon})]})},[o,a]),$=(0,i.Kr)(()=>{const e=a?.patternAttributes?.length||0;return({onTrigger:t,isOpen:a})=>(0,C.FD)("div",{className:xt.item,onClick:t,children:[0===e&&o("GiftAttributeSymbol"),e>0&&o("GiftAttributeSymbolPlural",{count:e},{pluralValue:e}),(0,C.Y)(p.A,{name:"dropdown-arrows",className:xt.itemIcon})]})},[o,a]),Z=(0,u.A)(e=>{l({filter:{...a,sortType:e}})}),te=(0,u.A)(()=>{l({filter:{...a,modelAttributes:[]}})}),ae=(0,u.A)(()=>{l({filter:{...a,patternAttributes:[]}})}),ie=(0,u.A)(()=>{l({filter:{...a,backdropAttributes:[]}})}),ne=(0,u.A)(e=>{if(!t)return;const i=a.modelAttributes||[],n=t.find(t=>"model"===t.attribute.type&&t.attribute.documentId===e.sticker.id)?.attribute;if(!n)return;const r=i.some(e=>e.documentId===n.documentId)?i.filter(e=>e.documentId!==n.documentId):[...i,n];l({filter:{...a,modelAttributes:r}})}),re=(0,u.A)(e=>{if(!t)return;const i=a.patternAttributes||[],n=t.find(t=>"pattern"===t.attribute.type&&t.attribute.documentId===e.sticker.id)?.attribute;if(!n)return;const r=i.some(e=>e.documentId===n.documentId)?i.filter(e=>e.documentId!==n.documentId):[...i,n];l({filter:{...a,patternAttributes:r}})}),oe=(0,u.A)(e=>{if(!t)return;const i=a.backdropAttributes||[],n=t.find(t=>"backdrop"===t.attribute.type&&t.attribute.backdropId===e.backdropId)?.attribute;if(!n)return;const r=i.some(e=>e.backdropId===n.backdropId)?i.filter(e=>e.backdropId!==n.backdropId):[...i,n];l({filter:{...a,backdropAttributes:r}})}),se=(0,i.hb)(()=>{d("")},[]),le=(0,i.hb)(()=>{f("")},[]),ce=(0,i.hb)(()=>{g("")},[]),de=(0,u.A)(e=>{e.stopPropagation(),e.preventDefault()}),ue=(0,i.li)(),{observe:me}=(0,nt.BL)({rootRef:ue,isDisabled:!P});return(0,C.FD)("div",{className:xt.root,children:[Boolean(N)&&(0,C.Y)(Mt.A,{isOpen:v,anchor:N,ref:S,className:(0,s.A)(xt.menu,xt.left,"with-menu-transitions"),getMenuElement:G,autoClose:!0,onClose:y,onCloseAnimationEnd:I,positionX:"left",children:(0,C.FD)(C.FK,{children:[(0,C.FD)(Ee.A,{icon:"sort-by-price",onClick:()=>{Z("byPrice")},children:[(0,C.Y)("div",{className:xt.menuItemText,children:o("GiftSortByPrice")}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:"byPrice"===a?.sortType?"check":"placeholder"})]}),(0,C.FD)(Ee.A,{icon:"sort-by-date",onClick:()=>{Z("byDate")},children:[(0,C.Y)("div",{className:xt.menuItemText,children:o("GiftSortByDate")}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:"byDate"===a?.sortType?"check":"placeholder"})]}),(0,C.FD)(Ee.A,{icon:"sort-by-number",onClick:()=>{Z("byNumber")},children:[(0,C.Y)("div",{className:xt.menuItemText,children:o("GiftSortByNumber")}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:"byNumber"===a?.sortType?"check":"placeholder"})]})]})}),Boolean(P)&&(0,C.Y)(Mt.A,{isOpen:w,anchor:P,ref:Y,className:(0,s.A)(xt.menu,xt.left,"with-menu-transitions"),getMenuElement:D,autoClose:!0,onClose:M,onCloseAnimationEnd:T,children:function(){const e=b.model,t=a.modelAttributes??[],i=0===t.length;return(0,C.FD)("div",{className:xt.menuContentContainer,ref:ue,children:[(0,C.Y)(Tt.A,{onClick:de,className:xt.search,value:c,onChange:d,onReset:se,placeholder:o("Search")}),(0,C.Y)(Ee.A,{icon:"select",onClick:te,disabled:i,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const a=i||t.some(t=>t.documentId===e.sticker.id);return(0,C.FD)(Ee.A,{onClick:()=>{ne(e)},children:[(0,C.Y)(Rt,{className:xt.sticker,sticker:e.sticker,type:"model",observeIntersectionForLoading:me,observeIntersectionForPlaying:me}),(0,C.Y)("div",{className:xt.menuItemStickerText,children:e.name}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:a?"check":"placeholder"})]},e.name)})]})}()}),Boolean(x)&&(0,C.Y)(Mt.A,{isOpen:R,anchor:x,ref:U,className:(0,s.A)(xt.menu,xt.right,"with-menu-transitions"),getMenuElement:V,autoClose:!0,onClose:O,onCloseAnimationEnd:K,positionX:"right",children:function(){const e=b.backdrop,t=a.backdropAttributes??[],i=0===t.length;return(0,C.FD)("div",{className:xt.menuContentContainer,children:[(0,C.Y)(Tt.A,{onClick:de,className:xt.search,value:m,onChange:f,onReset:le,placeholder:o("Search")}),(0,C.Y)(Ee.A,{icon:"select",onClick:ie,disabled:i,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const a=i||t.some(t=>t.backdropId===e.backdropId);return(0,C.FD)(Ee.A,{onClick:()=>{oe(e)},children:[(0,C.Y)(ee.A,{className:xt.backdrop,backgroundColors:[e.centerColor,e.edgeColor],patternColor:e.patternColor}),(0,C.Y)("div",{className:xt.backdropAttributeMenuItemText,children:e.name}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:a?"check":"placeholder"})]},e.name)})]})}()}),Boolean(z)&&(0,C.Y)(Mt.A,{isOpen:q,anchor:z,ref:E,className:(0,s.A)(xt.menu,xt.right,"with-menu-transitions"),getMenuElement:j,autoClose:!0,onClose:J,onCloseAnimationEnd:W,children:function(){const e=b.pattern,t=a.patternAttributes??[],i=0===t.length;return(0,C.FD)("div",{className:xt.menuContentContainer,children:[(0,C.Y)(Tt.A,{onClick:de,className:xt.search,value:h,onChange:g,onReset:ce,placeholder:o("Search")}),(0,C.Y)(Ee.A,{icon:"select",onClick:ae,disabled:i,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const a=i||t.some(t=>t.documentId===e.sticker.id);return(0,C.FD)(Ee.A,{onClick:()=>{re(e)},children:[(0,C.Y)(Rt,{className:xt.sticker,sticker:e.sticker,type:"pattern"}),(0,C.Y)("div",{className:xt.menuItemStickerText,children:e.name}),(0,C.Y)(p.A,{className:xt.menuItemIcon,name:a?"check":"placeholder"})]},e.name)})]})}()}),(0,C.FD)("div",{className:xt.buttonsContainer,children:[(0,C.Y)(_,{onTrigger:k,isOpen:v}),(0,C.Y)(Q,{onTrigger:B,isOpen:w}),(0,C.Y)(X,{onTrigger:L,isOpen:R}),(0,C.Y)($,{onTrigger:H,isOpen:q})]})]})}));var Ot=a(36838);const Kt=(0,i.ph)((0,n.EK)(e=>{const{starGifts:t}=e;return{idsByCategory:t?.idsByCategory}})(({idsByCategory:e,onCategoryChanged:t,areLimitedStarGiftsDisallowed:a})=>{const n=(0,i.li)(),r=(0,F.A)(),o=(0,i.Kr)(()=>e&&Object.keys(e).filter(e=>"all"!==e&&"limited"!==e).map(Number).sort((e,t)=>e-t),[e]),l=e&&e.resale.length>0,[c,d]=(0,i.J0)("all");function u(e){return"all"===e?r("AllGiftsCategory"):"stock"===e?r("StockGiftsCategory"):"limited"===e?r("LimitedGiftsCategory"):"resale"===e?r("GiftCategoryResale"):e}function m(e){return(0,C.FD)("div",{className:(0,s.A)("dO7FKYY4",c===e&&"B2lEJk1v"),onClick:()=>function(e){d(e),t(e)}(e),children:[Number.isInteger(e)&&(0,C.Y)(V.A,{className:"Pb7AU805",type:"gold",size:"middle"}),u(e)]})}return(0,Ot.A)(n,void 0,!0),(0,C.FD)("div",{ref:n,className:(0,s.A)("cUjwvN00","no-scrollbar"),children:[m("all"),!a&&m("limited"),!a&&l&&m("resale"),m("stock"),o?.map(m)]})})),Vt=[0,-50],Et=(0,it.nF)(e=>e(),200,!0),qt=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const{starGifts:a,stars:i,currentUserId:n}=e,r=t?.forPeerId?(0,o.PVB)(e,t.forPeerId):void 0,s=Boolean(n&&t?.forPeerId===n),l=r?(0,o.vGo)(e,r?.id):void 0,{resaleGifts:c}=(0,o.nTw)(e),d=c.count,u=!1!==c.isLoading,m=t?.selectedResaleGift;return{boostPerSentGift:e.appConfig.boostsPerSentGift,starGiftsById:a?.byId,starGiftIdsByCategory:a?.idsByCategory,starBalance:i?.balance,peer:r,isSelf:s,disallowedGifts:l?.disallowedGifts,resaleGiftsCount:d,areResaleGiftsLoading:u,selectedResaleGift:m,tabId:(0,o.nTw)(e).id}})(({modal:e,starGiftsById:t,starGiftIdsByCategory:a,starBalance:o,peer:l,isSelf:c,disallowedGifts:p,resaleGiftsCount:b,areResaleGiftsLoading:S,selectedResaleGift:v,tabId:N})=>{const{closeGiftModal:k,openGiftInfoModal:G,resetResaleGifts:Y,loadResaleGifts:w,openGiftInMarket:P,closeResaleGiftsMarket:B}=(0,n.ko)(),M=(0,i.li)(),T=(0,i.li)(),D=(0,i.li)(),U=(0,i.li)(),R=Boolean(e),L=(0,d.A)(e),O=l&&(0,r.mO)(l)?l:void 0,K=l&&(0,r.vj)(l)?l:void 0,[V,E]=(0,i.J0)(),[z,H]=(0,i.J0)(!1),[J,W]=(0,i.J0)(!1),[j,_]=(0,i.J0)(!1),[Q,X]=(0,i.J0)("all"),$=(0,i.li)(),Z=(0,i.Kr)(()=>{if(!p)return;const{shouldDisallowPremiumGifts:e,...t}=p;return!c&&Object.values(t).every(Boolean)},[c,p]),ee=!c&&p?.shouldDisallowUnlimitedStarGifts,te=!c&&p?.shouldDisallowLimitedStarGifts,ae=(0,m.A)(),ie=(0,F.A)(),ne=L?.gifts,re=(0,i.Kr)(()=>ne?.sort((e,t)=>e.months-t.months).filter(e=>1===e.users&&e.currency!==y.OUy),[ne]),oe=(0,i.Kr)(()=>{const e=new Map;return re?(re.forEach(t=>{const a=ne?.find(e=>e.currency===y.OUy&&e.months===t.months);a&&e.set(t,a)}),e):e},[ne,re]),se=(0,i.Kr)(()=>re?.reduce((e,t)=>e.amount<t.amount?e:t),[re]),{observe:le}=(0,nt.BL)({rootRef:U,throttleMs:200,isDisabled:!R}),ce=Boolean(v)&&!V,de=Boolean(V),ue=ce||de||z,me=de?j:J;(0,i.vJ)(()=>{if(v){const e="regularGiftId"in v?v.regularGiftId:v.id;w({giftId:e})}},[v]),(0,i.vJ)(()=>{R||(H(!1),E(void 0),X("all"))},[R,N,B]);const fe=(0,u.A)(e=>{if(de)return;const t=e.currentTarget;Et(()=>{const{scrollTop:e}=t;if(H(e>150),T.current&&D.current){const{top:e}=D.current.getBoundingClientRect(),{top:t}=T.current.getBoundingClientRect();W(e-t<=0)}})}),pe=ie("GiftPremiumDescription",{user:(0,I.Yg)(O),link:(0,C.Y)(h.A,{text:ie("GiftPremiumDescriptionLinkCaption"),url:ie("GiftPremiumDescriptionLink")})},{withNodes:!0}),he=K?ie("StarGiftDescriptionChannel",{peer:(0,r.F9)(ie,K)},{withNodes:!0,withMarkdown:!0}):c?ie("StarGiftDescriptionSelf",void 0,{withNodes:!0,renderTextFilters:["br"]}):ie("StarGiftDescription",{user:(0,I.Yg)(O)},{withNodes:!0,withMarkdown:!0}),ge=(0,u.A)((e,t)=>{if("resell"===t){if(!("id"in e))return;return ce?void G({gift:e,recipientId:L?.forPeerId}):void P({gift:e,tabId:N})}E(e),_("id"in e)});const Ae=(0,u.A)(e=>{X(e)}),be=(0,u.A)(()=>{E(void 0),Y(),k()}),ve=(0,u.A)(()=>{ce?B({tabId:N}):de?E(void 0):be()}),Ne=(0,u.A)(()=>{$.current?.()}),Ce=(0,u.A)(e=>{$.current=e}),ke=de||ce,ye=(0,s.A)("animated-close-icon",ke&&"state-back");return(0,C.FD)(A.A,{dialogRef:M,onClose:be,isOpen:R,isSlim:!0,contentClassName:wt.content,className:(0,s.A)(wt.modalDialog,wt.root),isLowStackPriority:!0,children:[(0,C.Y)(g.A,{className:wt.closeButton,round:!0,color:"translucent",size:"smaller",onClick:ve,ariaLabel:ae(ke?"Common.Back":"Common.Close"),children:(0,C.Y)("div",{className:ye})}),(0,C.Y)(q,{className:wt.balance,balance:o,withAddButton:!0}),(0,C.Y)("div",{className:(0,s.A)(wt.header,ce&&wt.resaleHeader,!ue&&wt.hiddenHeader),children:(0,C.Y)(x.Ay,{name:"slideVerticalFade",activeKey:ue?ce?1:me?2:3:0,slideClassName:wt.headerSlide,children:function(){if(ue){if(ce){const e=S&&!b;return(0,C.FD)("div",{className:wt.resaleHeaderContentContainer,children:[(0,C.Y)("h2",{className:wt.resaleHeaderText,children:v.title}),e&&(0,C.Y)("div",{className:wt.resaleHeaderDescription,children:ie("Loading")}),!e&&void 0!==b&&(0,C.Y)("div",{className:wt.resaleHeaderDescription,children:ie("HeaderDescriptionResaleGifts",{count:b},{withNodes:!0,withMarkdown:!0,pluralValue:b})}),(0,C.Y)(Lt,{dialogRef:M})]})}return(0,C.Y)("h2",{className:wt.commonHeaderText,children:ie(me?c?"StarsGiftHeaderSelf":"StarsGiftHeader":"GiftPremiumHeader")})}}()})}),(0,C.FD)(x.Ay,{ref:T,className:wt.transition,name:"pushSlide",activeKey:de?1:ce?2:0,children:[!de&&!ce&&(0,C.FD)("div",{ref:U,className:(0,s.A)(wt.main,"custom-scroll"),onScroll:fe,children:[(0,C.FD)("div",{className:wt.avatars,children:[(0,C.Y)(f.A,{className:wt.avatar,size:100,peer:l,onMouseMove:Ne}),(0,C.Y)(Se.A,{className:wt.logoBackground,color:"gold",centerShift:Vt,onRequestAnimation:Ce})]}),!c&&!K&&!p?.shouldDisallowPremiumGifts&&(0,C.FD)(C.FK,{children:[(0,C.Y)("h2",{className:(0,s.A)(wt.headerText,wt.center),children:ie("GiftPremiumHeader")}),(0,C.Y)("p",{className:(0,s.A)(wt.description,wt.center),children:pe}),(0,C.Y)("div",{className:wt.premiumGiftsGallery,children:re?.map(e=>(0,C.Y)(Nt,{option:e,optionByStars:oe.get(e),baseMonthAmount:se?Math.floor(se.amount/se.months):void 0,onClick:ge}))})]}),!Z&&(0,C.FD)(C.FK,{children:[(0,C.Y)("h2",{ref:D,className:(0,s.A)(wt.headerText,wt.center),children:ie(c?"StarsGiftHeaderSelf":"StarsGiftHeader")}),(0,C.Y)("p",{className:(0,s.A)(wt.description,wt.starGiftsDescription,wt.center),children:he}),(0,C.Y)(Kt,{areLimitedStarGiftsDisallowed:te,onCategoryChanged:Ae}),(0,C.Y)(x.Ay,{name:"zoomFade",activeKey:(Ie=Q,"all"===Ie?0:"limited"===Ie?1:"resale"===Ie?2:"stock"===Ie?3:Ie+3),className:wt.starGiftsTransition,children:function(){const e=a?.[Q]?.filter(e=>{const a=t?.[e];if(!a)return!1;const{isLimited:i,isSoldOut:n,upgradeStars:r}=a;return ee&&!te?i:te&&!ee?!i&&!n:!ee||!te||Boolean(i&&Boolean(r))});return(0,C.Y)("div",{className:wt.starGiftsContainer,children:t&&e?.flatMap(e=>{const a=t[e],i="stock"!==Q&&Boolean(a.availabilityResale),n="resale"!==Q&&i&&!a.isSoldOut,r=[(0,C.Y)(kt,{gift:a,observeIntersection:le,isResale:i&&!n,onClick:ge},e)];return n&&r.push((0,C.Y)(kt,{isResale:!0,gift:a,observeIntersection:le,onClick:ge},`resale_${e}`)),r})})}()})]})]}),ce&&v&&(0,C.Y)(Pt,{onGiftClick:ge}),de&&L?.forPeerId&&(0,C.Y)(gt,{gift:V,giftByStars:oe.get(V),peerId:L.forPeerId})]})]});var Ie}));const zt=(0,i.ph)((0,n.EK)(e=>{const{currentUserId:t}=e;return{currentUserId:t,userIds:e.contactList?.userIds}})(({modal:e,currentUserId:t,userIds:a})=>{const{closeGiftRecipientPicker:s,openGiftModal:l}=(0,n.ko)(),c=(0,m.A)(),d=e,[f,p]=(0,i.J0)(""),h=(0,i.Kr)(()=>{const e=(0,n.mS)(),i=a?a.concat(t):void 0,s=i?(0,r.PU)({ids:i,query:f}):[];return(0,Y.A)((0,G.Am)(s).filter(t=>(0,o.X2D)(e,t)),void 0,[t])},[t,f,a]),g=(0,u.A)(e=>{l({forUserId:e}),s()});return(0,C.Y)(P.A,{className:"W3JMs1YE",isOpen:d,onClose:s,title:c("GiftTelegramPremiumOrStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,children:(0,C.Y)(w.A,{className:"wOipz1Y_",itemIds:h,filterValue:f,filterPlaceholder:c("Search"),onSelectedIdChange:g,onFilterChange:p,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,forceShowSelf:!0})})}));var Ht=a(79089),Jt=a(18501),Wt=a(25404);const jt={root:"Ef0cKSqQ",giftPreview:"IvuNzslN",backdrop:"dNukis4X",arrow:"oufsMLLF"},_t=4*Dt.$,Qt=3*Dt.$,Xt=(0,i.ph)(({peer:e,gift:t})=>{const a=(0,i.Kr)(()=>(0,Q.uc)(t),[t]);if(a)return(0,C.FD)("div",{className:jt.root,children:[(0,C.FD)("div",{className:jt.giftPreview,children:[(0,C.Y)(ee.A,{className:jt.backdrop,backgroundColors:[a.backdrop.centerColor,a.backdrop.edgeColor],patternColor:a.backdrop?.patternColor,patternIcon:a.pattern?.sticker}),(0,C.Y)(Z.A,{className:jt.sticker,size:Qt,sticker:a.model?.sticker})]}),(0,C.Y)(p.A,{name:"next",className:jt.arrow}),(0,C.Y)(f.A,{peer:e,size:_t,className:jt.avatar})]})});var $t=a(94189);const Zt={modal:"nnublcCk",checkBox:"fjE0wGvw",checkBoxDescription:"tepUTe4z",upgradeIcon:"lgyInH5K",header:"p7FTs7_p",title:"pIbzzTir",description:"CCPfr26t",soldOut:"kjWcRp4W",modalContent:"o9rFZ6By",headerSplitButton:"XOMI_4PO",headerButton:"WA0INleU",giftResalePriceContainer:"BN8gf5y6",starAmountIcon:"_5guecUe",giftResalePriceStar:"H_q8o2vY",left:"aOhTHZlf",right:"rJOB1u5Q",footer:"bho0GTYt",footerDescription:"VUylTszM",unknown:"zDauXmpS",giftValue:"w_E4LkUj",uniqueValue:"uAjIRJva",uniqueAttribute:"OJQnkf17",attributeName:"dq7wCHJb",uniqueGift:"I6o_pGAm",modalHeader:"ie9tImaj",modalCloseButton:"p38RBGdC",ownerAddress:"DavMRg4Q",copyIcon:"SLX5tX8C"},ea=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a=t?.gift,i=a&&"gift"in a,n=e.currentUserId,s=i&&a.fromId,l=s?(0,o.PVB)(e,s):void 0,c=t?.peerId?(0,o.PVB)(e,t.peerId):void 0,d=c&&(0,r.vj)(c)?c:void 0,u=d&&(0,I.ub)(d,"postMessages"),m=(0,o.mBe)(e,n),f=t?.recipientId&&n!==t.recipientId?(0,o.PVB)(e,t.recipientId):void 0,p=m?.emojiStatus,h=e.collectibleEmojiStatuses?.statuses,g=i?a.gift:a,A="starGiftUnique"===g?.type&&g.releasedByPeerId;return{fromPeer:l,targetPeer:c,releasedByPeer:A?(0,o.PVB)(e,A):void 0,currentUserId:n,starGiftMaxConvertPeriod:e.appConfig.starGiftMaxConvertPeriod,tonExplorerUrl:e.appConfig.tonExplorerUrl,hasAdminRights:u,currentUserEmojiStatus:p,collectibleEmojiStatuses:h,currentUser:m,recipientPeer:f}})(({modal:e,fromPeer:t,targetPeer:a,releasedByPeer:c,currentUserId:A,starGiftMaxConvertPeriod:b,hasAdminRights:S,currentUserEmojiStatus:v,collectibleEmojiStatuses:N,tonExplorerUrl:k,currentUser:I,recipientPeer:G})=>{const{closeGiftInfoModal:Y,changeGiftVisibility:w,convertGiftToStars:P,openChatWithInfo:B,focusMessage:M,openGiftUpgradeModal:T,showNotification:U,buyStarGift:R,closeGiftModal:x,openGiftInfoValueModal:L,updateResaleGiftsFilter:O,openGiftInMarket:V}=(0,n.ko)(),[E,q,J]=(0,D.A)(),W=(0,F.A)(),j=(0,m.A)(),[X,$]=(0,i.J0)(!1),[ee,te]=(0,i.J0)(!1),ae=(0,i.li)(),ie=(0,i.li)(),ne=(0,i.li)(),{isContextMenuOpen:re,contextMenuAnchor:oe,handleContextMenu:se,handleContextMenuClose:le,handleContextMenuHide:ce}=(0,Bt.A)(ae),de=(0,u.A)(()=>{we&&tt?.pattern&&(V({gift:we}),O({filter:{sortType:"byDate",modelAttributes:[],backdropAttributes:[],patternAttributes:[{type:"pattern",documentId:tt.pattern.sticker.id}]}}))}),ue=(0,u.A)(()=>{we&&tt?.backdrop&&(V({gift:we}),O({filter:{sortType:"byDate",modelAttributes:[],backdropAttributes:[{type:"backdrop",backdropId:tt.backdrop.backdropId}],patternAttributes:[]}}))}),fe=(0,u.A)(()=>{we&&tt?.model&&(V({gift:we}),O({filter:{sortType:"byDate",modelAttributes:[{type:"model",documentId:tt.model.sticker.id}],backdropAttributes:[],patternAttributes:[]}}))}),pe=Boolean(e),he=(0,d.A)(e),ge=(0,d.A)(t),Ae=(0,d.A)(a),Se=Ae&&(0,r.vj)(Ae),{gift:Ne}=he||{},Ce=Ne&&"gift"in Ne,ke=Ce?Ne:void 0,Ie=ke?.fromId===A,Ge=ke&&b&&ke.date+b-(0,ye.Fm)()||0,Ye=Math.ceil(Ge/60/60/24),we=Ce?Ne.gift:Ne,Be=we&&(0,Q.yQ)(we),Me=Ge>0&&Boolean(ke?.starsToConvert),Te=we&&"starGiftUnique"===we.type,De=Te?we:void 0,Fe=(0,i.Kr)(()=>{if(we&&"starGiftUnique"===we.type){if(c){const e=`@${(0,Ht.Kl)(c)}`||(0,r.F9)(W,c),t=(0,r.mO)(c)?W("ActionFallbackUser"):W("ActionFallbackChannel");return W("GiftInfoCollectibleBy",{number:we.number,owner:e||t},{withNodes:!0,withMarkdown:!0})}return W("GiftInfoCollectible",{number:we.number})}},[we,c,W]),Ue="starGiftUnique"===we?.type?we.slug:void 0,Re=(0,i.Kr)(()=>{if(Ue)return N?.find(e=>"collectible"===e.type&&e.slug===Ue)},[Ue,N]),xe=Boolean(Re),Le=Boolean(ke?.upgradeMsgId),Oe=!Le&&ke?.inputGift&&(Se?S:"starGift"===we?.type?Ae?.id===A:we?.ownerId===A||xe);function Ve(e){if(!Te)return;const t=we.resellPrice;return t?we?.resaleTonOnly||e?t.find(e=>e.currency===y.ykW):t.find(e=>e.currency===y.OUy):void 0}const Ee=Ve(),qe=Ve(ee),ze=!xe&&"starGiftUnique"===we?.type&&we.ownerId!==A&&Boolean(Ee),He=(()=>{if(!Te)return;const{ownerName:e,ownerId:t}=we,a=(0,n.mS)(),i=t?(0,o.PVB)(a,t):void 0;return i?(0,r.F9)(W,i):e})(),Je=(0,u.A)(()=>{Y()}),We=(0,u.A)(()=>{const e=Ie?Ae:ge;if(!ke?.upgradeMsgId||!e)return;const{upgradeMsgId:t}=ke;M({chatId:e.id,messageId:t}),Je()}),je=(0,u.A)(()=>{const{inputGift:e,isUnsaved:t}=ke;w({gift:e,shouldUnsave:!t}),Je()}),_e=(0,u.A)(()=>{const{inputGift:e}=ke;P({gift:e}),J(),Je()}),Qe=(0,u.A)(()=>{ke&&T({giftId:ke.gift.id,gift:ke})}),Xe=(0,u.A)(()=>{"starGiftUnique"===we?.type&&Ve()&&$(!0)}),$e=(0,u.A)(()=>{$(!1)}),Ze=(0,u.A)(()=>{const e=G||I,t=Ve(ee);e&&t&&"starGiftUnique"===we?.type&&($e(),x(),R({peerId:e.id,slug:we.slug,price:t}))}),et=(0,u.A)(()=>{we&&"starGiftUnique"===we.type&&L({gift:we})}),tt=(0,i.Kr)(()=>we&&(0,Q.uc)(we),[we]),at=(0,i.Kr)(()=>(0,C.Y)("div",{className:(0,s.A)(Zt.headerButton,Zt.left),tabIndex:0,role:"button","aria-haspopup":"menu","aria-label":W("AriaMoreButton"),onContextMenu:se,onClick:se,children:(0,C.Y)(p.A,{name:"more",className:Zt.icon})}),[W,se]),it=(0,u.A)(()=>ze?(0,C.Y)(g.A,{noForcedUpperCase:!0,onClick:Xe,children:W("ButtonBuyGift",{stars:Ee?.currency===y.ykW?(0,me.Ms)(W,Ee.amount,{shouldConvertFromNanos:!0}):(0,me.U2)(W,Ee?.amount,{asFont:!0})},{withNodes:!0})}):Le?(0,C.Y)(g.A,{onClick:We,children:W("GiftInfoViewUpgraded")}):Oe&&ke?.alreadyPaidUpgradeStars&&!ke.upgradeMsgId?(0,C.FD)(g.A,{isShiny:!0,onClick:Qe,children:[W("GiftInfoUpgradeForFree"),(0,C.Y)(p.A,{name:"arrow-down-circle",className:Zt.upgradeIcon})]}):Oe&&ke?.canUpgrade&&!ke.upgradeMsgId?(0,C.FD)(g.A,{isShiny:!0,onClick:Qe,children:[W("GiftInfoUpgrade"),(0,C.Y)(p.A,{name:"arrow-down-circle",className:Zt.upgradeIcon})]}):(0,C.Y)(g.A,{onClick:Je,children:W("OK")})),nt=(0,i.Kr)(()=>{if(!we)return;let e="";return"starGift"===we.type&&(we.firstSaleDate&&(e+=`${W("GiftInfoFirstSale")} ${(0,z.L2)(1e3*we.firstSaleDate,W.code,!0)}`),we.lastSaleDate&&(e+="\n",e+=`${W("GiftInfoLastSale")} ${(0,z.L2)(1e3*we.lastSaleDate,W.code,!0)}`)),e},[we,W]),rt=(0,i.Kr)(()=>{if(!Ne||!we)return;const{fromId:e,isNameHidden:t,starsToConvert:a,isUnsaved:i,isConverted:d,upgradeMsgId:u}=ke||{},m=Me&&Boolean(a),g=t&&Ae,A=(()=>{if(!ke)return W("GiftInfoSoldOutDescription");if(!Se){if(ke.upgradeMsgId)return W("GiftInfoDescriptionUpgraded");if(Oe&&ke.canUpgrade&&ke.alreadyPaidUpgradeStars&&!ke.upgradeMsgId)return W("GiftInfoDescriptionUpgrade2");if(ke.canUpgrade&&Oe)return Oe?W("GiftInfoDescriptionFreeUpgrade"):W("GiftInfoPeerDescriptionFreeUpgradeOut",{peer:(0,r.F9)(W,Ae)});if(Oe||Ie)return d&&m?Oe?W("GiftInfoDescriptionConverted",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):W("GiftInfoPeerDescriptionOutConverted",{amount:a,peer:(0,r.F9)(W,Ae)},{pluralValue:a,withNodes:!0,withMarkdown:!0}):ke.canUpgrade&&Oe?m?W("GiftInfoDescriptionUpgrade",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):W("GiftInfoDescriptionUpgradeRegular"):Oe?m?W("GiftInfoDescription",{amount:a},{withNodes:!0,withMarkdown:!0,pluralValue:a}):W("GiftInfoDescriptionRegular"):m?W("GiftInfoPeerDescriptionOut",{amount:a,peer:(0,r.F9)(W,Ae)},{withNodes:!0,withMarkdown:!0,pluralValue:a}):W("GiftInfoPeerDescriptionOutRegular",{peer:(0,r.F9)(W,Ae)})}})(),b=(0,C.FD)("div",{className:Zt.modalHeader,children:[Boolean(Ee?.amount)&&(0,C.Y)("div",{className:Zt.giftResalePriceContainer,children:Ee.currency===y.ykW?(0,me.Ms)(W,Ee.amount,{className:Zt.giftResalePriceStar,shouldConvertFromNanos:!0}):(0,me.U2)(W,Ee.amount,{asFont:!0,className:Zt.giftResalePriceStar})}),(0,C.FD)("div",{className:Zt.headerSplitButton,ref:ae,children:[at,(0,C.Y)("div",{className:(0,s.A)(Zt.headerButton,Zt.right),tabIndex:0,role:"button","aria-haspopup":"menu","aria-label":W("Close"),onClick:Je,children:(0,C.Y)(p.A,{name:"close",className:(0,s.A)(Zt.icon,Zt.moreIcon)})})]})]}),S=Te&&(0,C.Y)("div",{ref:ne,className:(0,s.A)(Zt.header,Zt.uniqueGift),children:(0,C.Y)(Pe,{backdropAttribute:tt.backdrop,patternAttribute:tt.pattern,modelAttribute:tt.model,title:we.title,subtitle:Fe,subtitlePeer:c,showManageButtons:Oe,savedGift:ke})}),v=(0,C.FD)("div",{className:Zt.header,children:[(0,C.Y)(Z.A,{className:Zt.giftSticker,sticker:Be,size:120}),(0,C.Y)("h1",{className:Zt.title,children:Te?we.title:W(ke?Oe?"GiftInfoReceived":"GiftInfoTitle":"GiftInfoSoldOutTitle")}),Boolean(A)&&(0,C.Y)("p",{className:(0,s.A)(Zt.description,!ke&&"starGift"===we?.type&&Zt.soldOut),children:A})]}),N=[];if("starGift"===we.type){(e||t)&&N.push([W("GiftInfoFrom"),e?{chatId:e}:(0,C.FD)(C.FK,{children:[(0,C.Y)(f.A,{size:"small",peer:_.I5}),(0,C.Y)("span",{className:Zt.unknown,children:j(_.I5.titleKey)})]})]),ke?.date&&N.push([W("GiftInfoDate"),(0,C.Y)("span",{title:nt,children:(0,z.L2)(1e3*ke.date,W.code,!0)})]),we.firstSaleDate&&!ke&&N.push([W("GiftInfoFirstSale"),(0,z.L2)(1e3*we.firstSaleDate,W.code,!0)]),we.lastSaleDate&&!ke&&N.push([W("GiftInfoLastSale"),(0,z.L2)(1e3*we.lastSaleDate,W.code,!0)]);const i=we.stars+(ke?.alreadyPaidUpgradeStars||0);N.push([W("GiftInfoValue"),(0,C.FD)("div",{className:Zt.giftValue,children:[(0,me.U2)(W,i,{className:Zt.starAmountIcon}),Oe&&Me&&Boolean(a)&&(0,C.Y)(K.A,{onClick:q,children:W("GiftInfoConvert",{amount:a},{pluralValue:a})})]})]),we.availabilityTotal&&N.push([W("GiftInfoAvailability"),W("GiftInfoAvailabilityValue",{count:we.availabilityRemains||0,total:we.availabilityTotal},{pluralValue:we.availabilityRemains||0})]),we.upgradeStars&&!u&&N.push([W("GiftInfoStatus"),(0,C.Y)("div",{className:Zt.giftValue,children:W("GiftInfoStatusNonUnique")})]),ke?.message&&N.push([void 0,(0,Jt.fd)(ke.message)])}if(Te){const{ownerName:e,ownerAddress:t,ownerId:a}=we,i=a?(0,o.PVB)((0,n.mS)(),a):void 0,{model:s,backdrop:c,pattern:d,originalDetails:u}=tt||{};if(t?N.push([W("GiftInfoOwner"),(0,C.FD)("span",{className:Zt.ownerAddress,onClick:()=>{(0,be.eM)(t),U({message:{key:"WalletAddressCopied"},icon:"copy"})},children:[t,(0,C.Y)(p.A,{className:Zt.copyIcon,name:"copy"})]})]):(i||e)&&N.push([W("GiftInfoOwner"),a?{chatId:a,withEmojiStatus:!0}:e||""]),s&&N.push([W("GiftAttributeModel"),(0,C.FD)("span",{className:Zt.uniqueAttribute,children:[(0,C.Y)("span",{className:Zt.attributeName,onClick:fe,children:s.name}),(0,C.Y)(K.A,{children:(0,H.l9)(s.rarityPercent)})]})]),c&&N.push([W("GiftAttributeBackdrop"),(0,C.FD)("span",{className:Zt.uniqueAttribute,children:[(0,C.Y)("span",{className:Zt.attributeName,onClick:ue,children:c.name}),(0,C.Y)(K.A,{children:(0,H.l9)(c.rarityPercent)})]})]),d&&N.push([W("GiftAttributeSymbol"),(0,C.FD)("span",{className:Zt.uniqueAttribute,children:[(0,C.Y)("span",{className:Zt.attributeName,onClick:de,children:d.name}),(0,C.Y)(K.A,{children:(0,H.l9)(d.rarityPercent)})]})]),N.push([W("GiftInfoAvailability"),W("GiftInfoIssued",{issued:we.issuedCount,total:we.totalCount})]),we.valueAmount&&we.valueCurrency&&N.push([W("GiftInfoValue"),(0,C.FD)("span",{className:Zt.uniqueValue,children:["~"," ",(0,l.Ad)(we.valueAmount,we.valueCurrency,W.code),(0,C.Y)(K.A,{onClick:et,children:W("GiftInfoValueLinkMore")})]})]),u){const{date:e,recipientId:t,message:a,senderId:i}=u,s=(0,n.mS)(),l=e=>{B({id:e}),Y()},c=(0,o.PVB)(s,t),d=i?(0,o.PVB)(s,i):void 0,m=(0,z.L2)(1e3*e,W.code,!0),f=(0,C.Y)(ct.A,{onClick:()=>l(t),isPrimary:!0,children:(0,r.F9)(W,c)});let p;if(d&&i!==t){const e=(0,C.Y)(ct.A,{onClick:()=>l(d.id),isPrimary:!0,children:(0,r.F9)(W,d)});p=a?W("GiftInfoPeerOriginalInfoTextSender",{peer:f,sender:e,text:(0,Jt.fd)(a),date:m},{withNodes:!0}):W("GiftInfoPeerOriginalInfoSender",{peer:f,date:m,sender:e},{withNodes:!0})}else p=a?W("GiftInfoPeerOriginalInfoText",{peer:f,text:(0,Jt.fd)(a),date:m},{withNodes:!0}):W("GiftInfoPeerOriginalInfo",{peer:f,date:m},{withNodes:!0});N.push([void 0,(0,C.Y)("span",{children:p})])}}const I=k&&Te&&we.giftAddress&&`${k}${we.giftAddress}`,G=(0,C.FD)("div",{className:Zt.footer,children:[(Oe||I||ze)&&(0,C.FD)("div",{className:Zt.footerDescription,children:[I&&(0,C.Y)("div",{children:W("GiftInfoTonText",{link:(0,C.Y)(h.A,{url:I,shouldSkipModal:!0,text:W("GiftInfoTonLinkText")})},{withNodes:!0})}),Oe&&(0,C.Y)("div",{children:W(`GiftInfo${Se?"Channel":""}${i?"Hidden":"Saved"}`,{link:(0,C.Y)(ct.A,{isPrimary:!0,onClick:je,children:W("GiftInfoSaved"+(i?"Show":"Hide"))})},{withNodes:!0})}),!ze&&g&&(0,C.Y)("div",{children:W("GiftInfoSenderHidden")}),ze&&He&&(0,C.Y)("div",{children:W("GiftInfoBuyGift",{user:He},{withNodes:!0})})]}),it()]});return{modalHeader:Te?b:void 0,header:Te?S:v,tableData:N,footer:G}},[Ne,ke,Ae,Be,W,Oe,Me,Ie,j,k,we,tt,it,Se,at,Te,nt,ze,He,Ee,Fe,c,de,ue,fe]),ot=(0,u.A)(()=>ne.current),st=(0,u.A)(()=>ae.current),lt=(0,u.A)(()=>ie.current),dt=(0,u.A)(()=>({withPortal:!0})),ut=oe&&Ne&&(0,C.Y)(Mt.A,{ref:ie,isOpen:re,anchor:oe,className:"gift-context-menu with-menu-transitions",autoClose:!0,withPortal:!0,onClose:le,onCloseAnimationEnd:ce,positionX:"right",getTriggerElement:st,getRootElement:ot,getMenuElement:lt,getLayout:dt,children:(0,C.Y)(Wt.A,{peerId:he.peerId,gift:Ne,canManage:Oe,collectibleEmojiStatuses:N,currentUserEmojiStatus:v})});return(0,C.FD)(C.FK,{children:[(0,C.Y)(ve.A,{isOpen:pe,modalHeader:rt?.modalHeader,header:rt?.header,hasBackdrop:Te,tableData:rt?.tableData,footer:rt?.footer,className:Zt.modal,contentClassName:Zt.modalContent,onClose:Je,withBalanceBar:Boolean(ze),currencyInBalanceBar:qe?.currency,isLowStackPriority:!0}),ut,De&&I&&Boolean(qe)&&(0,C.FD)($t.A,{isOpen:X,noDefaultTitle:!0,onClose:$e,confirmLabel:W("ButtonBuyGift",{stars:qe?.currency===y.ykW?(0,me.Ms)(W,qe.amount,{shouldConvertFromNanos:!0}):(0,me.U2)(W,qe.amount,{asFont:!0})},{withNodes:!0}),confirmHandler:Ze,children:[(0,C.Y)(Xt,{peer:G||I,gift:De}),!G&&(0,C.Y)("p",{children:W("GiftBuyConfirmDescription",{gift:W("GiftUnique",{title:De.title,number:De.number}),stars:qe?.currency===y.ykW?(0,me.QH)(W,qe.amount,!0):(0,me.Kk)(W,qe.amount)},{withNodes:!0,withMarkdown:!0})}),G&&(0,C.Y)("p",{children:W("GiftBuyForPeerConfirmDescription",{gift:W("GiftUnique",{title:De.title,number:De.number}),stars:qe?.currency===y.ykW?(0,me.QH)(W,qe.amount,!0):(0,me.Kk)(W,qe.amount),peer:(0,r.F9)(W,G)},{withNodes:!0,withMarkdown:!0})}),!De.resaleTonOnly&&(0,C.FD)(C.FK,{children:[(0,C.Y)(Ke.A,{className:Zt.checkBox,label:W("LabelPayInTON"),checked:ee,onCheck:te}),(0,C.Y)("div",{className:Zt.checkBoxDescription,children:W("DescriptionPayInTON")})]})]}),ke&&(0,C.FD)($t.A,{isOpen:E,onClose:J,confirmHandler:_e,title:W("GiftInfoConvertTitle"),children:[(0,C.Y)("div",{children:W("GiftInfoPeerConvertDescription",{amount:(0,me.Kk)(W,ke.starsToConvert),peer:(0,r.F9)(W,ge)},{withNodes:!0,withMarkdown:!0})}),Me&&(0,C.Y)("div",{children:W("GiftInfoConvertDescriptionPeriod",{count:Ye},{withNodes:!0,withMarkdown:!0,pluralValue:Ye})}),(0,C.Y)("div",{children:W("GiftInfoConvertDescription2")})]})]})})),ta="hspYTy7V",aa=(0,i.ph)(({modal:e})=>{const{closeGiftInfoValueModal:t,openUrl:a,openGiftInMarket:r}=(0,n.ko)(),o=(0,F.A)(),s=Boolean(e),c=(0,d.A)(e),m=(0,u.A)(()=>{e?.valueInfo.fragmentListedUrl&&a({url:e.valueInfo.fragmentListedUrl})}),f=(0,u.A)(()=>{e?.gift&&r({gift:e.gift})}),p=(0,i.Kr)(()=>{if(!c)return;const{gift:e,valueInfo:t}=c,a=(0,Q.uc)(e);if(!a)return;const i=(0,C.FD)("div",{className:"v4GJBsdC",children:[(0,C.Y)(Z.A,{className:"lJodRD0R",sticker:a.model.sticker,size:120}),(0,C.Y)(g.A,{pill:!0,size:"tiny",fluid:!0,nonInteractive:!0,children:(0,l.Ad)(t.value,t.currency,o.code)}),(0,C.Y)("div",{className:"VjWaO8un",children:o("GiftValueDescription",{giftName:e.title},{withMarkdown:!0,withNodes:!0})})]}),n=[];n.push([o("GiftValueTitleInitialSale"),(0,z.A)(1e3*t.initialSaleDate,o.code)]),n.push([o("GiftValueTitleInitialPrice"),(0,C.FD)("span",{className:"K7zsAhVt",children:[(0,me.U2)(o,t.initialSaleStars,{className:"Xw91xwpe"})," (~ ",(0,l.Ad)(t.initialSalePrice,t.currency,o.code),")"]})]),t.lastSaleDate&&n.push([o("GiftValueTitleLastSale"),(0,z.A)(1e3*t.lastSaleDate,o.code)]),t.lastSalePrice&&n.push([o("GiftValueTitleLastPrice"),(0,l.Ad)(t.lastSalePrice,t.currency,o.code)]),t.floorPrice&&n.push([o("GiftValueTitleMinimumPrice"),(0,l.Ad)(t.floorPrice,t.currency,o.code)]),t.averagePrice&&n.push([o("GiftValueTitleAveragePrice"),(0,l.Ad)(t.averagePrice,t.currency,o.code)]);const r=Boolean(t.fragmentListedUrl&&t.fragmentListedCount),s=Boolean(t.listedCount&&t.listedCount);return{header:i,tableData:n,footer:(r||s)&&(0,C.FD)("div",{className:"OJDo2xUd",children:[r&&(0,C.FD)(g.A,{isText:!0,onClick:m,noForcedUpperCase:!0,size:"tiny",children:[o.number(t.fragmentListedCount),(0,C.Y)(Z.A,{className:ta,sticker:a.model.sticker,size:24}),o("GiftValueForSaleOnFragment")]}),s&&(0,C.FD)(g.A,{isText:!0,noForcedUpperCase:!0,size:"tiny",onClick:f,children:[o.number(t.listedCount),(0,C.Y)(Z.A,{className:ta,sticker:a.model.sticker,size:24}),o("GiftValueForSaleOnTelegram")]})]})}},[o,c,m,f]);if(p)return(0,C.Y)(ve.A,{isOpen:s,onClose:t,header:p.header,tableData:p.tableData,footer:p.footer})}),ia=(0,i.ph)(({modal:e})=>{const{closeLockedGiftModal:t}=(0,n.ko)(),a=(0,F.A)(),r=(0,u.A)(()=>{t()}),o=(0,i.hb)(()=>{if(!e)return"";if(e.untilDate){const t=e.untilDate?e.untilDate-(0,ye.Fm)():0;return a("GiftLockedMessage",{relativeDate:(0,z.A$)(a,t)},{withNodes:!0,withMarkdown:!0})}return e.reason?(0,Jt.fd)(e.reason):a("TitleGiftLocked")},[e,a]);return(0,C.FD)(A.A,{isOpen:Boolean(e),className:"narrow",onClose:r,title:a("TitleGiftLocked"),headerClassName:"AqB1qB8W",children:[(0,C.Y)("p",{className:"pA8Bz4TW",children:o()}),(0,C.Y)(g.A,{onClick:r,children:a("OK")})]})});var na=a(40664);const ra=(0,i.ph)((0,n.EK)(e=>{const t=e.appConfig.starsStargiftResaleCommissionPermille,a=t?t/1e3:void 0,i=e.appConfig.starsStargiftResaleAmountMin||0,n=e.appConfig.starsStargiftResaleAmountMax,r=e.appConfig.starsUsdWithdrawRateX1000,o=r?r/1e3:1,s=e.appConfig.tonStargiftResaleCommissionPermille,c=s?s/1e3:0,d=(0,l.wD)(e.appConfig.tonStargiftResaleAmountMin||0),u=e.appConfig.tonStargiftResaleAmountMax;return{starsStargiftResaleCommissionPermille:a,starsStargiftResaleAmountMin:i,starsStargiftResaleAmountMax:n,starsUsdWithdrawRate:o,tonStargiftResaleCommissionPermille:c,tonStargiftResaleAmountMin:d,tonStargiftResaleAmountMax:u&&(0,l.wD)(u),tonUsdRate:e.appConfig.tonUsdRate}})(({modal:e,starsStargiftResaleCommissionPermille:t,starsStargiftResaleAmountMin:a,starsStargiftResaleAmountMax:r,starsUsdWithdrawRate:o,tonStargiftResaleCommissionPermille:s,tonStargiftResaleAmountMin:c,tonStargiftResaleAmountMax:m,tonUsdRate:f})=>{const{closeGiftResalePriceComposerModal:p,closeGiftInfoModal:h,updateStarGiftPrice:b,showNotification:S}=(0,n.ko)(),v=Boolean(e),[N,k]=(0,i.J0)(void 0),[y,I]=(0,i.J0)(!1),G=(0,d.A)(e),{gift:Y}=G||{},w=Y&&"gift"in Y?Y:void 0,P=Boolean(N),B=(0,F.A)(),M=(0,u.A)(e=>{const t=e.target.value,a=parseFloat(t),i=y?m:r,n=""===t||Number.isNaN(a)?void 0:i?Math.min(a,i):a;k(n)}),T=(0,u.A)(()=>{p()}),D=(0,u.A)(()=>{w&&"starGiftUnique"===w.gift.type&&w.inputGift&&N&&(p(),h(),b({gift:w.inputGift,price:{currency:y?"TON":"XTR",amount:y?(0,l.tT)(N):N,nanos:0}}),S({icon:"sell-outline",message:{key:"NotificationGiftIsSale",variables:{gift:B("GiftUnique",{title:w.gift.title,number:w.gift.number})}}}))}),U=y?s:t,R=y?c:a,x=P&&N>=R;return(0,C.FD)(A.A,{isOpen:v,title:B(y?"PriceInTON":"PriceInStars"),hasCloseButton:!0,isSlim:!0,onClose:T,children:[(0,C.Y)("div",{className:"ElDo1Bru",children:(0,C.Y)(na.A,{label:B(y?"EnterPriceInTon":"EnterPriceInStars"),onChange:M,value:N?.toString(),inputMode:"numeric",tabIndex:0,teactExperimentControlled:!y})}),(0,C.FD)("div",{className:"SGFmA4kL",children:[(0,C.FD)("span",{children:[!x&&Boolean(U)&&B("DescriptionComposerGiftMinimumPrice",{stars:y?(0,me.QH)(B,R):(0,me.Kk)(B,R)},{withMarkdown:!0,withNodes:!0}),x&&(()=>{const e=U?Number((N*U).toFixed()):N;return B("DescriptionComposerGiftResalePrice",{stars:y?(0,me.QH)(B,e):(0,me.Kk)(B,e)},{withMarkdown:!0,withNodes:!0})})()]}),x&&Boolean(y?f:o)&&(0,C.Y)("span",{className:"r9R0VR_w",children:`≈ ${(0,l.Ad)(y?(0,l.C)(N,f):N*o,"USD",B.code)}`})]}),(0,C.Y)(Ke.A,{className:"yt_nODdj",label:B("OnlyAcceptTON"),checked:y,onCheck:I}),(0,C.Y)("div",{className:"pWjQiY4m",children:B("OnlyAcceptTONDescription")}),(0,C.FD)(g.A,{noForcedUpperCase:!0,disabled:!x,onClick:D,children:[x&&B("ButtonSellGift",{stars:y?(0,me.Ms)(B,N):(0,me.U2)(B,N,{asFont:!0})},{withNodes:!0}),!x&&B("Sell")]})]})}));var oa=a(58554),sa=a(32625),la=a(5463);const ca="_Dt6RSQV",da=(0,i.ph)((0,n.EK)((e,{modal:t})=>{const a=t?.recipientId;return{recipient:a?(0,o.PVB)(e,a):void 0}})(({modal:e,recipient:t})=>{const{closeGiftUpgradeModal:a,upgradeGift:o}=(0,n.ko)(),s=Boolean(e),l=(0,d.A)(e),c=(0,d.A)(t),[m,f]=(0,i.J0)(!1),[p,h]=(0,i.J0)(),A=(0,F.A)(),b=(0,u.A)(()=>a()),S=(0,u.A)(()=>{const e=l?.gift;e?.inputGift&&(o({gift:e.inputGift,shouldKeepOriginalDetails:m,upgradeStars:e.alreadyPaidUpgradeStars?void 0:e.gift.upgradeStars}),b())}),v=(0,u.A)(()=>{l?.sampleAttributes&&h(function(e,t){const a=e.filter(e=>"model"===e.type&&e.name!==t?.model.name),i=e.filter(e=>"pattern"===e.type&&e.name!==t?.pattern.name),n=e.filter(e=>"backdrop"===e.type&&e.name!==t?.backdrop.name);return{model:a[Math.floor(Math.random()*a.length)],pattern:i[Math.floor(Math.random()*i.length)],backdrop:n[Math.floor(Math.random()*n.length)]}}(l.sampleAttributes,p))});(0,sa.A)(v,s?3e3:void 0,!0),(0,i.vJ)(()=>{s&&l?.sampleAttributes&&v()},[s,l?.sampleAttributes]),(0,i.vJ)(()=>{const e=l?.sampleAttributes;e&&[...e.filter(e=>"pattern"===e.type).map(e=>e.sticker),...e.filter(e=>"model"===e.type).map(e=>e.sticker)].map(e=>(0,I.Mw)(e,"full")).forEach(e=>{(0,oa.hd)(e,rt.qZ.BlobUrl)})},[l?.sampleAttributes]);const N=(0,i.Kr)(()=>{if(!p||!s)return;const e=l?.gift,t=[["diamond",A("GiftUpgradeUniqueTitle"),A("GiftUpgradeUniqueDescription")],["trade",A("GiftUpgradeTransferableTitle"),A("GiftUpgradeTransferableDescription")],["auction",A("GiftUpgradeTradeableTitle"),A("GiftUpgradeTradeableDescription")]],a=c?A("GiftPeerUpgradeText",{peer:(0,r.F9)(A,c)}):A("GiftUpgradeTextOwn");return{listItemData:t,header:(0,C.Y)(Pe,{modelAttribute:p.model,backdropAttribute:p.backdrop,patternAttribute:p.pattern,title:A("GiftUpgradeTitle"),subtitle:a}),footer:(0,C.FD)("div",{className:"EWaVCxY4",children:[!e&&(0,C.Y)(g.A,{className:ca,onClick:b,children:A("OK")}),e&&(0,C.FD)(C.FK,{children:[(0,C.Y)(Ke.A,{label:A("GiftUpgradeKeepDetails"),onCheck:f,checked:m}),(0,C.Y)(g.A,{className:ca,isShiny:!0,onClick:S,children:e.alreadyPaidUpgradeStars?A("GeneralConfirm"):A("GiftUpgradeButton",{amount:(0,me.U2)(A,e.gift.upgradeStars,{asFont:!0})},{withNodes:!0})})]})]})}},[p,s,A,c,l?.gift,m]);return(0,C.Y)(la.A,{isOpen:s,header:N?.header,footer:N?.footer,listItemData:N?.listItemData,hasBackdrop:!0,onClose:b})}));var ua=a(47483);const ma=(0,i.ph)((0,n.EK)(e=>({currentUser:(0,o.mBe)(e,e.currentUserId),isCurrentUserPremium:(0,o.g29)(e)}))(({modal:e,currentUser:t,isCurrentUserPremium:a})=>{const{closeGiftStatusInfoModal:r,setEmojiStatus:o}=(0,n.ko)(),l=(0,F.A)(),c=Boolean(e),m=(0,d.A)(e),{emojiStatus:h}=m||{},A=h?.textColor,b=(0,ua.A)(h?.patternDocumentId),S=(0,u.A)(()=>{r()}),v=(0,u.A)(()=>{h&&o({emojiStatus:h}),r()}),N=(0,i.Kr)(()=>{if(!h||!c)return;const e=[h.centerColor,h.edgeColor],t=h.patternColor;return(0,C.Y)(ee.A,{className:"_1RfhkfB",backgroundColors:e,patternColor:t,patternIcon:b.customEmoji})},[h,c,b]),k=(0,i.Kr)(()=>({...t,emojiStatus:h}),[t,h]),y=(0,i.Kr)(()=>(0,C.FD)("div",{className:"qL0cHbwS",children:[(0,C.FD)("div",{className:(0,s.A)("t18QCmAb"),style:(0,Ce.A)(A&&`color: ${A}`),children:[N,(0,C.Y)(f.A,{peer:k,size:"jumbo",className:"JK2zOWA7"}),(0,C.Y)(Oe.A,{peer:k,className:"lxxbgNCl",withEmojiStatus:!0,noFake:!0,noVerified:!0}),(0,C.Y)("p",{className:"MLMdxkUg",style:(0,Ce.A)(A&&`color: ${A}`),children:l("Online")})]}),(0,C.FD)("div",{className:"q8w7tnmR",children:[(0,C.Y)("div",{className:"wxg_5ou_",children:l("UniqueStatusWearTitle",{gift:k?.emojiStatus?.title})}),(0,C.Y)("div",{className:"KSCLIMZm",children:l("UniqueStatusBenefitsDescription")})]})]}),[A,N,k,l]),I=[["radial-badge",l("UniqueStatusBadgeBenefitTitle"),l("UniqueStatusBadgeDescription")],["unique-profile",l("UniqueStatusProfileDesignBenefitTitle"),l("UniqueStatusProfileDesignDescription")],["proof-of-ownership",l("UniqueStatusProofOfOwnershipBenefitTitle"),l("UniqueStatusProofOfOwnershipDescription")]],G=(0,i.Kr)(()=>{if(c)return(0,C.Y)("div",{className:"VDrvalBo",children:(0,C.FD)(g.A,{onClick:v,children:[l("UniqueStatusWearButton"),!a&&(0,C.Y)(p.A,{name:"lock-badge",className:"jiPObOWv"})]})})},[l,a,c]);return(0,C.Y)(la.A,{isOpen:c,header:y,listItemData:I,footer:G,hasBackdrop:!0,onClose:S})}));var fa=a(21309),pa=a(15535);const ha={header:"LQgz8Nlx",giftPreview:"hgs0ts_O",backdrop:"OnBhMaBw",description:"HBxB4QPY",arrow:"kXTOUpfb",noPassword:"BnqLhoKr"},ga={isCustomPeer:!0,avatarIcon:"fragment",title:"",customPeerAvatarColor:"#000000"},Aa=4.5*Dt.$,ba=(0,i.ph)((0,n.EK)(e=>{const{settings:{byKey:{hasPassword:t}},twoFaSettings:{hint:a}}=e;return{hasPassword:t,passwordHint:a}})(({modal:e,hasPassword:t,passwordHint:a})=>{const{closeGiftWithdrawModal:r,clearGiftWithdrawError:o,closeGiftInfoModal:s,processStarGiftWithdrawal:l,openSettingsScreen:c}=(0,n.ko)(),m=Boolean(e),[h,b]=(0,i.J0)(!1),S=(0,F.A)(),v=(0,d.A)(e),N=v?.gift?.gift,k=N&&(0,Q.uc)(N),y=v?.gift?.canExportAt?Math.max(v.gift.canExportAt-(0,ye.Fm)(),0):void 0,I=(0,u.A)(()=>{r()}),G=(0,u.A)(e=>{l({gift:v.gift.inputGift,password:e})}),Y=(0,u.A)(()=>{c({screen:Ae.VS.TwoFaDisabled}),r(),s()});return(0,C.FD)(A.A,{isOpen:m,title:S("GiftWithdrawTitle"),hasCloseButton:!0,isSlim:!0,onClose:I,children:[k&&(0,C.FD)(C.FK,{children:[(0,C.FD)("div",{className:ha.header,children:[(0,C.FD)("div",{className:ha.giftPreview,children:[(0,C.Y)(ee.A,{className:ha.backdrop,backgroundColors:[k.backdrop.centerColor,k.backdrop.edgeColor],patternColor:k.backdrop?.patternColor,patternIcon:k.pattern?.sticker}),(0,C.Y)(Z.A,{className:ha.sticker,size:Aa,sticker:k.model?.sticker})]}),(0,C.Y)(p.A,{name:"next",className:ha.arrow}),(0,C.Y)(f.A,{peer:ga,size:"giant",className:ha.avatar})]}),(0,C.Y)("p",{className:ha.description,children:S("GiftWithdrawDescription",{gift:`${N.title} #${N.number}`},{withNodes:!0,withMarkdown:!0,renderTextFilters:["br"]})})]}),Boolean(y)&&(0,C.Y)("p",{className:ha.exportHint,children:S("GiftWithdrawWait",{days:(0,fa._k)(y)},{pluralValue:(0,fa._k)(y)})}),!t&&(0,C.FD)(C.FK,{children:[(0,C.Y)("span",{className:ha.noPassword,children:S("ErrorPasswordMissing")}),(0,C.Y)(g.A,{className:"mt-2",onClick:Y,children:S("SetUp2FA")})]}),t&&!y&&(0,C.Y)(pa.A,{shouldShowSubmit:!0,placeholder:S("CheckPasswordPlaceholder"),error:v?.errorKey&&S.withRegular(v?.errorKey),description:S("CheckPasswordDescription"),onClearError:o,isLoading:v?.isLoading,hint:a,isPasswordVisible:h,shouldResetValue:m,onChangePasswordVisibility:b,submitLabel:S("GiftWithdrawSubmit"),onSubmit:G})]})}));var Sa=a(79824),va=a(74984),Na=a(4875),Ca=a(56863),ka=a(30857),ya=a(84080),Ia=a(56133),Ga=a(35297);function Ya(){}async function wa(e){const t=await(0,Na.px)("searchChats",{query:e});if(t)return[...t.accountResultIds,...t.globalResultIds]}const Pa=(0,i.ph)((0,n.EK)(e=>{const{contactList:t,currentUserId:a}=e;return{contactIds:t?.userIds,currentUserId:a}})(({modal:e,contactIds:t,currentUserId:a})=>{const{closeGiftTransferModal:s,openGiftWithdrawModal:l,transferGift:c}=(0,n.ko)(),m=Boolean(e),f=(0,F.A)(),[p,h]=(0,i.J0)(""),g=(0,d.A)(e),A=g?.gift?.gift,b=A&&(0,Q.uc)(A),[S,v]=(0,i.J0)(),N=(0,d.A)(S),k=(0,i.Kr)(()=>{const e=(0,n.mS)();return N?(0,o.PVB)(e,N):void 0},[N]),I=(0,va.Rh)(y.DSF),B=(0,i.Kr)(()=>(0,G.Am)([...t||[],...I||[]]),[t,I]),{result:M,currentResultsQuery:T}=function({query:e,queryFn:t=wa,defaultValue:a,debounceTimeout:n=300,isDisabled:r}){const o=function(e,t,a){const[n,r]=(0,i.J0)(),{isFrozen:o,updateWhenUnfrozen:s}=function(){const e=(0,i.li)(!1),t=(0,i.hb)(()=>{e.current=!0},[]),a=(0,ka.A)(),n=(0,i.hb)(()=>{e.current&&(e.current=!1,a())},[a]);return(0,ya.Ay)(Ya,n),{isFrozen:(0,i.OV)(),updateWhenUnfrozen:t}}(),l=(0,Ia.A)(t,!0);return(0,Ga.A)(()=>{o?s():l(()=>{r(e())})},[...a,o]),n}(()=>e,n,[e]),[s,l]=(0,i.J0)(""),c=e?o:e,d=(0,u.A)(t);return{...(0,Ca.A)(async()=>{if(!c||r)return l(""),Promise.resolve(a);const e=await d(c);return l(c),e},[c,a,d,r],a),currentResultsQuery:s}}({query:p,defaultValue:B}),D=T!==p,U=(0,i.Kr)(()=>T?Sa.p:[{type:"withdraw",isCustomPeer:!0,avatarIcon:"toncoin",peerColorId:5,title:f("GiftTransferTON")}],[f,T]),R=(0,u.A)(e=>{"withdraw"===e&&(l({gift:g.gift}),s())}),x=(0,i.Kr)(()=>{if(D)return Sa.p;const e=(0,n.mS)();return(0,Y.A)((M||[]).filter(t=>t!==a&&(0,o.X2D)(e,t)),!1)},[D,M,a]),L=(0,u.A)(()=>{v(void 0)});(0,i.vJ)(()=>{m||v(void 0)},[m]);const O=(0,u.A)(()=>{g?.gift.inputGift&&(c({gift:g.gift.inputGift,recipientId:N,transferStars:g.gift.transferStars}),L(),s())});return(0,C.FD)(P.A,{isOpen:m,onClose:s,title:f("GiftTransferTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,ignoreFreeze:!0,children:[(0,C.Y)(w.A,{itemIds:x,categories:U,onSelectedCategoryChange:R,withDefaultPadding:!0,withPeerUsernames:!0,isSearchable:!0,noScrollRestore:!0,isLoading:D,filterValue:p,filterPlaceholder:f("Search"),onFilterChange:h,onSelectedIdChange:v}),b&&(0,C.FD)($t.A,{isOpen:Boolean(S),noDefaultTitle:!0,onClose:L,confirmLabel:g?.gift.transferStars?f("GiftTransferConfirmButton",{amount:(0,me.U2)(f,g.gift.transferStars,{asFont:!0})},{withNodes:!0}):f("GiftTransferConfirmButtonFree"),confirmHandler:O,children:[k&&(0,C.Y)(Xt,{peer:k,gift:A}),(0,C.Y)("p",{children:g?.gift.transferStars?f("GiftTransferConfirmDescription",{gift:f("GiftUnique",{title:A.title,number:A.number}),amount:(0,me.Kk)(f,g.gift.transferStars),peer:(0,r.F9)(f,k)},{withNodes:!0,withMarkdown:!0}):f("GiftTransferConfirmDescriptionFree",{gift:f("GiftUnique",{title:A.title,number:A.number}),peer:(0,r.F9)(f,k)},{withNodes:!0,withMarkdown:!0})})]})]})})),Ba=(0,i.ph)((0,n.EK)((e,{modal:t})=>({user:t?.userId?(0,o.mBe)(e,t.userId):void 0}))(({modal:e,user:t})=>{const{closeChatRefundModal:a,toggleNoPaidMessagesException:o}=(0,n.ko)(),[s,l]=(0,i.J0)(!1),c=(0,d.A)(e),m=(0,d.A)(t),{starsToRefund:f,userId:p}=c||{},h=(0,F.A)(),g=Boolean(e),A=(0,u.A)(()=>{a(),p&&o({userId:p,shouldRefundCharged:s})});return(0,C.FD)($t.A,{isOpen:g,onClose:a,title:h("RemoveFeeTitle"),confirmLabel:h("ConfirmRemoveMessageFee"),confirmHandler:A,children:[h("ConfirmDialogMessageRemoveFee",{peer:m&&(0,r.F9)(h,m)},{withMarkdown:!0,withNodes:!0}),Boolean(f)&&(0,C.Y)(Ke.A,{className:"dialog-checkbox",label:h("ConfirmDialogRemoveFeeRefundStars",{amount:(0,me.Kk)(h,f)},{withMarkdown:!0,withNodes:!0}),checked:s,onCheck:l})]})}));var Ma=a(14487);const Ta=(0,i.ph)((0,n.EK)(e=>{const t=e.stars?.balance,a=e.ton?.balance?.amount;return{starBalance:t,tonBalance:a}})(({modal:e,starBalance:t,tonBalance:a})=>{const r=(0,n.ko)(),o=(0,F.A)(),s=(0,i.hb)(()=>{if(!e?.directInfo)return void r.closePriceConfirmModal();const{currency:i,newAmount:n}=e,o="TON"===i,s=o?a:t?.amount;if(void 0!==s){if(s<n)return r.openStarsBalanceModal({currency:o?"TON":"XTR",tabId:(0,Ma.g0)()}),void r.closePriceConfirmModal();r.sendStarPaymentForm({directInfo:e.directInfo,tabId:(0,Ma.g0)()}),r.closePriceConfirmModal()}else r.closePriceConfirmModal()},[e,t,a,r]),c=(0,i.hb)(()=>{r.closePriceConfirmModal()},[r]);if(!e)return;const{originalAmount:d,newAmount:u,currency:m}=e;let f,p;return"TON"===m?(f=(0,me.QH)(o,(0,l.wD)(d)),p=(0,me.QH)(o,(0,l.wD)(u))):(f=(0,me.Kk)(o,d),p=(0,me.Kk)(o,u)),(0,C.Y)($t.A,{isOpen:Boolean(e),onClose:c,title:o("PriceChanged"),confirmHandler:s,confirmLabel:o("PayNewPrice"),children:(0,C.Y)("p",{children:o("PriceChangedText",{originalAmount:f,newAmount:p},{withMarkdown:!0,withNodes:!0})})})}))}}]);
//# sourceMappingURL=6930.09b4e578ba34edb6be53.js.map